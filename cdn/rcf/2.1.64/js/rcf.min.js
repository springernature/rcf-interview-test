/*! RCF (2.1.64) UGLY: "2018-07-05 Thursday, 3:34:59 PM" */ 
!function(a){function b(a,b,e){return 4===arguments.length?c.apply(this,arguments):void d(a,{declarative:!0,deps:b,declare:e})}function c(a,b,c,e){d(a,{declarative:!1,deps:b,executingRequire:c,execute:e})}function d(a,b){b.name=a,a in o||(o[a]=b),b.normalizedDeps=b.deps}function e(a,b){if(b[a.groupIndex]=b[a.groupIndex]||[],-1==p.call(b[a.groupIndex],a)){b[a.groupIndex].push(a);for(var c=0,d=a.normalizedDeps.length;d>c;c++){var f=a.normalizedDeps[c],g=o[f];if(g&&!g.evaluated){var h=a.groupIndex+(g.declarative!=a.declarative);if(void 0===g.groupIndex||g.groupIndex<h){if(void 0!==g.groupIndex&&(b[g.groupIndex].splice(p.call(b[g.groupIndex],g),1),0==b[g.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");g.groupIndex=h}e(g,b)}}}}function f(a){var b=o[a];b.groupIndex=0;var c=[];e(b,c);for(var d=!!b.declarative==c.length%2,f=c.length-1;f>=0;f--){for(var g=c[f],i=0;i<g.length;i++){var k=g[i];d?h(k):j(k)}d=!d}}function g(a){return s[a]||(s[a]={name:a,dependencies:[],exports:{},importers:[]})}function h(b){if(!b.module){var c=b.module=g(b.name),d=b.module.exports,e=b.declare.call(a,function(a,b){if(c.locked=!0,"object"==typeof a)for(var e in a)d[e]=a[e];else d[a]=b;for(var f=0,g=c.importers.length;g>f;f++){var h=c.importers[f];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===c&&h.setters[i](d)}return c.locked=!1,b},{id:b.name});c.setters=e.setters,c.execute=e.execute;for(var f=0,i=b.normalizedDeps.length;i>f;f++){var j,k=b.normalizedDeps[f],l=o[k],m=s[k];m?j=m.exports:l&&!l.declarative?j=l.esModule:l?(h(l),m=l.module,j=m.exports):j=n(k),m&&m.importers?(m.importers.push(c),c.dependencies.push(m)):c.dependencies.push(null),c.setters[f]&&c.setters[f](j)}}}function i(a){var b,c=o[a];if(c)c.declarative?m(a,[]):c.evaluated||j(c),b=c.module.exports;else if(b=n(a),!b)throw new Error("Unable to load dependency "+a+".");return(!c||c.declarative)&&b&&b.__useDefault?b.default:b}function j(b){if(!b.module){var c={},d=b.module={exports:c,id:b.name};if(!b.executingRequire)for(var e=0,f=b.normalizedDeps.length;f>e;e++){var g=b.normalizedDeps[e],h=o[g];h&&j(h)}b.evaluated=!0;var l=b.execute.call(a,function(a){for(var c=0,d=b.deps.length;d>c;c++)if(b.deps[c]==a)return i(b.normalizedDeps[c]);throw new TypeError("Module "+a+" not declared as a dependency.")},c,d);void 0!==l&&(d.exports=l),c=d.exports,c&&c.__esModule?b.esModule=c:b.esModule=k(c)}}function k(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(q)for(var d in b)"default"!==d&&l(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c.default=b,r(c,"__useDefault",{value:!0}),c}function l(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&r(a,c,d)}catch(d){return a[c]=b[c],!1}}function m(b,c){var d=o[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var g=d.normalizedDeps[e];-1==p.call(c,g)&&(o[g]?m(g,c):n(g))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function n(a){if(u[a])return u[a];if("@node/"==a.substr(0,6))return u[a]=k(t(a.substr(6)));var b=o[a];if(!b)throw"Module "+a+" not present.";return f(a),m(a,[]),o[a]=void 0,b.declarative&&r(b.module.exports,"__esModule",{value:!0}),u[a]=b.declarative?b.module.exports:b.esModule}var o={},p=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},q=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(a){q=!1}var r;!function(){try{Object.defineProperty({},"a",{})&&(r=Object.defineProperty)}catch(a){r=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(a){}}}}();var s={},t="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&"undefined"!=typeof require.resolve&&"undefined"!=typeof process&&process.platform&&require,u={"@empty":{}};return function(a,d,e,f){return function(g){g(function(g){for(var h={_nodeRequire:t,register:b,registerDynamic:c,get:n,set:function(a,b){u[a]=b},newModule:function(a){return a}},i=0;i<d.length;i++)(function(a,b){b&&b.__esModule?u[a]=b:u[a]=k(b)})(d[i],arguments[i]);f(h);var j=n(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)n(a[i]);return e?j.default:j})}}}("undefined"!=typeof self?self:global)(["1"],[],!1,function($__System){var require=this.require,exports=this.exports,module=this.module;!function(a){function b(a,b){for(var c=a.split(".");c.length;)b=b[c.shift()];return b}function c(c){if("string"==typeof c)return b(c,a);if(!(c instanceof Array))throw new Error("Global exports must be a string or array.");for(var d={},e=!0,f=0;f<c.length;f++){var g=b(c[f],a);e&&(d.default=g,e=!1),d[c[f].split(".").pop()]=g}return d}function d(b){if(Object.keys)Object.keys(a).forEach(b);else for(var c in a)h.call(a,c)&&b(c)}function e(b){d(function(c){if(-1==i.call(j,c)){try{var d=a[c]}catch(a){j.push(c)}b(c,d)}})}var f,g=$__System,h=Object.prototype.hasOwnProperty,i=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},j=["_g","sessionStorage","localStorage","clipboardData","frames","frameElement","external","mozAnimationStartTime","webkitStorageInfo","webkitIndexedDB","mozInnerScreenY","mozInnerScreenX"];g.set("@@global-helpers",g.newModule({prepareGlobal:function(b,d,g){var h=a.define;a.define=void 0;var i;if(g){i={};for(var j in g)i[j]=a[j],a[j]=g[j]}return d||(f={},e(function(a,b){f[a]=b})),function(){var b;if(d)b=c(d);else{b={};var g,j;e(function(a,c){f[a]!==c&&"undefined"!=typeof c&&(b[a]=c,"undefined"!=typeof g?j||g===c||(j=!0):g=c)}),b=j?b:g}if(i)for(var k in i)a[k]=i[k];return a.define=h,b}}}))}("undefined"!=typeof self?self:global),$__System.register("2",["3","4","5","6"],function(a){"use strict";function b(a){var b=null;if(f.isEmpty(a))throw"Invalid options passed to RCF.Application";try{b=$.extend({},j,a)}catch(a){throw"Error setting Options for the RCF.Application ! \n\n"+a}if(f.isEmpty(b.swfFallbackURL))throw"No SWF Fallback URL provided - needs passing to RCF Initialization in parameters";return b.feedbackOptions&&(b.feedbackOptions=$.extend({delayAfterFeedbackTimeInMilliseconds:0,resetAfterFeedback:!0,onFeedbackComplete:function(){},onAnswerChanged:function(){}},b.feedbackOptions)),b}function c(){var a;try{a=g()}catch(b){h.log("Error getting DeviceMode - defaulting to 'desktop' :\n\n"+b),a=""}f.isEmpty(a)&&(a="",f.isMobileDevice()&&(a="mobile"),f.isTabletDevice()?a="tablet":a.length<1&&(a="desktop"),f.cookie("deviceMode",a))}function d(){var a=f.supportsCssProperty("-webkit-appearance"),b=$("html");a?b.addClass("webkit-appearance"):b.addClass("no-webkit-appearance")}function e(){var a=window.top.navigator,b=!!a.device&&!!a.device.capture,c=!!window.top.nativeAppCordova,d=$("html"),e=i.getRcfOptions(),f=e&&e.fakeGap||!1;f&&(b=!0,c=!0,window.top.nativeAppCordova={StartAudioRecordingFromNativeApp:function(a){a("mock-recording-made")},SaveAudioRecordingFromNativeApp:function(a,b){h.log("mock-save-audio-recording-from-native-app for results: ["+a+"], rcfId: ["+b+"]")},PlayAudioRecordingFromNativeApp:function(){h.log("mock-playing-mock-recording !")}}),b&&d.addClass("has-phonegap"),c&&d.addClass("learningmate-recorder-available"),d.hasClass("no-getusermedia")&&b&&(d.removeClass("no-getusermedia"),d.addClass("getusermedia"))}var f,g,h,i,j;return{setters:[function(a){f=a},function(a){g=a.getApplicationDeviceMode},function(a){h=a.default},function(a){i=a}],execute:function(){a("getRcfOptions",b),a("setDeviceMode",c),a("detectRequiredCss",d),a("detectPhoneGap",e),j={useRetinaImages:!1,swfFallbackURL:"/cdn/rcf/swf",disableTextSelection:!1,minWidth768:"1000px",videoSize:{desktop:{width:"480px",height:"272px"},mobile:{width:"240px",height:"135px"}},mediaFormats:{audio:{format:"mp3"},video:{format:"mp4"}},mediaMappings:{mp3:"mp3",mp4:"m4v",ogv:"ogv",ogg:"oga",webm:"webmv"},vendorURL:""}}}}),$__System.register("7",["8"],function(a){"use strict";function b(){return RCF.InteractionName}return{setters:[function(a){}],execute:function(){a("getRcfInteractionNames",b)}}}),$__System.register("9",["3","a","b"],function(a){"use strict";function b(){e.unsubscribe("show.correct.answers"),e.unsubscribe("set.answers"),e.unsubscribe("show.user.answers"),e.unsubscribe("show.marked.answers"),e.unsubscribe("hide.marked.answers"),e.unsubscribe("try.again"),e.unsubscribe("reset.answers"),e.unsubscribe("get.user.answers"),e.unsubscribe("update.categories.size"),e.unsubscribe("show.next.answer");var a=d.getCurrentView();c.isEmpty(a)||a.isAttachedToDom()||a.closeView()}var c,d,e;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a}],execute:function(){a("cleanUp",b)}}}),$__System.register("c",["6","d","e"],function(a){"use strict";function b(){d("#activityCSS").remove(),d("#activity768CSS").remove();var a=d("#mobStyleCSS").text();if(a.length>0){var b=d("<style id='activityCSS'>"+a+"</style>");d("head").append(b)}var f=c(),g=e.mq("only all"),h=g&&f.minWidth768;if(a=d("#desktopStyleCSS").text(),a.length>0){var i="@media screen and (min-width: "+f.minWidth768+") ",j="<style id='activity768CSS'>\n"+(h?i+"{\n":"")+a+"\n"+(h?"}":"")+"</style>",k=d(j);d("head").append(k)}}var c,d,e;return{setters:[function(a){c=a.getRcfOptions},function(a){d=a.default},function(a){e=a.default}],execute:function(){a("default",b)}}}),$__System.register("f",["3"],function(a){"use strict";function b(a){var b,d,e;if(c.isEmpty(a))throw new Error("No activity container passed to applyAnswerKeyClasses");if(d=a.find(".activity"),c.isEmpty(d))throw new Error("No activity html found for this activity container");e="y"===(d.attr("data-isanswerkey")||"n"),b=d.closest("html"),b.toggleClass("rcf_answerKeyContainer",e)}var c;return{setters:[function(a){c=a}],execute:function(){a("default",b)}}}),$__System.register("10",["6"],function(a){"use strict";function b(){var a=c(),b=a.mediaFormats.audio.format,d=a.mediaMappings[b];return{ready:function(){},supplied:d,swfPath:a.swfFallbackURL}}var c;return{setters:[function(a){c=a.getRcfOptions}],execute:function(){a("getInitOptions",b)}}}),$__System.register("11",["d"],function(a){"use strict";function b(a,b){a.bind(e.jPlayer.event.error,b)}function c(a,b){a.on(e.jPlayer.event.ended,b)}function d(a,b){a.on(e.jPlayer.event.pause,b)}var e;return{setters:[function(a){e=a.default}],execute:function(){a("subscribeToError",b),a("subscribeToEnded",c),a("subscribeToPause",d)}}}),$__System.register("12",["3","6","13"],function(a){"use strict";function b(a){null!=a.audioCallback?a.audioCallback.apply():a.audioCallback=null}function c(a,c,g){var h=g.originalAudioId,i=e();h&&a.find('[data-audiolinkid="'+h+'"]').find(".inlinePlayer").removeClass("playing");var j=g.imageAudioElement;if(j&&j.removeClass("playing"),g.audioQueue.length>0){var k=f(a,"data-levelassetsurl")||"",l="/audio/",m=d(g.audioQueue.shift()),n={},o=i.mediaFormats.audio.format,p=i.mediaMappings[o];n[p]=""+k+l+m+"."+o,c.jPlayer("setMedia",n),c.jPlayer("play")}else b(g)}var d,e,f;return{setters:[function(a){d=a.getBaseAudioName},function(a){e=a.getRcfOptions},function(a){f=a.getDataAttribute}],execute:function(){a("invokeAudioCallback",b),a("onEventEnded",c)}}}),$__System.register("14",["3","5","6","13","15","d"],function(a){"use strict";function b(a,b,c,d,m){if(!Boolean(b))return void g.log("received audio play event for empty link");var n=k(a.target),o=m.imageAudioElement,p=h(),q=i(n,"data-audiolinkid");l(),o&&o.addClass("playing"),null!=m.originalAudioId&&q!=m.originalAudioId&&c.find("[data-audiolinkid='"+m.originalAudioId+"']").find(".inlinePlayer").removeClass("playing"),m.originalAudioId=k(a.target).attr("data-audiolinkid");var r=n.hasClass("inlinePlayerContainer")?n:n.find(".inlinePlayerContainer"),s=i(r,"data-audiolink")||"";if(e(r)||s!==b||c.find("[data-audiolinkid='"+m.originalAudioId+"']").find(".inlinePlayer").addClass("playing"),"string"==typeof b?m.audioQueue.push(b):"object"==typeof b&&(k.isArray(b.audio)&&(m.audioQueue=m.audioQueue.concat(b.audio)),b.onComplete&&(m.audioCallback=b.onComplete)),m.audioQueue&&m.audioQueue.length>0){var t=j(c),u="",v="",w=m.audioQueue.shift();"capePreview"!==t&&(u=(i(c,"data-levelassetsurl")||"")+"/audio/",v=p.mediaFormats.audio.format,w=f(w)+".");var x={},y=p.mediaMappings[p.mediaFormats.audio.format];x[y]=""+u+w+v,d.jPlayer("setMedia",x),d.jPlayer("pauseOthers").jPlayer("play")}}function c(a,b,c,d){d.audioQueue=[],null!=d.originalAudioId&&(b.find("[data-audiolinkid='"+d.originalAudioId+"']").find(".inlinePlayer").removeClass("playing"),c.jPlayer("stop"),d.originalAudioId=null),l(),Boolean(a)&&k.jPlayer.pause()}function d(a){var b=a.attr("data-audiolink"),c=a.find(".inlinePlayer");c.hasClass("playing")?a.trigger("rcf.stop.audio"):b&&b.length>0&&a.trigger("rcf.play.audio",[b])}var e,f,g,h,i,j,k,l;return{setters:[function(a){e=a.isEmpty,f=a.getBaseAudioName},function(a){g=a.default},function(a){h=a.getRcfOptions},function(a){i=a.getDataAttribute},function(a){j=a.getEnvironmentFromActivity},function(a){k=a.default}],execute:function(){a("onPlayAudio",b),a("onStopAudio",c),a("onClick",d),l=function(){return k("span.imageAudio.playing").removeClass("playing")}}}}),$__System.register("16",["3"],function(a){"use strict";function b(a,b){a.on("rcf.play.audio",b)}function c(a,b){a.on("rcf.stop.audio",b)}function d(a,b){a.on("click",".inlinePlayerContainer[data-audiolink]",function(a){b($(this)),e(a)}),a.on("click","[data-audiolink]:not(.imageAudio,.inlinePlayerContainer)",function(){b($(this))})}var e;return{setters:[function(a){e=a.preventEventBubble}],execute:function(){a("subscribeToPlayAudio",b),a("subscribeToStopAudio",c),a("subscribeToClick",d)}}}),$__System.register("17",["10","11","12","14","16","d"],function(a){"use strict";function b(a){function b(){f.invokeAudioCallback(n)}function c(){f.onEventEnded(a,m,n)}function j(b,c){var d=i(b.target);n.imageAudioElement=d.hasClass("imageAudio")?d:null,g.onPlayAudio(b,c,a,m,n)}function k(b,c){g.onStopAudio(c,a,m,n)}function l(a){g.onClick(a)}var m=i(a.find(".activityJPlayer")[0]);if(void 0!==m){var n={audioQueue:[],audioCallback:null,imageAudioElement:null,originalAudioId:null};return e.subscribeToError(m,b),m.jPlayer(d.getInitOptions()),e.subscribeToEnded(m,c),h.subscribeToPlayAudio(a,j),h.subscribeToStopAudio(a,k),h.subscribeToClick(a,l),m}}function c(a){a&&a.length>0&&a.jPlayer("destroy")}var d,e,f,g,h,i;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a},function(a){g=a},function(a){h=a},function(a){i=a.default}],execute:function(){a("create",b),a("close",c)}}}),$__System.registerDynamic("18",[],!1,function($__require,$__exports,$__module){var _retrieveGlobal=$__System.get("@@global-helpers").prepareGlobal($__module.id,null,null);return function($__global){!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Recorder=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";b.exports=a("./recorder").Recorder},{"./recorder":2}],2:[function(require,module,exports){"use strict";function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.Recorder=void 0;var _inlineWorker=require("inline-worker"),_inlineWorker2=_interopRequireDefault(_inlineWorker),Recorder=exports.Recorder=function(){function Recorder(source,cfg){var _this=this;_classCallCheck(this,Recorder),this.config={bufferLen:4096,numChannels:2,mimeType:"audio/wav"},this.recording=!1,this.callbacks={getBuffer:[],exportWAV:[]},Object.assign(this.config,cfg),this.context=source.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,this.config.bufferLen,this.config.numChannels,this.config.numChannels),this.node.onaudioprocess=function(a){if(_this.recording){for(var b=[],c=0;c<_this.config.numChannels;c++)b.push(a.inputBuffer.getChannelData(c));_this.worker.postMessage({command:"record",buffer:b})}},source.connect(this.node),this.node.connect(this.context.destination);var self={};this.worker=new _inlineWorker2.default(function(){function init(a){sampleRate=a.sampleRate,numChannels=a.numChannels,initBuffers()}function record(a){for(var b=0;b<numChannels;b++)recBuffers[b].push(a[b]);recLength+=a[0].length}function exportWAV(a){for(var b=[],c=0;c<numChannels;c++)b.push(mergeBuffers(recBuffers[c],recLength));var d=void 0;d=2===numChannels?interleave(b[0],b[1]):b[0];var e=encodeWAV(d),f=new Blob([e],{type:a});worker.postMessage({command:"exportWAV",data:f})}function getBuffer(){for(var a=[],b=0;b<numChannels;b++)a.push(mergeBuffers(recBuffers[b],recLength));worker.postMessage({command:"getBuffer",data:a})}function clear(){recLength=0,recBuffers=[],initBuffers()}function initBuffers(){for(var a=0;a<numChannels;a++)recBuffers[a]=[]}function mergeBuffers(a,b){for(var c=new Float32Array(b),d=0,e=0;e<a.length;e++)c.set(a[e],d),d+=a[e].length;return c}function interleave(a,b){for(var c=a.length+b.length,d=new Float32Array(c),e=0,f=0;e<c;)d[e++]=a[f],d[e++]=b[f],f++;return d}function floatTo16BitPCM(a,b,c){for(var d=0;d<c.length;d++,b+=2){var e=Math.max(-1,Math.min(1,c[d]));a.setInt16(b,e<0?32768*e:32767*e,!0)}}function writeString(a,b,c){for(var d=0;d<c.length;d++)a.setUint8(b+d,c.charCodeAt(d))}function encodeWAV(a){var b=new ArrayBuffer(44+2*a.length),c=new DataView(b);return writeString(c,0,"RIFF"),c.setUint32(4,36+2*a.length,!0),writeString(c,8,"WAVE"),writeString(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,numChannels,!0),c.setUint32(24,sampleRate,!0),c.setUint32(28,4*sampleRate,!0),c.setUint16(32,2*numChannels,!0),c.setUint16(34,16,!0),writeString(c,36,"data"),c.setUint32(40,2*a.length,!0),floatTo16BitPCM(c,44,a),c}var recLength=0,recBuffers=[],sampleRate=void 0,numChannels=void 0,worker=eval("self");worker.onmessage=function(a){switch(a.data.command){case"init":init(a.data.config);break;case"record":record(a.data.buffer);break;case"exportWAV":exportWAV(a.data.type);break;case"getBuffer":getBuffer();break;case"clear":clear()}}},self),this.worker.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:this.config.numChannels}}),this.worker.onmessage=function(a){var b=_this.callbacks[a.data.command].pop();"function"==typeof b&&b(a.data.data)}}return _createClass(Recorder,[{key:"record",value:function(){this.recording=!0}},{key:"stop",value:function(){this.recording=!1}},{key:"clear",value:function(){this.worker.postMessage({command:"clear"})}},{key:"getBuffer",value:function(a){if(a=a||this.config.callback,!a)throw new Error("Callback not set");this.callbacks.getBuffer.push(a),this.worker.postMessage({command:"getBuffer"})}},{key:"exportWAV",value:function(a,b){if(b=b||this.config.mimeType,a=a||this.config.callback,!a)throw new Error("Callback not set");this.callbacks.exportWAV.push(a),this.worker.postMessage({command:"exportWAV",type:b})}}],[{key:"forceDownload",value:function(a,b){var c=(window.URL||window.webkitURL).createObjectURL(a),d=window.document.createElement("a");d.href=c,d.download=b||"output.wav";var e=document.createEvent("Event");e.initEvent("click",!0,!0),d.dispatchEvent(e)}}]),Recorder}();exports.default=Recorder},{"inline-worker":3}],3:[function(a,b,c){"use strict";b.exports=a("./inline-worker")},{"./inline-worker":4}],4:[function(a,b,c){(function(a){"use strict";var c=function(){function a(a,b){for(var c in b){var d=b[c];d.configurable=!0,d.value&&(d.writable=!0)}Object.defineProperties(a,b)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),d=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},e=!!(a===a.window&&a.URL&&a.Blob&&a.Worker),f=function(){function b(c,f){var g=this;if(d(this,b),e){var h=c.toString().trim().match(/^function\s*\w*\s*\([\w\s,]*\)\s*{([\w\W]*?)}$/)[1],i=a.URL.createObjectURL(new a.Blob([h],{type:"text/javascript"}));return new a.Worker(i)}this.self=f,this.self.postMessage=function(a){setTimeout(function(){g.onmessage({data:a})},0)},setTimeout(function(){c.call(f)},0)}return c(b,{postMessage:{value:function(a){var b=this;setTimeout(function(){b.self.onmessage({data:a})},0)}}}),b}();b.exports=f}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)})}(this),_retrieveGlobal()}),$__System.registerDynamic("19",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){function b(){function a(a){return new Int8Array(a)}function c(a){return new Int16Array(a)}function d(a){return new Int32Array(a)}function e(a){return new Float32Array(a)}function f(a){return new Float64Array(a)}function g(a){if(1==a.length)return e(a[0]);var b=a[0];a=a.slice(1);for(var c=[],d=0;d<b;d++)c.push(g(a));return c}function h(a){if(1==a.length)return d(a[0]);var b=a[0];a=a.slice(1);for(var c=[],e=0;e<b;e++)c.push(h(a));return c}function i(a){if(1==a.length)return c(a[0]);var b=a[0];a=a.slice(1);for(var d=[],e=0;e<b;e++)d.push(i(a));return d}function j(a){if(1==a.length)return new Array(a[0]);var b=a[0];a=a.slice(1);for(var c=[],d=0;d<b;d++)c.push(j(a));return c}function k(a){this.ordinal=a}function l(a){this.ordinal=a}function m(a){var b=a;this.ordinal=function(){return b}}function n(){var a="http://www.mp3dev.org/",b=3,c=98,d=4,e=0,f=93;this.getLameVersion=function(){return b+"."+c+"."+d},this.getLameShortVersion=function(){return b+"."+c+"."+d},this.getLameVeryShortVersion=function(){return"LAME"+b+"."+c+"r"},this.getPsyVersion=function(){return e+"."+f},this.getLameUrl=function(){return a},this.getLameOsBitness=function(){return"32bits"}}function o(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){this.vbr_q=a,this.quant_comp=b,this.quant_comp_s=c,this.expY=d,this.st_lrm=e,this.st_s=f,this.masking_adj=g,this.masking_adj_short=h,this.ath_lower=i,this.ath_curve=j,this.ath_sensitivity=k,this.interch=l,this.safejoint=m,this.sfb21mod=n,this.msfix=o}function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n){this.quant_comp=b,this.quant_comp_s=c,this.safejoint=d,this.nsmsfix=e,this.st_lrm=f,this.st_s=g,this.nsbass=h,this.scale=i,this.masking_adj=j,this.ath_lower=k,this.ath_curve=l,this.interch=m,this.sfscale=n}function c(a,b,c){var d=a.VBR==l.vbr_rh?g:h,f=a.VBR_q_frac,i=d[b],j=d[b+1],k=i;i.st_lrm=i.st_lrm+f*(j.st_lrm-i.st_lrm),i.st_s=i.st_s+f*(j.st_s-i.st_s),i.masking_adj=i.masking_adj+f*(j.masking_adj-i.masking_adj),i.masking_adj_short=i.masking_adj_short+f*(j.masking_adj_short-i.masking_adj_short),i.ath_lower=i.ath_lower+f*(j.ath_lower-i.ath_lower),i.ath_curve=i.ath_curve+f*(j.ath_curve-i.ath_curve),i.ath_sensitivity=i.ath_sensitivity+f*(j.ath_sensitivity-i.ath_sensitivity),i.interch=i.interch+f*(j.interch-i.interch),i.msfix=i.msfix+f*(j.msfix-i.msfix),e(a,k.vbr_q),0!=c?a.quant_comp=k.quant_comp:Math.abs(a.quant_comp- -1)>0||(a.quant_comp=k.quant_comp),0!=c?a.quant_comp_short=k.quant_comp_s:Math.abs(a.quant_comp_short- -1)>0||(a.quant_comp_short=k.quant_comp_s),0!=k.expY&&(a.experimentalY=0!=k.expY),0!=c?a.internal_flags.nsPsy.attackthre=k.st_lrm:Math.abs(a.internal_flags.nsPsy.attackthre- -1)>0||(a.internal_flags.nsPsy.attackthre=k.st_lrm),0!=c?a.internal_flags.nsPsy.attackthre_s=k.st_s:Math.abs(a.internal_flags.nsPsy.attackthre_s- -1)>0||(a.internal_flags.nsPsy.attackthre_s=k.st_s),0!=c?a.maskingadjust=k.masking_adj:Math.abs(a.maskingadjust-0)>0||(a.maskingadjust=k.masking_adj),0!=c?a.maskingadjust_short=k.masking_adj_short:Math.abs(a.maskingadjust_short-0)>0||(a.maskingadjust_short=k.masking_adj_short),0!=c?a.ATHlower=-k.ath_lower/10:Math.abs(10*-a.ATHlower-0)>0||(a.ATHlower=-k.ath_lower/10),0!=c?a.ATHcurve=k.ath_curve:Math.abs(a.ATHcurve- -1)>0||(a.ATHcurve=k.ath_curve),0!=c?a.athaa_sensitivity=k.ath_sensitivity:Math.abs(a.athaa_sensitivity- -1)>0||(a.athaa_sensitivity=k.ath_sensitivity),k.interch>0&&(0!=c?a.interChRatio=k.interch:Math.abs(a.interChRatio- -1)>0||(a.interChRatio=k.interch)),k.safejoint>0&&(a.exp_nspsytune=a.exp_nspsytune|k.safejoint),k.sfb21mod>0&&(a.exp_nspsytune=a.exp_nspsytune|k.sfb21mod<<20),0!=c?a.msfix=k.msfix:Math.abs(a.msfix- -1)>0||(a.msfix=k.msfix),0==c&&(a.VBR_q=b,a.VBR_q_frac=f)}function d(a,b,c){var d=b,e=f.nearestBitrateFullIndex(b);if(a.VBR=l.vbr_abr,a.VBR_mean_bitrate_kbps=d,a.VBR_mean_bitrate_kbps=Math.min(a.VBR_mean_bitrate_kbps,320),a.VBR_mean_bitrate_kbps=Math.max(a.VBR_mean_bitrate_kbps,8),a.brate=a.VBR_mean_bitrate_kbps,a.VBR_mean_bitrate_kbps>320&&(a.disable_reservoir=!0),i[e].safejoint>0&&(a.exp_nspsytune=2|a.exp_nspsytune),i[e].sfscale>0&&(a.internal_flags.noise_shaping=2),Math.abs(i[e].nsbass)>0){var g=int(4*i[e].nsbass);g<0&&(g+=64),a.exp_nspsytune=a.exp_nspsytune|g<<2}return 0!=c?a.quant_comp=i[e].quant_comp:Math.abs(a.quant_comp- -1)>0||(a.quant_comp=i[e].quant_comp),0!=c?a.quant_comp_short=i[e].quant_comp_s:Math.abs(a.quant_comp_short- -1)>0||(a.quant_comp_short=i[e].quant_comp_s),0!=c?a.msfix=i[e].nsmsfix:Math.abs(a.msfix- -1)>0||(a.msfix=i[e].nsmsfix),0!=c?a.internal_flags.nsPsy.attackthre=i[e].st_lrm:Math.abs(a.internal_flags.nsPsy.attackthre- -1)>0||(a.internal_flags.nsPsy.attackthre=i[e].st_lrm),0!=c?a.internal_flags.nsPsy.attackthre_s=i[e].st_s:Math.abs(a.internal_flags.nsPsy.attackthre_s- -1)>0||(a.internal_flags.nsPsy.attackthre_s=i[e].st_s),0!=c?a.scale=i[e].scale:Math.abs(a.scale- -1)>0||(a.scale=i[e].scale),0!=c?a.maskingadjust=i[e].masking_adj:Math.abs(a.maskingadjust-0)>0||(a.maskingadjust=i[e].masking_adj),i[e].masking_adj>0?0!=c?a.maskingadjust_short=.9*i[e].masking_adj:Math.abs(a.maskingadjust_short-0)>0||(a.maskingadjust_short=.9*i[e].masking_adj):0!=c?a.maskingadjust_short=1.1*i[e].masking_adj:Math.abs(a.maskingadjust_short-0)>0||(a.maskingadjust_short=1.1*i[e].masking_adj),0!=c?a.ATHlower=-i[e].ath_lower/10:Math.abs(10*-a.ATHlower-0)>0||(a.ATHlower=-i[e].ath_lower/10),0!=c?a.ATHcurve=i[e].ath_curve:Math.abs(a.ATHcurve- -1)>0||(a.ATHcurve=i[e].ath_curve),0!=c?a.interChRatio=i[e].interch:Math.abs(a.interChRatio- -1)>0||(a.interChRatio=i[e].interch),b}function e(a,b){var c=0;return 0>b&&(c=-1,b=0),9<b&&(c=-1,b=9),a.VBR_q=b,a.VBR_q_frac=0,c}var f;this.setModules=function(a){f=a};var g=[new a(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new a(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new a(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new a(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new a(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new a(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new a(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new a(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new a(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new a(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new a(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],h=[new a(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new a(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new a(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new a(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new a(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new a(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new a(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new a(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new a(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new a(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new a(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)],i=[new b(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new b(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new b(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new b(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new b(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new b(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new b(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new b(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new b(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new b(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new b(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new b(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new b(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new b(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new b(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new b(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new b(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(a,b,e){switch(b){case R.R3MIX:b=R.V3,a.VBR=l.vbr_mtrh;break;case R.MEDIUM:b=R.V4,a.VBR=l.vbr_rh;break;case R.MEDIUM_FAST:b=R.V4,a.VBR=l.vbr_mtrh;break;case R.STANDARD:b=R.V2,a.VBR=l.vbr_rh;break;case R.STANDARD_FAST:b=R.V2,a.VBR=l.vbr_mtrh;break;case R.EXTREME:b=R.V0,a.VBR=l.vbr_rh;break;case R.EXTREME_FAST:b=R.V0,a.VBR=l.vbr_mtrh;break;case R.INSANE:return b=320,a.preset=b,d(a,b,e),a.VBR=l.vbr_off,b}switch(a.preset=b,b){case R.V9:return c(a,9,e),b;case R.V8:return c(a,8,e),b;case R.V7:return c(a,7,e),b;case R.V6:return c(a,6,e),b;case R.V5:return c(a,5,e),b;case R.V4:return c(a,4,e),b;case R.V3:return c(a,3,e),b;case R.V2:return c(a,2,e),b;case R.V1:return c(a,1,e),b;case R.V0:return c(a,0,e),b}return 8<=b&&b<=320?d(a,b,e):(a.preset=0,b)}}function p(){function a(a,b,c,d,e,f){for(;0!=e--;)c[d]=1e-10+a[b+0]*f[0]-c[d-1]*f[1]+a[b-1]*f[2]-c[d-2]*f[3]+a[b-2]*f[4]-c[d-3]*f[5]+a[b-3]*f[6]-c[d-4]*f[7]+a[b-4]*f[8]-c[d-5]*f[9]+a[b-5]*f[10]-c[d-6]*f[11]+a[b-6]*f[12]-c[d-7]*f[13]+a[b-7]*f[14]-c[d-8]*f[15]+a[b-8]*f[16]-c[d-9]*f[17]+a[b-9]*f[18]-c[d-10]*f[19]+a[b-10]*f[20],++d,++b}function b(a,b,c,d,e,f){for(;0!=e--;)c[d]=a[b+0]*f[0]-c[d-1]*f[1]+a[b-1]*f[2]-c[d-2]*f[3]+a[b-2]*f[4],++d,++b}function c(a,b){for(var c=0;c<MAX_ORDER;c++)a.linprebuf[c]=a.lstepbuf[c]=a.loutbuf[c]=a.rinprebuf[c]=a.rstepbuf[c]=a.routbuf[c]=0;switch(0|b){case 48e3:a.reqindex=0;break;case 44100:a.reqindex=1;break;case 32e3:a.reqindex=2;break;case 24e3:a.reqindex=3;break;case 22050:a.reqindex=4;break;case 16e3:a.reqindex=5;break;case 12e3:a.reqindex=6;break;case 11025:a.reqindex=7;break;case 8e3:a.reqindex=8;break;default:return INIT_GAIN_ANALYSIS_ERROR}return a.sampleWindow=0|(b*h+i-1)/i,a.lsum=0,a.rsum=0,a.totsamp=0,Z.ill(a.A,0),INIT_GAIN_ANALYSIS_OK}function d(a){return a*a}function e(a,b){var c,d=0;for(c=0;c<b;c++)d+=a[c];if(0==d)return GAIN_NOT_ENOUGH_SAMPLES;var e=0|Math.ceil(d*(1-g));for(c=b;c-- >0&&!((e-=a[c])<=0););return f-c/p.STEPS_per_dB}var f=64.82,g=(p.YULE_ORDER,.95),h=(p.MAX_SAMP_FREQ,p.RMS_WINDOW_TIME_NUMERATOR),i=p.RMS_WINDOW_TIME_DENOMINATOR,j=(p.MAX_SAMPLES_PER_WINDOW,[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]]),k=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];
this.InitGainAnalysis=function(a,b){return c(a,b)!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(a.linpre=MAX_ORDER,a.rinpre=MAX_ORDER,a.lstep=MAX_ORDER,a.rstep=MAX_ORDER,a.lout=MAX_ORDER,a.rout=MAX_ORDER,Z.fill(a.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(c,e,f,g,h,i,l){var m,n,o,q,r,s,t;if(0==i)return GAIN_ANALYSIS_OK;switch(t=0,r=i,l){case 1:g=e,h=f;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(i<MAX_ORDER?($.arraycopy(e,f,c.linprebuf,MAX_ORDER,i),$.arraycopy(g,h,c.rinprebuf,MAX_ORDER,i)):($.arraycopy(e,f,c.linprebuf,MAX_ORDER,MAX_ORDER),$.arraycopy(g,h,c.rinprebuf,MAX_ORDER,MAX_ORDER));r>0;){s=r>c.sampleWindow-c.totsamp?c.sampleWindow-c.totsamp:r,t<MAX_ORDER?(m=c.linpre+t,n=c.linprebuf,o=c.rinpre+t,q=c.rinprebuf,s>MAX_ORDER-t&&(s=MAX_ORDER-t)):(m=f+t,n=e,o=h+t,q=g),a(n,m,c.lstepbuf,c.lstep+c.totsamp,s,j[c.reqindex]),a(q,o,c.rstepbuf,c.rstep+c.totsamp,s,j[c.reqindex]),b(c.lstepbuf,c.lstep+c.totsamp,c.loutbuf,c.lout+c.totsamp,s,k[c.reqindex]),b(c.rstepbuf,c.rstep+c.totsamp,c.routbuf,c.rout+c.totsamp,s,k[c.reqindex]),m=c.lout+c.totsamp,n=c.loutbuf,o=c.rout+c.totsamp,q=c.routbuf;for(var u=s%8;0!=u--;)c.lsum+=d(n[m++]),c.rsum+=d(q[o++]);for(u=s/8;0!=u--;)c.lsum+=d(n[m+0])+d(n[m+1])+d(n[m+2])+d(n[m+3])+d(n[m+4])+d(n[m+5])+d(n[m+6])+d(n[m+7]),m+=8,c.rsum+=d(q[o+0])+d(q[o+1])+d(q[o+2])+d(q[o+3])+d(q[o+4])+d(q[o+5])+d(q[o+6])+d(q[o+7]),o+=8;if(r-=s,t+=s,c.totsamp+=s,c.totsamp==c.sampleWindow){var v=10*p.STEPS_per_dB*Math.log10((c.lsum+c.rsum)/c.totsamp*.5+1e-37),w=v<=0?0:0|v;w>=c.A.length&&(w=c.A.length-1),c.A[w]++,c.lsum=c.rsum=0,$.arraycopy(c.loutbuf,c.totsamp,c.loutbuf,0,MAX_ORDER),$.arraycopy(c.routbuf,c.totsamp,c.routbuf,0,MAX_ORDER),$.arraycopy(c.lstepbuf,c.totsamp,c.lstepbuf,0,MAX_ORDER),$.arraycopy(c.rstepbuf,c.totsamp,c.rstepbuf,0,MAX_ORDER),c.totsamp=0}if(c.totsamp>c.sampleWindow)return GAIN_ANALYSIS_ERROR}return i<MAX_ORDER?($.arraycopy(c.linprebuf,i,c.linprebuf,0,MAX_ORDER-i),$.arraycopy(c.rinprebuf,i,c.rinprebuf,0,MAX_ORDER-i),$.arraycopy(e,f,c.linprebuf,MAX_ORDER-i,i),$.arraycopy(g,h,c.rinprebuf,MAX_ORDER-i,i)):($.arraycopy(e,f+i-MAX_ORDER,c.linprebuf,0,MAX_ORDER),$.arraycopy(g,h+i-MAX_ORDER,c.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(a){for(var b=e(a.A,a.A.length),c=0;c<a.A.length;c++)a.B[c]+=a.A[c],a.A[c]=0;for(var c=0;c<MAX_ORDER;c++)a.linprebuf[c]=a.lstepbuf[c]=a.loutbuf[c]=a.rinprebuf[c]=a.rstepbuf[c]=a.routbuf[c]=0;return a.totsamp=0,a.lsum=a.rsum=0,b}}function q(){var a;this.setModules=function(b){a=b},this.ResvFrameBegin=function(b,c){var d,e=b.internal_flags,f=e.l3_side,g=a.getframebits(b);c.bits=(g-8*e.sideinfo_len)/e.mode_gr;var h=2048*e.mode_gr-8;b.brate>320?d=8*int(1e3*b.brate/(b.out_samplerate/1152)/8+.5):(d=11520,b.strict_ISO&&(d=8*int(32e4/(b.out_samplerate/1152)/8+.5))),e.ResvMax=d-g,e.ResvMax>h&&(e.ResvMax=h),(e.ResvMax<0||b.disable_reservoir)&&(e.ResvMax=0);var i=c.bits*e.mode_gr+Math.min(e.ResvSize,e.ResvMax);return i>d&&(i=d),f.resvDrain_pre=0,null!=e.pinfo&&(e.pinfo.mean_bits=c.bits/2,e.pinfo.resvsize=e.ResvSize),i},this.ResvMaxBits=function(a,b,c,d){var e,f=a.internal_flags,g=f.ResvSize,h=f.ResvMax;0!=d&&(g+=b),0!=(1&f.substep_shaping)&&(h*=.9),c.bits=b,10*g>9*h?(e=g-9*h/10,c.bits+=e,f.substep_shaping|=128):(e=0,f.substep_shaping&=127,a.disable_reservoir||0!=(1&f.substep_shaping)||(c.bits-=.1*b));var i=g<6*f.ResvMax/10?g:6*f.ResvMax/10;return i-=e,i<0&&(i=0),i},this.ResvAdjust=function(a,b){a.ResvSize-=b.part2_3_length+b.part2_length},this.ResvFrameEnd=function(a,b){var c,d=a.l3_side;a.ResvSize+=b*a.mode_gr;var e=0;d.resvDrain_post=0,d.resvDrain_pre=0,0!=(c=a.ResvSize%8)&&(e+=c),c=a.ResvSize-e-a.ResvMax,c>0&&(e+=c);var f=Math.min(8*d.main_data_begin,e)/8;d.resvDrain_pre+=8*f,e-=8*f,a.ResvSize-=8*f,d.main_data_begin-=f,d.resvDrain_post+=e,a.ResvSize-=e}}function r(){function a(a){this.bits=0|a}function b(a,b,c,d,e,f){var g=.5946/b;for(a>>=1;0!=a--;)e[f++]=g>c[d++]?0:1,e[f++]=g>c[d++]?0:1}function c(a,b,c,d,e,f){a>>=1;var g=a%2;for(a>>=1;0!=a--;){var h,i,j,k,l,m,n,p;h=c[d++]*b,i=c[d++]*b,l=0|h,j=c[d++]*b,m=0|i,k=c[d++]*b,n=0|j,h+=o.adj43[l],p=0|k,i+=o.adj43[m],e[f++]=0|h,j+=o.adj43[n],e[f++]=0|i,k+=o.adj43[p],e[f++]=0|j,e[f++]=0|k}if(0!=g){var h,i,l,m;h=c[d++]*b,i=c[d++]*b,l=0|h,m=0|i,h+=o.adj43[l],i+=o.adj43[m],e[f++]=0|h,e[f++]=0|i}}function e(a,d,e,f,g){var h,i,j,k=0,l=0,m=0,n=0,p=d,q=0,r=p,s=0,t=a,u=0;for(j=null!=g&&f.global_gain==g.global_gain,i=f.block_type==J.SHORT_TYPE?38:21,h=0;h<=i;h++){var v=-1;if((j||f.block_type==J.NORM_TYPE)&&(v=f.global_gain-(f.scalefac[h]+(0!=f.preflag?o.pretab[h]:0)<<f.scalefac_scale+1)-8*f.subblock_gain[f.window[h]]),j&&g.step[h]==v)0!=l&&(c(l,e,t,u,r,s),l=0),0!=m&&(b(m,e,t,u,r,s),m=0);else{var w=f.width[h];if(k+f.width[h]>f.max_nonzero_coeff){var x;x=f.max_nonzero_coeff-k+1,Z.fill(d,f.max_nonzero_coeff,576,0),w=x,w<0&&(w=0),h=i+1}if(0==l&&0==m&&(r=p,s=q,t=a,u=n),null!=g&&g.sfb_count1>0&&h>=g.sfb_count1&&g.step[h]>0&&v>=g.step[h]?(0!=l&&(c(l,e,t,u,r,s),l=0,r=p,s=q,t=a,u=n),m+=w):(0!=m&&(b(m,e,t,u,r,s),m=0,r=p,s=q,t=a,u=n),l+=w),w<=0){0!=m&&(b(m,e,t,u,r,s),m=0),0!=l&&(c(l,e,t,u,r,s),l=0);break}}h<=i&&(q+=f.width[h],n+=f.width[h],k+=f.width[h])}0!=l&&(c(l,e,t,u,r,s),l=0),0!=m&&(b(m,e,t,u,r,s),m=0)}function f(a,b,c){var d=0,e=0;do{var f=a[b++],g=a[b++];d<f&&(d=f),e<g&&(e=g)}while(b<c);return d<e&&(d=e),d}function g(a,b,c,d,e,f){var g,h=65536*ba.ht[d].xlen+ba.ht[e].xlen,i=0;do{var j=a[b++],k=a[b++];0!=j&&(j>14&&(j=15,i+=h),j*=16),0!=k&&(k>14&&(k=15,i+=h),j+=k),i+=ba.largetbl[j]}while(b<c);return g=65535&i,i>>=16,i>g&&(i=g,d=e),f.bits+=i,d}function h(a,b,c,d){var e=0,f=ba.ht[1].hlen;do{var g=2*a[b+0]+a[b+1];b+=2,e+=f[g]}while(b<c);return d.bits+=e,1}function i(a,b,c,d,e){var f,g,h=0,i=ba.ht[d].xlen;g=2==d?ba.table23:ba.table56;do{var j=a[b+0]*i+a[b+1];b+=2,h+=g[j]}while(b<c);return f=65535&h,h>>=16,h>f&&(h=f,d++),e.bits+=h,d}function j(a,b,c,d,e){var f=0,g=0,h=0,i=ba.ht[d].xlen,j=ba.ht[d].hlen,k=ba.ht[d+1].hlen,l=ba.ht[d+2].hlen;do{var m=a[b+0]*i+a[b+1];b+=2,f+=j[m],g+=k[m],h+=l[m]}while(b<c);var n=d;return f>g&&(f=g,n++),f>h&&(f=h,n=d+2),e.bits+=f,n}function k(a,b,c,d){var e=f(a,b,c);switch(e){case 0:return e;case 1:return h(a,b,c,d);case 2:case 3:return i(a,b,c,q[e-1],d);case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:return j(a,b,c,q[e-1],d);default:if(e>D.IXMAX_VAL)return d.bits=D.LARGE_BITS,-1;e-=15;var k;for(k=24;k<32&&!(ba.ht[k].linmax>=e);k++);var l;for(l=k-8;l<24&&!(ba.ht[l].linmax>=e);l++);return g(a,b,c,l,k,d)}}function l(b,c,d,e,f,g,h){for(var i=c.big_values,j=0;j<=22;j++)e[j]=D.LARGE_BITS;for(var j=0;j<16;j++){var l=b.scalefac_band.l[j+1];if(l>=i)break;var m=0,n=new a(m),o=k(d,0,l,n);m=n.bits;for(var p=0;p<8;p++){var q=b.scalefac_band.l[j+p+2];if(q>=i)break;var r=m;n=new a(r);var s=k(d,l,q,n);r=n.bits,e[j+p]>r&&(e[j+p]=r,f[j+p]=j,g[j+p]=o,h[j+p]=s)}}}function m(b,c,d,e,f,g,h,i){for(var j=c.big_values,l=2;l<J.SBMAX_l+1;l++){var m=b.scalefac_band.l[l];if(m>=j)break;var n=f[l-2]+c.count1bits;if(d.part2_3_length<=n)break;var o=new a(n),p=k(e,m,j,o);n=o.bits,d.part2_3_length<=n||(d.assign(c),d.part2_3_length=n,d.region0_count=g[l-2],d.region1_count=l-2-g[l-2],d.table_select[0]=h[l-2],d.table_select[1]=i[l-2],d.table_select[2]=p)}}function n(a,b){for(var c,d=b.tt[1][a],e=b.tt[0][a],f=0;f<ba.scfsi_band.length-1;f++){for(c=ba.scfsi_band[f];c<ba.scfsi_band[f+1]&&!(e.scalefac[c]!=d.scalefac[c]&&d.scalefac[c]>=0);c++);if(c==ba.scfsi_band[f+1]){for(c=ba.scfsi_band[f];c<ba.scfsi_band[f+1];c++)d.scalefac[c]=-1;b.scfsi[a][f]=1}}var g=0,h=0;for(c=0;c<11;c++)d.scalefac[c]!=-1&&(h++,g<d.scalefac[c]&&(g=d.scalefac[c]));for(var i=0,j=0;c<J.SBPSY_l;c++)d.scalefac[c]!=-1&&(j++,i<d.scalefac[c]&&(i=d.scalefac[c]));for(var f=0;f<16;f++)if(g<s[f]&&i<t[f]){var k=u[f]*h+v[f]*j;d.part2_length>k&&(d.part2_length=k,d.scalefac_compress=f)}}var o=null;this.qupvt=null,this.setModules=function(a){this.qupvt=a,o=a};var p=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],q=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(b,c,d){var e=c.l3_enc,f=Math.min(576,c.max_nonzero_coeff+2>>1<<1);for(null!=d&&(d.sfb_count1=0);f>1&&0==(e[f-1]|e[f-2]);f-=2);c.count1=f;for(var g=0,h=0;f>3;f-=4){var i;if((2147483647&(e[f-1]|e[f-2]|e[f-3]|e[f-4]))>1)break;i=2*(2*(2*e[f-4]+e[f-3])+e[f-2])+e[f-1],g+=ba.t32l[i],h+=ba.t33l[i]}var j=g;if(c.count1table_select=0,g>h&&(j=h,c.count1table_select=1),c.count1bits=j,c.big_values=f,0==f)return j;if(c.block_type==J.SHORT_TYPE)g=3*b.scalefac_band.s[3],g>c.big_values&&(g=c.big_values),h=c.big_values;else if(c.block_type==J.NORM_TYPE){if(g=c.region0_count=b.bv_scf[f-2],h=c.region1_count=b.bv_scf[f-1],h=b.scalefac_band.l[g+h+2],g=b.scalefac_band.l[g+1],h<f){var l=new a(j);c.table_select[2]=k(e,h,f,l),j=l.bits}}else c.region0_count=7,c.region1_count=J.SBMAX_l-1-7-1,g=b.scalefac_band.l[8],h=f,g>h&&(g=h);if(g=Math.min(g,f),h=Math.min(h,f),0<g){var l=new a(j);c.table_select[0]=k(e,0,g,l),j=l.bits}if(g<h){var l=new a(j);c.table_select[1]=k(e,g,h,l),j=l.bits}if(2==b.use_best_huffman&&(c.part2_3_length=j,best_huffman_divide(b,c),j=c.part2_3_length),null!=d&&c.block_type==J.NORM_TYPE){for(var m=0;b.scalefac_band.l[m]<c.big_values;)m++;d.sfb_count1=m}return j},this.count_bits=function(a,b,c,d){var f=c.l3_enc,g=D.IXMAX_VAL/o.IPOW20(c.global_gain);if(c.xrpow_max>g)return D.LARGE_BITS;if(e(b,f,o.IPOW20(c.global_gain),c,d),0!=(2&a.substep_shaping))for(var h=0,i=c.global_gain+c.scalefac_scale,j=.634521682242439/o.IPOW20(i),k=0;k<c.sfbmax;k++){var l=c.width[k];if(0==a.pseudohalf[k])h+=l;else{var m;for(m=h,h+=l;m<h;++m)f[m]=b[m]>=j?f[m]:0}}return this.noquant_count_bits(a,c,d)},this.best_huffman_divide=function(b,c){var e=new E,f=c.l3_enc,g=d(23),h=d(23),i=d(23),j=d(23);if(c.block_type!=J.SHORT_TYPE||1!=b.mode_gr){e.assign(c),c.block_type==J.NORM_TYPE&&(l(b,c,f,g,h,i,j),m(b,e,c,f,g,h,i,j));var n=e.big_values;if(!(0==n||(f[n-2]|f[n-1])>1||(n=c.count1+2,n>576))){e.assign(c),e.count1=n;for(var o=0,p=0;n>e.big_values;n-=4){var q=2*(2*(2*f[n-4]+f[n-3])+f[n-2])+f[n-1];o+=ba.t32l[q],p+=ba.t33l[q]}if(e.big_values=n,e.count1table_select=0,o>p&&(o=p,e.count1table_select=1),e.count1bits=o,e.block_type==J.NORM_TYPE)m(b,e,c,f,g,h,i,j);else{if(e.part2_3_length=o,o=b.scalefac_band.l[8],o>n&&(o=n),o>0){var r=new a(e.part2_3_length);e.table_select[0]=k(f,0,o,r),e.part2_3_length=r.bits}if(n>o){var r=new a(e.part2_3_length);e.table_select[1]=k(f,o,n,r),e.part2_3_length=r.bits}c.part2_3_length>e.part2_3_length&&c.assign(e)}}}};var s=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],t=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],u=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],v=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];r.slen1_tab=u,r.slen2_tab=v,this.best_scalefac_store=function(a,b,c,d){var e,f,g,h,i=d.tt[b][c],j=0;for(g=0,e=0;e<i.sfbmax;e++){var k=i.width[e];for(g+=k,h=-k;h<0&&0==i.l3_enc[h+g];h++);0==h&&(i.scalefac[e]=j=-2)}if(0==i.scalefac_scale&&0==i.preflag){var l=0;for(e=0;e<i.sfbmax;e++)i.scalefac[e]>0&&(l|=i.scalefac[e]);if(0==(1&l)&&0!=l){for(e=0;e<i.sfbmax;e++)i.scalefac[e]>0&&(i.scalefac[e]>>=1);i.scalefac_scale=j=1}}if(0==i.preflag&&i.block_type!=J.SHORT_TYPE&&2==a.mode_gr){for(e=11;e<J.SBPSY_l&&!(i.scalefac[e]<o.pretab[e]&&i.scalefac[e]!=-2);e++);if(e==J.SBPSY_l){for(e=11;e<J.SBPSY_l;e++)i.scalefac[e]>0&&(i.scalefac[e]-=o.pretab[e]);i.preflag=j=1}}for(f=0;f<4;f++)d.scfsi[c][f]=0;for(2==a.mode_gr&&1==b&&d.tt[0][c].block_type!=J.SHORT_TYPE&&d.tt[1][c].block_type!=J.SHORT_TYPE&&(n(c,d),j=0),e=0;e<i.sfbmax;e++)i.scalefac[e]==-2&&(i.scalefac[e]=0);0!=j&&(2==a.mode_gr?this.scale_bitcount(i):this.scale_bitcount_lsf(a,i))};var w=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],x=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],y=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(a){var b,c,d,e=0,f=0,g=a.scalefac;if(a.block_type==J.SHORT_TYPE)d=w,0!=a.mixed_block_flag&&(d=x);else if(d=y,0==a.preflag){for(c=11;c<J.SBPSY_l&&!(g[c]<o.pretab[c]);c++);if(c==J.SBPSY_l)for(a.preflag=1,c=11;c<J.SBPSY_l;c++)g[c]-=o.pretab[c]}for(c=0;c<a.sfbdivide;c++)e<g[c]&&(e=g[c]);for(;c<a.sfbmax;c++)f<g[c]&&(f=g[c]);for(a.part2_length=D.LARGE_BITS,b=0;b<16;b++)e<s[b]&&f<t[b]&&a.part2_length>d[b]&&(a.part2_length=d[b],a.scalefac_compress=b);return a.part2_length==D.LARGE_BITS};var z=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(a,b){var c,e,f,g,h,i,j,k,l=d(4),m=b.scalefac;for(c=0!=b.preflag?2:0,j=0;j<4;j++)l[j]=0;if(b.block_type==J.SHORT_TYPE){e=1;var n=o.nr_of_sfb_block[c][e];for(k=0,f=0;f<4;f++)for(g=n[f]/3,j=0;j<g;j++,k++)for(h=0;h<3;h++)m[3*k+h]>l[f]&&(l[f]=m[3*k+h])}else{e=0;var n=o.nr_of_sfb_block[c][e];for(k=0,f=0;f<4;f++)for(g=n[f],j=0;j<g;j++,k++)m[k]>l[f]&&(l[f]=m[k])}for(i=!1,f=0;f<4;f++)l[f]>z[c][f]&&(i=!0);if(!i){var p,q,r,s;for(b.sfb_partition_table=o.nr_of_sfb_block[c][e],f=0;f<4;f++)b.slen[f]=A[l[f]];switch(p=b.slen[0],q=b.slen[1],r=b.slen[2],s=b.slen[3],c){case 0:b.scalefac_compress=(5*p+q<<4)+(r<<2)+s;break;case 1:b.scalefac_compress=400+(5*p+q<<2)+r;break;case 2:b.scalefac_compress=500+3*p+q;break;default:$.err.printf("intensity stereo not implemented yet\n")}}if(!i)for(b.part2_length=0,f=0;f<4;f++)b.part2_length+=b.slen[f]*b.sfb_partition_table[f];return i};var A=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(a){for(var b=2;b<=576;b+=2){for(var c,d=0;a.scalefac_band.l[++d]<b;);for(c=p[d][0];a.scalefac_band.l[c+1]>b;)c--;for(c<0&&(c=p[d][0]),a.bv_scf[b-2]=c,c=p[d][1];a.scalefac_band.l[c+a.bv_scf[b-2]+2]>b;)c--;c<0&&(c=p[d][1]),a.bv_scf[b-1]=c}}}function s(){function b(a){$.arraycopy(a.header[a.w_ptr].buf,0,z,B,a.sideinfo_len),B+=a.sideinfo_len,A+=8*a.sideinfo_len,a.w_ptr=a.w_ptr+1&O.MAX_HEADER_BUF-1}function c(a,c,d){for(;d>0;){var e;0==C&&(C=8,B++,a.header[a.w_ptr].write_timing==A&&b(a),z[B]=0),e=Math.min(d,C),d-=e,C-=e,z[B]|=c>>d<<C,A+=e}}function e(a,b,c){for(;c>0;){var d;0==C&&(C=8,B++,z[B]=0),d=Math.min(c,C),c-=d,C-=d,z[B]|=b>>c<<C,A+=d}}function f(a,b){var d,e=a.internal_flags;if(b>=8&&(c(e,76,8),b-=8),b>=8&&(c(e,65,8),b-=8),b>=8&&(c(e,77,8),b-=8),b>=8&&(c(e,69,8),b-=8),b>=32){var f=x.getLameShortVersion();if(b>=32)for(d=0;d<f.length&&b>=8;++d)b-=8,c(e,f.charAt(d),8)}for(;b>=1;b-=1)c(e,e.ancillary_flag,1),e.ancillary_flag^=a.disable_reservoir?0:1}function h(a,b,c){for(var d=a.header[a.h_ptr].ptr;c>0;){var e=Math.min(c,8-(7&d));c-=e,a.header[a.h_ptr].buf[d>>3]|=b>>c<<8-(7&d)-e,d+=e}a.header[a.h_ptr].ptr=d}function i(a,b){a<<=8;for(var c=0;c<8;c++)a<<=1,b<<=1,0!=(65536&(b^a))&&(b^=u);return b}function j(a,b){var c,d,e,f=a.internal_flags;if(c=f.l3_side,f.header[f.h_ptr].ptr=0,Z.fill(f.header[f.h_ptr].buf,0,f.sideinfo_len,0),a.out_samplerate<16e3?h(f,4094,12):h(f,4095,12),h(f,a.version,1),h(f,1,2),h(f,a.error_protection?0:1,1),h(f,f.bitrate_index,4),h(f,f.samplerate_index,2),h(f,f.padding,1),h(f,a.extension,1),h(f,a.mode.ordinal(),2),h(f,f.mode_ext,2),h(f,a.copyright,1),h(f,a.original,1),h(f,a.emphasis,2),a.error_protection&&h(f,0,16),1==a.version){for(h(f,c.main_data_begin,9),2==f.channels_out?h(f,c.private_bits,3):h(f,c.private_bits,5),e=0;e<f.channels_out;e++){var g;for(g=0;g<4;g++)h(f,c.scfsi[e][g],1)}for(d=0;d<2;d++)for(e=0;e<f.channels_out;e++){var i=c.tt[d][e];h(f,i.part2_3_length+i.part2_length,12),h(f,i.big_values/2,9),h(f,i.global_gain,8),h(f,i.scalefac_compress,4),i.block_type!=J.NORM_TYPE?(h(f,1,1),h(f,i.block_type,2),h(f,i.mixed_block_flag,1),14==i.table_select[0]&&(i.table_select[0]=16),h(f,i.table_select[0],5),14==i.table_select[1]&&(i.table_select[1]=16),h(f,i.table_select[1],5),h(f,i.subblock_gain[0],3),h(f,i.subblock_gain[1],3),h(f,i.subblock_gain[2],3)):(h(f,0,1),14==i.table_select[0]&&(i.table_select[0]=16),h(f,i.table_select[0],5),14==i.table_select[1]&&(i.table_select[1]=16),h(f,i.table_select[1],5),14==i.table_select[2]&&(i.table_select[2]=16),h(f,i.table_select[2],5),h(f,i.region0_count,4),h(f,i.region1_count,3)),h(f,i.preflag,1),h(f,i.scalefac_scale,1),h(f,i.count1table_select,1)}}else for(h(f,c.main_data_begin,8),h(f,c.private_bits,f.channels_out),d=0,e=0;e<f.channels_out;e++){var i=c.tt[d][e];h(f,i.part2_3_length+i.part2_length,12),h(f,i.big_values/2,9),h(f,i.global_gain,8),h(f,i.scalefac_compress,9),i.block_type!=J.NORM_TYPE?(h(f,1,1),h(f,i.block_type,2),h(f,i.mixed_block_flag,1),14==i.table_select[0]&&(i.table_select[0]=16),h(f,i.table_select[0],5),14==i.table_select[1]&&(i.table_select[1]=16),h(f,i.table_select[1],5),h(f,i.subblock_gain[0],3),h(f,i.subblock_gain[1],3),h(f,i.subblock_gain[2],3)):(h(f,0,1),14==i.table_select[0]&&(i.table_select[0]=16),h(f,i.table_select[0],5),14==i.table_select[1]&&(i.table_select[1]=16),h(f,i.table_select[1],5),14==i.table_select[2]&&(i.table_select[2]=16),h(f,i.table_select[2],5),h(f,i.region0_count,4),h(f,i.region1_count,3)),h(f,i.scalefac_scale,1),h(f,i.count1table_select,1)}a.error_protection&&CRC_writeheader(f,f.header[f.h_ptr].buf);var j=f.h_ptr;f.h_ptr=j+1&O.MAX_HEADER_BUF-1,f.header[f.h_ptr].write_timing=f.header[j].write_timing+b,f.h_ptr==f.w_ptr&&$.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n")}function k(a,b){var d,e=ba.ht[b.count1table_select+32],f=0,g=b.big_values,h=b.big_values;for(d=(b.count1-b.big_values)/4;d>0;--d){var i,j=0,k=0;i=b.l3_enc[g+0],0!=i&&(k+=8,b.xr[h+0]<0&&j++),i=b.l3_enc[g+1],0!=i&&(k+=4,j*=2,b.xr[h+1]<0&&j++),i=b.l3_enc[g+2],0!=i&&(k+=2,j*=2,b.xr[h+2]<0&&j++),i=b.l3_enc[g+3],0!=i&&(k++,j*=2,b.xr[h+3]<0&&j++),g+=4,h+=4,c(a,j+e.table[k],e.hlen[k]),f+=e.hlen[k]}return f}function l(a,b,d,e,f){var g=ba.ht[b],h=0;if(0==b)return h;for(var i=d;i<e;i+=2){var j=0,k=0,l=g.xlen,m=g.xlen,n=0,o=f.l3_enc[i],p=f.l3_enc[i+1];if(0!=o&&(f.xr[i]<0&&n++,j--),b>15){if(o>14){var q=o-15;n|=q<<1,k=l,o=15}if(p>14){var r=p-15;n<<=l,n|=r,k+=l,p=15}m=16}0!=p&&(n<<=1,f.xr[i+1]<0&&n++,j--),o=o*m+p,k-=j,j+=g.hlen[o],c(a,g.table[o],j),c(a,n,k),h+=j+k}return h}function m(a,b){var c=3*a.scalefac_band.s[3];c>b.big_values&&(c=b.big_values);var d=l(a,b.table_select[0],0,c,b);return d+=l(a,b.table_select[1],c,b.big_values,b)}function n(a,b){var c,d,e,f;c=b.big_values;var g=b.region0_count+1;return e=a.scalefac_band.l[g],g+=b.region1_count+1,f=a.scalefac_band.l[g],e>c&&(e=c),f>c&&(f=c),d=l(a,b.table_select[0],0,e,b),d+=l(a,b.table_select[1],e,f,b),d+=l(a,b.table_select[2],f,c,b)}function o(a){var b,d,e,f,g=0,h=a.internal_flags,i=h.l3_side;if(1==a.version)for(b=0;b<2;b++)for(d=0;d<h.channels_out;d++){var j=i.tt[b][d],l=r.slen1_tab[j.scalefac_compress],o=r.slen2_tab[j.scalefac_compress];for(f=0,e=0;e<j.sfbdivide;e++)j.scalefac[e]!=-1&&(c(h,j.scalefac[e],l),f+=l);for(;e<j.sfbmax;e++)j.scalefac[e]!=-1&&(c(h,j.scalefac[e],o),f+=o);f+=j.block_type==J.SHORT_TYPE?m(h,j):n(h,j),f+=k(h,j),g+=f}else for(b=0,d=0;d<h.channels_out;d++){var p,q,j=i.tt[b][d],s=0;if(f=0,e=0,q=0,j.block_type==J.SHORT_TYPE){for(;q<4;q++){var t=j.sfb_partition_table[q]/3,u=j.slen[q];for(p=0;p<t;p++,e++)c(h,Math.max(j.scalefac[3*e+0],0),u),c(h,Math.max(j.scalefac[3*e+1],0),u),c(h,Math.max(j.scalefac[3*e+2],0),u),s+=3*u}f+=m(h,j)}else{for(;q<4;q++){var t=j.sfb_partition_table[q],u=j.slen[q];for(p=0;p<t;p++,e++)c(h,Math.max(j.scalefac[e],0),u),s+=u}f+=n(h,j)}f+=k(h,j),g+=s+f}return g}function q(){this.total=0}function s(a,b){var c,d,e,f,g,h=a.internal_flags;return g=h.w_ptr,f=h.h_ptr-1,f==-1&&(f=O.MAX_HEADER_BUF-1),c=h.header[f].write_timing-A,b.total=c,c>=0&&(d=1+f-g,f<g&&(d=1+f-g+O.MAX_HEADER_BUF),c-=8*d*h.sideinfo_len),e=t.getframebits(a),c+=e,b.total+=e,b.total%8!=0?b.total=1+b.total/8:b.total=b.total/8,b.total+=B+1,c<0&&$.err.println("strange error flushing buffer ... \n"),c}var t=this,u=32773,v=null,w=null,x=null,y=null;this.setModules=function(a,b,c,d){v=a,w=b,x=c,y=d};var z=null,A=0,B=0,C=0;this.getframebits=function(a){var b,c=a.internal_flags;b=0!=c.bitrate_index?ba.bitrate_table[a.version][c.bitrate_index]:a.brate;var d=0|72e3*(a.version+1)*b/a.out_samplerate+c.padding;return 8*d},this.CRC_writeheader=function(a,b){var c=65535;c=i(255&b[2],c),c=i(255&b[3],c);for(var d=6;d<a.sideinfo_len;d++)c=i(255&b[d],c);b[4]=byte(c>>8),b[5]=byte(255&c)},this.flush_bitstream=function(a){var b,c,d=a.internal_flags,e=d.h_ptr-1;if(e==-1&&(e=O.MAX_HEADER_BUF-1),b=d.l3_side,!((c=s(a,new q))<0)){if(f(a,c),d.ResvSize=0,b.main_data_begin=0,d.findReplayGain){var g=v.GetTitleGain(d.rgdata);d.RadioGain=0|Math.floor(10*g+.5)}d.findPeakSample&&(d.noclipGainChange=0|Math.ceil(20*Math.log10(d.PeakSample/32767)*10),d.noclipGainChange>0&&(EQ(a.scale,1)||EQ(a.scale,0))?d.noclipScale=Math.floor(32767/d.PeakSample*100)/100:d.noclipScale=-1)}},this.add_dummy_byte=function(a,b,c){for(var d,f=a.internal_flags;c-- >0;)for(e(f,b,8),d=0;d<O.MAX_HEADER_BUF;++d)f.header[d].write_timing+=8},this.format_bitstream=function(a){var b,c=a.internal_flags;b=c.l3_side;var d=this.getframebits(a);f(a,b.resvDrain_pre),j(a,d);var e=8*c.sideinfo_len;if(e+=o(a),f(a,b.resvDrain_post),e+=b.resvDrain_post,b.main_data_begin+=(d-e)/8,s(a,new q)!=c.ResvSize&&$.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*b.main_data_begin!=c.ResvSize&&($.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*b.main_data_begin,c.ResvSize,b.resvDrain_post,b.resvDrain_pre,8*c.sideinfo_len,e-b.resvDrain_post-8*c.sideinfo_len,e,e%8,d),$.err.println("This is a fatal error.  It has several possible causes:"),$.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),$.err.println(" 9%%  Your system is overclocked"),$.err.println(" 1%%  bug in LAME encoding library"),c.ResvSize=8*b.main_data_begin),A>1e9){var g;for(g=0;g<O.MAX_HEADER_BUF;++g)c.header[g].write_timing-=A;A=0}return 0},this.copy_buffer=function(a,b,c,e,f){var h=B+1;if(h<=0)return 0;if(0!=e&&h>e)return-1;if($.arraycopy(z,0,b,c,h),B=-1,C=0,0!=f){var i=d(1);if(i[0]=a.nMusicCRC,y.updateMusicCRC(i,b,c,h),a.nMusicCRC=i[0],h>0&&(a.VBR_seek_table.nBytesWritten+=h),a.decode_on_the_fly)for(var j,k=g([2,1152]),l=h,m=-1;0!=m;)if(m=w.hip_decode1_unclipped(a.hip,b,c,l,k[0],k[1]),l=0,m==-1&&(m=0),m>0){if(a.findPeakSample){for(j=0;j<m;j++)k[0][j]>a.PeakSample?a.PeakSample=k[0][j]:-k[0][j]>a.PeakSample&&(a.PeakSample=-k[0][j]);if(a.channels_out>1)for(j=0;j<m;j++)k[1][j]>a.PeakSample?a.PeakSample=k[1][j]:-k[1][j]>a.PeakSample&&(a.PeakSample=-k[1][j])}if(a.findReplayGain&&v.AnalyzeSamples(a.rgdata,k[0],0,k[1],0,m,a.channels_out)==p.GAIN_ANALYSIS_ERROR)return-6}}return h},this.init_bit_stream_w=function(b){z=a(R.LAME_MAXMP3BUFFER),b.h_ptr=b.w_ptr=0,b.header[b.h_ptr].write_timing=0,B=-1,C=0,A=0}}function t(){function b(a,b){if(a.nVbrNumFrames++,a.sum+=b,a.seen++,!(a.seen<a.want)&&(a.pos<a.size&&(a.bag[a.pos]=a.sum,a.pos++,a.seen=0),a.pos==a.size)){for(var c=1;c<a.size;c+=2)a.bag[c/2]=a.bag[c];a.want*=2,a.pos/=2}}function c(a,b){if(!(a.pos<=0))for(var c=1;c<w;++c){var d,e,f=c/w,g=0|Math.floor(f*a.pos);g>a.pos-1&&(g=a.pos-1),d=a.bag[g],e=a.sum;var h=0|256*d/e;h>255&&(h=255),b[c]=255&h}}function d(a,b){var c=255&a[b+0];return c<<=8,c|=255&a[b+1],c<<=8,c|=255&a[b+2],c<<=8,c|=255&a[b+3]}function e(a,b,c){a[b+0]=255&(c>>24&255),a[b+1]=255&(c>>16&255),a[b+2]=255&(c>>8&255),a[b+3]=255&(255&c)}function f(a,b,c){a[b+0]=255&(c>>8&255),a[b+1]=255&(255&c)}function g(a,b){return new String(a,b,E.length(),D).equals(E)||new String(a,b,F.length(),D).equals(F)}function h(a,b,c){return 255&(a<<b|c&~(-1<<b))}function i(a,b){var c=a.internal_flags;b[0]=h(b[0],8,255),b[1]=h(b[1],3,7),b[1]=h(b[1],1,a.out_samplerate<16e3?0:1),b[1]=h(b[1],1,a.version),b[1]=h(b[1],2,1),b[1]=h(b[1],1,a.error_protection?0:1),b[2]=h(b[2],4,c.bitrate_index),b[2]=h(b[2],2,c.samplerate_index),b[2]=h(b[2],1,0),b[2]=h(b[2],1,a.extension),b[3]=h(b[3],2,a.mode.ordinal()),b[3]=h(b[3],2,c.mode_ext),b[3]=h(b[3],1,a.copyright),b[3]=h(b[3],1,a.original),b[3]=h(b[3],2,a.emphasis),b[0]=255;var d,e=255&(241&b[1]);d=1==a.version?A:a.out_samplerate<16e3?C:B,a.VBR==l.vbr_off&&(d=a.brate);var f;f=a.free_format?0:255&16*o.BitrateIndex(d,a.version,a.out_samplerate),1==a.version?(b[1]=255&(10|e),e=255&(13&b[2]),b[2]=255&(f|e)):(b[1]=255&(2|e),e=255&(13&b[2]),b[2]=255&(f|e))}function j(a,b){var c=b^a;return b=b>>8^G[255&c]}function m(a,b,c,d,g){var h,i,l,m=a.internal_flags,n=0,o=a.encoder_delay,p=a.encoder_padding,r=100-10*a.VBR_q-a.quality,s=q.getLameVeryShortVersion(),t=0,u=[1,5,3,2,4,0,3],v=0|(a.lowpassfreq/100+.5>255?255:a.lowpassfreq/100+.5),w=0,x=0,y=0,z=a.internal_flags.noise_shaping,A=0,B=0,C=0,D=0,E=0,F=0!=(1&a.exp_nspsytune),G=0!=(2&a.exp_nspsytune),H=!1,I=!1,J=a.internal_flags.nogap_total,K=a.internal_flags.nogap_current,L=a.ATHtype,M=0;switch(a.VBR){case vbr_abr:l=a.VBR_mean_bitrate_kbps;break;case vbr_off:l=a.brate;break;default:l=a.VBR_min_bitrate_kbps}switch(h=a.VBR.ordinal()<u.length?u[a.VBR.ordinal()]:0,i=16*t+h,m.findReplayGain&&(m.RadioGain>510&&(m.RadioGain=510),m.RadioGain<-510&&(m.RadioGain=-510),x=8192,x|=3072,m.RadioGain>=0?x|=m.RadioGain:(x|=512,x|=-m.RadioGain)),m.findPeakSample&&(w=Math.abs(0|m.PeakSample/32767*Math.pow(2,23)+.5)),J!=-1&&(K>0&&(I=!0),K<J-1&&(H=!0)),M=L+((F?1:0)<<4)+((G?1:0)<<5)+((H?1:0)<<6)+((I?1:0)<<7),r<0&&(r=0),a.mode){case MONO:A=0;break;case STEREO:A=1;break;case DUAL_CHANNEL:A=2;break;case JOINT_STEREO:A=a.force_ms?4:3;break;case NOT_SET:default:A=7}C=a.in_samplerate<=32e3?0:48e3==a.in_samplerate?2:a.in_samplerate>48e3?3:1,(a.short_blocks==k.short_block_forced||a.short_blocks==k.short_block_dispensed||a.lowpassfreq==-1&&a.highpassfreq==-1||a.scale_left<a.scale_right||a.scale_left>a.scale_right||a.disable_reservoir&&a.brate<320||a.noATH||a.ATHonly||0==L||a.in_samplerate<=32e3)&&(B=1),D=z+(A<<2)+(B<<5)+(C<<6),E=m.nMusicCRC,e(c,d+n,r),n+=4;for(var N=0;N<9;N++)c[d+n+N]=255&s.charAt(N);n+=9,c[d+n]=255&i,n++,c[d+n]=255&v,n++,e(c,d+n,w),n+=4,f(c,d+n,x),n+=2,f(c,d+n,y),n+=2,c[d+n]=255&M,n++,l>=255?c[d+n]=255:c[d+n]=255&l,n++,c[d+n]=255&o>>4,c[d+n+1]=255&(o<<4)+(p>>8),c[d+n+2]=255&p,n+=3,c[d+n]=255&D,n++,c[d+n++]=0,f(c,d+n,a.preset),n+=2,e(c,d+n,b),n+=4,f(c,d+n,E),n+=2;for(var O=0;O<n;O++)g=j(c[d+O],g);return f(c,d+n,g),n+=2}function n(b){b.seek(0);var c=a(10);b.readFully(c);var d;return d=new String(c,"ISO-8859-1").startsWith("ID3")?0:((127&c[6])<<21|(127&c[7])<<14|(127&c[8])<<7|127&c[9])+c.length}var o,p,q;this.setModules=function(a,b,c){o=a,p=b,q=c};var r=1,s=2,u=4,v=8,w=t.NUMTOCENTRIES,x=t.MAXFRAMESIZE,y=w+4+4+4+4+4,z=y+9+1+1+8+1+1+3+1+1+2+4+2+2,A=128,B=64,C=32,D=null,E="Xing",F="Info",G=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.addVbrFrame=function(a){var c=a.internal_flags,d=ba.bitrate_table[a.version][c.bitrate_index];b(c.VBR_seek_table,d)},this.getVbrTag=function(a){var b=new VBRTagData,c=0;b.flags=0;var e=a[c+1]>>3&1,f=a[c+2]>>2&3,h=a[c+3]>>6&3,i=a[c+2]>>4&15;if(i=ba.bitrate_table[e][i],a[c+1]>>4==14?b.samprate=ba.samplerate_table[2][f]:b.samprate=ba.samplerate_table[e][f],c+=0!=e?3!=h?36:21:3!=h?21:13,!g(a,c))return null;c+=4,b.hId=e;var j=b.flags=d(a,c);if(c+=4,0!=(j&r)&&(b.frames=d(a,c),c+=4),0!=(j&s)&&(b.bytes=d(a,c),c+=4),0!=(j&u)){if(null!=b.toc)for(var k=0;k<w;k++)b.toc[k]=a[c+k];c+=w}b.vbrScale=-1,0!=(j&v)&&(b.vbrScale=d(a,c),c+=4),b.headersize=72e3*(e+1)*i/b.samprate,c+=21;var l=a[c+0]<<4;l+=a[c+1]>>4;var m=(15&a[c+1])<<8;return m+=255&a[c+2],(l<0||l>3e3)&&(l=-1),(m<0||m>3e3)&&(m=-1),b.encDelay=l,b.encPadding=m,b},this.InitVbrTag=function(b){var c,d=b.internal_flags;c=1==b.version?A:b.out_samplerate<16e3?C:B,b.VBR==l.vbr_off&&(c=b.brate);var e=72e3*(b.version+1)*c/b.out_samplerate,f=d.sideinfo_len+z;if(d.VBR_seek_table.TotalFrameSize=e,e<f||e>x)return void(b.bWriteVbrTag=!1);d.VBR_seek_table.nVbrNumFrames=0,d.VBR_seek_table.nBytesWritten=0,d.VBR_seek_table.sum=0,d.VBR_seek_table.seen=0,d.VBR_seek_table.want=1,d.VBR_seek_table.pos=0,null==d.VBR_seek_table.bag&&(d.VBR_seek_table.bag=new int[400],d.VBR_seek_table.size=400);var g=a(x);i(b,g);for(var h=d.VBR_seek_table.TotalFrameSize,j=0;j<h;++j)p.add_dummy_byte(b,255&g[j],1)},this.updateMusicCRC=function(a,b,c,d){for(var e=0;e<d;++e)a[0]=j(b[c+e],a[0])},this.getLameTagFrame=function(b,d){var f=b.internal_flags;if(!b.bWriteVbrTag)return 0;if(f.Class_ID!=R.LAME_ID)return 0;if(f.VBR_seek_table.pos<=0)return 0;if(d.length<f.VBR_seek_table.TotalFrameSize)return f.VBR_seek_table.TotalFrameSize;Z.fill(d,0,f.VBR_seek_table.TotalFrameSize,0),i(b,d);var g=a(w);if(b.free_format)for(var h=1;h<w;++h)g[h]=255&255*h/100;else c(f.VBR_seek_table,g);var k=f.sideinfo_len;b.error_protection&&(k-=2),b.VBR==l.vbr_off?(d[k++]=255&F.charAt(0),d[k++]=255&F.charAt(1),d[k++]=255&F.charAt(2),d[k++]=255&F.charAt(3)):(d[k++]=255&E.charAt(0),d[k++]=255&E.charAt(1),d[k++]=255&E.charAt(2),d[k++]=255&E.charAt(3)),e(d,k,r+s+u+v),k+=4,e(d,k,f.VBR_seek_table.nVbrNumFrames),k+=4;var n=f.VBR_seek_table.nBytesWritten+f.VBR_seek_table.TotalFrameSize;e(d,k,0|n),k+=4,$.arraycopy(g,0,d,k,g.length),k+=g.length,b.error_protection&&p.CRC_writeheader(f,d);for(var o=0,h=0;h<k;h++)o=j(d[h],o);return k+=m(b,n,d,k,o),f.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(b,c){var d=b.internal_flags;if(d.VBR_seek_table.pos<=0)return-1;if(c.seek(c.length()),0==c.length())return-1;var e=n(c);c.seek(e);var f=a(x),g=getLameTagFrame(b,f);return g>f.length?-1:g<1?0:(c.write(f,0,g),0)}}function u(a,b,c,d){this.xlen=a,this.linmax=b,this.table=c,this.hlen=d}function v(a){this.bits=a}function w(){var a,b;this.setModules=function(c,d){a=c,b=d}}function x(){this.over_noise=0,this.tot_noise=0,this.max_noise=0,this.over_count=0,this.over_SSD=0,this.bits=0}function y(){this.class_id=0,this.num_samples=0,this.num_channels=0,this.in_samplerate=0,this.out_samplerate=0,this.scale=0,this.scale_left=0,this.scale_right=0,this.analysis=!1,this.bWriteVbrTag=!1,this.decode_only=!1,this.quality=0,this.mode=m.STEREO,this.force_ms=!1,this.free_format=!1,this.findReplayGain=!1,this.decode_on_the_fly=!1,this.write_id3tag_automatic=!1,this.brate=0,this.compression_ratio=0,this.copyright=0,this.original=0,this.extension=0,this.emphasis=0,this.error_protection=0,this.strict_ISO=!1,this.disable_reservoir=!1,this.quant_comp=0,this.quant_comp_short=0,this.experimentalY=!1,this.experimentalZ=0,this.exp_nspsytune=0,this.preset=0,this.VBR=null,this.VBR_q_frac=0,this.VBR_q=0,this.VBR_mean_bitrate_kbps=0,this.VBR_min_bitrate_kbps=0,this.VBR_max_bitrate_kbps=0,this.VBR_hard_min=0,this.lowpassfreq=0,this.highpassfreq=0,this.lowpasswidth=0,this.highpasswidth=0,this.maskingadjust=0,this.maskingadjust_short=0,this.ATHonly=!1,this.ATHshort=!1,
this.noATH=!1,this.ATHtype=0,this.ATHcurve=0,this.ATHlower=0,this.athaa_type=0,this.athaa_loudapprox=0,this.athaa_sensitivity=0,this.short_blocks=null,this.useTemporal=!1,this.interChRatio=0,this.msfix=0,this.tune=!1,this.tune_value_a=0,this.version=0,this.encoder_delay=0,this.encoder_padding=0,this.framesize=0,this.frameNum=0,this.lame_allocated_gfp=0,this.internal_flags=null}function z(){this.useAdjust=0,this.aaSensitivityP=0,this.adjust=0,this.adjustLimit=0,this.decay=0,this.floor=0,this.l=e(J.SBMAX_l),this.s=e(J.SBMAX_s),this.psfb21=e(J.PSFB21),this.psfb12=e(J.PSFB12),this.cb_l=e(J.CBANDS),this.cb_s=e(J.CBANDS),this.eql_w=e(J.BLKSIZE/2)}function A(){this.linprebuf=e(2*p.MAX_ORDER),this.linpre=0,this.lstepbuf=e(p.MAX_SAMPLES_PER_WINDOW+p.MAX_ORDER),this.lstep=0,this.loutbuf=e(p.MAX_SAMPLES_PER_WINDOW+p.MAX_ORDER),this.lout=0,this.rinprebuf=e(2*p.MAX_ORDER),this.rinpre=0,this.rstepbuf=e(p.MAX_SAMPLES_PER_WINDOW+p.MAX_ORDER),this.rstep=0,this.routbuf=e(p.MAX_SAMPLES_PER_WINDOW+p.MAX_ORDER),this.rout=0,this.sampleWindow=0,this.totsamp=0,this.lsum=0,this.rsum=0,this.freqindex=0,this.first=0,this.A=d(0|p.STEPS_per_dB*p.MAX_dB),this.B=d(0|p.STEPS_per_dB*p.MAX_dB)}function B(a){var b=a;this.quantize=b,this.iteration_loop=function(a,b,c,f){var g,h=a.internal_flags,i=e(ca.SFBMAX),j=e(576),k=d(2),l=0,m=h.l3_side,n=new v(l);this.quantize.rv.ResvFrameBegin(a,n),l=n.bits;for(var o=0;o<h.mode_gr;o++){g=this.quantize.qupvt.on_pe(a,b,k,l,o,o),h.mode_ext==J.MPG_MD_MS_LR&&(this.quantize.ms_convert(h.l3_side,o),this.quantize.qupvt.reduce_side(k,c[o],l,g));for(var p=0;p<h.channels_out;p++){var q,r,s=m.tt[o][p];s.block_type!=J.SHORT_TYPE?(q=0,r=h.PSY.mask_adjust-q):(q=0,r=h.PSY.mask_adjust_short-q),h.masking_lower=Math.pow(10,.1*r),this.quantize.init_outer_loop(h,s),this.quantize.init_xrpow(h,s,j)&&(this.quantize.qupvt.calc_xmin(a,f[o][p],s,i),this.quantize.outer_loop(a,s,i,j,p,k[p])),this.quantize.iteration_finish_one(h,o,p)}}this.quantize.rv.ResvFrameEnd(h,l)}}function C(a,b,c,e){this.l=d(1+J.SBMAX_l),this.s=d(1+J.SBMAX_s),this.psfb21=d(1+J.PSFB21),this.psfb12=d(1+J.PSFB12);var f=this.l,g=this.s;4==arguments.length&&(this.arrL=arguments[0],this.arrS=arguments[1],this.arr21=arguments[2],this.arr12=arguments[3],$.arraycopy(this.arrL,0,f,0,Math.min(this.arrL.length,this.l.length)),$.arraycopy(this.arrS,0,g,0,Math.min(this.arrS.length,this.s.length)),$.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),$.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function D(){function a(a){return r[a+D.Q_MAX2]}function b(a,b){var c=i.ATHformula(b,a);return c-=p,c=Math.pow(10,c/10+a.ATHlower)}function c(a){for(var c=a.internal_flags.ATH.l,d=a.internal_flags.ATH.psfb21,e=a.internal_flags.ATH.s,f=a.internal_flags.ATH.psfb12,g=a.internal_flags,h=a.out_samplerate,i=0;i<J.SBMAX_l;i++){var j=g.scalefac_band.l[i],k=g.scalefac_band.l[i+1];c[i]=aa.MAX_VALUE;for(var l=j;l<k;l++){var m=l*h/1152,n=b(a,m);c[i]=Math.min(c[i],n)}}for(var i=0;i<J.PSFB21;i++){var j=g.scalefac_band.psfb21[i],k=g.scalefac_band.psfb21[i+1];d[i]=aa.MAX_VALUE;for(var l=j;l<k;l++){var m=l*h/1152,n=b(a,m);d[i]=Math.min(d[i],n)}}for(var i=0;i<J.SBMAX_s;i++){var j=g.scalefac_band.s[i],k=g.scalefac_band.s[i+1];e[i]=aa.MAX_VALUE;for(var l=j;l<k;l++){var m=l*h/384,n=b(a,m);e[i]=Math.min(e[i],n)}e[i]*=g.scalefac_band.s[i+1]-g.scalefac_band.s[i]}for(var i=0;i<J.PSFB12;i++){var j=g.scalefac_band.psfb12[i],k=g.scalefac_band.psfb12[i+1];f[i]=aa.MAX_VALUE;for(var l=j;l<k;l++){var m=l*h/384,n=b(a,m);f[i]=Math.min(f[i],n)}f[i]*=g.scalefac_band.s[13]-g.scalefac_band.s[12]}if(a.noATH){for(var i=0;i<J.SBMAX_l;i++)c[i]=1e-20;for(var i=0;i<J.PSFB21;i++)d[i]=1e-20;for(var i=0;i<J.SBMAX_s;i++)e[i]=1e-20;for(var i=0;i<J.PSFB12;i++)f[i]=1e-20}g.ATH.floor=10*Math.log10(b(a,-1))}function f(a){this.s=a}var g=null,h=null,i=null;this.setModules=function(a,b,c){g=a,h=b,i=c},this.IPOW20=function(a){return t[a]};var j=2.220446049250313e-16,k=D.IXMAX_VAL,m=k+2,n=D.Q_MAX,o=D.Q_MAX2,p=(D.LARGE_BITS,100);this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var q=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=q,this.sfBandIndex=[new C([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new C([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new C([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new C([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new C([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new C([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new C([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new C([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new C([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var r=e(n+o+1),t=e(n),u=e(m),w=e(m);this.adj43=w,this.iteration_init=function(a){var b,d=a.internal_flags,e=d.l3_side;if(0==d.iteration_init_init){for(d.iteration_init_init=1,e.main_data_begin=0,c(a),u[0]=0,b=1;b<m;b++)u[b]=Math.pow(b,4/3);for(b=0;b<m-1;b++)w[b]=b+1-Math.pow(.5*(u[b]+u[b+1]),.75);for(w[b]=.5,b=0;b<n;b++)t[b]=Math.pow(2,(b-210)*-.1875);for(b=0;b<=n+o;b++)r[b]=Math.pow(2,.25*(b-210-o));g.huffman_init(d);var f,h,i,j;for(b=a.exp_nspsytune>>2&63,b>=32&&(b-=64),f=Math.pow(10,b/4/10),b=a.exp_nspsytune>>8&63,b>=32&&(b-=64),h=Math.pow(10,b/4/10),b=a.exp_nspsytune>>14&63,b>=32&&(b-=64),i=Math.pow(10,b/4/10),b=a.exp_nspsytune>>20&63,b>=32&&(b-=64),j=i*Math.pow(10,b/4/10),b=0;b<J.SBMAX_l;b++){var k;k=b<=6?f:b<=13?h:b<=20?i:j,d.nsPsy.longfact[b]=k}for(b=0;b<J.SBMAX_s;b++){var k;k=b<=5?f:b<=10?h:b<=11?i:j,d.nsPsy.shortfact[b]=k}}},this.on_pe=function(a,b,c,e,f,g){var i,j,k=a.internal_flags,l=0,m=d(2),n=new v(l),o=h.ResvMaxBits(a,e,n,g);l=n.bits;var p=l+o;for(p>O.MAX_BITS_PER_GRANULE&&(p=O.MAX_BITS_PER_GRANULE),i=0,j=0;j<k.channels_out;++j)c[j]=Math.min(O.MAX_BITS_PER_CHANNEL,l/k.channels_out),m[j]=0|c[j]*b[f][j]/700-c[j],m[j]>3*e/4&&(m[j]=3*e/4),m[j]<0&&(m[j]=0),m[j]+c[j]>O.MAX_BITS_PER_CHANNEL&&(m[j]=Math.max(0,O.MAX_BITS_PER_CHANNEL-c[j])),i+=m[j];if(i>o)for(j=0;j<k.channels_out;++j)m[j]=o*m[j]/i;for(j=0;j<k.channels_out;++j)c[j]+=m[j],o-=m[j];for(i=0,j=0;j<k.channels_out;++j)i+=c[j];if(i>O.MAX_BITS_PER_GRANULE){var q=0;for(j=0;j<k.channels_out;++j)c[j]*=O.MAX_BITS_PER_GRANULE,c[j]/=i,q+=c[j]}return p},this.reduce_side=function(a,b,c,d){var e=.33*(.5-b)/.5;e<0&&(e=0),e>.5&&(e=.5);var f=0|.5*e*(a[0]+a[1]);f>O.MAX_BITS_PER_CHANNEL-a[0]&&(f=O.MAX_BITS_PER_CHANNEL-a[0]),f<0&&(f=0),a[1]>=125&&(a[1]-f>125?(a[0]<c&&(a[0]+=f),a[1]-=f):(a[0]+=a[1]-125,a[1]=125)),f=a[0]+a[1],f>d&&(a[0]=d*a[0]/f,a[1]=d*a[1]/f)},this.athAdjust=function(a,b,c){var d=90.30873362,e=94.82444863,f=_.FAST_LOG10_X(b,10),g=a*a,h=0;return f-=c,g>1e-20&&(h=1+_.FAST_LOG10_X(g,10/d)),h<0&&(h=0),f*=h,f+=c+d-e,Math.pow(10,.1*f)},this.calc_xmin=function(a,b,c,d){var e,f=0,g=a.internal_flags,h=0,i=0,k=g.ATH,m=c.xr,n=a.VBR==l.vbr_mtrh?1:0,o=g.masking_lower;for(a.VBR!=l.vbr_mtrh&&a.VBR!=l.vbr_mt||(o=1),e=0;e<c.psy_lmax;e++){var p,q,r,t,u,v;q=a.VBR==l.vbr_rh||a.VBR==l.vbr_mtrh?athAdjust(k.adjust,k.l[e],k.floor):k.adjust*k.l[e],u=c.width[e],r=q/u,t=j,v=u>>1,p=0;do{var w,x;w=m[h]*m[h],p+=w,t+=w<r?w:r,h++,x=m[h]*m[h],p+=x,t+=x<r?x:r,h++}while(--v>0);if(p>q&&i++,e==J.SBPSY_l){var y=q*g.nsPsy.longfact[e];t<y&&(t=y)}if(0!=n&&(q=t),!a.ATHonly){var z=b.en.l[e];if(z>0){var y;y=p*b.thm.l[e]*o/z,0!=n&&(y*=g.nsPsy.longfact[e]),q<y&&(q=y)}}0!=n?d[f++]=q:d[f++]=q*g.nsPsy.longfact[e]}var A=575;if(c.block_type!=J.SHORT_TYPE)for(var B=576;0!=B--&&s.EQ(m[B],0);)A=B;c.max_nonzero_coeff=A;for(var C=c.sfb_smin;e<c.psymax;C++,e+=3){var u,D,E;for(E=a.VBR==l.vbr_rh||a.VBR==l.vbr_mtrh?athAdjust(k.adjust,k.s[C],k.floor):k.adjust*k.s[C],u=c.width[e],D=0;D<3;D++){var q,r,t,p=0,v=u>>1;r=E/u,t=j;do{var w,x;w=m[h]*m[h],p+=w,t+=w<r?w:r,h++,x=m[h]*m[h],p+=x,t+=x<r?x:r,h++}while(--v>0);if(p>E&&i++,C==J.SBPSY_s){var y=E*g.nsPsy.shortfact[C];t<y&&(t=y)}if(q=0!=n?t:E,!a.ATHonly&&!a.ATHshort){var z=b.en.s[C][D];if(z>0){var y;y=p*b.thm.s[C][D]*o/z,0!=n&&(y*=g.nsPsy.shortfact[C]),q<y&&(q=y)}}0!=n?d[f++]=q:d[f++]=q*g.nsPsy.shortfact[C]}a.useTemporal&&(d[f-3]>d[f-3+1]&&(d[f-3+1]+=(d[f-3]-d[f-3+1])*g.decay),d[f-3+1]>d[f-3+2]&&(d[f-3+2]+=(d[f-3+1]-d[f-3+2])*g.decay))}return i},this.calc_noise_core=function(a,b,c,d){var f=0,g=b.s,h=a.l3_enc;if(g>a.count1)for(;0!=c--;){var i;i=a.xr[g],g++,f+=i*i,i=a.xr[g],g++,f+=i*i}else if(g>a.big_values){var j=e(2);for(j[0]=0,j[1]=d;0!=c--;){var i;i=Math.abs(a.xr[g])-j[h[g]],g++,f+=i*i,i=Math.abs(a.xr[g])-j[h[g]],g++,f+=i*i}}else for(;0!=c--;){var i;i=Math.abs(a.xr[g])-u[h[g]]*d,g++,f+=i*i,i=Math.abs(a.xr[g])-u[h[g]]*d,g++,f+=i*i}return b.s=g,f},this.calc_noise=function(b,c,d,e,g){var h,i,j=0,k=0,l=0,m=0,n=0,o=-20,p=0,r=b.scalefac,s=0;for(e.over_SSD=0,h=0;h<b.psymax;h++){var t=b.global_gain-(r[s++]+(0!=b.preflag?q[h]:0)<<b.scalefac_scale+1)-8*b.subblock_gain[b.window[h]],u=0;if(null!=g&&g.step[h]==t)u=g.noise[h],p+=b.width[h],d[j++]=u/c[k++],u=g.noise_log[h];else{var v=a(t);if(i=b.width[h]>>1,p+b.width[h]>b.max_nonzero_coeff){var w;w=b.max_nonzero_coeff-p+1,i=w>0?w>>1:0}var x=new f(p);u=this.calc_noise_core(b,x,i,v),p=x.s,null!=g&&(g.step[h]=t,g.noise[h]=u),u=d[j++]=u/c[k++],u=_.FAST_LOG10(Math.max(u,1e-20)),null!=g&&(g.noise_log[h]=u)}if(null!=g&&(g.global_gain=b.global_gain),n+=u,u>0){var y;y=Math.max(0|10*u+.5,1),e.over_SSD+=y*y,l++,m+=u}o=Math.max(o,u)}return e.over_count=l,e.tot_noise=n,e.over_noise=m,e.max_noise=o,l},this.set_pinfo=function(a,b,c,d,f){var g,h,i,j,k,l=a.internal_flags,m=0==b.scalefac_scale?.5:1,n=b.scalefac,o=e(ca.SFBMAX),p=e(ca.SFBMAX),r=new x;calc_xmin(a,c,b,o),calc_noise(b,o,p,r,null);var s=0;for(h=b.sfb_lmax,b.block_type!=J.SHORT_TYPE&&0==b.mixed_block_flag&&(h=22),g=0;g<h;g++){var t=l.scalefac_band.l[g],u=l.scalefac_band.l[g+1],v=u-t;for(j=0;s<u;s++)j+=b.xr[s]*b.xr[s];j/=v,k=1e15,l.pinfo.en[d][f][g]=k*j,l.pinfo.xfsf[d][f][g]=k*o[g]*p[g]/v,c.en.l[g]>0&&!a.ATHonly?j/=c.en.l[g]:j=0,l.pinfo.thr[d][f][g]=k*Math.max(j*c.thm.l[g],l.ATH.l[g]),l.pinfo.LAMEsfb[d][f][g]=0,0!=b.preflag&&g>=11&&(l.pinfo.LAMEsfb[d][f][g]=-m*q[g]),g<J.SBPSY_l&&(l.pinfo.LAMEsfb[d][f][g]-=m*n[g])}if(b.block_type==J.SHORT_TYPE)for(h=g,g=b.sfb_smin;g<J.SBMAX_s;g++)for(var t=l.scalefac_band.s[g],u=l.scalefac_band.s[g+1],v=u-t,w=0;w<3;w++){for(j=0,i=t;i<u;i++)j+=b.xr[s]*b.xr[s],s++;j=Math.max(j/v,1e-20),k=1e15,l.pinfo.en_s[d][f][3*g+w]=k*j,l.pinfo.xfsf_s[d][f][3*g+w]=k*o[h]*p[h]/v,c.en.s[g][w]>0?j/=c.en.s[g][w]:j=0,(a.ATHonly||a.ATHshort)&&(j=0),l.pinfo.thr_s[d][f][3*g+w]=k*Math.max(j*c.thm.s[g][w],l.ATH.s[g]),l.pinfo.LAMEsfb_s[d][f][3*g+w]=-2*b.subblock_gain[w],g<J.SBPSY_s&&(l.pinfo.LAMEsfb_s[d][f][3*g+w]-=m*n[h]),h++}l.pinfo.LAMEqss[d][f]=b.global_gain,l.pinfo.LAMEmainbits[d][f]=b.part2_3_length+b.part2_length,l.pinfo.LAMEsfbits[d][f]=b.part2_length,l.pinfo.over[d][f]=r.over_count,l.pinfo.max_noise[d][f]=10*r.max_noise,l.pinfo.over_noise[d][f]=10*r.over_noise,l.pinfo.tot_noise[d][f]=10*r.tot_noise,l.pinfo.over_SSD[d][f]=r.over_SSD}}function E(){function a(a){return new Int32Array(a)}function b(a){return new Float32Array(a)}this.xr=e(576),this.l3_enc=d(576),this.scalefac=d(ca.SFBMAX),this.xrpow_max=0,this.part2_3_length=0,this.big_values=0,this.count1=0,this.global_gain=0,this.scalefac_compress=0,this.block_type=0,this.mixed_block_flag=0,this.table_select=d(3),this.subblock_gain=d(4),this.region0_count=0,this.region1_count=0,this.preflag=0,this.scalefac_scale=0,this.count1table_select=0,this.part2_length=0,this.sfb_lmax=0,this.sfb_smin=0,this.psy_lmax=0,this.sfbmax=0,this.psymax=0,this.sfbdivide=0,this.width=d(ca.SFBMAX),this.window=d(ca.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=d(4),this.max_nonzero_coeff=0;var c=this;this.assign=function(d){c.xr=b(d.xr),c.l3_enc=a(d.l3_enc),c.scalefac=a(d.scalefac),c.xrpow_max=d.xrpow_max,c.part2_3_length=d.part2_3_length,c.big_values=d.big_values,c.count1=d.count1,c.global_gain=d.global_gain,c.scalefac_compress=d.scalefac_compress,c.block_type=d.block_type,c.mixed_block_flag=d.mixed_block_flag,c.table_select=a(d.table_select),c.subblock_gain=a(d.subblock_gain),c.region0_count=d.region0_count,c.region1_count=d.region1_count,c.preflag=d.preflag,c.scalefac_scale=d.scalefac_scale,c.count1table_select=d.count1table_select,c.part2_length=d.part2_length,c.sfb_lmax=d.sfb_lmax,c.sfb_smin=d.sfb_smin,c.psy_lmax=d.psy_lmax,c.sfbmax=d.sfbmax,c.psymax=d.psymax,c.sfbdivide=d.sfbdivide,c.width=a(d.width),c.window=a(d.window),c.count1bits=d.count1bits,c.sfb_partition_table=d.sfb_partition_table.slice(0),c.slen=a(d.slen),c.max_nonzero_coeff=d.max_nonzero_coeff}}function F(){this.global_gain=0,this.sfb_count1=0,this.step=d(39),this.noise=e(39),this.noise_log=e(39)}function G(){function a(a,b,c,d){d=0;for(var e=0;e<=c;++e){var f=Math.abs(a.xr[e]);d+=f,b[e]=Math.sqrt(f*Math.sqrt(f)),b[e]>a.xrpow_max&&(a.xrpow_max=b[e])}return d}function b(a,b){var c=a.ATH,d=b.xr;if(b.block_type!=J.SHORT_TYPE)for(var e=!1,f=J.PSFB21-1;f>=0&&!e;f--){var g=a.scalefac_band.psfb21[f],h=a.scalefac_band.psfb21[f+1],i=q.athAdjust(c.adjust,c.psfb21[f],c.floor);a.nsPsy.longfact[21]>1e-12&&(i*=a.nsPsy.longfact[21]);for(var j=h-1;j>=g;j--){if(!(Math.abs(d[j])<i)){e=!0;break}d[j]=0}}else for(var k=0;k<3;k++)for(var e=!1,f=J.PSFB12-1;f>=0&&!e;f--){var g=3*a.scalefac_band.s[12]+(a.scalefac_band.s[13]-a.scalefac_band.s[12])*k+(a.scalefac_band.psfb12[f]-a.scalefac_band.psfb12[0]),h=g+(a.scalefac_band.psfb12[f+1]-a.scalefac_band.psfb12[f]),l=q.athAdjust(c.adjust,c.psfb12[f],c.floor);a.nsPsy.shortfact[12]>1e-12&&(l*=a.nsPsy.shortfact[12]);for(var j=h-1;j>=g;j--){if(!(Math.abs(d[j])<l)){e=!0;break}d[j]=0}}}function c(a){this.ordinal=a}function d(a,b,d,e,f){var g,h=a.CurrentStep[e],i=!1,j=a.OldValue[e],k=c.BINSEARCH_NONE;for(b.global_gain=j,d-=b.part2_length;;){var l;if(g=r.count_bits(a,f,b,null),1==h||g==d)break;g>d?(k==c.BINSEARCH_DOWN&&(i=!0),i&&(h/=2),k=c.BINSEARCH_UP,l=h):(k==c.BINSEARCH_UP&&(i=!0),i&&(h/=2),k=c.BINSEARCH_DOWN,l=-h),b.global_gain+=l,b.global_gain<0&&(b.global_gain=0,i=!0),b.global_gain>255&&(b.global_gain=255,i=!0)}for(;g>d&&b.global_gain<255;)b.global_gain++,g=r.count_bits(a,f,b,null);return a.CurrentStep[e]=j-b.global_gain>=4?4:2,a.OldValue[e]=b.global_gain,b.part2_3_length=g,g}function f(a){for(var b=0;b<a.sfbmax;b++)if(a.scalefac[b]+a.subblock_gain[a.window[b]]==0)return!1;return!0}function g(a){return _.FAST_LOG10(.368+.632*a*a*a)}function h(a,b){for(var c=1e-37,d=0;d<b.psymax;d++)c+=g(a[d]);return Math.max(1e-20,c)}function i(a,b,c,d,e){var f;switch(a){default:case 9:b.over_count>0?(f=c.over_SSD<=b.over_SSD,c.over_SSD==b.over_SSD&&(f=c.bits<b.bits)):f=c.max_noise<0&&10*c.max_noise+c.bits<=10*b.max_noise+b.bits;break;case 0:f=c.over_count<b.over_count||c.over_count==b.over_count&&c.over_noise<b.over_noise||c.over_count==b.over_count&&s.EQ(c.over_noise,b.over_noise)&&c.tot_noise<b.tot_noise;break;case 8:c.max_noise=h(e,d);case 1:f=c.max_noise<b.max_noise;break;case 2:f=c.tot_noise<b.tot_noise;break;case 3:f=c.tot_noise<b.tot_noise&&c.max_noise<b.max_noise;break;case 4:f=c.max_noise<=0&&b.max_noise>.2||c.max_noise<=0&&b.max_noise<0&&b.max_noise>c.max_noise-.2&&c.tot_noise<b.tot_noise||c.max_noise<=0&&b.max_noise>0&&b.max_noise>c.max_noise-.2&&c.tot_noise<b.tot_noise+b.over_noise||c.max_noise>0&&b.max_noise>-.05&&b.max_noise>c.max_noise-.1&&c.tot_noise+c.over_noise<b.tot_noise+b.over_noise||c.max_noise>0&&b.max_noise>-.1&&b.max_noise>c.max_noise-.15&&c.tot_noise+c.over_noise+c.over_noise<b.tot_noise+b.over_noise+b.over_noise;break;case 5:f=c.over_noise<b.over_noise||s.EQ(c.over_noise,b.over_noise)&&c.tot_noise<b.tot_noise;break;case 6:f=c.over_noise<b.over_noise||s.EQ(c.over_noise,b.over_noise)&&(c.max_noise<b.max_noise||s.EQ(c.max_noise,b.max_noise)&&c.tot_noise<=b.tot_noise);break;case 7:f=c.over_count<b.over_count||c.over_noise<b.over_noise}return 0==b.over_count&&(f=f&&c.bits<b.bits),f}function j(a,b,c,d,e){var f,g=a.internal_flags;f=0==b.scalefac_scale?1.2968395546510096:1.6817928305074292;for(var h=0,i=0;i<b.sfbmax;i++)h<c[i]&&(h=c[i]);var j=g.noise_shaping_amp;switch(3==j&&(j=e?2:1),j){case 2:break;case 1:h>1?h=Math.pow(h,.5):h*=.95;break;case 0:default:h>1?h=1:h*=.95}for(var k=0,i=0;i<b.sfbmax;i++){var l,m=b.width[i];if(k+=m,!(c[i]<h)){if(0!=(2&g.substep_shaping)&&(g.pseudohalf[i]=0==g.pseudohalf[i]?1:0,0==g.pseudohalf[i]&&2==g.noise_shaping_amp))return;for(b.scalefac[i]++,l=-m;l<0;l++)d[k+l]*=f,d[k+l]>b.xrpow_max&&(b.xrpow_max=d[k+l]);if(2==g.noise_shaping_amp)return}}}function k(a,b){for(var c=1.2968395546510096,d=0,e=0;e<a.sfbmax;e++){var f=a.width[e],g=a.scalefac[e];if(0!=a.preflag&&(g+=q.pretab[e]),d+=f,0!=(1&g)){g++;for(var h=-f;h<0;h++)b[d+h]*=c,b[d+h]>a.xrpow_max&&(a.xrpow_max=b[d+h])}a.scalefac[e]=g>>1}a.preflag=0,a.scalefac_scale=1}function m(a,b,c){var d,e=b.scalefac;for(d=0;d<b.sfb_lmax;d++)if(e[d]>=16)return!0;for(var f=0;f<3;f++){var g=0,h=0;for(d=b.sfb_lmax+f;d<b.sfbdivide;d+=3)g<e[d]&&(g=e[d]);for(;d<b.sfbmax;d+=3)h<e[d]&&(h=e[d]);if(!(g<16&&h<8)){if(b.subblock_gain[f]>=7)return!0;b.subblock_gain[f]++;var i=a.scalefac_band.l[b.sfb_lmax];for(d=b.sfb_lmax+f;d<b.sfbmax;d+=3){var j,k=b.width[d],l=e[d];if(l-=4>>b.scalefac_scale,l>=0)e[d]=l,i+=3*k;else{e[d]=0;var m=210+(l<<b.scalefac_scale+1);j=q.IPOW20(m),i+=k*(f+1);for(var n=-k;n<0;n++)c[i+n]*=j,c[i+n]>b.xrpow_max&&(b.xrpow_max=c[i+n]);i+=k*(3-f-1)}}var j=q.IPOW20(202);i+=b.width[d]*(f+1);for(var n=-b.width[d];n<0;n++)c[i+n]*=j,c[i+n]>b.xrpow_max&&(b.xrpow_max=c[i+n])}}return!1}function n(a,b,c,d,e){var g=a.internal_flags;j(a,b,c,d,e);var h=f(b);return!h&&(!(h=2==g.mode_gr?r.scale_bitcount(b):r.scale_bitcount_lsf(g,b))||(g.noise_shaping>1&&(Z.fill(g.pseudohalf,0),0==b.scalefac_scale?(k(b,d),h=!1):b.block_type==J.SHORT_TYPE&&g.subblock_gain>0&&(h=m(g,b,d)||f(b))),h||(h=2==g.mode_gr?r.scale_bitcount(b):r.scale_bitcount_lsf(g,b)),!h))}var o;this.rv=null;var p;this.qupvt=null;var q,r,t=new w;this.setModules=function(a,b,c,d){o=a,p=b,this.rv=b,q=c,this.qupvt=c,r=d,t.setModules(q,r)},this.ms_convert=function(a,b){for(var c=0;c<576;++c){var d=a.tt[b][0].xr[c],e=a.tt[b][1].xr[c];a.tt[b][0].xr[c]=(d+e)*(.5*_.SQRT2),a.tt[b][1].xr[c]=(d-e)*(.5*_.SQRT2)}},this.init_xrpow=function(b,c,d){var e=0,f=0|c.max_nonzero_coeff;if(c.xrpow_max=0,Z.fill(d,f,576,0),e=a(c,d,f,e),e>1e-20){var g=0;0!=(2&b.substep_shaping)&&(g=1);for(var h=0;h<c.psymax;h++)b.pseudohalf[h]=g;return!0}return Z.fill(c.l3_enc,0,576,0),!1},this.init_outer_loop=function(a,c){c.part2_3_length=0,c.big_values=0,c.count1=0,c.global_gain=210,c.scalefac_compress=0,c.table_select[0]=0,c.table_select[1]=0,c.table_select[2]=0,c.subblock_gain[0]=0,c.subblock_gain[1]=0,c.subblock_gain[2]=0,c.subblock_gain[3]=0,c.region0_count=0,c.region1_count=0,c.preflag=0,c.scalefac_scale=0,c.count1table_select=0,c.part2_length=0,c.sfb_lmax=J.SBPSY_l,c.sfb_smin=J.SBPSY_s,c.psy_lmax=a.sfb21_extra?J.SBMAX_l:J.SBPSY_l,c.psymax=c.psy_lmax,c.sfbmax=c.sfb_lmax,c.sfbdivide=11;for(var d=0;d<J.SBMAX_l;d++)c.width[d]=a.scalefac_band.l[d+1]-a.scalefac_band.l[d],c.window[d]=3;if(c.block_type==J.SHORT_TYPE){var f=e(576);c.sfb_smin=0,c.sfb_lmax=0,0!=c.mixed_block_flag&&(c.sfb_smin=3,c.sfb_lmax=2*a.mode_gr+4),c.psymax=c.sfb_lmax+3*((a.sfb21_extra?J.SBMAX_s:J.SBPSY_s)-c.sfb_smin),c.sfbmax=c.sfb_lmax+3*(J.SBPSY_s-c.sfb_smin),c.sfbdivide=c.sfbmax-18,c.psy_lmax=c.sfb_lmax;var g=a.scalefac_band.l[c.sfb_lmax];$.arraycopy(c.xr,0,f,0,576);for(var d=c.sfb_smin;d<J.SBMAX_s;d++)for(var h=a.scalefac_band.s[d],i=a.scalefac_band.s[d+1],j=0;j<3;j++)for(var k=h;k<i;k++)c.xr[g++]=f[3*k+j];for(var l=c.sfb_lmax,d=c.sfb_smin;d<J.SBMAX_s;d++)c.width[l]=c.width[l+1]=c.width[l+2]=a.scalefac_band.s[d+1]-a.scalefac_band.s[d],c.window[l]=0,c.window[l+1]=1,c.window[l+2]=2,l+=3}c.count1bits=0,c.sfb_partition_table=q.nr_of_sfb_block[0][0],c.slen[0]=0,c.slen[1]=0,c.slen[2]=0,c.slen[3]=0,c.max_nonzero_coeff=575,Z.fill(c.scalefac,0),b(a,c)},c.BINSEARCH_NONE=new c(0),c.BINSEARCH_UP=new c(1),c.BINSEARCH_DOWN=new c(2),this.trancate_smallspectrums=function(a,b,c,d){var f=e(ca.SFBMAX);if((0!=(4&a.substep_shaping)||b.block_type!=J.SHORT_TYPE)&&0==(128&a.substep_shaping)){q.calc_noise(b,c,f,new x,null);for(var g=0;g<576;g++){var h=0;0!=b.l3_enc[g]&&(h=Math.abs(b.xr[g])),d[g]=h}var g=0,i=8;b.block_type==J.SHORT_TYPE&&(i=6);do{var j,k,l,m,n=b.width[i];if(g+=n,!(f[i]>=1||(Z.sort(d,g-n,n),s.EQ(d[g-1],0)))){j=(1-f[i])*c[i],k=0,m=0;do{var o;for(l=1;m+l<n&&!s.NEQ(d[m+g-n],d[m+g+l-n]);l++);if(o=d[m+g-n]*d[m+g-n]*l,j<o){0!=m&&(k=d[m+g-n-1]);break}j-=o,m+=l}while(m<n);if(!s.EQ(k,0))do Math.abs(b.xr[g-n])<=k&&(b.l3_enc[g-n]=0);while(--n>0)}}while(++i<b.psymax);b.part2_3_length=r.noquant_count_bits(a,b,null)}},this.outer_loop=function(a,b,c,f,g,h){var j,k=a.internal_flags,m=new E,o=e(576),p=e(ca.SFBMAX),s=new x,t=new F,u=9999999,v=!1,w=!1,y=0;if(d(k,b,h,g,f),0==k.noise_shaping)return 100;q.calc_noise(b,c,p,s,t),s.bits=b.part2_3_length,m.assign(b);var z=0;for($.arraycopy(f,0,o,0,576);!v;){do{var A,B=new x,C=255;if(A=0!=(2&k.substep_shaping)?20:3,k.sfb21_extra){if(p[m.sfbmax]>1)break;if(m.block_type==J.SHORT_TYPE&&(p[m.sfbmax+1]>1||p[m.sfbmax+2]>1))break}if(!n(a,m,p,f,w))break;0!=m.scalefac_scale&&(C=254);var D=h-m.part2_length;if(D<=0)break;for(;(m.part2_3_length=r.count_bits(k,f,m,t))>D&&m.global_gain<=C;)m.global_gain++;if(m.global_gain>C)break;if(0==s.over_count){for(;(m.part2_3_length=r.count_bits(k,f,m,t))>u&&m.global_gain<=C;)m.global_gain++;if(m.global_gain>C)break}if(q.calc_noise(m,c,p,B,t),B.bits=m.part2_3_length,j=b.block_type!=J.SHORT_TYPE?a.quant_comp:a.quant_comp_short,j=i(j,s,B,m,p)?1:0,0!=j)u=b.part2_3_length,s=B,b.assign(m),z=0,$.arraycopy(f,0,o,0,576);else if(0==k.full_outer_loop){if(++z>A&&0==s.over_count)break;if(3==k.noise_shaping_amp&&w&&z>30)break;if(3==k.noise_shaping_amp&&w&&m.global_gain-y>15)break}}while(m.global_gain+m.scalefac_scale<255);3==k.noise_shaping_amp?w?v=!0:(m.assign(b),$.arraycopy(o,0,f,0,576),z=0,y=m.global_gain,w=!0):v=!0}return a.VBR==l.vbr_rh||a.VBR==l.vbr_mtrh?$.arraycopy(o,0,f,0,576):0!=(1&k.substep_shaping)&&trancate_smallspectrums(k,b,c,f),s.over_count},this.iteration_finish_one=function(a,b,c){var d=a.l3_side,e=d.tt[b][c];r.best_scalefac_store(a,b,c,d),1==a.use_best_huffman&&r.best_huffman_divide(a,e),p.ResvAdjust(a,e)},this.VBR_encode_granule=function(a,b,c,d,f,g,h){var i,j,k=a.internal_flags,l=new E,m=e(576),n=h,o=h+1,p=(h+g)/2,q=0,r=k.sfb21_extra;Z.fill(l.l3_enc,0);do p>n-42?k.sfb21_extra=!1:k.sfb21_extra=r,j=outer_loop(a,b,c,d,f,p),j<=0?(q=1,o=b.part2_3_length,l.assign(b),$.arraycopy(d,0,m,0,576),h=o-32,i=h-g,p=(h+g)/2):(g=p+32,i=h-g,p=(h+g)/2,0!=q&&(q=2,b.assign(l),$.arraycopy(m,0,d,0,576)));while(i>12);k.sfb21_extra=r,2==q&&$.arraycopy(l.l3_enc,0,b.l3_enc,0,576)},this.get_framebits=function(a,b){var c=a.internal_flags;c.bitrate_index=c.VBR_min_bitrate;var d=o.getframebits(a);c.bitrate_index=1,d=o.getframebits(a);for(var e=1;e<=c.VBR_max_bitrate;e++){c.bitrate_index=e;var f=new v(d);b[e]=p.ResvFrameBegin(a,f),d=f.bits}},this.VBR_old_prepare=function(a,b,c,d,e,f,g,h,i){var j,k=a.internal_flags,l=0,m=1,n=0;k.bitrate_index=k.VBR_max_bitrate;var o=p.ResvFrameBegin(a,new v(0))/k.mode_gr;get_framebits(a,f);for(var r=0;r<k.mode_gr;r++){var s=q.on_pe(a,b,h[r],o,r,0);k.mode_ext==J.MPG_MD_MS_LR&&(ms_convert(k.l3_side,r),q.reduce_side(h[r],c[r],o,s));for(var t=0;t<k.channels_out;++t){var u=k.l3_side.tt[r][t];u.block_type!=J.SHORT_TYPE?(l=1.28/(1+Math.exp(3.5-b[r][t]/300))-.05,j=k.PSY.mask_adjust-l):(l=2.56/(1+Math.exp(3.5-b[r][t]/300))-.14,j=k.PSY.mask_adjust_short-l),k.masking_lower=Math.pow(10,.1*j),init_outer_loop(k,u),i[r][t]=q.calc_xmin(a,d[r][t],u,e[r][t]),0!=i[r][t]&&(m=0),g[r][t]=126,n+=h[r][t]}}for(var r=0;r<k.mode_gr;r++)for(var t=0;t<k.channels_out;t++)n>f[k.VBR_max_bitrate]&&(h[r][t]*=f[k.VBR_max_bitrate],h[r][t]/=n),g[r][t]>h[r][t]&&(g[r][t]=h[r][t]);return m},this.bitpressure_strategy=function(a,b,c,d){for(var e=0;e<a.mode_gr;e++)for(var f=0;f<a.channels_out;f++){for(var g=a.l3_side.tt[e][f],h=b[e][f],i=0,j=0;j<g.psy_lmax;j++)h[i++]*=1+.029*j*j/J.SBMAX_l/J.SBMAX_l;if(g.block_type==J.SHORT_TYPE)for(var j=g.sfb_smin;j<J.SBMAX_s;j++)h[i++]*=1+.029*j*j/J.SBMAX_s/J.SBMAX_s,h[i++]*=1+.029*j*j/J.SBMAX_s/J.SBMAX_s,h[i++]*=1+.029*j*j/J.SBMAX_s/J.SBMAX_s;d[e][f]=0|Math.max(c[e][f],.9*d[e][f])}},this.VBR_new_prepare=function(a,b,c,d,e,f){var g,h=a.internal_flags,i=1,j=0,k=0;if(a.free_format){h.bitrate_index=0;var l=new v(j);g=p.ResvFrameBegin(a,l),j=l.bits,e[0]=g}else{h.bitrate_index=h.VBR_max_bitrate;var l=new v(j);p.ResvFrameBegin(a,l),j=l.bits,get_framebits(a,e),g=e[h.VBR_max_bitrate]}for(var m=0;m<h.mode_gr;m++){q.on_pe(a,b,f[m],j,m,0),h.mode_ext==J.MPG_MD_MS_LR&&ms_convert(h.l3_side,m);for(var n=0;n<h.channels_out;++n){var o=h.l3_side.tt[m][n];h.masking_lower=Math.pow(10,.1*h.PSY.mask_adjust),init_outer_loop(h,o),0!=q.calc_xmin(a,c[m][n],o,d[m][n])&&(i=0),k+=f[m][n]}}for(var m=0;m<h.mode_gr;m++)for(var n=0;n<h.channels_out;n++)k>g&&(f[m][n]*=g,f[m][n]/=k);return i},this.calc_target_bits=function(a,b,c,d,e,f){var g,h,i,j,k=a.internal_flags,l=k.l3_side,m=0;k.bitrate_index=k.VBR_max_bitrate;var n=new v(m);for(f[0]=p.ResvFrameBegin(a,n),m=n.bits,k.bitrate_index=1,m=o.getframebits(a)-8*k.sideinfo_len,e[0]=m/(k.mode_gr*k.channels_out),m=a.VBR_mean_bitrate_kbps*a.framesize*1e3,0!=(1&k.substep_shaping)&&(m*=1.09),m/=a.out_samplerate,m-=8*k.sideinfo_len,m/=k.mode_gr*k.channels_out,g=.93+.07*(11-a.compression_ratio)/5.5,g<.9&&(g=.9),g>1&&(g=1),h=0;h<k.mode_gr;h++){var r=0;for(i=0;i<k.channels_out;i++){if(d[h][i]=int(g*m),b[h][i]>700){var s=int((b[h][i]-700)/1.4),t=l.tt[h][i];d[h][i]=int(g*m),t.block_type==J.SHORT_TYPE&&s<m/2&&(s=m/2),s>3*m/2?s=3*m/2:s<0&&(s=0),d[h][i]+=s}d[h][i]>O.MAX_BITS_PER_CHANNEL&&(d[h][i]=O.MAX_BITS_PER_CHANNEL),r+=d[h][i]}if(r>O.MAX_BITS_PER_GRANULE)for(i=0;i<k.channels_out;++i)d[h][i]*=O.MAX_BITS_PER_GRANULE,d[h][i]/=r}if(k.mode_ext==J.MPG_MD_MS_LR)for(h=0;h<k.mode_gr;h++)q.reduce_side(d[h],c[h],m*k.channels_out,O.MAX_BITS_PER_GRANULE);for(j=0,h=0;h<k.mode_gr;h++)for(i=0;i<k.channels_out;i++)d[h][i]>O.MAX_BITS_PER_CHANNEL&&(d[h][i]=O.MAX_BITS_PER_CHANNEL),j+=d[h][i];if(j>f[0])for(h=0;h<k.mode_gr;h++)for(i=0;i<k.channels_out;i++)d[h][i]*=f[0],d[h][i]/=j}}function H(){function a(a,b,c){for(var e=10,f=b+238-14-286,g=-15;g<0;g++){var h,i,j;h=d[e+-10],i=a[f+-224]*h,j=a[b+224]*h,h=d[e+-9],i+=a[f+-160]*h,j+=a[b+160]*h,h=d[e+-8],i+=a[f+-96]*h,j+=a[b+96]*h,h=d[e+-7],i+=a[f+-32]*h,j+=a[b+32]*h,h=d[e+-6],i+=a[f+32]*h,j+=a[b+-32]*h,h=d[e+-5],i+=a[f+96]*h,j+=a[b+-96]*h,h=d[e+-4],i+=a[f+160]*h,j+=a[b+-160]*h,h=d[e+-3],i+=a[f+224]*h,j+=a[b+-224]*h,h=d[e+-2],i+=a[b+-256]*h,j-=a[f+256]*h,h=d[e+-1],i+=a[b+-192]*h,j-=a[f+192]*h,h=d[e+0],i+=a[b+-128]*h,j-=a[f+128]*h,h=d[e+1],i+=a[b+-64]*h,j-=a[f+64]*h,h=d[e+2],i+=a[b+0]*h,j-=a[f+0]*h,h=d[e+3],i+=a[b+64]*h,j-=a[f+-64]*h,h=d[e+4],i+=a[b+128]*h,j-=a[f+-128]*h,h=d[e+5],i+=a[b+192]*h,j-=a[f+-192]*h,i*=d[e+6],h=j-i,c[30+2*g]=j+i,c[31+2*g]=d[e+7]*h,e+=18,b--,f++}var i,j,k,l;j=a[b+-16]*d[e+-10],i=a[b+-32]*d[e+-2],j+=(a[b+-48]-a[b+16])*d[e+-9],i+=a[b+-96]*d[e+-1],j+=(a[b+-80]+a[b+48])*d[e+-8],i+=a[b+-160]*d[e+0],j+=(a[b+-112]-a[b+80])*d[e+-7],i+=a[b+-224]*d[e+1],j+=(a[b+-144]+a[b+112])*d[e+-6],i-=a[b+32]*d[e+2],j+=(a[b+-176]-a[b+144])*d[e+-5],i-=a[b+96]*d[e+3],j+=(a[b+-208]+a[b+176])*d[e+-4],i-=a[b+160]*d[e+4],j+=(a[b+-240]-a[b+208])*d[e+-3],i-=a[b+224],k=i-j,l=i+j,j=c[14],i=c[15]-j,c[31]=l+j,c[30]=k+i,c[15]=k-i,c[14]=l-j;var m;m=c[28]-c[0],c[0]+=c[28],c[28]=m*d[e+-36+7],m=c[29]-c[1],c[1]+=c[29],c[29]=m*d[e+-36+7],m=c[26]-c[2],c[2]+=c[26],c[26]=m*d[e+-72+7],m=c[27]-c[3],c[3]+=c[27],c[27]=m*d[e+-72+7],m=c[24]-c[4],c[4]+=c[24],c[24]=m*d[e+-108+7],m=c[25]-c[5],c[5]+=c[25],c[25]=m*d[e+-108+7],m=c[22]-c[6],c[6]+=c[22],c[22]=m*_.SQRT2,m=c[23]-c[7],c[7]+=c[23],c[23]=m*_.SQRT2-c[7],c[7]-=c[6],c[22]-=c[7],c[23]-=c[22],m=c[6],c[6]=c[31]-m,c[31]=c[31]+m,m=c[7],c[7]=c[30]-m,c[30]=c[30]+m,m=c[22],c[22]=c[15]-m,c[15]=c[15]+m,m=c[23],c[23]=c[14]-m,c[14]=c[14]+m,m=c[20]-c[8],c[8]+=c[20],c[20]=m*d[e+-180+7],m=c[21]-c[9],c[9]+=c[21],c[21]=m*d[e+-180+7],m=c[18]-c[10],c[10]+=c[18],c[18]=m*d[e+-216+7],m=c[19]-c[11],c[11]+=c[19],c[19]=m*d[e+-216+7],m=c[16]-c[12],c[12]+=c[16],c[16]=m*d[e+-252+7],m=c[17]-c[13],c[13]+=c[17],c[17]=m*d[e+-252+7],m=-c[20]+c[24],c[20]+=c[24],c[24]=m*d[e+-216+7],m=-c[21]+c[25],c[21]+=c[25],c[25]=m*d[e+-216+7],m=c[4]-c[8],c[4]+=c[8],c[8]=m*d[e+-216+7],m=c[5]-c[9],c[5]+=c[9],c[9]=m*d[e+-216+7],m=c[0]-c[12],c[0]+=c[12],c[12]=m*d[e+-72+7],m=c[1]-c[13],c[1]+=c[13],c[13]=m*d[e+-72+7],m=c[16]-c[28],c[16]+=c[28],c[28]=m*d[e+-72+7],m=-c[17]+c[29],c[17]+=c[29],c[29]=m*d[e+-72+7],m=_.SQRT2*(c[2]-c[10]),c[2]+=c[10],c[10]=m,m=_.SQRT2*(c[3]-c[11]),c[3]+=c[11],c[11]=m,m=_.SQRT2*(-c[18]+c[26]),c[18]+=c[26],c[26]=m-c[18],m=_.SQRT2*(-c[19]+c[27]),c[19]+=c[27],c[27]=m-c[19],m=c[2],c[19]-=c[3],c[3]-=m,c[2]=c[31]-m,c[31]+=m,m=c[3],c[11]-=c[19],c[18]-=m,c[3]=c[30]-m,c[30]+=m,m=c[18],c[27]-=c[11],c[19]-=m,c[18]=c[15]-m,c[15]+=m,m=c[19],c[10]-=m,c[19]=c[14]-m,c[14]+=m,m=c[10],c[11]-=m,c[10]=c[23]-m,c[23]+=m,m=c[11],c[26]-=m,c[11]=c[22]-m,c[22]+=m,m=c[26],c[27]-=m,c[26]=c[7]-m,c[7]+=m,m=c[27],c[27]=c[6]-m,c[6]+=m,m=_.SQRT2*(c[0]-c[4]),c[0]+=c[4],c[4]=m,m=_.SQRT2*(c[1]-c[5]),c[1]+=c[5],c[5]=m,m=_.SQRT2*(c[16]-c[20]),c[16]+=c[20],c[20]=m,m=_.SQRT2*(c[17]-c[21]),c[17]+=c[21],c[21]=m,m=-_.SQRT2*(c[8]-c[12]),c[8]+=c[12],c[12]=m-c[8],m=-_.SQRT2*(c[9]-c[13]),c[9]+=c[13],c[13]=m-c[9],m=-_.SQRT2*(c[25]-c[29]),c[25]+=c[29],c[29]=m-c[25],m=-_.SQRT2*(c[24]+c[28]),c[24]-=c[28],c[28]=m-c[24],m=c[24]-c[16],c[24]=m,m=c[20]-m,c[20]=m,m=c[28]-m,c[28]=m,m=c[25]-c[17],c[25]=m,m=c[21]-m,c[21]=m,m=c[29]-m,c[29]=m,m=c[17]-c[1],c[17]=m,m=c[9]-m,c[9]=m,m=c[25]-m,c[25]=m,m=c[5]-m,c[5]=m,m=c[21]-m,c[21]=m,m=c[13]-m,c[13]=m,m=c[29]-m,c[29]=m,m=c[1]-c[0],c[1]=m,m=c[16]-m,c[16]=m,m=c[17]-m,c[17]=m,m=c[8]-m,c[8]=m,m=c[9]-m,c[9]=m,m=c[24]-m,c[24]=m,m=c[25]-m,c[25]=m,m=c[4]-m,c[4]=m,m=c[5]-m,c[5]=m,m=c[20]-m,c[20]=m,m=c[21]-m,c[21]=m,m=c[12]-m;c[12]=m;m=c[13]-m,c[13]=m,m=c[28]-m,c[28]=m,m=c[29]-m,c[29]=m,m=c[0],c[0]+=c[31],c[31]-=m,m=c[1],c[1]+=c[30],c[30]-=m,m=c[16],c[16]+=c[15],c[15]-=m,m=c[17],c[17]+=c[14],c[14]-=m,m=c[8],c[8]+=c[23],c[23]-=m,m=c[9],c[9]+=c[22],c[22]-=m,m=c[24],c[24]+=c[7],c[7]-=m,m=c[25],c[25]+=c[6],c[6]-=m,m=c[4],c[4]+=c[27],c[27]-=m,m=c[5],c[5]+=c[26],c[26]-=m,m=c[20],c[20]+=c[11],c[11]-=m,m=c[21],c[21]+=c[10],c[10]-=m,m=c[12],c[12]+=c[19],c[19]-=m,m=c[13],c[13]+=c[18],c[18]-=m,m=c[28],c[28]+=c[3],c[3]-=m,m=c[29],c[29]+=c[2],c[2]-=m}function b(a,b){for(var c=0;c<3;c++){var d,e,f,g,i,j;g=a[b+6]*h[J.SHORT_TYPE][0]-a[b+15],d=a[b+0]*h[J.SHORT_TYPE][2]-a[b+9],e=g+d,f=g-d,g=a[b+15]*h[J.SHORT_TYPE][0]+a[b+6],d=a[b+9]*h[J.SHORT_TYPE][2]+a[b+0],i=g+d,j=-g+d,d=2.069978111953089e-11*(a[b+3]*h[J.SHORT_TYPE][1]-a[b+12]),g=2.069978111953089e-11*(a[b+12]*h[J.SHORT_TYPE][1]+a[b+3]),a[b+0]=1.90752519173728e-11*e+d,a[b+15]=1.90752519173728e-11*-i+g,f=.8660254037844387*f*1.907525191737281e-11,i=.5*i*1.907525191737281e-11+g,a[b+3]=f-i,a[b+6]=f+i,e=.5*e*1.907525191737281e-11-d,j=.8660254037844387*j*1.907525191737281e-11,a[b+9]=e+j,
a[b+12]=e-j,b++}}function c(a,b,c){var d,e,f,g,h,i,k,l,m,n;f=c[17]-c[9],h=c[15]-c[11],i=c[14]-c[12],k=c[0]+c[8],l=c[1]+c[7],m=c[2]+c[6],n=c[3]+c[5],a[b+17]=k+m-n-(l-c[4]),e=(k+m-n)*j[19]+(l-c[4]),d=(f-h-i)*j[18],a[b+5]=d+e,a[b+6]=d-e,g=(c[16]-c[10])*j[18],l=l*j[19]+c[4],d=f*j[12]+g+h*j[13]+i*j[14],e=-k*j[16]+l-m*j[17]+n*j[15],a[b+1]=d+e,a[b+2]=d-e,d=f*j[13]-g-h*j[14]+i*j[12],e=-k*j[17]+l-m*j[15]+n*j[16],a[b+9]=d+e,a[b+10]=d-e,d=f*j[14]-g+h*j[12]-i*j[13],e=k*j[15]-l+m*j[16]-n*j[17],a[b+13]=d+e,a[b+14]=d-e;var o,p,q,r,s,t,u,v;o=c[8]-c[0],q=c[6]-c[2],r=c[5]-c[3],s=c[17]+c[9],t=c[16]+c[10],u=c[15]+c[11],v=c[14]+c[12],a[b+0]=s+u+v+(t+c[13]),d=(s+u+v)*j[19]-(t+c[13]),e=(o-q+r)*j[18],a[b+11]=d+e,a[b+12]=d-e,p=(c[7]-c[1])*j[18],t=c[13]-t*j[19],d=s*j[15]-t+u*j[16]+v*j[17],e=o*j[14]+p+q*j[12]+r*j[13],a[b+3]=d+e,a[b+4]=d-e,d=-s*j[17]+t-u*j[15]-v*j[16],e=o*j[13]+p-q*j[14]-r*j[12],a[b+7]=d+e,a[b+8]=d-e,d=-s*j[16]+t-u*j[17]-v*j[15],e=o*j[12]-p+q*j[13]-r*j[14],a[b+15]=d+e,a[b+16]=d-e}var d=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.035780907*_.SQRT2*.5/2384e-9,.017876148*_.SQRT2*.5/2384e-9,.003134727*_.SQRT2*.5/2384e-9,.002457142*_.SQRT2*.5/2384e-9,971317e-9*_.SQRT2*.5/2384e-9,218868e-9*_.SQRT2*.5/2384e-9,101566e-9*_.SQRT2*.5/2384e-9,13828e-9*_.SQRT2*.5/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,49591e-9/2384e-9,1995.1556208053692,21458e-9/2384e-9,-69618e-9/2384e-9],f=12,g=36,h=[[2.382191739347913e-13,6.423305872147834e-13,9.400849094049688e-13,1.122435026096556e-12,1.183840321267481e-12,1.122435026096556e-12,9.40084909404969e-13,6.423305872147839e-13,2.382191739347918e-13,5.456116108943412e-12,4.878985199565852e-12,4.240448995017367e-12,3.559909094758252e-12,2.858043359288075e-12,2.156177623817898e-12,1.475637723558783e-12,8.371015190102974e-13,2.599706096327376e-13,-5.456116108943412e-12,-4.878985199565852e-12,-4.240448995017367e-12,-3.559909094758252e-12,-2.858043359288076e-12,-2.156177623817898e-12,-1.475637723558783e-12,-8.371015190102975e-13,-2.599706096327376e-13,-2.382191739347923e-13,-6.423305872147843e-13,-9.400849094049696e-13,-1.122435026096556e-12,-1.183840321267481e-12,-1.122435026096556e-12,-9.400849094049694e-13,-6.42330587214784e-13,-2.382191739347918e-13],[2.382191739347913e-13,6.423305872147834e-13,9.400849094049688e-13,1.122435026096556e-12,1.183840321267481e-12,1.122435026096556e-12,9.400849094049688e-13,6.423305872147841e-13,2.382191739347918e-13,5.456116108943413e-12,4.878985199565852e-12,4.240448995017367e-12,3.559909094758253e-12,2.858043359288075e-12,2.156177623817898e-12,1.475637723558782e-12,8.371015190102975e-13,2.599706096327376e-13,-5.461314069809755e-12,-4.921085770524055e-12,-4.343405037091838e-12,-3.732668368707687e-12,-3.093523840190885e-12,-2.430835727329465e-12,-1.734679010007751e-12,-9.74825365660928e-13,-2.797435120168326e-13,0,0,0,0,0,0,-2.283748241799531e-13,-4.037858874020686e-13,-2.146547464825323e-13],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2.283748241799531e-13,4.037858874020686e-13,2.146547464825323e-13,5.461314069809755e-12,4.921085770524055e-12,4.343405037091838e-12,3.732668368707687e-12,3.093523840190885e-12,2.430835727329466e-12,1.734679010007751e-12,9.74825365660928e-13,2.797435120168326e-13,-5.456116108943413e-12,-4.878985199565852e-12,-4.240448995017367e-12,-3.559909094758253e-12,-2.858043359288075e-12,-2.156177623817898e-12,-1.475637723558782e-12,-8.371015190102975e-13,-2.599706096327376e-13,-2.382191739347913e-13,-6.423305872147834e-13,-9.400849094049688e-13,-1.122435026096556e-12,-1.183840321267481e-12,-1.122435026096556e-12,-9.400849094049688e-13,-6.423305872147841e-13,-2.382191739347918e-13]],i=h[J.SHORT_TYPE],j=h[J.SHORT_TYPE],k=h[J.SHORT_TYPE],l=h[J.SHORT_TYPE],m=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(d,j,n){for(var o=j,p=286,q=0;q<d.channels_out;q++){for(var r=0;r<d.mode_gr;r++){for(var s,t=d.l3_side.tt[r][q],u=t.xr,v=0,w=d.sb_sample[q][1-r],x=0,y=0;y<9;y++)for(a(o,p,w[x]),a(o,p+32,w[x+1]),x+=2,p+=64,s=1;s<32;s+=2)w[x-1][s]*=-1;for(s=0;s<32;s++,v+=18){var z=t.block_type,A=d.sb_sample[q][r],B=d.sb_sample[q][1-r];if(0!=t.mixed_block_flag&&s<2&&(z=0),d.amp_filter[s]<1e-12)Z.fill(u,v+0,v+18,0);else{if(d.amp_filter[s]<1)for(var y=0;y<18;y++)B[y][m[s]]*=d.amp_filter[s];if(z==J.SHORT_TYPE){for(var y=-f/4;y<0;y++){var C=h[J.SHORT_TYPE][y+3];u[v+3*y+9]=A[9+y][m[s]]*C-A[8-y][m[s]],u[v+3*y+18]=A[14-y][m[s]]*C+A[15+y][m[s]],u[v+3*y+10]=A[15+y][m[s]]*C-A[14-y][m[s]],u[v+3*y+19]=B[2-y][m[s]]*C+B[3+y][m[s]],u[v+3*y+11]=B[3+y][m[s]]*C-B[2-y][m[s]],u[v+3*y+20]=B[8-y][m[s]]*C+B[9+y][m[s]]}b(u,v)}else{for(var D=e(18),y=-g/4;y<0;y++){var E,F;E=h[z][y+27]*B[y+9][m[s]]+h[z][y+36]*B[8-y][m[s]],F=h[z][y+9]*A[y+9][m[s]]-h[z][y+18]*A[8-y][m[s]],D[y+9]=E-F*i[3+y+9],D[y+18]=E*i[3+y+9]+F}c(u,v,D)}}if(z!=J.SHORT_TYPE&&0!=s)for(var y=7;y>=0;--y){var G,H;G=u[v+y]*k[20+y]+u[v+-1-y]*l[28+y],H=u[v+y]*l[28+y]-u[v+-1-y]*k[20+y],u[v+-1-y]=G,u[v+y]=H}}}if(o=n,p=286,1==d.mode_gr)for(var I=0;I<18;I++)$.arraycopy(d.sb_sample[q][1][I],0,d.sb_sample[q][0][I],0,32)}}}function I(){this.thm=new N,this.en=new N}function J(){function a(a){var b,c;if(0==a.ATH.useAdjust)return void(a.ATH.adjust=1);if(c=a.loudness_sq[0][0],b=a.loudness_sq[1][0],2==a.channels_out?(c+=a.loudness_sq[0][1],b+=a.loudness_sq[1][1]):(c+=c,b+=b),2==a.mode_gr&&(c=Math.max(c,b)),c*=.5,c*=a.ATH.aaSensitivityP,c>.03125)a.ATH.adjust>=1?a.ATH.adjust=1:a.ATH.adjust<a.ATH.adjustLimit&&(a.ATH.adjust=a.ATH.adjustLimit),a.ATH.adjustLimit=1;else{var d=31.98*c+625e-6;a.ATH.adjust>=d?(a.ATH.adjust*=.075*d+.925,a.ATH.adjust<d&&(a.ATH.adjust=d)):a.ATH.adjustLimit>=d?a.ATH.adjust=d:a.ATH.adjust<a.ATH.adjustLimit&&(a.ATH.adjust=a.ATH.adjustLimit),a.ATH.adjustLimit=d}}function b(a){var b,c;for(a.bitrate_stereoMode_Hist[a.bitrate_index][4]++,a.bitrate_stereoMode_Hist[15][4]++,2==a.channels_out&&(a.bitrate_stereoMode_Hist[a.bitrate_index][a.mode_ext]++,a.bitrate_stereoMode_Hist[15][a.mode_ext]++),b=0;b<a.mode_gr;++b)for(c=0;c<a.channels_out;++c){var d=0|a.l3_side.tt[b][c].block_type;0!=a.l3_side.tt[b][c].mixed_block_flag&&(d=4),a.bitrate_blockType_Hist[a.bitrate_index][d]++,a.bitrate_blockType_Hist[a.bitrate_index][5]++,a.bitrate_blockType_Hist[15][d]++,a.bitrate_blockType_Hist[15][5]++}}function c(a,b){var c,d,f=a.internal_flags;if(0==f.lame_encode_frame_init){var g,h,i=e(2014),j=e(2014);for(f.lame_encode_frame_init=1,g=0,h=0;g<286+576*(1+f.mode_gr);++g)g<576*f.mode_gr?(i[g]=0,2==f.channels_out&&(j[g]=0)):(i[g]=b[0][h],2==f.channels_out&&(j[g]=b[1][h]),++h);for(d=0;d<f.mode_gr;d++)for(c=0;c<f.channels_out;c++)f.l3_side.tt[d][c].block_type=J.SHORT_TYPE;p.mdct_sub48(f,i,j)}}var f=J.FFTOFFSET,h=J.MPG_MD_MS_LR,i=null;this.psy=null;var k=null,n=null,o=null;this.setModules=function(a,b,c,d){i=a,this.psy=b,k=b,n=d,o=c};var p=new H;this.lame_encode_mp3_frame=function(e,q,r,s,t,u){var v,w=j([2,2]);w[0][0]=new I,w[0][1]=new I,w[1][0]=new I,w[1][1]=new I;var x=j([2,2]);x[0][0]=new I,x[0][1]=new I,x[1][0]=new I,x[1][1]=new I;var y,z,A,B,C=[null,null],D=e.internal_flags,E=g([2,4]),F=[.5,.5],G=[[0,0],[0,0]],H=[[0,0],[0,0]];if(C[0]=q,C[1]=r,0==D.lame_encode_frame_init&&c(e,C),D.padding=0,(D.slot_lag-=D.frac_SpF)<0&&(D.slot_lag+=e.out_samplerate,D.padding=1),0!=D.psymodel){var K,L=[null,null],M=0,N=d(2);for(B=0;B<D.mode_gr;B++){for(A=0;A<D.channels_out;A++)L[A]=C[A],M=576+576*B-J.FFTOFFSET;if(K=e.VBR==l.vbr_mtrh||e.VBR==l.vbr_mt?k.L3psycho_anal_vbr(e,L,M,B,w,x,G[B],H[B],E[B],N):k.L3psycho_anal_ns(e,L,M,B,w,x,G[B],H[B],E[B],N),0!=K)return-4;for(e.mode==m.JOINT_STEREO&&(F[B]=E[B][2]+E[B][3],F[B]>0&&(F[B]=E[B][3]/F[B])),A=0;A<D.channels_out;A++){var O=D.l3_side.tt[B][A];O.block_type=N[A],O.mixed_block_flag=0}}}else for(B=0;B<D.mode_gr;B++)for(A=0;A<D.channels_out;A++)D.l3_side.tt[B][A].block_type=J.NORM_TYPE,D.l3_side.tt[B][A].mixed_block_flag=0,H[B][A]=G[B][A]=700;if(a(D),p.mdct_sub48(D,C[0],C[1]),D.mode_ext=J.MPG_MD_LR_LR,e.force_ms)D.mode_ext=J.MPG_MD_MS_LR;else if(e.mode==m.JOINT_STEREO){var P=0,Q=0;for(B=0;B<D.mode_gr;B++)for(A=0;A<D.channels_out;A++)P+=H[B][A],Q+=G[B][A];if(P<=1*Q){var R=D.l3_side.tt[0],S=D.l3_side.tt[D.mode_gr-1];R[0].block_type==R[1].block_type&&S[0].block_type==S[1].block_type&&(D.mode_ext=J.MPG_MD_MS_LR)}}if(D.mode_ext==h?(y=x,z=H):(y=w,z=G),e.analysis&&null!=D.pinfo)for(B=0;B<D.mode_gr;B++)for(A=0;A<D.channels_out;A++)D.pinfo.ms_ratio[B]=D.ms_ratio[B],D.pinfo.ms_ener_ratio[B]=F[B],D.pinfo.blocktype[B][A]=D.l3_side.tt[B][A].block_type,D.pinfo.pe[B][A]=z[B][A],$.arraycopy(D.l3_side.tt[B][A].xr,0,D.pinfo.xr[B][A],0,576),D.mode_ext==h&&(D.pinfo.ers[B][A]=D.pinfo.ers[B][A+2],$.arraycopy(D.pinfo.energy[B][A+2],0,D.pinfo.energy[B][A],0,D.pinfo.energy[B][A].length));if(e.VBR==l.vbr_off||e.VBR==l.vbr_abr){var T,U;for(T=0;T<18;T++)D.nsPsy.pefirbuf[T]=D.nsPsy.pefirbuf[T+1];for(U=0,B=0;B<D.mode_gr;B++)for(A=0;A<D.channels_out;A++)U+=z[B][A];for(D.nsPsy.pefirbuf[18]=U,U=D.nsPsy.pefirbuf[9],T=0;T<9;T++)U+=(D.nsPsy.pefirbuf[T]+D.nsPsy.pefirbuf[18-T])*J.fircoef[T];for(U=3350*D.mode_gr*D.channels_out/U,B=0;B<D.mode_gr;B++)for(A=0;A<D.channels_out;A++)z[B][A]*=U}if(D.iteration_loop.iteration_loop(e,z,F,y),i.format_bitstream(e),v=i.copy_buffer(D,s,t,u,1),e.bWriteVbrTag&&n.addVbrFrame(e),e.analysis&&null!=D.pinfo){for(A=0;A<D.channels_out;A++){var V;for(V=0;V<f;V++)D.pinfo.pcmdata[A][V]=D.pinfo.pcmdata[A][V+e.framesize];for(V=f;V<1600;V++)D.pinfo.pcmdata[A][V]=C[A][V-f]}o.set_frame_pinfo(e,y)}return b(D),v}}function K(){this.sum=0,this.seen=0,this.want=0,this.pos=0,this.size=0,this.bag=null,this.nVbrNumFrames=0,this.nBytesWritten=0,this.TotalFrameSize=0}function L(){this.tt=[[null,null],[null,null]],this.main_data_begin=0,this.private_bits=0,this.resvDrain_pre=0,this.resvDrain_post=0,this.scfsi=[d(4),d(4)];for(var a=0;a<2;a++)for(var b=0;b<2;b++)this.tt[a][b]=new E}function M(){this.last_en_subshort=g([4,9]),this.lastAttacks=d(4),this.pefirbuf=e(19),this.longfact=e(J.SBMAX_l),this.shortfact=e(J.SBMAX_s),this.attackthre=0,this.attackthre_s=0}function N(){this.l=e(J.SBMAX_l),this.s=g([J.SBMAX_s,3]);var a=this;this.assign=function(b){$.arraycopy(b.l,0,a.l,0,J.SBMAX_l);for(var c=0;c<J.SBMAX_s;c++)for(var d=0;d<3;d++)a.s[c][d]=b.s[c][d]}}function O(){function b(){this.write_timing=0,this.ptr=0,this.buf=a(c)}var c=40;this.Class_ID=0,this.lame_encode_frame_init=0,this.iteration_init_init=0,this.fill_buffer_resample_init=0,this.mfbuf=g([2,O.MFSIZE]),this.mode_gr=0,this.channels_in=0,this.channels_out=0,this.resample_ratio=0,this.mf_samples_to_encode=0,this.mf_size=0,this.VBR_min_bitrate=0,this.VBR_max_bitrate=0,this.bitrate_index=0,this.samplerate_index=0,this.mode_ext=0,this.lowpass1=0,this.lowpass2=0,this.highpass1=0,this.highpass2=0,this.noise_shaping=0,this.noise_shaping_amp=0,this.substep_shaping=0,this.psymodel=0,this.noise_shaping_stop=0,this.subblock_gain=0,this.use_best_huffman=0,this.full_outer_loop=0,this.l3_side=new L,this.ms_ratio=e(2),this.padding=0,this.frac_SpF=0,this.slot_lag=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=d(2),this.CurrentStep=d(2),this.masking_lower=0,this.bv_scf=d(576),this.pseudohalf=d(ca.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=new Array(2),this.blackfilt=new Array(2*O.BPC+1),this.itime=f(2),this.sideinfo_len=0,this.sb_sample=g([2,2,18,J.SBLIMIT]),this.amp_filter=e(32),this.header=new Array(O.MAX_HEADER_BUF),this.h_ptr=0,this.w_ptr=0,this.ancillary_flag=0,this.ResvSize=0,this.ResvMax=0,this.scalefac_band=new C,this.minval_l=e(J.CBANDS),this.minval_s=e(J.CBANDS),this.nb_1=g([4,J.CBANDS]),this.nb_2=g([4,J.CBANDS]),this.nb_s1=g([4,J.CBANDS]),this.nb_s2=g([4,J.CBANDS]),this.s3_ss=null,this.s3_ll=null,this.decay=0,this.thm=new Array(4),this.en=new Array(4),this.tot_ener=e(4),this.loudness_sq=g([2,2]),this.loudness_sq_save=e(2),this.mld_l=e(J.SBMAX_l),this.mld_s=e(J.SBMAX_s),this.bm_l=d(J.SBMAX_l),this.bo_l=d(J.SBMAX_l),this.bm_s=d(J.SBMAX_s),this.bo_s=d(J.SBMAX_s),this.npart_l=0,this.npart_s=0,this.s3ind=h([J.CBANDS,2]),this.s3ind_s=h([J.CBANDS,2]),this.numlines_s=d(J.CBANDS),this.numlines_l=d(J.CBANDS),this.rnumlines_l=e(J.CBANDS),this.mld_cb_l=e(J.CBANDS),this.mld_cb_s=e(J.CBANDS),this.numlines_s_num1=0,this.numlines_l_num1=0,this.pe=e(4),this.ms_ratio_s_old=0,this.ms_ratio_l_old=0,this.ms_ener_ratio_old=0,this.blocktype_old=d(2),this.nsPsy=new M,this.VBR_seek_table=new K,this.ATH=null,this.PSY=null,this.nogap_total=0,this.nogap_current=0,this.decode_on_the_fly=!0,this.findReplayGain=!0,this.findPeakSample=!0,this.PeakSample=0,this.RadioGain=0,this.AudiophileGain=0,this.rgdata=null,this.noclipGainChange=0,this.noclipScale=0,this.bitrate_stereoMode_Hist=h([16,5]),this.bitrate_blockType_Hist=h([16,6]),this.pinfo=null,this.hip=null,this.in_buffer_nsamples=0,this.in_buffer_0=null,this.in_buffer_1=null,this.iteration_loop=null;for(var i=0;i<this.en.length;i++)this.en[i]=new N;for(var i=0;i<this.thm.length;i++)this.thm[i]=new N;for(var i=0;i<this.header.length;i++)this.header[i]=new b}function P(){function a(a,b,c){var e,f,g,h=0;c<<=1;var i=b+c;e=4;do{var j,k,l,m,n,o,p;p=e>>1,m=e,n=e<<1,o=n+m,e=n<<1,f=b,g=f+p;do{var q,r,s,t;r=a[f+0]-a[f+m],q=a[f+0]+a[f+m],t=a[f+n]-a[f+o],s=a[f+n]+a[f+o],a[f+n]=q-s,a[f+0]=q+s,a[f+o]=r-t,a[f+m]=r+t,r=a[g+0]-a[g+m],q=a[g+0]+a[g+m],t=_.SQRT2*a[g+o],s=_.SQRT2*a[g+n],a[g+n]=q-s,a[g+0]=q+s,a[g+o]=r-t,a[g+m]=r+t,g+=e,f+=e}while(f<i);for(k=d[h+0],j=d[h+1],l=1;l<p;l++){var u,v;u=1-2*j*j,v=2*j*k,f=b+l,g=b+m-l;do{var w,x,y,q,r,z,s,A,t,B;x=v*a[f+m]-u*a[g+m],w=u*a[f+m]+v*a[g+m],r=a[f+0]-w,q=a[f+0]+w,z=a[g+0]-x,y=a[g+0]+x,x=v*a[f+o]-u*a[g+o],w=u*a[f+o]+v*a[g+o],t=a[f+n]-w,s=a[f+n]+w,B=a[g+n]-x,A=a[g+n]+x,x=j*s-k*B,w=k*s+j*B,a[f+n]=q-w,a[f+0]=q+w,a[g+o]=z-x,a[g+m]=z+x,x=k*A-j*t,w=j*A+k*t,a[g+n]=y-w,a[g+0]=y+w,a[f+o]=r-x,a[f+m]=r+x,g+=e,f+=e}while(f<i);u=k,k=u*d[h+0]-j*d[h+1],j=u*d[h+1]+j*d[h+0]}h+=2}while(e<c)}var b=e(J.BLKSIZE),c=e(J.BLKSIZE_s/2),d=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],f=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(b,d,e,g,h){for(var i=0;i<3;i++){var j=J.BLKSIZE_s/2,k=65535&192*(i+1),l=J.BLKSIZE_s/8-1;do{var m,n,o,p,q,r=255&f[l<<2];m=c[r]*g[e][h+r+k],q=c[127-r]*g[e][h+r+k+128],n=m-q,m+=q,o=c[r+64]*g[e][h+r+k+64],q=c[63-r]*g[e][h+r+k+192],p=o-q,o+=q,j-=4,d[i][j+0]=m+o,d[i][j+2]=m-o,d[i][j+1]=n+p,d[i][j+3]=n-p,m=c[r+1]*g[e][h+r+k+1],q=c[126-r]*g[e][h+r+k+129],n=m-q,m+=q,o=c[r+65]*g[e][h+r+k+65],q=c[62-r]*g[e][h+r+k+193],p=o-q,o+=q,d[i][j+J.BLKSIZE_s/2+0]=m+o,d[i][j+J.BLKSIZE_s/2+2]=m-o,d[i][j+J.BLKSIZE_s/2+1]=n+p,d[i][j+J.BLKSIZE_s/2+3]=n-p}while(--l>=0);a(d[i],j,J.BLKSIZE_s/2)}},this.fft_long=function(c,d,e,g,h){var i=J.BLKSIZE/8-1,j=J.BLKSIZE/2;do{var k,l,m,n,o,p=255&f[i];k=b[p]*g[e][h+p],o=b[p+512]*g[e][h+p+512],l=k-o,k+=o,m=b[p+256]*g[e][h+p+256],o=b[p+768]*g[e][h+p+768],n=m-o,m+=o,j-=4,d[j+0]=k+m,d[j+2]=k-m,d[j+1]=l+n,d[j+3]=l-n,k=b[p+1]*g[e][h+p+1],o=b[p+513]*g[e][h+p+513],l=k-o,k+=o,m=b[p+257]*g[e][h+p+257],o=b[p+769]*g[e][h+p+769],n=m-o,m+=o,d[j+J.BLKSIZE/2+0]=k+m,d[j+J.BLKSIZE/2+2]=k-m,d[j+J.BLKSIZE/2+1]=l+n,d[j+J.BLKSIZE/2+3]=l-n}while(--i>=0);a(d,j,J.BLKSIZE/2)},this.init_fft=function(a){for(var d=0;d<J.BLKSIZE;d++)b[d]=.42-.5*Math.cos(2*Math.PI*(d+.5)/J.BLKSIZE)+.08*Math.cos(4*Math.PI*(d+.5)/J.BLKSIZE);for(var d=0;d<J.BLKSIZE_s/2;d++)c[d]=.5*(1-Math.cos(2*Math.PI*(d+.5)/J.BLKSIZE_s))}}function Q(){function a(a){return a}function b(a,b){for(var c=0,d=0;d<J.BLKSIZE/2;++d)c+=a[d]*b.ATH.eql_w[d];return c*=fa}function c(c,d,e,f,g,h,i,j,k,l,m){var n=c.internal_flags;if(k<2)X.fft_long(n,f[g],k,l,m),X.fft_short(n,h[i],k,l,m);else if(2==k){for(var o=J.BLKSIZE-1;o>=0;--o){var p=f[g+0][o],q=f[g+1][o];f[g+0][o]=(p+q)*_.SQRT2*.5,f[g+1][o]=(p-q)*_.SQRT2*.5}for(var r=2;r>=0;--r)for(var o=J.BLKSIZE_s-1;o>=0;--o){var p=h[i+0][r][o],q=h[i+1][r][o];h[i+0][r][o]=(p+q)*_.SQRT2*.5,h[i+1][r][o]=(p-q)*_.SQRT2*.5}}d[0]=a(f[g+0][0]),d[0]*=d[0];for(var o=J.BLKSIZE/2-1;o>=0;--o){var s=f[g+0][J.BLKSIZE/2-o],t=f[g+0][J.BLKSIZE/2+o];d[J.BLKSIZE/2-o]=a(.5*(s*s+t*t))}for(var r=2;r>=0;--r){e[r][0]=h[i+0][r][0],e[r][0]*=e[r][0];for(var o=J.BLKSIZE_s/2-1;o>=0;--o){var s=h[i+0][r][J.BLKSIZE_s/2-o],t=h[i+0][r][J.BLKSIZE_s/2+o];e[r][J.BLKSIZE_s/2-o]=a(.5*(s*s+t*t))}}for(var u=0,o=11;o<J.HBLKSIZE;o++)u+=d[o];if(n.tot_ener[k]=u,c.analysis){for(var o=0;o<J.HBLKSIZE;o++)n.pinfo.energy[j][k][o]=n.pinfo.energy_save[k][o],n.pinfo.energy_save[k][o]=d[o];n.pinfo.pe[j][k]=n.pe[k]}2==c.athaa_loudapprox&&k<2&&(n.loudness_sq[j][k]=n.loudness_sq_save[k],n.loudness_sq_save[k]=b(d,n))}function f(){U=Math.pow(10,(na+1)/16),V=Math.pow(10,(oa+1)/16),W=Math.pow(10,pa/10)}function h(a,b,c,d,e,f){var g;if(b>a){if(!(b<a*V))return a+b;g=b/a}else{if(a>=b*V)return a+b;g=a/b}if(a+=b,d+3<=6){if(g>=U)return a;var h=0|_.FAST_LOG10_X(g,16);return a*sa[h]}var h=0|_.FAST_LOG10_X(g,16);if(b=0!=f?e.ATH.cb_s[c]*e.ATH.adjust:e.ATH.cb_l[c]*e.ATH.adjust,a<W*b){if(a>b){var i,j;return i=1,h<=13&&(i=ta[h]),j=_.FAST_LOG10_X(a/b,10/15),a*((ra[h]-i)*j+i)}return h>13?a:a*ta[h]}return a*ra[h]}function i(a,b,c){var d;if(a<0&&(a=0),b<0&&(b=0),a<=0)return b;if(b<=0)return a;if(d=b>a?b/a:a/b,-2<=c&&c<=2){if(d>=U)return a+b;var e=0|_.FAST_LOG10_X(d,16);return(a+b)*ua[e]}return d<V?a+b:(a<b&&(a=b),a)}function j(a,b){var c=a.internal_flags;if(c.channels_out>1){for(var d=0;d<J.SBMAX_l;d++){var e=c.thm[0].l[d],f=c.thm[1].l[d];c.thm[0].l[d]+=f*b,c.thm[1].l[d]+=e*b}for(var d=0;d<J.SBMAX_s;d++)for(var g=0;g<3;g++){var e=c.thm[0].s[d][g],f=c.thm[1].s[d][g];c.thm[0].s[d][g]+=f*b,c.thm[1].s[d][g]+=e*b}}}function n(a){for(var b=0;b<J.SBMAX_l;b++)if(!(a.thm[0].l[b]>1.58*a.thm[1].l[b]||a.thm[1].l[b]>1.58*a.thm[0].l[b])){var c=a.mld_l[b]*a.en[3].l[b],d=Math.max(a.thm[2].l[b],Math.min(a.thm[3].l[b],c));c=a.mld_l[b]*a.en[2].l[b];var e=Math.max(a.thm[3].l[b],Math.min(a.thm[2].l[b],c));a.thm[2].l[b]=d,a.thm[3].l[b]=e}for(var b=0;b<J.SBMAX_s;b++)for(var f=0;f<3;f++)if(!(a.thm[0].s[b][f]>1.58*a.thm[1].s[b][f]||a.thm[1].s[b][f]>1.58*a.thm[0].s[b][f])){var c=a.mld_s[b]*a.en[3].s[b][f],d=Math.max(a.thm[2].s[b][f],Math.min(a.thm[3].s[b][f],c));c=a.mld_s[b]*a.en[2].s[b][f];var e=Math.max(a.thm[3].s[b][f],Math.min(a.thm[2].s[b][f],c));a.thm[2].s[b][f]=d,a.thm[3].s[b][f]=e}}function o(a,b,c){var d=b,e=Math.pow(10,c);b*=2,d*=2;for(var f=0;f<J.SBMAX_l;f++){var g,h,i,j;if(j=a.ATH.cb_l[a.bm_l[f]]*e,g=Math.min(Math.max(a.thm[0].l[f],j),Math.max(a.thm[1].l[f],j)),h=Math.max(a.thm[2].l[f],j),i=Math.max(a.thm[3].l[f],j),g*b<h+i){var k=g*d/(h+i);h*=k,i*=k}a.thm[2].l[f]=Math.min(h,a.thm[2].l[f]),a.thm[3].l[f]=Math.min(i,a.thm[3].l[f])}e*=J.BLKSIZE_s/J.BLKSIZE;for(var f=0;f<J.SBMAX_s;f++)for(var l=0;l<3;l++){var g,h,i,j;if(j=a.ATH.cb_s[a.bm_s[f]]*e,g=Math.min(Math.max(a.thm[0].s[f][l],j),Math.max(a.thm[1].s[f][l],j)),h=Math.max(a.thm[2].s[f][l],j),i=Math.max(a.thm[3].s[f][l],j),g*b<h+i){var k=g*b/(h+i);h*=k,i*=k}a.thm[2].s[f][l]=Math.min(a.thm[2].s[f][l],h),a.thm[3].s[f][l]=Math.min(a.thm[3].s[f][l],i)}}function p(a,b,c,d,e){var f,g,h=0,i=0;for(f=g=0;f<J.SBMAX_s;++g,++f){for(var j=a.bo_s[f],k=a.npart_s,l=j<k?j:k;g<l;)h+=b[g],i+=c[g],g++;if(a.en[d].s[f][e]=h,a.thm[d].s[f][e]=i,g>=k){++f;break}var m=a.PSY.bo_s_weight[f],n=1-m;h=m*b[g],i=m*c[g],a.en[d].s[f][e]+=h,a.thm[d].s[f][e]+=i,h=n*b[g],i=n*c[g]}for(;f<J.SBMAX_s;++f)a.en[d].s[f][e]=0,a.thm[d].s[f][e]=0}function q(a,b,c,d){var e,f,g=0,h=0;for(e=f=0;e<J.SBMAX_l;++f,++e){for(var i=a.bo_l[e],j=a.npart_l,k=i<j?i:j;f<k;)g+=b[f],h+=c[f],f++;if(a.en[d].l[e]=g,a.thm[d].l[e]=h,f>=j){++e;break}var l=a.PSY.bo_l_weight[e],m=1-l;g=l*b[f],h=l*c[f],a.en[d].l[e]+=g,a.thm[d].l[e]+=h,g=m*b[f],h=m*c[f]}for(;e<J.SBMAX_l;++e)a.en[d].l[e]=0,a.thm[d].l[e]=0}function r(a,b,c,d,e,f){var g,h,i=a.internal_flags;for(h=g=0;h<i.npart_s;++h){for(var j=0,k=0,l=i.numlines_s[h],m=0;m<l;++m,++g){var n=b[f][g];j+=n,k<n&&(k=n)}c[h]=j}for(g=h=0;h<i.npart_s;h++){var o=i.s3ind_s[h][0],p=i.s3_ss[g++]*c[o];for(++o;o<=i.s3ind_s[h][1];)p+=i.s3_ss[g]*c[o],++g,++o;var q=ca*i.nb_s1[e][h];if(d[h]=Math.min(p,q),i.blocktype_old[1&e]==J.SHORT_TYPE){var q=da*i.nb_s2[e][h],r=d[h];d[h]=Math.min(q,r)}i.nb_s2[e][h]=i.nb_s1[e][h],i.nb_s1[e][h]=p}for(;h<=J.CBANDS;++h)c[h]=0,d[h]=0}function s(a,b,c,d){var e=a.internal_flags;a.short_blocks!=k.short_block_coupled||0!=b[0]&&0!=b[1]||(b[0]=b[1]=0);for(var f=0;f<e.channels_out;f++)d[f]=J.NORM_TYPE,a.short_blocks==k.short_block_dispensed&&(b[f]=1),a.short_blocks==k.short_block_forced&&(b[f]=0),0!=b[f]?e.blocktype_old[f]==J.SHORT_TYPE&&(d[f]=J.STOP_TYPE):(d[f]=J.SHORT_TYPE,e.blocktype_old[f]==J.NORM_TYPE&&(e.blocktype_old[f]=J.START_TYPE),e.blocktype_old[f]==J.STOP_TYPE&&(e.blocktype_old[f]=J.SHORT_TYPE)),c[f]=e.blocktype_old[f],e.blocktype_old[f]=d[f]}function t(a,b,c){return c>=1?a:c<=0?b:b>0?Math.pow(a/b,c)*b:0}function u(a,b){for(var c=309.07,d=0;d<J.SBMAX_s-1;d++)for(var e=0;e<3;e++){var f=a.thm.s[d][e];if(f>0){var g=f*b,h=a.en.s[d][e];h>g&&(c+=h>1e10*g?va[d]*(10*Y):va[d]*_.FAST_LOG10(h/g))}}return c}function v(a,b){for(var c=281.0575,d=0;d<J.SBMAX_l-1;d++){var e=a.thm.l[d];if(e>0){var f=e*b,g=a.en.l[d];g>f&&(c+=g>1e10*f?wa[d]*(10*Y):wa[d]*_.FAST_LOG10(g/f))}}return c}function w(a,b,c,d,e){var f,g;for(f=g=0;f<a.npart_l;++f){var h,i=0,j=0;for(h=0;h<a.numlines_l[f];++h,++g){var k=b[g];i+=k,j<k&&(j=k)}c[f]=i,d[f]=j,e[f]=i*a.rnumlines_l[f]}}function x(a,b,c,d){var e=qa.length-1,f=0,g=c[f]+c[f+1];if(g>0){var h=b[f];h<b[f+1]&&(h=b[f+1]),g=20*(2*h-g)/(g*(a.numlines_l[f]+a.numlines_l[f+1]-1));var i=0|g;i>e&&(i=e),d[f]=i}else d[f]=0;for(f=1;f<a.npart_l-1;f++)if(g=c[f-1]+c[f]+c[f+1],g>0){var h=b[f-1];h<b[f]&&(h=b[f]),h<b[f+1]&&(h=b[f+1]),g=20*(3*h-g)/(g*(a.numlines_l[f-1]+a.numlines_l[f]+a.numlines_l[f+1]-1));var i=0|g;i>e&&(i=e),d[f]=i}else d[f]=0;if(g=c[f-1]+c[f],g>0){var h=b[f-1];h<b[f]&&(h=b[f]),g=20*(2*h-g)/(g*(a.numlines_l[f-1]+a.numlines_l[f]-1));var i=0|g;i>e&&(i=e),d[f]=i}else d[f]=0}function y(b,c,d,e,f,g,h,i){var j=b.internal_flags;if(e<2)X.fft_long(j,h[i],e,c,d);else if(2==e)for(var k=J.BLKSIZE-1;k>=0;--k){var l=h[i+0][k],m=h[i+1][k];h[i+0][k]=(l+m)*_.SQRT2*.5,h[i+1][k]=(l-m)*_.SQRT2*.5}g[0]=a(h[i+0][0]),g[0]*=g[0];for(var k=J.BLKSIZE/2-1;k>=0;--k){var n=h[i+0][J.BLKSIZE/2-k],o=h[i+0][J.BLKSIZE/2+k];g[J.BLKSIZE/2-k]=a(.5*(n*n+o*o))}for(var p=0,k=11;k<J.HBLKSIZE;k++)p+=g[k];if(j.tot_ener[e]=p,b.analysis){for(var k=0;k<J.HBLKSIZE;k++)j.pinfo.energy[f][e][k]=j.pinfo.energy_save[e][k],j.pinfo.energy_save[e][k]=g[k];j.pinfo.pe[f][e]=j.pe[e]}}function z(b,c,d,e,f,g,h,i){var j=b.internal_flags;if(0==f&&e<2&&X.fft_short(j,h[i],e,c,d),2==e)for(var k=J.BLKSIZE_s-1;k>=0;--k){var l=h[i+0][f][k],m=h[i+1][f][k];h[i+0][f][k]=(l+m)*_.SQRT2*.5,h[i+1][f][k]=(l-m)*_.SQRT2*.5}g[f][0]=h[i+0][f][0],g[f][0]*=g[f][0];for(var k=J.BLKSIZE_s/2-1;k>=0;--k){var n=h[i+0][f][J.BLKSIZE_s/2-k],o=h[i+0][f][J.BLKSIZE_s/2+k];g[f][J.BLKSIZE_s/2-k]=a(.5*(n*n+o*o))}}function A(a,c,d,e){var f=a.internal_flags;2==a.athaa_loudapprox&&d<2&&(f.loudness_sq[c][d]=f.loudness_sq_save[d],f.loudness_sq_save[d]=b(e,f))}function B(a,b,c,d,f,h,i,j,k,l){for(var n=g([2,576]),o=a.internal_flags,p=o.channels_out,q=a.mode==m.JOINT_STEREO?4:p,r=0;r<p;r++){firbuf=b[r];for(var s=c+576-350-la+192,t=0;t<576;t++){var u,v;u=firbuf[s+t+10],v=0;for(var w=0;w<(la-1)/2-1;w+=2)u+=ya[w]*(firbuf[s+t+w]+firbuf[s+t+la-w]),v+=ya[w+1]*(firbuf[s+t+w+1]+firbuf[s+t+la-w-1]);n[r][t]=u+v}f[d][r].en.assign(o.en[r]),f[d][r].thm.assign(o.thm[r]),q>2&&(h[d][r].en.assign(o.en[r+2]),h[d][r].thm.assign(o.thm[r+2]))}for(var r=0;r<q;r++){var x=e(12),y=e(12),z=[0,0,0,0],A=n[1&r],B=0,C=3==r?o.nsPsy.attackthre_s:o.nsPsy.attackthre,D=1;if(2==r)for(var t=0,w=576;w>0;++t,--w){var E=n[0][t],F=n[1][t];n[0][t]=E+F,n[1][t]=E-F}for(var t=0;t<3;t++)y[t]=o.nsPsy.last_en_subshort[r][t+6],x[t]=y[t]/o.nsPsy.last_en_subshort[r][t+4],z[0]+=y[t];for(var t=0;t<9;t++){for(var G=B+64,H=1;B<G;B++)H<Math.abs(A[B])&&(H=Math.abs(A[B]));o.nsPsy.last_en_subshort[r][t]=y[t+3]=H,z[1+t/3]+=H,H>y[t+3-2]?H/=y[t+3-2]:H=y[t+3-2]>10*H?y[t+3-2]/(10*H):0,x[t+3]=H}for(var t=0;t<3;++t){var I=y[3*t+3]+y[3*t+4]+y[3*t+5],J=1;6*y[3*t+5]<I&&(J*=.5,6*y[3*t+4]<I&&(J*=.5)),j[r][t]=J}if(a.analysis){for(var K=x[0],t=1;t<12;t++)K<x[t]&&(K=x[t]);o.pinfo.ers[d][r]=o.pinfo.ers_save[r],o.pinfo.ers_save[r]=K}for(var t=0;t<12;t++)0==k[r][t/3]&&x[t]>C&&(k[r][t/3]=t%3+1);for(var t=1;t<4;t++){var L=z[t-1],M=z[t],N=Math.max(L,M);N<4e4&&L<1.7*M&&M<1.7*L&&(1==t&&k[r][0]<=k[r][t]&&(k[r][0]=0),k[r][t]=0)}k[r][0]<=o.nsPsy.lastAttacks[r]&&(k[r][0]=0),3!=o.nsPsy.lastAttacks[r]&&k[r][0]+k[r][1]+k[r][2]+k[r][3]==0||(D=0,0!=k[r][1]&&0!=k[r][0]&&(k[r][1]=0),0!=k[r][2]&&0!=k[r][1]&&(k[r][2]=0),0!=k[r][3]&&0!=k[r][2]&&(k[r][3]=0)),r<2?l[r]=D:0==D&&(l[0]=l[1]=0),i[r]=o.tot_ener[r]}}function C(a,b,c){if(0==c)for(var d=0;d<a.npart_s;d++)a.nb_s2[b][d]=a.nb_s1[b][d],a.nb_s1[b][d]=0}function D(a,b){for(var c=0;c<a.npart_l;c++)a.nb_2[b][c]=a.nb_1[b][c],a.nb_1[b][c]=0}function E(a,b,c,d){var e=qa.length-1,f=0,g=c[f]+c[f+1];if(g>0){var h=b[f];h<b[f+1]&&(h=b[f+1]),g=20*(2*h-g)/(g*(a.numlines_s[f]+a.numlines_s[f+1]-1));var i=0|g;i>e&&(i=e),d[f]=i}else d[f]=0;for(f=1;f<a.npart_s-1;f++)if(g=c[f-1]+c[f]+c[f+1],g>0){var h=b[f-1];h<b[f]&&(h=b[f]),h<b[f+1]&&(h=b[f+1]),g=20*(3*h-g)/(g*(a.numlines_s[f-1]+a.numlines_s[f]+a.numlines_s[f+1]-1));var i=0|g;i>e&&(i=e),d[f]=i}else d[f]=0;if(g=c[f-1]+c[f],g>0){var h=b[f-1];h<b[f]&&(h=b[f]),g=20*(2*h-g)/(g*(a.numlines_s[f-1]+a.numlines_s[f]-1));var i=0|g;i>e&&(i=e),d[f]=i}else d[f]=0}function F(a,b,c,d,f,g){var h,j,k,l=a.internal_flags,m=new float[J.CBANDS],n=e(J.CBANDS),o=new int[J.CBANDS];for(k=j=0;k<l.npart_s;++k){var p=0,q=0,r=l.numlines_s[k];for(h=0;h<r;++h,++j){var s=b[g][j];p+=s,q<s&&(q=s)}c[k]=p,m[k]=q,n[k]=p/r}for(;k<J.CBANDS;++k)m[k]=0,n[k]=0;for(E(l,m,n,o),j=k=0;k<l.npart_s;k++){var t,u,v,w,x,y=l.s3ind_s[k][0],z=l.s3ind_s[k][1];for(t=o[y],u=1,w=l.s3_ss[j]*c[y]*qa[o[y]],++j,++y;y<=z;)t+=o[y],u+=1,v=l.s3_ss[j]*c[y]*qa[o[y]],w=i(w,v,y-k),++j,++y;t=(1+2*t)/(2*u),x=.5*qa[t],w*=x,d[k]=w,l.nb_s2[f][k]=l.nb_s1[f][k],l.nb_s1[f][k]=w,v=m[k],v*=l.minval_s[k],v*=x,d[k]>v&&(d[k]=v),l.masking_lower>1&&(d[k]*=l.masking_lower),d[k]>c[k]&&(d[k]=c[k]),
l.masking_lower<1&&(d[k]*=l.masking_lower)}for(;k<J.CBANDS;++k)c[k]=0,d[k]=0}function G(a,b,c,f,g){var h,j=e(J.CBANDS),k=e(J.CBANDS),l=d(J.CBANDS+2);w(a,b,c,j,k),x(a,j,k,l);var m=0;for(h=0;h<a.npart_l;h++){var n,o,p,q,r=a.s3ind[h][0],s=a.s3ind[h][1],t=0,u=0;for(t=l[r],u+=1,o=a.s3_ll[m]*c[r]*qa[l[r]],++m,++r;r<=s;)t+=l[r],u+=1,n=a.s3_ll[m]*c[r]*qa[l[r]],q=i(o,n,r-h),o=q,++m,++r;if(t=(1+2*t)/(2*u),p=.5*qa[t],o*=p,a.blocktype_old[1&g]==J.SHORT_TYPE){var v=$*a.nb_1[g][h];v>0?f[h]=Math.min(o,v):f[h]=Math.min(o,c[h]*ja)}else{var v,y=ba*a.nb_2[g][h],z=$*a.nb_1[g][h];y<=0&&(y=o),z<=0&&(z=o),v=a.blocktype_old[1&g]==J.NORM_TYPE?Math.min(z,y):z,f[h]=Math.min(o,v)}a.nb_2[g][h]=a.nb_1[g][h],a.nb_1[g][h]=o,n=j[h],n*=a.minval_l[h],n*=p,f[h]>n&&(f[h]=n),a.masking_lower>1&&(f[h]*=a.masking_lower),f[h]>c[h]&&(f[h]=c[h]),a.masking_lower<1&&(f[h]*=a.masking_lower)}for(;h<J.CBANDS;++h)c[h]=0,f[h]=0}function H(a,b){var c=a.internal_flags;a.short_blocks!=k.short_block_coupled||0!=b[0]&&0!=b[1]||(b[0]=b[1]=0);for(var d=0;d<c.channels_out;d++)a.short_blocks==k.short_block_dispensed&&(b[d]=1),a.short_blocks==k.short_block_forced&&(b[d]=0)}function I(a,b,c){for(var d=a.internal_flags,e=0;e<d.channels_out;e++){var f=J.NORM_TYPE;0!=b[e]?d.blocktype_old[e]==J.SHORT_TYPE&&(f=J.STOP_TYPE):(f=J.SHORT_TYPE,d.blocktype_old[e]==J.NORM_TYPE&&(d.blocktype_old[e]=J.START_TYPE),d.blocktype_old[e]==J.STOP_TYPE&&(d.blocktype_old[e]=J.SHORT_TYPE)),c[e]=d.blocktype_old[e],d.blocktype_old[e]=f}}function K(a,b,c,d,e,f,g){for(var h,i,j=2*f,k=f>0?Math.pow(10,e):1,l=0;l<g;++l){var m=a[2][l],n=a[3][l],o=b[0][l],p=b[1][l],q=b[2][l],r=b[3][l];if(o<=1.58*p&&p<=1.58*o){var s=c[l]*n,t=c[l]*m;i=Math.max(q,Math.min(r,s)),h=Math.max(r,Math.min(q,t))}else i=q,h=r;if(f>0){var u,v,w=d[l]*k;if(u=Math.min(Math.max(o,w),Math.max(p,w)),q=Math.max(i,w),r=Math.max(h,w),v=q+r,v>0&&u*j<v){var x=u*j/v;q*=x,r*=x}i=Math.min(q,i),h=Math.min(r,h)}i>m&&(i=m),h>n&&(h=n),b[2][l]=i,b[3][l]=h}}function L(a,b){var c,d=a;return c=d>=0?27*-d:d*b,c<=-72?0:Math.exp(c*ma)}function M(a){var b,c,d=0,e=0,f=0;for(f=0;L(f,a)>1e-20;f-=1);for(b=f,c=0;Math.abs(c-b)>1e-12;)f=(c+b)/2,L(f,a)>0?c=f:b=f;d=b;var b,c,f=0;for(f=0;L(f,a)>1e-20;f+=1);for(b=0,c=f;Math.abs(c-b)>1e-12;)f=(c+b)/2,L(f,a)>0?b=f:c=f;e=c;var g,h=0,i=1e3;for(g=0;g<=i;++g){var f=d+g*(e-d)/i,j=L(f,a);h+=j}var k=(i+1)/(h*(e-d));return k}function N(a){var b,c,d,e;return b=a,b*=b>=0?3:1.5,b>=.5&&b<=2.5?(e=b-.5,c=8*(e*e-2*e)):c=0,b+=.474,d=15.811389+7.5*b-17.5*Math.sqrt(1+b*b),d<=-60?0:(b=Math.exp((c+d)*ma),b/=.6609193)}function O(a){return a<0&&(a=0),a*=.001,13*Math.atan(.76*a)+3.5*Math.atan(a*a/56.25)}function Q(a,b,c,f,g,h,i,j,k,l,m,n){var o,p=e(J.CBANDS+1),q=j/(n>15?1152:384),r=d(J.HBLKSIZE);j/=k;var s=0,t=0;for(o=0;o<J.CBANDS;o++){var u,v;for(u=O(j*s),p[o]=j*s,v=s;O(j*v)-u<ea&&v<=k/2;v++);for(a[o]=v-s,t=o+1;s<v;)r[s++]=o;if(s>k/2){s=k/2,++o;break}}p[o]=j*s;for(var w=0;w<n;w++){var x,y,z,A,B;z=l[w],A=l[w+1],x=0|Math.floor(.5+m*(z-.5)),x<0&&(x=0),y=0|Math.floor(.5+m*(A-.5)),y>k/2&&(y=k/2),c[w]=(r[x]+r[y])/2,b[w]=r[y];var C=q*A;i[w]=(C-p[b[w]])/(p[b[w]+1]-p[b[w]]),i[w]<0?i[w]=0:i[w]>1&&(i[w]=1),B=O(j*l[w]*m),B=Math.min(B,15.5)/15.5,h[w]=Math.pow(10,1.25*(1-Math.cos(Math.PI*B))-2.5)}s=0;for(var D=0;D<t;D++){var u,E,F=a[D];u=O(j*s),E=O(j*(s+F-1)),f[D]=.5*(u+E),u=O(j*(s-.5)),E=O(j*(s+F-.5)),g[D]=E-u,s+=F}return t}function R(a,b,c,d,f,h){var i,j=g([J.CBANDS,J.CBANDS]),k=0;if(h)for(var l=0;l<b;l++)for(i=0;i<b;i++){var m=N(c[l]-c[i])*d[i];j[l][i]=m*f[l]}else for(i=0;i<b;i++)for(var n=15+Math.min(21/c[i],12),o=M(n),l=0;l<b;l++){var m=o*L(c[l]-c[i],n)*d[i];j[l][i]=m*f[l]}for(var l=0;l<b;l++){for(i=0;i<b&&!(j[l][i]>0);i++);for(a[l][0]=i,i=b-1;i>0&&!(j[l][i]>0);i--);a[l][1]=i,k+=a[l][1]-a[l][0]+1}for(var p=e(k),q=0,l=0;l<b;l++)for(i=a[l][0];i<=a[l][1];i++)p[q++]=j[l][i];return p}function S(a){var b=O(a);return b=Math.min(b,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*b))-2.5)}function T(a,b){a<-.3&&(a=3410),a/=1e3,a=Math.max(.1,a);var c=3.64*Math.pow(a,-.8)-6.8*Math.exp(-.6*Math.pow(a-3.4,2))+6*Math.exp(-.15*Math.pow(a-8.7,2))+.001*(.6+.04*b)*Math.pow(a,4);return c}var U,V,W,X=new P,Y=2.302585092994046,$=2,ba=16,ca=2,da=16,ea=.34,fa=1/217621504/(J.BLKSIZE/2),ga=.01,ha=.8,ia=.6,ja=.3,ka=3.5,la=21,ma=.2302585093,na=8,oa=23,pa=15,qa=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],ra=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],sa=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],ta=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],ua=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],va=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],wa=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],xa=[-1.730326e-17,-.01703172,-1.349528e-17,.0418072,-6.73278e-17,-.0876324,-3.0835e-17,.1863476,-1.104424e-16,-.627638];this.L3psycho_anal_ns=function(a,b,f,i,k,y,z,A,B,C){var D,E,F,G,H,I,K,L,M,N=a.internal_flags,O=g([2,J.BLKSIZE]),P=g([2,3,J.BLKSIZE_s]),Q=e(J.CBANDS+1),R=e(J.CBANDS+1),S=e(J.CBANDS+2),T=d(2),U=d(2),V=g([2,576]),W=d(J.CBANDS+2),X=d(J.CBANDS+2);for(Z.fill(X,0),D=N.channels_out,a.mode==m.JOINT_STEREO&&(D=4),M=a.VBR==l.vbr_off?0==N.ResvMax?0:N.ResvSize/N.ResvMax*.5:a.VBR==l.vbr_rh||a.VBR==l.vbr_mtrh||a.VBR==l.vbr_mt?.6:1,E=0;E<N.channels_out;E++){var Y=b[E],_=f+576-350-la+192;for(G=0;G<576;G++){var aa,ca;for(aa=Y[_+G+10],ca=0,H=0;H<(la-1)/2-1;H+=2)aa+=xa[H]*(Y[_+G+H]+Y[_+G+la-H]),ca+=xa[H+1]*(Y[_+G+H+1]+Y[_+G+la-H-1]);V[E][G]=aa+ca}k[i][E].en.assign(N.en[E]),k[i][E].thm.assign(N.thm[E]),D>2&&(y[i][E].en.assign(N.en[E+2]),y[i][E].thm.assign(N.thm[E+2]))}for(E=0;E<D;E++){var da,ea,fa,ga=e(12),ka=[0,0,0,0],ma=e(12),na=1,oa=e(J.CBANDS),pa=e(J.CBANDS),ra=[0,0,0,0],sa=e(J.HBLKSIZE),ta=g([3,J.HBLKSIZE_s]);for(G=0;G<3;G++)ga[G]=N.nsPsy.last_en_subshort[E][G+6],ma[G]=ga[G]/N.nsPsy.last_en_subshort[E][G+4],ka[0]+=ga[G];if(2==E)for(G=0;G<576;G++){var ua,va;ua=V[0][G],va=V[1][G],V[0][G]=ua+va,V[1][G]=ua-va}var wa=V[1&E],ya=0;for(G=0;G<9;G++){for(var za=ya+64,Aa=1;ya<za;ya++)Aa<Math.abs(wa[ya])&&(Aa=Math.abs(wa[ya]));N.nsPsy.last_en_subshort[E][G]=ga[G+3]=Aa,ka[1+G/3]+=Aa,Aa>ga[G+3-2]?Aa/=ga[G+3-2]:Aa=ga[G+3-2]>10*Aa?ga[G+3-2]/(10*Aa):0,ma[G+3]=Aa}if(a.analysis){var Ba=ma[0];for(G=1;G<12;G++)Ba<ma[G]&&(Ba=ma[G]);N.pinfo.ers[i][E]=N.pinfo.ers_save[E],N.pinfo.ers_save[E]=Ba}for(fa=3==E?N.nsPsy.attackthre_s:N.nsPsy.attackthre,G=0;G<12;G++)0==ra[G/3]&&ma[G]>fa&&(ra[G/3]=G%3+1);for(G=1;G<4;G++){var Ca;Ca=ka[G-1]>ka[G]?ka[G-1]/ka[G]:ka[G]/ka[G-1],Ca<1.7&&(ra[G]=0,1==G&&(ra[0]=0))}for(0!=ra[0]&&0!=N.nsPsy.lastAttacks[E]&&(ra[0]=0),3!=N.nsPsy.lastAttacks[E]&&ra[0]+ra[1]+ra[2]+ra[3]==0||(na=0,0!=ra[1]&&0!=ra[0]&&(ra[1]=0),0!=ra[2]&&0!=ra[1]&&(ra[2]=0),0!=ra[3]&&0!=ra[2]&&(ra[3]=0)),E<2?U[E]=na:0==na&&(U[0]=U[1]=0),B[E]=N.tot_ener[E],ea=P,da=O,c(a,sa,ta,da,1&E,ea,1&E,i,E,b,f),w(N,sa,Q,oa,pa),x(N,oa,pa,W),L=0;L<3;L++){var Da,Ea;for(r(a,ta,R,S,E,L),p(N,R,S,E,L),K=0;K<J.SBMAX_s;K++){if(Ea=N.thm[E].s[K][L],Ea*=ha,ra[L]>=2||1==ra[L+1]){var Fa=0!=L?L-1:2,Aa=t(N.thm[E].s[K][Fa],Ea,ia*M);Ea=Math.min(Ea,Aa)}if(1==ra[L]){var Fa=0!=L?L-1:2,Aa=t(N.thm[E].s[K][Fa],Ea,ja*M);Ea=Math.min(Ea,Aa)}else if(0!=L&&3==ra[L-1]||0==L&&3==N.nsPsy.lastAttacks[E]){var Fa=2!=L?L+1:0,Aa=t(N.thm[E].s[K][Fa],Ea,ja*M);Ea=Math.min(Ea,Aa)}Da=ga[3*L+3]+ga[3*L+4]+ga[3*L+5],6*ga[3*L+5]<Da&&(Ea*=.5,6*ga[3*L+4]<Da&&(Ea*=.5)),N.thm[E].s[K][L]=Ea}}for(N.nsPsy.lastAttacks[E]=ra[2],I=0,F=0;F<N.npart_l;F++){for(var Ga=N.s3ind[F][0],Ha=Q[Ga]*qa[W[Ga]],Ia=N.s3_ll[I++]*Ha;++Ga<=N.s3ind[F][1];)Ha=Q[Ga]*qa[W[Ga]],Ia=h(Ia,N.s3_ll[I++]*Ha,Ga,Ga-F,N,0);Ia*=.158489319246111,N.blocktype_old[1&E]==J.SHORT_TYPE?S[F]=Ia:S[F]=t(Math.min(Ia,Math.min($*N.nb_1[E][F],ba*N.nb_2[E][F])),Ia,M),N.nb_2[E][F]=N.nb_1[E][F],N.nb_1[E][F]=Ia}for(;F<=J.CBANDS;++F)Q[F]=0,S[F]=0;q(N,Q,S,E)}if(a.mode!=m.STEREO&&a.mode!=m.JOINT_STEREO||a.interChRatio>0&&j(a,a.interChRatio),a.mode==m.JOINT_STEREO){var Ja;n(N),Ja=a.msfix,Math.abs(Ja)>0&&o(N,Ja,a.ATHlower*N.ATH.adjust)}for(s(a,U,C,T),E=0;E<D;E++){var Ka,La,Ma,Na=0;E>1?(Ka=A,Na=-2,La=J.NORM_TYPE,C[0]!=J.SHORT_TYPE&&C[1]!=J.SHORT_TYPE||(La=J.SHORT_TYPE),Ma=y[i][E-2]):(Ka=z,Na=0,La=C[E],Ma=k[i][E]),La==J.SHORT_TYPE?Ka[Na+E]=u(Ma,N.masking_lower):Ka[Na+E]=v(Ma,N.masking_lower),a.analysis&&(N.pinfo.pe[i][E]=Ka[Na+E])}return 0};var ya=[-1.730326e-17,-.01703172,-1.349528e-17,.0418072,-6.73278e-17,-.0876324,-3.0835e-17,.1863476,-1.104424e-16,-.627638];this.L3psycho_anal_vbr=function(a,b,c,f,h,i,j,k,l,n){var o,r,s=a.internal_flags,w=e(J.HBLKSIZE),x=g([3,J.HBLKSIZE_s]),E=g([2,J.BLKSIZE]),L=g([2,3,J.BLKSIZE_s]),M=g([4,J.CBANDS]),N=g([4,J.CBANDS]),O=g([4,3]),P=.6,Q=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],R=d(2),S=a.mode==m.JOINT_STEREO?4:s.channels_out;B(a,b,c,f,h,i,l,O,Q,R),H(a,R);for(var T=0;T<S;T++){var U=1&T;o=E,y(a,b,c,T,f,w,o,U),A(a,f,T,w),0!=R[U]?G(s,w,M[T],N[T],T):D(s,T)}R[0]+R[1]==2&&a.mode==m.JOINT_STEREO&&K(M,N,s.mld_cb_l,s.ATH.cb_l,a.ATHlower*s.ATH.adjust,a.msfix,s.npart_l);for(var T=0;T<S;T++){var U=1&T;0!=R[U]&&q(s,M[T],N[T],T)}for(var V=0;V<3;V++){for(var T=0;T<S;++T){var U=1&T;0!=R[U]?C(s,T,V):(r=L,z(a,b,c,T,V,x,r,U),F(a,x,M[T],N[T],T,V))}R[0]+R[1]==0&&a.mode==m.JOINT_STEREO&&K(M,N,s.mld_cb_s,s.ATH.cb_s,a.ATHlower*s.ATH.adjust,a.msfix,s.npart_s);for(var T=0;T<S;++T){var U=1&T;0==R[U]&&p(s,M[T],N[T],T,V)}}for(var T=0;T<S;T++){var U=1&T;if(0==R[U])for(var W=0;W<J.SBMAX_s;W++){for(var X=e(3),V=0;V<3;V++){var Y=s.thm[T].s[W][V];if(Y*=ha,Q[T][V]>=2||1==Q[T][V+1]){var Z=0!=V?V-1:2,$=t(s.thm[T].s[W][Z],Y,ia*P);Y=Math.min(Y,$)}else if(1==Q[T][V]){var Z=0!=V?V-1:2,$=t(s.thm[T].s[W][Z],Y,ja*P);Y=Math.min(Y,$)}else if(0!=V&&3==Q[T][V-1]||0==V&&3==s.nsPsy.lastAttacks[T]){var Z=2!=V?V+1:0,$=t(s.thm[T].s[W][Z],Y,ja*P);Y=Math.min(Y,$)}Y*=O[T][V],X[V]=Y}for(var V=0;V<3;V++)s.thm[T].s[W][V]=X[V]}}for(var T=0;T<S;T++)s.nsPsy.lastAttacks[T]=Q[T][2];I(a,R,n);for(var T=0;T<S;T++){var _,aa,ba,ca;T>1?(_=k,aa=-2,ba=J.NORM_TYPE,n[0]!=J.SHORT_TYPE&&n[1]!=J.SHORT_TYPE||(ba=J.SHORT_TYPE),ca=i[f][T-2]):(_=j,aa=0,ba=n[T],ca=h[f][T]),ba==J.SHORT_TYPE?_[aa+T]=u(ca,s.masking_lower):_[aa+T]=v(ca,s.masking_lower),a.analysis&&(s.pinfo.pe[f][T]=_[aa+T])}return 0},this.psymodel_init=function(a){var b,c=a.internal_flags,d=!0,g=13,h=24,i=0,j=0,k=-8.25,m=-4.5,n=e(J.CBANDS),o=e(J.CBANDS),p=e(J.CBANDS),q=a.out_samplerate;switch(a.experimentalZ){default:case 0:d=!0;break;case 1:d=a.VBR!=l.vbr_mtrh&&a.VBR!=l.vbr_mt;break;case 2:d=!1;break;case 3:g=8,i=-1.75,j=-.0125,k=-8.25,m=-2.25}for(c.ms_ener_ratio_old=.25,c.blocktype_old[0]=c.blocktype_old[1]=J.NORM_TYPE,b=0;b<4;++b){for(var r=0;r<J.CBANDS;++r)c.nb_1[b][r]=1e20,c.nb_2[b][r]=1e20,c.nb_s1[b][r]=c.nb_s2[b][r]=1;for(var s=0;s<J.SBMAX_l;s++)c.en[b].l[s]=1e20,c.thm[b].l[s]=1e20;for(var r=0;r<3;++r){for(var s=0;s<J.SBMAX_s;s++)c.en[b].s[s][r]=1e20,c.thm[b].s[s][r]=1e20;c.nsPsy.lastAttacks[b]=0}for(var r=0;r<9;r++)c.nsPsy.last_en_subshort[b][r]=10}for(c.loudness_sq_save[0]=c.loudness_sq_save[1]=0,c.npart_l=Q(c.numlines_l,c.bo_l,c.bm_l,n,o,c.mld_l,c.PSY.bo_l_weight,q,J.BLKSIZE,c.scalefac_band.l,J.BLKSIZE/1152,J.SBMAX_l),b=0;b<c.npart_l;b++){var t=i;n[b]>=g&&(t=j*(n[b]-g)/(h-g)+i*(h-n[b])/(h-g)),p[b]=Math.pow(10,t/10),c.numlines_l[b]>0?c.rnumlines_l[b]=1/c.numlines_l[b]:c.rnumlines_l[b]=0}c.s3_ll=R(c.s3ind,c.npart_l,n,o,p,d);var r=0;for(b=0;b<c.npart_l;b++){var u;u=aa.MAX_VALUE;for(var v=0;v<c.numlines_l[b];v++,r++){var w,x=q*r/(1e3*J.BLKSIZE);w=this.ATHformula(1e3*x,a)-20,w=Math.pow(10,.1*w),w*=c.numlines_l[b],u>w&&(u=w)}c.ATH.cb_l[b]=u,u=-20+20*n[b]/10,u>6&&(u=100),u<-15&&(u=-15),u-=8,c.minval_l[b]=Math.pow(10,u/10)*c.numlines_l[b]}for(c.npart_s=Q(c.numlines_s,c.bo_s,c.bm_s,n,o,c.mld_s,c.PSY.bo_s_weight,q,J.BLKSIZE_s,c.scalefac_band.s,J.BLKSIZE_s/384,J.SBMAX_s),r=0,b=0;b<c.npart_s;b++){var u,t=k;n[b]>=g&&(t=m*(n[b]-g)/(h-g)+k*(h-n[b])/(h-g)),p[b]=Math.pow(10,t/10),u=aa.MAX_VALUE;for(var v=0;v<c.numlines_s[b];v++,r++){var w,x=q*r/(1e3*J.BLKSIZE_s);w=this.ATHformula(1e3*x,a)-20,w=Math.pow(10,.1*w),w*=c.numlines_s[b],u>w&&(u=w)}c.ATH.cb_s[b]=u,u=-7+7*n[b]/12,n[b]>12&&(u*=1+3.1*Math.log(1+u)),n[b]<12&&(u*=1+2.3*Math.log(1-u)),u<-15&&(u=-15),u-=8,c.minval_s[b]=Math.pow(10,u/10)*c.numlines_s[b]}c.s3_ss=R(c.s3ind_s,c.npart_s,n,o,p,d),f(),X.init_fft(c),c.decay=Math.exp(-1*Y/(ga*q/192));var y;y=ka,0!=(2&a.exp_nspsytune)&&(y=1),Math.abs(a.msfix)>0&&(y=a.msfix),a.msfix=y;for(var z=0;z<c.npart_l;z++)c.s3ind[z][1]>c.npart_l-1&&(c.s3ind[z][1]=c.npart_l-1);var A=576*c.mode_gr/q;if(c.ATH.decay=Math.pow(10,-1.2*A),c.ATH.adjust=.01,c.ATH.adjustLimit=1,a.ATHtype!=-1){var x,B=a.out_samplerate/J.BLKSIZE,C=0;for(x=0,b=0;b<J.BLKSIZE/2;++b)x+=B,c.ATH.eql_w[b]=1/Math.pow(10,this.ATHformula(x,a)/10),C+=c.ATH.eql_w[b];for(C=1/C,b=J.BLKSIZE/2;--b>=0;)c.ATH.eql_w[b]*=C}for(var z=r=0;z<c.npart_s;++z)for(b=0;b<c.numlines_s[z];++b)++r;for(var z=r=0;z<c.npart_l;++z)for(b=0;b<c.numlines_l[z];++b)++r;for(r=0,b=0;b<c.npart_l;b++){var x=q*(r+c.numlines_l[b]/2)/(1*J.BLKSIZE);c.mld_cb_l[b]=S(x),r+=c.numlines_l[b]}for(;b<J.CBANDS;++b)c.mld_cb_l[b]=1;for(r=0,b=0;b<c.npart_s;b++){var x=q*(r+c.numlines_s[b]/2)/(1*J.BLKSIZE_s);c.mld_cb_s[b]=S(x),r+=c.numlines_s[b]}for(;b<J.CBANDS;++b)c.mld_cb_s[b]=1;return 0},this.ATHformula=function(a,b){var c;switch(b.ATHtype){case 0:c=T(a,9);break;case 1:c=T(a,-1);break;case 2:c=T(a,0);break;case 3:c=T(a,1)+6;break;case 4:c=T(a,b.ATHcurve);break;default:c=T(a,0)}return c}}function R(){function a(){this.mask_adjust=0,this.mask_adjust_short=0,this.bo_l_weight=e(J.SBMAX_l),this.bo_s_weight=e(J.SBMAX_s)}function b(){this.lowerlimit=0}function c(a,b){this.lowpass=b}function d(a){var b;return a.class_id=_,b=a.internal_flags=new O,a.mode=m.NOT_SET,a.original=1,a.in_samplerate=44100,a.num_channels=2,a.num_samples=-1,a.bWriteVbrTag=!0,a.quality=-1,a.short_blocks=null,b.subblock_gain=-1,a.lowpassfreq=0,a.highpassfreq=0,a.lowpasswidth=-1,a.highpasswidth=-1,a.VBR=l.vbr_off,a.VBR_q=4,a.ATHcurve=-1,a.VBR_mean_bitrate_kbps=128,a.VBR_min_bitrate_kbps=0,a.VBR_max_bitrate_kbps=0,a.VBR_hard_min=0,b.VBR_min_bitrate=1,b.VBR_max_bitrate=13,a.quant_comp=-1,a.quant_comp_short=-1,a.msfix=-1,b.resample_ratio=1,b.OldValue[0]=180,b.OldValue[1]=180,b.CurrentStep[0]=4,b.CurrentStep[1]=4,b.masking_lower=1,b.nsPsy.attackthre=-1,b.nsPsy.attackthre_s=-1,a.scale=-1,a.athaa_type=-1,a.ATHtype=-1,a.athaa_loudapprox=-1,a.athaa_sensitivity=0,a.useTemporal=null,a.interChRatio=-1,b.mf_samples_to_encode=J.ENCDELAY+J.POSTDELAY,a.encoder_padding=0,b.mf_size=J.ENCDELAY-J.MDCTDELAY,a.findReplayGain=!1,a.decode_on_the_fly=!1,b.decode_on_the_fly=!1,b.findReplayGain=!1,b.findPeakSample=!1,b.RadioGain=0,b.AudiophileGain=0,b.noclipGainChange=0,b.noclipScale=-1,a.preset=0,a.write_id3tag_automatic=!0,0}function f(a){return a>1?0:a<=0?1:Math.cos(Math.PI/2*a)}function g(a,b){var c=44100;return b>=48e3?c=48e3:b>=44100?c=44100:b>=32e3?c=32e3:b>=24e3?c=24e3:b>=22050?c=22050:b>=16e3?c=16e3:b>=12e3?c=12e3:b>=11025?c=11025:b>=8e3&&(c=8e3),a==-1?c:(a<=15960&&(c=44100),a<=15250&&(c=32e3),a<=11220&&(c=24e3),a<=9970&&(c=22050),a<=7230&&(c=16e3),a<=5420&&(c=12e3),a<=4510&&(c=11025),a<=3970&&(c=8e3),b<c?b>44100?48e3:b>32e3?44100:b>24e3?32e3:b>22050?24e3:b>16e3?22050:b>12e3?16e3:b>11025?12e3:b>8e3?11025:8e3:c)}function j(a,b){switch(a){case 44100:return b.version=1,0;case 48e3:return b.version=1,1;case 32e3:return b.version=1,2;case 22050:return b.version=0,0;case 24e3:return b.version=0,1;case 16e3:return b.version=0,2;case 11025:return b.version=0,0;case 12e3:return b.version=0,1;case 8e3:return b.version=0,2;default:return b.version=0,-1}}function n(a,b,c){c<16e3&&(b=2);for(var d=ba.bitrate_table[b][1],e=2;e<=14;e++)ba.bitrate_table[b][e]>0&&Math.abs(ba.bitrate_table[b][e]-a)<Math.abs(d-a)&&(d=ba.bitrate_table[b][e]);return d}function o(a,b,c){c<16e3&&(b=2);for(var d=0;d<=14;d++)if(ba.bitrate_table[b][d]>0&&ba.bitrate_table[b][d]==a)return d;return-1}function q(a,b){var d=[new c(8,2e3),new c(16,3700),new c(24,3900),new c(32,5500),new c(40,7e3),new c(48,7500),new c(56,1e4),new c(64,11e3),new c(80,13500),new c(96,15100),new c(112,15600),new c(128,17e3),new c(160,17500),new c(192,18600),new c(224,19400),new c(256,19700),new c(320,20500)],e=K.nearestBitrateFullIndex(b);a.lowerlimit=d[e].lowpass}function r(a){var b=a.internal_flags,c=32,d=-1;if(b.lowpass1>0){for(var e=999,g=0;g<=31;g++){var h=g/31;h>=b.lowpass2&&(c=Math.min(c,g)),b.lowpass1<h&&h<b.lowpass2&&(e=Math.min(e,g))}999==e?b.lowpass1=(c-.75)/31:b.lowpass1=(e-.75)/31,b.lowpass2=c/31}if(b.highpass2>0&&b.highpass2<.9*(.75/31)&&(b.highpass1=0,b.highpass2=0,$.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),b.highpass2>0){for(var i=-1,g=0;g<=31;g++){var h=g/31;h<=b.highpass1&&(d=Math.max(d,g)),b.highpass1<h&&h<b.highpass2&&(i=Math.max(i,g))}b.highpass1=d/31,i==-1?b.highpass2=(d+.75)/31:b.highpass2=(i+.75)/31}for(var g=0;g<32;g++){var j,k,h=g/31;j=b.highpass2>b.highpass1?f((b.highpass2-h)/(b.highpass2-b.highpass1+1e-20)):1,k=b.lowpass2>b.lowpass1?f((h-b.lowpass1)/(b.lowpass2-b.lowpass1+1e-20)):1,b.amp_filter[g]=j*k}}function t(a){var b=a.internal_flags;switch(a.quality){default:case 9:b.psymodel=0,b.noise_shaping=0,b.noise_shaping_amp=0,b.noise_shaping_stop=0,b.use_best_huffman=0,b.full_outer_loop=0;break;case 8:a.quality=7;case 7:b.psymodel=1,b.noise_shaping=0,b.noise_shaping_amp=0,b.noise_shaping_stop=0,b.use_best_huffman=0,b.full_outer_loop=0;break;case 6:b.psymodel=1,0==b.noise_shaping&&(b.noise_shaping=1),b.noise_shaping_amp=0,b.noise_shaping_stop=0,b.subblock_gain==-1&&(b.subblock_gain=1),b.use_best_huffman=0,b.full_outer_loop=0;break;case 5:b.psymodel=1,0==b.noise_shaping&&(b.noise_shaping=1),b.noise_shaping_amp=0,b.noise_shaping_stop=0,b.subblock_gain==-1&&(b.subblock_gain=1),b.use_best_huffman=0,b.full_outer_loop=0;break;case 4:b.psymodel=1,0==b.noise_shaping&&(b.noise_shaping=1),b.noise_shaping_amp=0,b.noise_shaping_stop=0,b.subblock_gain==-1&&(b.subblock_gain=1),b.use_best_huffman=1,b.full_outer_loop=0;break;case 3:b.psymodel=1,0==b.noise_shaping&&(b.noise_shaping=1),b.noise_shaping_amp=1,b.noise_shaping_stop=1,b.subblock_gain==-1&&(b.subblock_gain=1),b.use_best_huffman=1,b.full_outer_loop=0;break;case 2:b.psymodel=1,0==b.noise_shaping&&(b.noise_shaping=1),0==b.substep_shaping&&(b.substep_shaping=2),b.noise_shaping_amp=1,b.noise_shaping_stop=1,b.subblock_gain==-1&&(b.subblock_gain=1),b.use_best_huffman=1,b.full_outer_loop=0;break;case 1:b.psymodel=1,0==b.noise_shaping&&(b.noise_shaping=1),0==b.substep_shaping&&(b.substep_shaping=2),b.noise_shaping_amp=2,b.noise_shaping_stop=1,b.subblock_gain==-1&&(b.subblock_gain=1),b.use_best_huffman=1,b.full_outer_loop=0;break;case 0:b.psymodel=1,0==b.noise_shaping&&(b.noise_shaping=1),0==b.substep_shaping&&(b.substep_shaping=2),b.noise_shaping_amp=2,b.noise_shaping_stop=1,b.subblock_gain==-1&&(b.subblock_gain=1),b.use_best_huffman=1,b.full_outer_loop=0}}function u(a){var b=a.internal_flags;a.frameNum=0,a.write_id3tag_automatic&&X.id3tag_write_v2(a),b.bitrate_stereoMode_Hist=h([16,5]),b.bitrate_blockType_Hist=h([16,6]),b.PeakSample=0,a.bWriteVbrTag&&V.InitVbrTag(a)}function v(a,b){(null==a.in_buffer_0||a.in_buffer_nsamples<b)&&(a.in_buffer_0=e(b),a.in_buffer_1=e(b),a.in_buffer_nsamples=b)}function w(a){var b=J.BLKSIZE+a.framesize-J.FFTOFFSET;return b=Math.max(b,512+a.framesize-32)}function x(a,b,c,d,e,f,g){var h,i,j,k,l,m=a.internal_flags,n=0,o=[null,null],q=[null,null];if(m.Class_ID!=_)return-3;if(0==d)return 0;if(l=P.copy_buffer(m,e,f,g,0),l<0)return l;if(f+=l,n+=l,q[0]=b,q[1]=c,s.NEQ(a.scale,0)&&s.NEQ(a.scale,1))for(i=0;i<d;++i)q[0][i]*=a.scale,2==m.channels_out&&(q[1][i]*=a.scale);if(s.NEQ(a.scale_left,0)&&s.NEQ(a.scale_left,1))for(i=0;i<d;++i)q[0][i]*=a.scale_left;if(s.NEQ(a.scale_right,0)&&s.NEQ(a.scale_right,1))for(i=0;i<d;++i)q[1][i]*=a.scale_right;if(2==a.num_channels&&1==m.channels_out)for(i=0;i<d;++i)q[0][i]=.5*(q[0][i]+q[1][i]),q[1][i]=0;k=w(a),o[0]=m.mfbuf[0],o[1]=m.mfbuf[1];for(var r=0;d>0;){var t=[null,null],u=0,v=0;t[0]=q[0],t[1]=q[1];var x=new D;if(I(a,o,t,r,d,x),u=x.n_in,v=x.n_out,m.findReplayGain&&!m.decode_on_the_fly&&N.AnalyzeSamples(m.rgdata,o[0],m.mf_size,o[1],m.mf_size,v,m.channels_out)==p.GAIN_ANALYSIS_ERROR)return-6;if(d-=u,r+=u,2==m.channels_out,m.mf_size+=v,m.mf_samples_to_encode<1&&(m.mf_samples_to_encode=J.ENCDELAY+J.POSTDELAY),m.mf_samples_to_encode+=v,m.mf_size>=k){var y=g-n;if(0==g&&(y=0),h=C(a,o[0],o[1],e,f,y),h<0)return h;for(f+=h,n+=h,m.mf_size-=a.framesize,m.mf_samples_to_encode-=a.framesize,j=0;j<m.channels_out;j++)for(i=0;i<m.mf_size;i++)o[j][i]=o[j][i+a.framesize]}}return n}function C(a,b,c,d,e,f){var g=K.enc.lame_encode_mp3_frame(a,b,c,d,e,f);return a.frameNum++,g}function D(){this.n_in=0,this.n_out=0}function E(){this.num_used=0}function F(a,b){return 0!=b?F(b,a%b):a}function G(a,b,c){var d=Math.PI*b;a/=c,a<0&&(a=0),a>1&&(a=1);var e=a-.5,f=.42-.5*Math.cos(2*a*Math.PI)+.08*Math.cos(4*a*Math.PI);return Math.abs(e)<1e-9?d/Math.PI:f*Math.sin(c*d*e)/(Math.PI*c*e)}function H(a,b,c,d,f,g,h,i,j){var k,l,m=a.internal_flags,n=0,o=a.out_samplerate/F(a.out_samplerate,a.in_samplerate);o>O.BPC&&(o=O.BPC);var p=Math.abs(m.resample_ratio-Math.floor(.5+m.resample_ratio))<1e-4?1:0,q=1/m.resample_ratio;q>1&&(q=1);var r=31;0==r%2&&--r,r+=p;var s=r+1;if(0==m.fill_buffer_resample_init){for(m.inbuf_old[0]=e(s),m.inbuf_old[1]=e(s),k=0;k<=2*o;++k)m.blackfilt[k]=e(s);for(m.itime[0]=0,m.itime[1]=0,n=0;n<=2*o;n++){var t=0,u=(n-o)/(2*o);for(k=0;k<=r;k++)t+=m.blackfilt[n][k]=G(k-u,q,r);for(k=0;k<=r;k++)m.blackfilt[n][k]/=t}m.fill_buffer_resample_init=1}var v=m.inbuf_old[j];for(l=0;l<d;l++){var w,x;if(w=l*m.resample_ratio,n=0|Math.floor(w-m.itime[j]),r+n-r/2>=h)break;var u=w-m.itime[j]-(n+.5*(r%2));x=0|Math.floor(2*u*o+o+.5);var y=0;for(k=0;k<=r;++k){var z,A=k+n-r/2;z=A<0?v[s+A]:f[g+A],y+=z*m.blackfilt[x][k]}b[c+l]=y}if(i.num_used=Math.min(h,r+n-r/2),m.itime[j]+=i.num_used-l*m.resample_ratio,i.num_used>=s)for(k=0;k<s;k++)v[k]=f[g+i.num_used+k-s];else{var B=s-i.num_used;for(k=0;k<B;++k)v[k]=v[k+i.num_used];for(n=0;k<s;++k,++n)v[k]=f[g+n]}return l}function I(a,b,c,d,e,f){var g=a.internal_flags;if(g.resample_ratio<.9999||g.resample_ratio>1.0001)for(var h=0;h<g.channels_out;h++){var i=new E;f.n_out=H(a,b[h],g.mf_size,a.framesize,c[h],d,e,i,h),f.n_in=i.num_used}else{f.n_out=Math.min(a.framesize,e),f.n_in=f.n_out;for(var j=0;j<f.n_out;++j)b[0][g.mf_size+j]=c[0][d+j],2==g.channels_out&&(b[1][g.mf_size+j]=c[1][d+j])}}var K=this,L=131072;R.V9=410,R.V8=420,R.V7=430,R.V6=440,R.V5=450,R.V4=460,R.V3=470,R.V2=480,R.V1=490,R.V0=500,R.R3MIX=1e3,R.STANDARD=1001,R.EXTREME=1002,R.INSANE=1003,R.STANDARD_FAST=1004,R.EXTREME_FAST=1005,R.MEDIUM=1006,R.MEDIUM_FAST=1007;var M=16384+L;R.LAME_MAXMP3BUFFER=M;var N,P,S,T,U,V,W,X,Y,Z=new Q;this.enc=new J,this.setModules=function(a,b,c,d,e,f,g,h,i){N=a,P=b,S=c,T=d,U=e,V=f,W=g,X=h,Y=i,this.enc.setModules(P,Z,T,V)};var _=4294479419;this.lame_init=function(){var a=new y,b=d(a);return 0!=b?null:(a.lame_allocated_gfp=1,a)},this.nearestBitrateFullIndex=function(a){var b=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],c=0,d=0,e=0,f=0;f=b[16],e=16,d=b[16],c=16;for(var g=0;g<16;g++)if(Math.max(a,b[g+1])!=a){f=b[g+1],e=g+1,d=b[g],c=g;break}return f-a>a-d?c:e},this.lame_init_params=function(c){var d=c.internal_flags;if(d.Class_ID=0,null==d.ATH&&(d.ATH=new z),null==d.PSY&&(d.PSY=new a),null==d.rgdata&&(d.rgdata=new A),d.channels_in=c.num_channels,1==d.channels_in&&(c.mode=m.MONO),d.channels_out=c.mode==m.MONO?1:2,d.mode_ext=J.MPG_MD_MS_LR,c.mode==m.MONO&&(c.force_ms=!1),c.VBR==l.vbr_off&&128!=c.VBR_mean_bitrate_kbps&&0==c.brate&&(c.brate=c.VBR_mean_bitrate_kbps),c.VBR==l.vbr_off||c.VBR==l.vbr_mtrh||c.VBR==l.vbr_mt||(c.free_format=!1),c.VBR==l.vbr_off&&0==c.brate&&s.EQ(c.compression_ratio,0)&&(c.compression_ratio=11.025),c.VBR==l.vbr_off&&c.compression_ratio>0&&(0==c.out_samplerate&&(c.out_samplerate=map2MP3Frequency(int(.97*c.in_samplerate))),c.brate=0|16*c.out_samplerate*d.channels_out/(1e3*c.compression_ratio),d.samplerate_index=j(c.out_samplerate,c),c.free_format||(c.brate=n(c.brate,c.version,c.out_samplerate))),0!=c.out_samplerate&&(c.out_samplerate<16e3?(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,64)):c.out_samplerate<32e3?(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,8),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,160)):(c.VBR_mean_bitrate_kbps=Math.max(c.VBR_mean_bitrate_kbps,32),c.VBR_mean_bitrate_kbps=Math.min(c.VBR_mean_bitrate_kbps,320))),0==c.lowpassfreq){var e=16e3;switch(c.VBR){case l.vbr_off:var f=new b;q(f,c.brate),e=f.lowerlimit;break;case l.vbr_abr:var f=new b;q(f,c.VBR_mean_bitrate_kbps),e=f.lowerlimit;break;case l.vbr_rh:var h=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=c.VBR_q&&c.VBR_q<=9){var i=h[c.VBR_q],v=h[c.VBR_q+1],w=c.VBR_q_frac;e=linear_int(i,v,w)}else e=19500;break;default:var h=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950];if(0<=c.VBR_q&&c.VBR_q<=9){var i=h[c.VBR_q],v=h[c.VBR_q+1],w=c.VBR_q_frac;e=linear_int(i,v,w)}else e=19500}c.mode!=m.MONO||c.VBR!=l.vbr_off&&c.VBR!=l.vbr_abr||(e*=1.5),c.lowpassfreq=0|e}if(0==c.out_samplerate&&(2*c.lowpassfreq>c.in_samplerate&&(c.lowpassfreq=c.in_samplerate/2),c.out_samplerate=g(0|c.lowpassfreq,c.in_samplerate)),c.lowpassfreq=Math.min(20500,c.lowpassfreq),c.lowpassfreq=Math.min(c.out_samplerate/2,c.lowpassfreq),c.VBR==l.vbr_off&&(c.compression_ratio=16*c.out_samplerate*d.channels_out/(1e3*c.brate)),c.VBR==l.vbr_abr&&(c.compression_ratio=16*c.out_samplerate*d.channels_out/(1e3*c.VBR_mean_bitrate_kbps)),c.bWriteVbrTag||(c.findReplayGain=!1,c.decode_on_the_fly=!1,d.findPeakSample=!1),d.findReplayGain=c.findReplayGain,d.decode_on_the_fly=c.decode_on_the_fly,d.decode_on_the_fly&&(d.findPeakSample=!0),d.findReplayGain&&N.InitGainAnalysis(d.rgdata,c.out_samplerate)==p.INIT_GAIN_ANALYSIS_ERROR)return c.internal_flags=null,-6;switch(d.decode_on_the_fly&&!c.decode_only&&(null!=d.hip&&Y.hip_decode_exit(d.hip),d.hip=Y.hip_decode_init()),d.mode_gr=c.out_samplerate<=24e3?1:2,c.framesize=576*d.mode_gr,c.encoder_delay=J.ENCDELAY,d.resample_ratio=c.in_samplerate/c.out_samplerate,c.VBR){case l.vbr_mt:case l.vbr_rh:case l.vbr_mtrh:var x=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5];c.compression_ratio=x[c.VBR_q];break;case l.vbr_abr:c.compression_ratio=16*c.out_samplerate*d.channels_out/(1e3*c.VBR_mean_bitrate_kbps);break;default:c.compression_ratio=16*c.out_samplerate*d.channels_out/(1e3*c.brate)}if(c.mode==m.NOT_SET&&(c.mode=m.JOINT_STEREO),c.highpassfreq>0?(d.highpass1=2*c.highpassfreq,c.highpasswidth>=0?d.highpass2=2*(c.highpassfreq+c.highpasswidth):d.highpass2=2*c.highpassfreq,d.highpass1/=c.out_samplerate,d.highpass2/=c.out_samplerate):(d.highpass1=0,d.highpass2=0),c.lowpassfreq>0?(d.lowpass2=2*c.lowpassfreq,c.lowpasswidth>=0?(d.lowpass1=2*(c.lowpassfreq-c.lowpasswidth),d.lowpass1<0&&(d.lowpass1=0)):d.lowpass1=2*c.lowpassfreq,d.lowpass1/=c.out_samplerate,d.lowpass2/=c.out_samplerate):(d.lowpass1=0,d.lowpass2=0),r(c),d.samplerate_index=j(c.out_samplerate,c),d.samplerate_index<0)return c.internal_flags=null,-1;if(c.VBR==l.vbr_off){if(c.free_format)d.bitrate_index=0;else if(c.brate=n(c.brate,c.version,c.out_samplerate),d.bitrate_index=o(c.brate,c.version,c.out_samplerate),d.bitrate_index<=0)return c.internal_flags=null,-1}else d.bitrate_index=1;c.analysis&&(c.bWriteVbrTag=!1),null!=d.pinfo&&(c.bWriteVbrTag=!1),P.init_bit_stream_w(d);for(var y=d.samplerate_index+3*c.version+6*(c.out_samplerate<16e3?1:0),C=0;C<J.SBMAX_l+1;C++)d.scalefac_band.l[C]=T.sfBandIndex[y].l[C];for(var C=0;C<J.PSFB21+1;C++){var D=(d.scalefac_band.l[22]-d.scalefac_band.l[21])/J.PSFB21,E=d.scalefac_band.l[21]+C*D;d.scalefac_band.psfb21[C]=E}d.scalefac_band.psfb21[J.PSFB21]=576;for(var C=0;C<J.SBMAX_s+1;C++)d.scalefac_band.s[C]=T.sfBandIndex[y].s[C];for(var C=0;C<J.PSFB12+1;C++){var D=(d.scalefac_band.s[13]-d.scalefac_band.s[12])/J.PSFB12,E=d.scalefac_band.s[12]+C*D;d.scalefac_band.psfb12[C]=E}d.scalefac_band.psfb12[J.PSFB12]=192,1==c.version?d.sideinfo_len=1==d.channels_out?21:36:d.sideinfo_len=1==d.channels_out?13:21,c.error_protection&&(d.sideinfo_len+=2),u(c),d.Class_ID=_;var F;for(F=0;F<19;F++)d.nsPsy.pefirbuf[F]=700*d.mode_gr*d.channels_out;switch(c.ATHtype==-1&&(c.ATHtype=4),c.VBR){case l.vbr_mt:c.VBR=l.vbr_mtrh;case l.vbr_mtrh:null==c.useTemporal&&(c.useTemporal=!1),S.apply_preset(c,500-10*c.VBR_q,0),c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),c.quality<5&&(c.quality=0),c.quality>5&&(c.quality=5),d.PSY.mask_adjust=c.maskingadjust,d.PSY.mask_adjust_short=c.maskingadjust_short,c.experimentalY?d.sfb21_extra=!1:d.sfb21_extra=c.out_samplerate>44e3,d.iteration_loop=new VBRNewIterationLoop(U);break;case l.vbr_rh:S.apply_preset(c,500-10*c.VBR_q,0),d.PSY.mask_adjust=c.maskingadjust,d.PSY.mask_adjust_short=c.maskingadjust_short,c.experimentalY?d.sfb21_extra=!1:d.sfb21_extra=c.out_samplerate>44e3,c.quality>6&&(c.quality=6),c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),d.iteration_loop=new VBROldIterationLoop(U);break;default:var G;d.sfb21_extra=!1,c.quality<0&&(c.quality=LAME_DEFAULT_QUALITY),G=c.VBR,G==l.vbr_off&&(c.VBR_mean_bitrate_kbps=c.brate),S.apply_preset(c,c.VBR_mean_bitrate_kbps,0),c.VBR=G,d.PSY.mask_adjust=c.maskingadjust,d.PSY.mask_adjust_short=c.maskingadjust_short,G==l.vbr_off?d.iteration_loop=new B(U):d.iteration_loop=new ABRIterationLoop(U)}if(c.VBR!=l.vbr_off){if(d.VBR_min_bitrate=1,d.VBR_max_bitrate=14,c.out_samplerate<16e3&&(d.VBR_max_bitrate=8),0!=c.VBR_min_bitrate_kbps&&(c.VBR_min_bitrate_kbps=n(c.VBR_min_bitrate_kbps,c.version,c.out_samplerate),d.VBR_min_bitrate=o(c.VBR_min_bitrate_kbps,c.version,c.out_samplerate),d.VBR_min_bitrate<0))return-1;if(0!=c.VBR_max_bitrate_kbps&&(c.VBR_max_bitrate_kbps=n(c.VBR_max_bitrate_kbps,c.version,c.out_samplerate),d.VBR_max_bitrate=o(c.VBR_max_bitrate_kbps,c.version,c.out_samplerate),d.VBR_max_bitrate<0))return-1;c.VBR_min_bitrate_kbps=ba.bitrate_table[c.version][d.VBR_min_bitrate],c.VBR_max_bitrate_kbps=ba.bitrate_table[c.version][d.VBR_max_bitrate],c.VBR_mean_bitrate_kbps=Math.min(ba.bitrate_table[c.version][d.VBR_max_bitrate],c.VBR_mean_bitrate_kbps),c.VBR_mean_bitrate_kbps=Math.max(ba.bitrate_table[c.version][d.VBR_min_bitrate],c.VBR_mean_bitrate_kbps)}return c.tune&&(d.PSY.mask_adjust+=c.tune_value_a,d.PSY.mask_adjust_short+=c.tune_value_a),t(c),c.athaa_type<0?d.ATH.useAdjust=3:d.ATH.useAdjust=c.athaa_type,d.ATH.aaSensitivityP=Math.pow(10,c.athaa_sensitivity/-10),null==c.short_blocks&&(c.short_blocks=k.short_block_allowed),c.short_blocks!=k.short_block_allowed||c.mode!=m.JOINT_STEREO&&c.mode!=m.STEREO||(c.short_blocks=k.short_block_coupled),c.quant_comp<0&&(c.quant_comp=1),c.quant_comp_short<0&&(c.quant_comp_short=0),c.msfix<0&&(c.msfix=0),c.exp_nspsytune=1|c.exp_nspsytune,c.internal_flags.nsPsy.attackthre<0&&(c.internal_flags.nsPsy.attackthre=Q.NSATTACKTHRE),c.internal_flags.nsPsy.attackthre_s<0&&(c.internal_flags.nsPsy.attackthre_s=Q.NSATTACKTHRE_S),c.scale<0&&(c.scale=1),c.ATHtype<0&&(c.ATHtype=4),c.ATHcurve<0&&(c.ATHcurve=4),c.athaa_loudapprox<0&&(c.athaa_loudapprox=2),c.interChRatio<0&&(c.interChRatio=0),null==c.useTemporal&&(c.useTemporal=!0),d.slot_lag=d.frac_SpF=0,c.VBR==l.vbr_off&&(d.slot_lag=d.frac_SpF=72e3*(c.version+1)*c.brate%c.out_samplerate|0),T.iteration_init(c),Z.psymodel_init(c),0},this.lame_encode_flush=function(a,b,c,d){var e,f,g,h,j=a.internal_flags,k=i([2,1152]),l=0,m=j.mf_samples_to_encode-J.POSTDELAY,n=w(a);if(j.mf_samples_to_encode<1)return 0;for(e=0,a.in_samplerate!=a.out_samplerate&&(m+=16*a.out_samplerate/a.in_samplerate),
g=a.framesize-m%a.framesize,g<576&&(g+=a.framesize),a.encoder_padding=g,h=(m+g)/a.framesize;h>0&&l>=0;){var o=n-j.mf_size,p=a.frameNum;o*=a.in_samplerate,o/=a.out_samplerate,o>1152&&(o=1152),o<1&&(o=1),f=d-e,0==d&&(f=0),l=this.lame_encode_buffer(a,k[0],k[1],o,b,c,f),c+=l,e+=l,h-=p!=a.frameNum?1:0}if(j.mf_samples_to_encode=0,l<0)return l;if(f=d-e,0==d&&(f=0),P.flush_bitstream(a),l=P.copy_buffer(j,b,c,f,1),l<0)return l;if(c+=l,e+=l,f=d-e,0==d&&(f=0),a.write_id3tag_automatic){if(X.id3tag_write_v1(a),l=P.copy_buffer(j,b,c,f,0),l<0)return l;e+=l}return e},this.lame_encode_buffer=function(a,b,c,d,e,f,g){var h=a.internal_flags,i=[null,null];if(h.Class_ID!=_)return-3;if(0==d)return 0;v(h,d),i[0]=h.in_buffer_0,i[1]=h.in_buffer_1;for(var j=0;j<d;j++)i[0][j]=b[j],h.channels_in>1&&(i[1][j]=c[j]);return x(a,i[0],i[1],d,e,f,g)}}function S(){var a,b;this.setModules=function(c,d){a=c,b=d}}function T(){var a,b,c;this.setModules=function(d,e,f){a=d,b=e,c=f}}function U(){}function V(){var a,b;this.setModules=function(c,d){a=c,b=d}}function W(b,c,d){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),b=1,c=44100,d=128);var e=new R,f=new S,g=new p,h=new s,i=new o,j=new D,k=new G,l=new t,u=new n,v=new V,w=new q,x=new r,y=new T,z=new U;e.setModules(g,h,i,j,k,l,u,v,z),h.setModules(g,z,u,l),v.setModules(h,u),i.setModules(e),k.setModules(h,w,j,x),j.setModules(x,w,e.enc.psy),w.setModules(h),x.setModules(j),l.setModules(e,h,u),f.setModules(y,z),y.setModules(u,v,i);var A=e.lame_init();A.num_channels=b,A.in_samplerate=c,A.brate=d,A.mode=m.STEREO,A.quality=3,A.bWriteVbrTag=!1,A.disable_reservoir=!0,A.write_id3tag_automatic=!1;var B=(e.lame_init_params(A),1152),C=0|1.25*B+7200,E=a(C);this.encodeBuffer=function(c,d){1==b&&(d=c),c.length>B&&(B=c.length,C=0|1.25*B+7200,E=a(C));var f=e.lame_encode_buffer(A,c,d,c.length,E,0,C);return new Int8Array(E.subarray(0,f))},this.flush=function(){var a=e.lame_encode_flush(A,E,0,C);return new Int8Array(E.subarray(0,a))}}function X(){this.dataOffset=0,this.dataLen=0,this.channels=0,this.sampleRate=0}function Y(a){return a.charCodeAt(0)<<24|a.charCodeAt(1)<<16|a.charCodeAt(2)<<8|a.charCodeAt(3)}var Z={};Z.fill=function(a,b,c,d){if(2==arguments.length)for(var e=0;e<a.length;e++)a[e]=arguments[1];else for(var e=b;e<c;e++)a[e]=d};var $={};$.arraycopy=function(a,b,c,d,e){for(var f=b+e;b<f;)c[d++]=a[b++]};var _={};_.SQRT2=1.4142135623730951,_.FAST_LOG10=function(a){return Math.log10(a)},_.FAST_LOG10_X=function(a,b){return Math.log10(a)*b},k.short_block_allowed=new k(0),k.short_block_coupled=new k(1),k.short_block_dispensed=new k(2),k.short_block_forced=new k(3);var aa={};aa.MAX_VALUE=3.4028235e38,l.vbr_off=new l(0),l.vbr_mt=new l(1),l.vbr_rh=new l(2),l.vbr_abr=new l(3),l.vbr_mtrh=new l(4),l.vbr_default=l.vbr_mtrh;m.STEREO=new m(0),m.JOINT_STEREO=new m(1),m.DUAL_CHANNEL=new m(2),m.MONO=new m(3),m.NOT_SET=new m(4),p.STEPS_per_dB=100,p.MAX_dB=120,p.GAIN_NOT_ENOUGH_SAMPLES=-24601,p.GAIN_ANALYSIS_ERROR=0,p.GAIN_ANALYSIS_OK=1,p.INIT_GAIN_ANALYSIS_ERROR=0,p.INIT_GAIN_ANALYSIS_OK=1,p.YULE_ORDER=10,p.MAX_ORDER=p.YULE_ORDER,p.MAX_SAMP_FREQ=48e3,p.RMS_WINDOW_TIME_NUMERATOR=1,p.RMS_WINDOW_TIME_DENOMINATOR=20,p.MAX_SAMPLES_PER_WINDOW=p.MAX_SAMP_FREQ*p.RMS_WINDOW_TIME_NUMERATOR/p.RMS_WINDOW_TIME_DENOMINATOR+1,s.EQ=function(a,b){return Math.abs(a)>Math.abs(b)?Math.abs(a-b)<=1e-6*Math.abs(a):Math.abs(a-b)<=1e-6*Math.abs(b)},s.NEQ=function(a,b){return!s.EQ(a,b)},t.NUMTOCENTRIES=100,t.MAXFRAMESIZE=2880;var ba={};ba.t1HB=[1,1,1,0],ba.t2HB=[1,2,1,3,1,1,3,2,0],ba.t3HB=[3,2,1,1,1,1,3,2,0],ba.t5HB=[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],ba.t6HB=[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],ba.t7HB=[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],ba.t8HB=[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],ba.t9HB=[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],ba.t10HB=[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],ba.t11HB=[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],ba.t12HB=[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],ba.t13HB=[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],ba.t15HB=[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],ba.t16HB=[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],ba.t24HB=[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],ba.t32HB=[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],ba.t33HB=[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],ba.t1l=[1,4,3,5],ba.t2l=[1,4,7,4,5,7,6,7,8],ba.t3l=[2,3,7,4,4,7,6,7,8],ba.t5l=[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],ba.t6l=[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],ba.t7l=[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],ba.t8l=[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],ba.t9l=[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],ba.t10l=[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],ba.t11l=[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],ba.t12l=[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],ba.t13l=[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],ba.t15l=[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],ba.t16_5l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],ba.t16l=[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],ba.t24l=[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],ba.t32l=[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],ba.t33l=[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8],ba.ht=[new u(0,0,null,null),new u(2,0,ba.t1HB,ba.t1l),new u(3,0,ba.t2HB,ba.t2l),new u(3,0,ba.t3HB,ba.t3l),new u(0,0,null,null),new u(4,0,ba.t5HB,ba.t5l),new u(4,0,ba.t6HB,ba.t6l),new u(6,0,ba.t7HB,ba.t7l),new u(6,0,ba.t8HB,ba.t8l),new u(6,0,ba.t9HB,ba.t9l),new u(8,0,ba.t10HB,ba.t10l),new u(8,0,ba.t11HB,ba.t11l),new u(8,0,ba.t12HB,ba.t12l),new u(16,0,ba.t13HB,ba.t13l),new u(0,0,null,ba.t16_5l),new u(16,0,ba.t15HB,ba.t15l),new u(1,1,ba.t16HB,ba.t16l),new u(2,3,ba.t16HB,ba.t16l),new u(3,7,ba.t16HB,ba.t16l),new u(4,15,ba.t16HB,ba.t16l),new u(6,63,ba.t16HB,ba.t16l),new u(8,255,ba.t16HB,ba.t16l),new u(10,1023,ba.t16HB,ba.t16l),new u(13,8191,ba.t16HB,ba.t16l),new u(4,15,ba.t24HB,ba.t24l),new u(5,31,ba.t24HB,ba.t24l),new u(6,63,ba.t24HB,ba.t24l),new u(7,127,ba.t24HB,ba.t24l),new u(8,255,ba.t24HB,ba.t24l),new u(9,511,ba.t24HB,ba.t24l),new u(11,2047,ba.t24HB,ba.t24l),new u(13,8191,ba.t24HB,ba.t24l),new u(0,0,ba.t32HB,ba.t32l),new u(0,0,ba.t33HB,ba.t33l)],ba.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],ba.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],ba.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],ba.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],ba.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],ba.scfsi_band=[0,6,11,16,21],D.Q_MAX=257,D.Q_MAX2=116,D.LARGE_BITS=1e5,D.IXMAX_VAL=8206;var ca={};ca.SFBMAX=3*J.SBMAX_s,J.ENCDELAY=576,J.POSTDELAY=1152,J.MDCTDELAY=48,J.FFTOFFSET=224+J.MDCTDELAY,J.DECDELAY=528,J.SBLIMIT=32,J.CBANDS=64,J.SBPSY_l=21,J.SBPSY_s=12,J.SBMAX_l=22,J.SBMAX_s=13,J.PSFB21=6,J.PSFB12=6,J.BLKSIZE=1024,J.HBLKSIZE=J.BLKSIZE/2+1,J.BLKSIZE_s=256,J.HBLKSIZE_s=J.BLKSIZE_s/2+1,J.NORM_TYPE=0,J.START_TYPE=1,J.SHORT_TYPE=2,J.STOP_TYPE=3,J.MPG_MD_LR_LR=0,J.MPG_MD_LR_I=1,J.MPG_MD_MS_LR=2,J.MPG_MD_MS_I=3,J.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3.898045e-17,.0467745*5,.50455,.756825,.187098*5],O.MFSIZE=3456+J.ENCDELAY-J.MDCTDELAY,O.MAX_HEADER_BUF=256,O.MAX_BITS_PER_CHANNEL=4095,O.MAX_BITS_PER_GRANULE=7680,O.BPC=320,X.RIFF=Y("RIFF"),X.WAVE=Y("WAVE"),X.fmt_=Y("fmt "),X.data=Y("data"),X.readHeader=function(a){var b=new X,c=a.getUint32(0,!1);if(X.RIFF==c){a.getUint32(4,!0);if(X.WAVE==a.getUint32(8,!1)&&X.fmt_==a.getUint32(12,!1)){var d=a.getUint32(16,!0),e=20;switch(d){case 16:case 18:b.channels=a.getUint16(e+2,!0),b.sampleRate=a.getUint32(e+4,!0);break;default:throw"extended fmt chunk not implemented"}e+=d;for(var f=X.data,g=0;f!=c&&(c=a.getUint32(e,!1),g=a.getUint32(e+4,!0),f!=c);)e+=g+8;return b.dataLen=g,b.dataOffset=e+8,b}}},ca.SFBMAX=3*J.SBMAX_s,b.Mp3Encoder=W,b.WavHeader=X}a.lamejs=b,b()}(this),d()}),$__System.register("1a",["18","19"],function(a){"use strict";function b(a,b,c){try{var d=new FileReader;d.onload=function(){var a=new e.Mp3Encoder("mono"===b.mode?1:2,b.hz,b.kbps);c(new Blob([a.encodeBuffer(new Int16Array(this.result)),new Int8Array(a.flush())],{type:"audio/mp3"}))},d.onerror=function(a){alert("an error occurred trying to read the wav data ",a)},d.readAsArrayBuffer(a)}catch(a){console.log("error converting wav to mp3 ",a)}}function c(a,b){var c=window.AudioContext?new window.AudioContext:window.webkitAudioContext?new window.webkitAudioContext:null;return null===c?void b(new Error("AudioContext is not available.")):void function(a,b){var c=(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?function(a,b,c){this.mediaDevices.getUserMedia(a).then(b).catch(c)}:null)||navigator.getUserMedia||navigator.webkitGetUserMedia||function(a,b,c){c(new Error("Requesting user media is not supported."))};return c.call(navigator,{audio:!0},a,b)}(function(e){var f=(c.createScriptProcessor||c.createJavaScriptNode||function(){return null}).call(c,4096,1,1);if(null===f)return void b(new Error("Audio device is not avilable."));var g=new d(c.createMediaStreamSource(e),{numChannels:1});g.record(),a({cancel:function(a){c.close(),g.stop(),g.clear(),a()},save:function(a){c.close(),g.stop(),g.exportWAV(a)}})},b)}var d,e;return{setters:[function(a){d=a.default},function(a){e=a}],execute:function(){a("convertWavToMp3",b),a("record",c)}}}),$__System.register("1b",["6","1c","1d"],function(a){var b,c,d,e;return{setters:[function(a){b=a.getRcfOptions},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(c){var e=this;d(this,a);var f=b();this.options=c||{},this.swfObject=null,this._callbacks={},this._events={},this._initialized=!1,this._flashBlockCatched=!1,this._limit=6e4,this.options.swfSrc=f.swfFallbackURL+"recorder.swf",this.index=window.FlashRecorder.length,this.options.flashContainer||this._setupFlashContainer(),this.bind("initialized",function(){e._initialized=!0,e._flashBlockCatched&&e._defaultOnHideFlash(),e.options.initialized&&e.options.initialized()}),this.bind("showFlash",this.options.onFlashSecurity||this._defaultOnShowFlash),this._loadFlash()}return c(a,[{key:"record",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];null!==this.swfObject&&(this.clearBindings("recordingStart"),this.clearBindings("recordingStop"),this.clearBindings("recordingProgress"),this.clearBindings("recordingCancel"),this.bind("recordingStart",this._defaultOnHideFlash),this.bind("recordingStop",this._defaultOnHideFlash),this.bind("recordingCancel",this._defaultOnHideFlash),this.bind("recordingCancel",this._loadFlash),this.bind("recordingStart",a.start),this.bind("recordingStop",a.stop),this.bind("recordingProgress",a.progress),this.bind("recordingCancel",a.cancel),this.swfObject.record())}},{key:"stop",value:function(){return null===this.swfObject?this.swfObject:this.swfObject._stop()}},{key:"play",value:function(){var a=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];null!==this.swfObject&&(this.clearBindings("playingProgress"),this.bind("playingStart",a.start),this.bind("playingProgress",a.progress),this.bind("playingStop",a.stop),this.swfObject._play())}},{key:"recordingDuration",value:function(){return null===this.swfObject?0:this.swfObject.recordingDuration()}},{key:"upload",value:function(a){var b=this;null!==this.swfObject&&(a.audioParam=a.audioParam||"audio",a.params=a.params||{},this.clearBindings("uploadSuccess"),this.bind("uploadSuccess",function(c){a.success(b._externalInterfaceDecode(c))}),this.swfObject.upload(a.url,a.audioParam,a.params))}},{key:"audioData",value:function(a){if(null!==this.swfObject){var b=";",c=void 0,d=void 0,e=[],f=void 0;a&&(c=a.join(";")),d=this.swfObject.audioData(c).split(b);for(var g=0;g<d.length;g++)f=parseFloat(d[g]),isNaN(f)||e.push(f);return e}}},{key:"request",value:function(a,b,c,d,e){if(null!==this.swfObject){var f=this.registerCallback(e);this.swfObject.request(a,b,c,d,f)}}},{key:"clearBindings",value:function(a){this._events[a]=[]}},{key:"bind",value:function(a,b){this._events[a]||(this._events[a]=[]),this._events[a].push(b)}},{key:"triggerEvent",value:function(a,b,c){var d=this;this._executeInWindowContext(function(){if(d._events.hasOwnProperty(a))for(var e=0,f=d._events[a].length;e<f;e++)d._events[a][e]&&d._events[a][e].apply(d,[b,c])})}},{key:"triggerCallback",value:function(a,b){var c=this;this._executeInWindowContext(function(){c._callbacks[a].apply(null,b)})}},{key:"registerCallback",value:function(a){var b="CB"+parseInt(999999*Math.random(),10);return this._callbacks[b]=a,b}},{key:"_executeInWindowContext",value:function(a){window.setTimeout(a,1)}},{key:"_setupFlashContainer",value:function(){var a="flash-container-"+parseInt(999999*Math.random(),10);this.options.flashContainer=document.createElement("div"),this.options.flashContainer.setAttribute("id",a),this.options.flashContainer.setAttribute("style","position: fixed; left: -9999px; top: -9999px; width: 230px; height: 140px; margin-left: 10px; border-top: 6px solid rgba(128, 128, 128, 0.6); border-bottom: 6px solid rgba(128, 128, 128, 0.6); border-radius: 5px 5px; padding-bottom: 1px; padding-right: 1px; z-index: 9999;"),document.body.appendChild(this.options.flashContainer)}},{key:"_clearFlash",value:function(){var a=this.options.flashContainer.children[0];a&&this.options.flashContainer.removeChild(a)}},{key:"_loadFlash",value:function(){var a=this;this._clearFlash();var b="flash-object-"+parseInt(999999*Math.random(),10),c=document.createElement("div"),d={index:this.index,globalVariable:this.options.globalVariable},e={};e.allowscriptaccess="always";var f={};c.setAttribute("id",b),this.options.flashContainer.appendChild(c),window.swfobject.embedSWF(this.options.swfSrc,b,231,141,"10.1.0",!1,d,e,f,function(b){b.success?(a.swfObject=b.ref,a._checkForFlashBlock(),a._bindEvents($(a.options.audioRecordingContainer))):a._showFlashRequiredDialog()})}},{key:"_defaultOnShowFlash",value:function(){var a=this.options.flashContainer;a.style.left=(window.innerWidth||document.body.offsetWidth)/2-115+"px",a.style.top=(window.innerHeight||document.body.offsetHeight)/2-70+"px"}},{key:"_defaultOnHideFlash",value:function(){if(this.options.globalVariable&&window[this.options.globalVariable])for(var a=0;a<window[this.options.globalVariable].length;a++){var b=window[this.options.globalVariable][a].options.flashContainer;b.style.left="-9999px",b.style.top="-9999px"}}},{key:"_checkForFlashBlock",value:function(){var a=this;window.setTimeout(function(){a._initialized||(a._flashBlockCatched=!0,a.triggerEvent("showFlash"))},1e3)}},{key:"_showFlashRequiredDialog",value:function(){this.options.flashContainer.innerHTML="<p>Adobe Flash Player 10.1 or newer is required to use this feature.</p><p><a href='http://get.adobe.com/flashplayer' target='_top'>Get it on Adobe.com.</a></p>",this.options.flashContainer.style.color="white",this.options.flashContainer.style.backgroundColor="#777",this.options.flashContainer.style.textAlign="center",this.triggerEvent("showFlash")}},{key:"_externalInterfaceDecode",value:function(a){return a.replace(/%22/g,'"').replace(/%5c/g,"\\").replace(/%26/g,"&").replace(/%25/g,"%")}},{key:"_bindEvents",value:function(a){var b=this;a&&(a.find(".recordingTotalTime").text(this.timeToString(this._limit/1e3)),a.find(".audioRecordButton").bind("click",function(c){c.preventDefault(),c.stopPropagation(),b.record({start:function(){a.toggleClass("isRecording",!0)},progress:function(b){b>=this._limit&&this.stop(),a.find(".recordingCurrentTime").html(this.timeToString(b/1e3)),a.find(".recordingProgress").css("width",Math.ceil(b/1e3%60)+"%")},stop:function(){a.toggleClass("isRecording",!1),a.addClass("hasRecording"),a.find(".audioRecordPlaybackButton").removeClass("disabled"),a.find(".recordingCurrentTime").html(this.timeToString(0)),a.find(".recordingProgress").css("width",0),a.find(".recordingTotalTime").text(this.timeToString(this.recordingDuration()/1e3))}})}),a.find(".audioRecordPlaybackButton, .inlineAudioRecordingPlayButton").bind("click",function(c){c.preventDefault(),c.stopPropagation(),b.stop(),b.play({progress:function(b){a.find(".recordingCurrentTime").html(this.timeToString(b/1e3)),a.find(".recordingProgress").css("width",Math.ceil(b/1e3%60)+"%")},stop:function(){a.find(".recordingCurrentTime").html(this.timeToString(0)),a.find(".recordingProgress").css("width",0),a.find(".recordingTotalTime").text(this.timeToString(this.recordingDuration()/1e3))}})}),a.find(".audioStopRecordButton, .inlineAudioRecordingStopButton").bind("click",function(c){c.preventDefault(),c.stopPropagation(),b.stop(),a.find(".recordingCurrentTime").html(b.timeToString(0)),a.find(".recordingProgress").css("width",0),a.find(".recordingTotalTime").text(b.timeToString(b.recordingDuration()/1e3))}))}},{key:"pad2",value:function(a){return("0"+a).substr(-2)}},{key:"timeToString",value:function(a){return this.pad2(Math.floor(a/60))+":"+this.pad2(Math.floor(a)%60)}}]),a}(),a("default",e)}}}),$__System.register("1e",["3","20","21"],function(a){"use strict";function b(a,b,f){var g=window.top.nativeAppCordova,h=c.getActivityElementFromChild(f);g.SaveAudioRecordingFromNativeApp(a,b,f),d(h),e.setIsRecordingStateOnInteraction(f,!1),e.setHasRecordingStateOnInteraction(f,!0),e.enablePlaybackButtonOnInteraction(f,!0),e.updateInternalPlayerModel(f,a.url,a.base64)}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a.enable},function(a){e=a}],execute:function(){}}}),$__System.register("22",["3","21","23","1e"],function(a){"use strict";function b(a){var b=window.top.nativeAppCordova,g=c.getActivityElementFromChild(a),h=c.getRcfId(a);d.setHasRecordingStateOnInteraction(a,!1),d.setIsRecordingStateOnInteraction(a,!0),d.enablePlaybackButtonOnInteraction(a,!1),e(g),b.StartAudioRecordingFromNativeApp(function(b){f(b,h,a)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a},function(a){e=a.disable},function(a){f=a.default}],execute:function(){}}}),$__System.register("24",[],function(a){"use strict";function b(a,b){var c=window.top.nativeAppCordova;c.PlayAudioRecordingFromNativeApp(a,b),b.stopImmediatePropagation(),b.preventDefault()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("21",[],function(a){"use strict";function b(a){return a.hasClass("playbackRecording")}function c(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];a.toggleClass("playbackRecording",b)}function d(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];a.toggleClass("isRecording",b)}function e(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];a.toggleClass("hasRecording",b)}function f(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1],c=a.find(".audioRecordPlaybackButton");c.toggleClass("disabled",!b)}function g(a,b,c){a[0]._rcfAudioRecorder=a[0]._rcfAudioRecorder||{},a[0]._rcfAudioRecorder.model={audio:{base64:c,url:b}}}return{setters:[],execute:function(){a("setIsRecordingStateOnInteraction",d),a("setHasRecordingStateOnInteraction",e),a("enablePlaybackButtonOnInteraction",f),a("setPlayingBackRecording",c),a("isPlayingBackRecording",b),a("updateInternalPlayerModel",g)}}}),$__System.register("25",["21","22","24"],function(a){"use strict";function b(a){a.on("click",".audioRecordButton",function(a){var b=c(a);e(b),a.stopPropagation()}),a.on("click",".audioRecordPlaybackButton:not(.disabled),.inlineAudioRecordingPlayButton:not(.disabled)",function(a){var b=c(a);d.isPlayingBackRecording(b)||(d.setPlayingBackRecording(b,!0),f(b,a),a.stopPropagation())}),a.on("click",".audioRecordIndicator",function(a){var b=$(a.currentTarget),c=b.closest(".audioInterface");c.toggleClass("showRecordingPanel")})}function c(a){return $(a.currentTarget).closest('[data-rcfinteraction="audioRecorder"]')}var d,e,f;return a("default",b),{setters:[function(a){d=a},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("26",["25","1c","1d"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(){d(this,a)}return c(a,[{key:"initialise",value:function(a){b(a)}}]),a}(),a("default",e)}}}),$__System.register("27",["3","26","28","1c","1d","d","1a","1b"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){b=a},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.convertWavToMp3,i=a.record},function(a){j=a.default}],execute:function(){"use strict";k=function(){function a(b,c){f(this,a),this._record=b,this._convertWavToMp3=c,this._recording=null,this._playback=null,this._players={},this.$jPlayer=g(".mediaServicePlayback"),this.$jPlayer.length<1&&(this.$jPlayer=g('<div class="mediaServicePlayback"/>'),g("body").append(this.$jPlayer)),this.$jPlayer.jPlayer({errorAlerts:!0,warningAlerts:!1,cssSelector:{currentTime:".recordingCurrentTime",duration:".recordingTotalTime"}})}return e(a,[{key:"play",value:function(a,b,c,d){var e,f,h=this;this.cancelRecording(),this.$jPlayer.off(g.jPlayer.event.ended).off(g.jPlayer.event.play).off(g.jPlayer.event.pause).off(g.jPlayer.event.timeupdate),this.$jPlayer.jPlayer("setMedia",{mp3:a}).jPlayer("play",d).on(g.jPlayer.event.ended,function(){return e.Ended()}).on(g.jPlayer.event.play,function(){return e.Play()}).on(g.jPlayer.event.pause,function(){return e.Pause()}).on(g.jPlayer.event.durationchange,function(a){return e.DurationChanged(a)}).on(g.jPlayer.event.timeupdate,function(a){return e.SetPosition(a.jPlayer.status.currentTime)}),f=this.$jPlayer,e=function(){function a(){f.jPlayer("pauseOthers"),b(e)}function d(){c(),this._playback=null}function g(){f.jPlayer("stop"),c(),this._playback=null}function i(){f.jPlayer("pause")}function j(a){this.position=a}function k(){return this.position}function l(a){this.audioDuration=a.jPlayer.status.duration}function m(){return this.audioDuration}var n=0;return h.audioDuration=0,{position:n,Play:a,Ended:d,Stop:g,Pause:i,SetPosition:j,GetPosition:k,GetDuration:m,DurationChanged:l}}(),this._playback=e}},{key:"stopPlayback",value:function(){g.jPlayer&&g.each(g.jPlayer.prototype.instances,function(a,b){return b.jPlayer("stop")}),null!==this._playback&&(this._playback.Stop(),this._playback=null)}},{key:"pausePlayback",value:function(a){
a.Pause()}},{key:"canRecord",value:function(){return null!==this._record}},{key:"record",value:function(a,b,c,d,e){var f=this;this.stopPlayback(),this.cancelRecording(),this._record(function(c){var h=null,i=setTimeout(function(){null!==h&&(clearTimeout(i),h.complete())},1e3*a),j=setInterval(function(){return h.duration++},1e3);h={duration:0,cancel:function(){clearInterval(j),clearTimeout(i),null!==h&&(h===f._recording&&(f._recording=null),h=null,c.cancel(function(){return d()}))},complete:function(){clearInterval(j),clearTimeout(i),null!==h&&(h===f._recording&&(f._recording=null),h=null,c.save(function(a){f._convertWavToMp3(a,function(a){var b=new window.FileReader;b.onloadend=function(){var c=b.result;e({encoding:"audio/mp3",base64:c,url:URL.createObjectURL(a,{type:"audio/mp3"})})},b.readAsDataURL(a)})}))}},g.jPlayer&&g.each(g.jPlayer.prototype.instances,function(a,b){var c=f._players[a];void 0===c&&(f._players[a]=b,b.on(g.jPlayer.event.play,function(){return f.cancelRecording()}))}),f._recording=h,b(h)},c)}},{key:"cancelRecording",value:function(){null!==this._recording&&(this._recording.cancel(),this._recording=null)}}]),a}(),k.getInstance=function(){if(void 0==window._rcfMediaService){var a=this.hasUserMediaAccess(),b=a?function(a,b){return h(a,{mode:"mono",kbps:64,hz:48e3},b)}:null;window._rcfMediaService=new k(a?i:null,b)}return window._rcfMediaService},k.hasUserMediaAccess=function(){return(window.AudioContext||window.webkitAudioContext)&&(d.mediaDevices&&d.mediaDevices.getUserMedia||d.getUserMedia||d.webkitGetUserMedia)},l=function(){function a(){f(this,a),this._limit=60,this._duration=0,this._position=0,this._audio=null,this._recording=!1,this._playing=!1,this._paused=!1,this._active=!1,this.propertyChanged=[]}return e(a,[{key:"_notifyAndSetIfChanged",value:function(a,b){var c=this;this["_"+a]!==b&&(this["_"+a]=b,this.propertyChanged.forEach(function(b){return b(c,a)}))}},{key:"active",get:function(){return this._active},set:function(a){this._notifyAndSetIfChanged("active",a)}},{key:"audio",get:function(){return this._audio},set:function(a){this._notifyAndSetIfChanged("audio",a)}},{key:"recording",get:function(){return this._recording},set:function(a){this._notifyAndSetIfChanged("recording",a)}},{key:"playing",get:function(){return this._playing},set:function(a){this._notifyAndSetIfChanged("playing",a)}},{key:"paused",get:function(){return this._paused},set:function(a){this._notifyAndSetIfChanged("paused",a)}},{key:"position",get:function(){return this._position},set:function(a){this._notifyAndSetIfChanged("position",a)}},{key:"duration",get:function(){return this._duration},set:function(a){this._notifyAndSetIfChanged("duration",a)}},{key:"limit",get:function(){return this._limit},set:function(a){this._notifyAndSetIfChanged("limit",a)}}]),a}(),m=function a(c,d){function e(a,b,c){a.propertyChanged.push(function(a,d){b===d&&c(a[b])}),c(a[b])}var g=this;f(this,a),e(c,"audio",function(a){d.toggleClass("hasRecording",null!==a),d.find(".audioRecordPlaybackButton").toggleClass("disabled",null===a),d.find(".audioRecordPausePlaybackButton").toggleClass("disabled",null===a)}),e(c,"recording",function(a){d.toggleClass("isRecording",a),a?(d.find(".recordingTotalTime").text(b.getTimeAsMMSS(c.limit)),d.find(".recordingCurrentTime").text(b.getTimeAsMMSS(c.duration))):(d.find(".recordingTotalTime").text(b.getTimeAsMMSS(c.duration)),d.find(".recordingCurrentTime").text(b.getTimeAsMMSS(c.position)),d.find(".recordingProgress").css("width","0%"))}),e(c,"playing",function(a){d.toggleClass("playbackRecording",a),a||c.paused!==!1||d.find(".recordingProgress").css("width","0%")}),e(c,"paused",function(a){d.toggleClass("playbackRecordingPaused",a),a&&d.find(".recordingProgress").css("width",Math.ceil(c.position/c.duration*100)+"%")}),e(c,"duration",function(a){var e=c.recording?c.limit:c.duration;d.find(".recordingCurrentTime").text(b.getTimeAsMMSS(a)),d.find(".recordingProgress").css("width",Math.ceil(a/c.limit*100)+"%"),d.find(".recordingTotalTime").text(b.getTimeAsMMSS(e))}),e(c,"position",function(a){d.find(".recordingCurrentTime").text(b.getTimeAsMMSS(a)),d.find(".recordingProgress").css("width",Math.ceil(a/c.duration*100)+"%")}),e(c,"limit",function(a){return d.find(".recordingTotalTime").text(b.getTimeAsMMSS(a))}),e(c,"active",function(a){return d.parent(".audioInterface").toggleClass("showRecordingPanel",a)}),this.audioRecordIndicatorClicked=[],this.recordButtonClicked=[],this.stopRecordButtonClicked=[],this.recordPlaybackButtonClicked=[],this.recordPausePlaybackButtonClicked=[],this.recordStopPlaybackButtonClicked=[],d.find(".audioRecordIndicator").click(function(a){g.audioRecordIndicatorClicked.forEach(function(a){return a(g)}),a.preventDefault(),a.stopPropagation()}),d.find(".audioRecordButton").click(function(a){g.recordButtonClicked.forEach(function(a){return a(g)}),a.preventDefault(),a.stopPropagation()}),d.find(".audioStopRecordButton").click(function(a){g.stopRecordButtonClicked.forEach(function(a){return a(g)}),a.preventDefault(),a.stopPropagation()}),d.find(".audioRecordPlaybackButton, .inlineAudioRecordingPlayButton").click(function(a){g.recordPlaybackButtonClicked.forEach(function(a){return a(g)}),a.preventDefault(),a.stopPropagation()}),d.find(".audioRecordPausePlaybackButton, .inlineAudioRecordingPauseButton").click(function(a){g.recordPausePlaybackButtonClicked.forEach(function(a){return a(g)}),a.preventDefault(),a.stopPropagation()}),d.find(".audioRecordStopPlaybackButton, .inlineAudioRecordingStopButton").click(function(a){g.recordStopPlaybackButtonClicked.forEach(function(a){return a(g)}),a.preventDefault(),a.stopPropagation()})},n=function(){function a(b,c,d,e){f(this,a),this._model=c;var g,h=null,i=null;c.propertyChanged.push(function(a,b){"recording"===b&&(a.recording?a.duration=0:null!==h&&(h.cancel(),h=null)),"playing"===b&&(a.playing?null!==a.audio?(a.position>0&&(a.paused=!a.playing),a.position>=a.duration&&(a.position=0),d.play(a.audio.url,function(b){g=setInterval(function(){a.position=b.position},500),i=b,a.duration=i.GetDuration()},function(){clearInterval(g),a.playing=!1,a.paused=!1,a.position=0,i=null},a.position)):a.playing=!1:null!==i&&a.paused!==!0&&(i.Stop(),i=null)),"paused"===b&&a.paused&&null!==i&&(a.playing=!a.paused,d.pausePlayback(i),clearInterval(g))}),b.recordButtonClicked.push(function(){var a=null,b=c.duration;d.record(c.limit,function(b){c.recording=!0,h=b,a=setInterval(function(){return c.duration=h.duration},500)},function(){null!==a&&clearInterval(a),c.recording=!1,h=null,null!==e&&e.alert("The access to the audio recording is disabled.")},function(){clearInterval(a),c.recording=!1,h=null,c.duration=b},function(b){clearInterval(a),c.recording=!1,c.audio=b,h=null})}),b.stopRecordButtonClicked.push(function(){null!==h&&h.complete()}),b.audioRecordIndicatorClicked.push(function(){d.canRecord()?c.active=!c.active:e.alert("Audio recording is not supported in this browser.")}),b.recordPlaybackButtonClicked.push(function(){return c.playing=!0}),b.recordPausePlaybackButtonClicked.push(function(){return c.paused=!0}),b.recordStopPlaybackButtonClicked.push(function(){return c.playing=c.paused=!1})}return e(a,[{key:"reset",value:function(){this._model.playing=!1,this._model.paused=!1,this._model.recording=!1,this._model.active=!1,this._model.audio=null,this._model.position=0,this._model.duration=0}},{key:"close",value:function(){this.reset()}}]),a}(),o=function(){function a(d){var e=this;f(this,a),this._selector=d,this.$activity=b.getActivityElementFromChild(d);var h=g("html").hasClass("has-phonegap")&&!b.isAndroid(),i=g("html").hasClass("learningmate-recorder-available");if(h){var o=void 0;if(!i)return void alert("LearningMate nativeAppCordova apis not found");var p=window.top.nativeAppCordova;if(!p)return console.log('Cannot find LearningMate "nativeAppCordova" api in window.top'),void alert('Cannot find LearningMate "nativeAppCordova" api in window.top');o=new c,o.initialise(this.$activity)}this._checkFlashSupport()&&(window.FlashRecorder=[],this._addIEClass()),d.each(function(a,b){var c=g(b);if(e._checkFlashSupport())window.FlashRecorder.push(new j({globalVariable:"FlashRecorder",audioRecordingContainer:b}));else if(h)b._rcfAudioRecorder=c[0]._rcfAudioRecorder={model:{},view:{},controller:{}};else{var d=new l,f=new m(d,c),i=new n(f,d,k.getInstance(),{alert:function(a){function b(b){return a.apply(this,arguments)}return b.toString=function(){return a.toString()},b}(function(a){return alert(a)})});b._rcfAudioRecorder={model:d,view:f,controller:i}}c.on("rcf.change.audio.url",function(a,b){var c=g(a.currentTarget)[0],d=c._rcfAudioRecorder.model;d.audio=d.audio||{},d.audio.url=b,k.getInstance().$jPlayer.jPlayer("setMedia",{mp3:b}).on(g.jPlayer.event.durationchange,function(a){return d.duration=a.jPlayer.status.duration})})})}return e(a,[{key:"getBase64Recording",value:function(){var a={};return a=this._selector.map(function(a,c){var d=b.getRcfId(g(c)),e="";return c._rcfAudioRecorder.model&&c._rcfAudioRecorder.model.audio&&(e=c._rcfAudioRecorder.model.audio.url||"no audio"),{elm:d,type:"openGradable_recording",markType:"feedback",max_score:g(c).attr("data-maxscore"),user:{audioBase64:e}}})}},{key:"_checkFlashSupport",value:function(){return!k.hasUserMediaAccess()&&b.isIE()}},{key:"_addIEClass",value:function(){g("html").addClass("IE")}},{key:"reset",value:function(){var a=g("html").hasClass("has-phonegap")&&!b.isAndroid();this._selector.each(function(b,c){var d=g(c),e=d.find(".audioRecordPlaybackButton");d.removeClass("isRecording hasRecording playbackRecording"),e.addClass("disabled"),a?c._rcfAudioRecorder.model={}:c._rcfAudioRecorder.controller.reset()})}},{key:"close",value:function(){var a=g("html").hasClass("has-phonegap")&&!b.isAndroid();this._selector.each(function(b,c){g(c).off("rcf.change.audio.url"),a||c._rcfAudioRecorder&&c._rcfAudioRecorder.controller&&c._rcfAudioRecorder.controller.close&&c._rcfAudioRecorder.controller.close()})}}]),a}(),a("AudioRecorder",o),a("RecorderModel",l),a("RecorderView",m),a("RecorderController",n),a("MediaService",k)}}}),$__System.registerDynamic("29",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return b(a,c)}):"object"==typeof exports?b(a,require("jquery")):b(a,a.jQuery)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a,b){for(var c=a.length;--c;)if(Math.round(+a[c])!==Math.round(+b[c]))return!1;return!0}function d(a){var c={range:!0,animate:!0};return"boolean"==typeof a?c.animate=a:b.extend(c,a),c}function e(a,c,d,e,f,g,h,i,j){"array"===b.type(a)?this.elements=[+a[0],+a[2],+a[4],+a[1],+a[3],+a[5],0,0,1]:this.elements=[a,c,d,e,f,g,h||0,i||0,j||1]}function f(a,b,c){this.elements=[a,b,c]}function g(a,c){if(!(this instanceof g))return new g(a,c);1!==a.nodeType&&b.error("Panzoom called on non-Element node"),b.contains(h,a)||b.error("Panzoom element must be attached to the document");var d=b.data(a,i);if(d)return d;this.options=c=b.extend({},g.defaults,c),this.elem=a;var e=this.$elem=b(a);this.$set=c.$set&&c.$set.length?c.$set:e,this.$doc=b(a.ownerDocument||h),this.$parent=e.parent(),this.isSVG=n.test(a.namespaceURI)&&"svg"!==a.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=b.cssProps.transform.replace(m,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var f=b(),j=this;b.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(a,b){j[b]=c[b]||f}),this.enable(),this.scale=this.getMatrix()[0],this._checkPanWhenZoomed(),b.data(a,i,this)}var h=a.document,i="__pz__",j=Array.prototype.slice,k=/trident\/7./i,l=function(){if(k.test(navigator.userAgent))return!1;var a=h.createElement("input");return a.setAttribute("oninput","return"),"function"==typeof a.oninput}(),m=/([A-Z])/g,n=/^http:[\w\.\/]+svg$/,o="(\\-?\\d[\\d\\.e-]*)",p="\\,?\\s*",q=new RegExp("^matrix\\("+o+p+o+p+o+p+o+p+o+p+o+"\\)$");return e.prototype={x:function(a){var b=a instanceof f,c=this.elements,d=a.elements;return b&&3===d.length?new f(c[0]*d[0]+c[1]*d[1]+c[2]*d[2],c[3]*d[0]+c[4]*d[1]+c[5]*d[2],c[6]*d[0]+c[7]*d[1]+c[8]*d[2]):d.length===c.length&&new e(c[0]*d[0]+c[1]*d[3]+c[2]*d[6],c[0]*d[1]+c[1]*d[4]+c[2]*d[7],c[0]*d[2]+c[1]*d[5]+c[2]*d[8],c[3]*d[0]+c[4]*d[3]+c[5]*d[6],c[3]*d[1]+c[4]*d[4]+c[5]*d[7],c[3]*d[2]+c[4]*d[5]+c[5]*d[8],c[6]*d[0]+c[7]*d[3]+c[8]*d[6],c[6]*d[1]+c[7]*d[4]+c[8]*d[7],c[6]*d[2]+c[7]*d[5]+c[8]*d[8])},inverse:function(){var a=1/this.determinant(),b=this.elements;return new e(a*(b[8]*b[4]-b[7]*b[5]),a*-(b[8]*b[1]-b[7]*b[2]),a*(b[5]*b[1]-b[4]*b[2]),a*-(b[8]*b[3]-b[6]*b[5]),a*(b[8]*b[0]-b[6]*b[2]),a*-(b[5]*b[0]-b[3]*b[2]),a*(b[7]*b[3]-b[6]*b[4]),a*-(b[7]*b[0]-b[6]*b[1]),a*(b[4]*b[0]-b[3]*b[1]))},determinant:function(){var a=this.elements;return a[0]*(a[8]*a[4]-a[7]*a[5])-a[3]*(a[8]*a[1]-a[7]*a[2])+a[6]*(a[5]*a[1]-a[4]*a[2])}},f.prototype.e=e.prototype.e=function(a){return this.elements[a]},g.rmatrix=q,g.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,disableXAxis:!1,disableYAxis:!1,which:1,increment:.3,exponential:!0,panOnlyWhenZoomed:!1,minScale:.3,maxScale:6,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},g.prototype={constructor:g,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),b.removeData(this.elem,i)},resetDimensions:function(){this.container=this.$parent[0].getBoundingClientRect();var a=this.elem,c=a.getBoundingClientRect(),d=Math.abs(this.scale);this.dimensions={width:c.width,height:c.height,left:b.css(a,"left",!0)||0,top:b.css(a,"top",!0)||0,border:{top:b.css(a,"borderTopWidth",!0)*d||0,bottom:b.css(a,"borderBottomWidth",!0)*d||0,left:b.css(a,"borderLeftWidth",!0)*d||0,right:b.css(a,"borderRightWidth",!0)*d||0},margin:{top:b.css(a,"marginTop",!0)*d||0,left:b.css(a,"marginLeft",!0)*d||0}}},reset:function(a){a=d(a);var b=this.setMatrix(this._origTransform,a);a.silent||this._trigger("reset",b)},resetZoom:function(a){a=d(a);var b=this.getMatrix(this._origTransform);a.dValue=b[3],this.zoom(b[0],a)},resetPan:function(a){var b=this.getMatrix(this._origTransform);this.pan(b[4],b[5],d(a))},setTransform:function(a){for(var c=this.$set,d=c.length;d--;)b.style(c[d],"transform",a),this.isSVG&&c[d].setAttribute("transform",a)},getTransform:function(a){var c=this.$set,d=c[0];return a?this.setTransform(a):(a=b.style(d,"transform"),!this.isSVG||a&&"none"!==a||(a=b.attr(d,"transform")||"none")),"none"===a||q.test(a)||this.setTransform(a=b.css(d,"transform")),a||"none"},getMatrix:function(a){var b=q.exec(a||this.getTransform());return b&&b.shift(),b||[1,0,0,1,0,0]},setMatrix:function(a,b){if(!this.disabled){b||(b={}),"string"==typeof a&&(a=this.getMatrix(a));var c=+a[0],d="undefined"!=typeof b.contain?b.contain:this.options.contain;if(d){var e=b.dims;e||(this.resetDimensions(),e=this.dimensions);var f=this.container,g=e.width,h=e.height,i=f.width,j=f.height,k=i/g,l=j/h,m=(g-i)/2,n=(h-j)/2;"invert"===d||"automatic"===d&&k<1.01?a[4]=Math.max(Math.min(a[4],m),-m):a[4]=Math.min(Math.max(a[4],m),-m),"invert"===d||"automatic"===d&&l<1.01?a[5]=Math.max(Math.min(a[5],n),-n):a[5]=Math.min(Math.max(a[5],n),-n)}if("skip"!==b.animate&&this.transition(!b.animate),b.range&&this.$zoomRange.val(c),this.options.disableXAxis||this.options.disableYAxis){var o=this.getMatrix();this.options.disableXAxis&&(a[4]=o[4]),this.options.disableYAxis&&(a[5]=o[5])}return this.setTransform("matrix("+a.join(",")+")"),this.scale=c,this._checkPanWhenZoomed(c),b.silent||this._trigger("change",a),a}},isPanning:function(){return this.panning},transition:function(a){if(this._transition)for(var c=a||!this.options.transition?"none":this._transition,d=this.$set,e=d.length;e--;)b.style(d[e],"transition")!==c&&b.style(d[e],"transition",c)},pan:function(a,b,c){if(!this.options.disablePan){c||(c={});var d=c.matrix;d||(d=this.getMatrix()),c.relative&&(a+=+d[4],b+=+d[5]),d[4]=a,d[5]=b,this.setMatrix(d,c),c.silent||this._trigger("pan",d[4],d[5])}},zoom:function(a,c){"object"==typeof a?(c=a,a=null):c||(c={});var d=b.extend({},this.options,c);if(!d.disableZoom){var g=!1,h=d.matrix||this.getMatrix(),i=+h[0];"number"!=typeof a&&(a=d.exponential&&i-d.increment>=1?Math[a?"sqrt":"pow"](i,2):i+d.increment*(a?-1:1),g=!0),a>d.maxScale?a=d.maxScale:a<d.minScale&&(a=d.minScale);var j=d.focal;if(j&&!d.disablePan){this.resetDimensions();var k=d.dims=this.dimensions,l=j.clientX,m=j.clientY;this.isSVG||(l-=k.width/i/2,m-=k.height/i/2);var n=new f(l,m,1),o=new e(h),p=this.parentOffset||this.$parent.offset(),q=new e(1,0,p.left-this.$doc.scrollLeft(),0,1,p.top-this.$doc.scrollTop()),r=o.inverse().x(q.inverse().x(n)),s=a/h[0];o=o.x(new e([s,0,0,s,0,0])),n=q.x(o.x(r)),h[4]=+h[4]+(l-n.e(0)),h[5]=+h[5]+(m-n.e(1))}h[0]=a,h[3]="number"==typeof d.dValue?d.dValue:a,this.setMatrix(h,{animate:"boolean"==typeof d.animate?d.animate:g,range:!d.noSetRange}),d.silent||this._trigger("zoom",h[0],d)}},option:function(a,c){var d;if(!a)return b.extend({},this.options);if("string"==typeof a){if(1===arguments.length)return void 0!==this.options[a]?this.options[a]:null;d={},d[a]=c}else d=a;this._setOptions(d)},_setOptions:function(a){b.each(a,b.proxy(function(a,c){switch(a){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[a]=c,a){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[a]=c;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":b.style(this.elem,"cursor",c);break;case"minScale":this.$zoomRange.attr("min",c);break;case"maxScale":this.$zoomRange.attr("max",c);break;case"rangeStep":this.$zoomRange.attr("step",c);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"panOnlyWhenZoomed":this._checkPanWhenZoomed();break;case"$set":c instanceof b&&c.length&&(this.$set=c,this._initStyle(),this._buildTransform())}},this))},_checkPanWhenZoomed:function(a){a||(a=this.getMatrix()[0]);var b=this.options;if(b.panOnlyWhenZoomed){var c=a===b.minScale;b.disablePan!==c&&this.option("disablePan",c)}},_initStyle:function(){var a={"transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(a.cursor=this.options.cursor),this.$set.css(a);var c=this.$parent;c.length&&!b.nodeName(c[0],"body")&&(a={overflow:"hidden"},"static"===c.css("position")&&(a.position="relative"),c.css(a))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var a=this,c=this.options,d=c.eventNamespace,e="mousedown"+d+" pointerdown"+d+" MSPointerDown"+d,f="touchstart"+d+" "+e,h="touchend"+d+" click"+d+" pointerup"+d+" MSPointerUp"+d,i={},j=this.$reset,k=this.$zoomRange;if(b.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var a=c["on"+this];b.isFunction(a)&&(i["panzoom"+this.toLowerCase()+d]=a)}),c.disablePan&&c.disableZoom||(i[f]=function(b){var d;("touchstart"===b.type?!(d=b.touches||b.originalEvent.touches)||(1!==d.length||c.disablePan)&&2!==d.length:c.disablePan||(b.which||b.originalEvent.which)!==c.which)||(b.preventDefault(),b.stopPropagation(),a._startMove(b,d))},3===c.which&&(i.contextmenu=!1)),this.$elem.on(i),j.length&&j.on(h,function(b){b.preventDefault(),a.reset()}),k.length&&k.attr({step:c.rangeStep===g.defaults.rangeStep&&k.attr("step")||c.rangeStep,min:c.minScale,max:c.maxScale}).prop({value:this.getMatrix()[0]}),!c.disableZoom){var m=this.$zoomIn,n=this.$zoomOut;m.length&&n.length&&(m.on(h,function(b){b.preventDefault(),a.zoom()}),n.on(h,function(b){b.preventDefault(),a.zoom(!0)})),k.length&&(i={},i[e]=function(){a.transition(!0)},i[(l?"input":"change")+d]=function(){a.zoom(+this.value,{noSetRange:!0})},k.on(i))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var a=this.options;this._transition=this._transform+" "+a.duration+"ms "+a.easing}},_getDistance:function(a){var b=a[0],c=a[1];return Math.sqrt(Math.pow(Math.abs(c.clientX-b.clientX),2)+Math.pow(Math.abs(c.clientY-b.clientY),2))},_getMiddle:function(a){var b=a[0],c=a[1];return{clientX:(c.clientX-b.clientX)/2+b.clientX,clientY:(c.clientY-b.clientY)/2+b.clientY}},_trigger:function(a){"string"==typeof a&&(a="panzoom"+a),this.$elem.triggerHandler(a,[this].concat(j.call(arguments,1)))},_startMove:function(a,d){if(!this.panning){var e,f,g,i,j,k,l,m,n,o=this,p=this.options,q=p.eventNamespace,r=this.getMatrix(),s=r.slice(0),t=+s[4],u=+s[5],v={matrix:r,animate:"skip"},w=a.type;"pointerdown"===w?(f="pointermove",g="pointerup"):"touchstart"===w?(f="touchmove",g="touchend"):"MSPointerDown"===w?(f="MSPointerMove",g="MSPointerUp"):(f="mousemove",g="mouseup"),f+=q,g+=q,this.transition(!0),this.panning=!0,this._trigger("start",a,d),d&&2===d.length?(i=this._getDistance(d),j=+r[0],k=this._getMiddle(d),e=function(a){a.preventDefault(),d=a.touches||a.originalEvent.touches;var b=o._getMiddle(d),c=o._getDistance(d)-i;o.zoom(c*(p.increment/100)+j,{focal:b,matrix:r,animate:!1}),o.pan(+r[4]+b.clientX-k.clientX,+r[5]+b.clientY-k.clientY,v),k=b}):(d&&(n=d[0])?(l=n.pageX,m=n.pageY):(l=a.pageX,m=a.pageY),e=function(a){a.preventDefault(),d=a.touches||a.originalEvent.touches;var b;b=d?d[0]||{pageX:0,pageY:0}:a,o.pan(t+b.pageX-l,u+b.pageY-m,v)}),b(h).off(q).on(f,e).on(g,function(a){a.preventDefault(),b(this).off(q),o.panning=!1,a.type="panzoomend",o._trigger(a,r,!c(r,s))})}}},b.Panzoom=g,b.fn.panzoom=function(a){var c,d,e,f;return"string"==typeof a?(f=[],d=j.call(arguments,1),this.each(function(){c=b.data(this,i),c?"_"!==a.charAt(0)&&"function"==typeof(e=c[a])&&void 0!==(e=e.apply(c,d))&&f.push(e):f.push(void 0)}),f.length?1===f.length?f[0]:f:this):this.each(function(){new g(this,a)})},g})}(this),d()}),$__System.register("2a",[],function(a){"use strict";function b(a){a.closest(".panzoomContainer").removeClass("panzoomContainer").find(".panzoomImageContainer").removeClass("panzoomImageContainer"),a.closest(".imageContainer").find(".imageTools").remove()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2b",[],function(a){"use strict";function b(a){var b=a.closest(".imageContainer");b.on("click",".panzoomImageRefreshButton",function(){$(this).closest(".imageContainer").find('[data-rcfinteraction="panZoomImage"]').panzoom("reset")})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2c",["4","29","1c","1d","2a","2b"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.getApplicationDeviceMode},function(a){},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(b){d(this,a),this.$selector=b,this._initialize()}return c(a,[{key:"_initialize",value:function(){"mobile"===b()?(this.$selector.panzoom({startTransform:"scale(1)",maxScale:2,increment:.1,minScale:1,panOnlyWhenZoomed:!1,contain:"automatic"}),f(this.$selector)):e(this.$selector)}},{key:"reset",value:function(){this.$selector.panzoom("reset")}},{key:"close",value:function(){this.$selector.panzoom("destroy")}}]),a}(),a("default",g)}}}),$__System.register("2d",["2e"],function(a){"use strict";function b(a){return a.$selector.map(function(){var a=$(this);return c(a,!0)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("2e",[],function(a){"use strict";function b(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],c=a.find(".teacherScoreInput").val()||void 0,d=a.find(".teacherInteractionCommentTextArea").val()||"",e=a.find(".audioRecorder.studentAudioRecorder > .largeAudioRecording"),f=a.find(".audioRecorder.teacherAudioRecorder > .largeAudioRecording"),g=e[0]._rcfAudioRecorder.model,h=f[0]._rcfAudioRecorder.model,i=g.audio?g.audio.base64:"",j=h.audio?h.audio.base64:"",k=a.data("studentAudioUrl"),l=a.data("teacherAudioUrl"),m={};i?m.audioBase64=i:k?m.audioUrl=k:m.audioBase64=i;var n={elm:a.attr("data-rcfid"),type:"openGradable_recording",markType:"feedback",max_score:a.attr("data-maxscore"),value:{user:m}},o={comment:d};return(c||0===c)&&(o.score=Number(c)),j?o.audioBase64=j:l?o.audioUrl=l:o.audioBase64=j,b&&(n.value.teacher=o),n}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2f",["d","2e"],function(a){"use strict";function b(a){return a.$selector.map(function(){var a=c(this);return d(a)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("30",["31"],function(a){"use strict";function b(a,b){a.$activity=b.closest(".activity"),a.$selector=b,c(a)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("32",["33","34","d"],function(a){"use strict";function b(a){var b=a.$selector;b.each(c)}function c(){var a=f(this),b=a.find(".scoreTotalLabel .score"),c=a.find(".teacherScoreInput");b.val(0),c.val(0);var g=a.find(".rcfTextArea");d(g),e(g),g.removeClass("populated")}var d,e,f;return a("default",b),{setters:[function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("31",[],function(a){"use strict";function b(a){var b=a.$selector.find(".teacherScoreInput");b.off("focus").off("keypress").off("blur"),b.on("focus",function(){$(this).select()}),b.on("keypress",function(a){if(8==a.which||0==a.which)return!0;if(a.which<48||a.which>57)return!1;var b=a.which-48,c="0"!=this.value?this.value+b.toString():b.toString(),d=$(this).closest(".recordingContainer").attr("data-maxscore");return!(Number(c)>Number(d))&&void 0}),b.on("blur",function(){var a=this.value,b=$(this).closest(".recordingContainer").attr("data-maxscore");Number(a)>Number(b)&&(this.value=Number(b))})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("35",["31","36","37"],function(a){"use strict";function b(a,b){d(a,b),e(a,b),c(a)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("38",[],function(a){"use strict";function b(a,b){var c=a.find(".teacherScoreInput"),d=a.find(".scoreContainer.reviewFeedbackScore .scoreResult"),e=a.find(".scoreContainer.reviewFeedbackScore .scorePercentage"),f=a.attr("data-maxscore"),g="";b.value.teacher&&b.value.teacher.score&&(g=b.value.teacher.score),c.val(g),d.text(g),e.text("("+parseInt(100*Number(g/f))+"%)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("39",[],function(a){"use strict";function b(a,b){var c=a.find(".teacherInteractionCommentTextArea"),d=a.find(".reviewTeacherInteractionComment"),e="";b.value.teacher&&(e=b.value.teacher.comment||""),c.val(e),d.html(e.replace(/(?:\r\n|\r|\n)/g," <br/>"))}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3a",["3"],function(a){"use strict";function b(a,b){var d=a.find(".studentRecordedAudio .audioPlayer"),e=b.value.user&&b.value.user.audioUrl||"";e.length<1&&console.log("No student audio URL provided in json answers ! nothing to play"),!c.isEmpty(d)&&e.length>0&&d.jPlayer("setMedia",{mp3:e,preload:!0})}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),$__System.register("3b",["3"],function(a){"use strict";function b(a,b){var d=a.find(".teacherFeedbackAudio .audioPlayer"),e=b.value.teacher&&b.value.teacher.audioUrl||"";e.length<1&&console.log("No teacher audio URL provided in json answers ! nothing to play"),!c.isEmpty(d)&&e.length>0&&d.jPlayer("setMedia",{mp3:e,preload:!0})}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),$__System.register("37",["3","38","39","d","3a","3b"],function(a){"use strict";function b(a,b){var e=a.$selector,f=a.$activity,h=b.id,i=f.attr("id");if(h!==i)throw"Invalid JSON answers provided for teacher feedback for this recording";for(var j in b.answers){var k=b.answers[j],l=k.elm,m=e.filter(function(){return g(this).attr("data-rcfid")===l});d.isEmpty(m)||c(m,k)}e.find(".rcfTextArea").trigger("autosize.resize")}function c(a,b){e(a,b),f(a,b),h(a,b),i(a,b)}var d,e,f,g,h,i;return a("default",b),{setters:[function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("3c",["36","37"],function(a){"use strict";function b(a,b){c(a,b),d(a,b)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("3d",["35","36","3c"],function(a){"use strict";function b(a,b,f){switch(b){case"default":return void d(a,f);case"leaveTeacherFeedback":return void c(a,f);case"reviewTeacherFeedback":return void e(a,f)}}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("36",["3","d"],function(a){"use strict";function b(a,b){var e=a.$activity,f=a.$selector,g=b.id,h=e.attr("id");if(g!==h)throw"Invalid JSON answers provided for activity ["+h+"]";for(var i in b.answers){var j=b.answers[i],k=j.elm,l=f.filter(function(){return d(this).attr("data-rcfid")===k});c.isEmpty(l)||(j.value.user&&j.value.user.audioUrl&&(l.data("studentAudioUrl",j.value.user.audioUrl),l.find(".studentRecording").trigger("rcf.change.audio.url",j.value.user.audioUrl)),j.value.teacher&&j.value.teacher.audioUrl&&(l.data("teacherAudioUrl",j.value.teacher.audioUrl),l.find(".teacherRecording").trigger("rcf.change.audio.url",j.value.teacher.audioUrl)))}}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default}],execute:function(){}}}),$__System.register("3e",["30","32","36","1c","1d","2d","2f","3d"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function(){function a(c){f(this,a),b(this,c)}return e(a,[{key:"getUserAnswers",value:function(){return h(this)}},{key:"showAnswers",value:function(a){d(this,a)}},{key:"setInteractionMode",value:function(a,b){i(this,a,b)}},{key:"getTeacherFeedback",value:function(){return g(this)}},{key:"reset",value:function(){c(this)}}]),a}(),a("default",j)}}}),$__System.register("3f",["40"],function(a){"use strict";function b(a){return a.$selector.map(function(){var a=$(this);return c(a,!0)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("40",["d"],function(a){"use strict";function b(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],d=a.find(".writing.rcfTextArea"),e=a.find(".teacherScoreInput").val()||void 0,f=a.find(".teacherInteractionCommentTextArea").val()||"",g=a.find(".reviewStudentAnswer"),h={elm:a.attr("data-rcfid"),type:"openGradable_writing",markType:"feedback",max_score:a.attr("data-maxscore"),value:{user:{value:d.val()||""}}},i={comment:f,comments:g.find(".teacherComment").map(function(){var a=c(this);return{elm:a.attr("data-wordid"),text:a.text()}}).get()};return(e||0===e)&&(i.score=Number(e)),b&&(h.value.teacher=i),h}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),
$__System.register("41",["40","d"],function(a){"use strict";function b(a){return a.$selector.map(function(){var a=d(this);return c(a)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("42",["d"],function(a){"use strict";function b(a){function b(){var a=c(this);a.toggleClass("populated",a.val().length>0)}var d=a.$activity;d.on("input keyup change paste",".writing .rcfTextArea",b)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("43",["42"],function(a){"use strict";function b(a,b){a.$activity=b.closest(".activity"),a.$selector=b,c(a)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("44",["d"],function(a){"use strict";function b(a){var b=a.$selector;b.each(c)}function c(){var a=d(this),b=a.find(".scoreTotalLabel .scoreResult"),c=a.find(".teacherScoreInput"),e=a.find(".reviewStudentAnswer"),f=a.find(".reviewTeacherInteractionComment");b.text(0),c.val(0),a.find(".rcfTextArea").val("").trigger("autosize.resize").removeClass("populated"),e.html(""),f.html(""),a.find(".scoreResult").text(0),a.closest(".activity").find("span.scoreResult").text(0)}var d;return a("default",b),{setters:[function(a){d=a.default}],execute:function(){}}}),$__System.register("45",["46"],function(a){"use strict";function b(a){var b=a.closest(".teacherFeedbackInteractions"),d=a.find(".teacherComment"),e=b.closest(".activity"),f=b.find(".reviewPopupPrompt"),g="";d.length>0&&(g=d.text()),b.addClass("leavingInlineComment"),f.position({my:"left top",at:"left bottom",of:a});var h=parseInt(f.css("left")),i=parseInt(f.css("width")),j=parseInt(e.css("width"));h+i>j+i/2&&f.position({my:"right top",at:"left bottom",of:a});var k,l=f.position(),m=a.position();k=l.top<m.top?"above":"below",f.addClass(k).find(".reviewPopupText").val(g).focus(),c(e)}var c;return a("default",b),{setters:[function(a){c=a.showOverlayMask}],execute:function(){}}}),$__System.register("47",[],function(a){"use strict";function b(a){var b=a.closest(".teacherFeedbackInteractions"),c=b.find(".reviewPopupPrompt"),d=c.find(".reviewPopupText.text").val(),e=a.attr("data-wordid");a.closest(".reviewStudentAnswer").find(".teacherComment[data-wordid="+e+"]").remove(),a.removeClass("commented"),d.length<1||a.addClass("commented").append('<span class="teacherComment" data-wordid="'+e+'">'+d+"</span>")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("48",["49"],function(a){"use strict";function b(a){var b=a.find(".teacherFeedbackInteractions"),d=b.find(".reviewPopupPrompt");b.removeClass("leavingInlineComment"),d.removeClass("above below"),d.off("click",".okButton"),d.off("click",".cancelButton"),d.find(".reviewPopupText.text").off("keyup"),a.find(".reviewStudentAnswer .studentWord.selected").removeClass("selected"),c(a)}var c;return a("default",b),{setters:[function(a){c=a.hideOverlayMask}],execute:function(){}}}),$__System.register("4a",["47","48"],function(a){"use strict";function b(a){var b=a.closest(".teacherFeedbackInteractions"),e=b.find(".reviewPopupPrompt"),f=a.closest(".activity");b.addClass("leavingInlineComment"),e.on("click",".okButton",function(){c(a),d(f)}),e.on("click",".cancelButton",function(){d(f)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("4b",["45","48","49","4c","4a"],function(a){"use strict";function b(a){var b=h(a.$activity);b.css("background","rgba(0,0,0,0.5)"),a.$activity.off("click","span.studentWord").on("click","span.studentWord",c),b.on("click",function(){g(a.$activity),f(a.$activity)}),d(a)}function c(){var a=$(this);a.closest(".reviewStudentAnswer").find("span.studentWord.selected").removeClass("selected"),a.addClass("selected"),e(a),i(a)}function d(a){var b=a.$selector.find(".teacherScoreInput");b.off("focus").off("keypress").off("blur"),b.on("focus",function(){$(this).select()}),b.on("keypress",function(a){if(8==a.which||0==a.which)return!0;if(a.which<48||a.which>57)return!1;var b=a.which-48,c="0"!=this.value?this.value+b.toString():b.toString(),d=$(this).closest(".writingContainer").attr("data-maxscore");return!(Number(c)>Number(d))&&void 0}),b.on("blur",function(){var a=this.value,b=$(this).closest(".writingContainer").attr("data-maxscore");Number(a)>Number(b)&&(this.value=Number(b))})}var e,f,g,h,i;return a("default",b),{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.hideOverlayMask},function(a){h=a.getOverlayMask},function(a){i=a.default}],execute:function(){}}}),$__System.register("4d",["4e","4f","4b"],function(a){"use strict";function b(a,b){c(a,b),d(a,b),e(a)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("50",[],function(a){"use strict";function b(a,b){var c=a.find(".teacherScoreInput"),d=a.find(".scoreContainer.reviewFeedbackScore .scoreResult"),e=a.find(".scoreContainer.reviewFeedbackScore .scorePercentage"),f=a.attr("data-maxscore"),g="";b.value.teacher&&b.value.teacher.score&&(g=b.value.teacher.score),c.val(g),d.text(g),e.text(" ("+parseInt(100*Number(g/f))+"%)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("51",[],function(a){"use strict";function b(a,b){var c=a.find(".teacherInteractionCommentTextArea"),d=a.find(".reviewTeacherInteractionComment"),e="";b.value.teacher&&(e=b.value.teacher.comment||""),c.val(e),d.html(e.replace(/(?:\r\n|\r|\n)/g," <br/>"))}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("52",[],function(a){"use strict";function b(a,b){function d(a){var b,c=!1;return a.indexOf("<br")<0?(c=a.indexOf(" ")>-1,c&&(a=a.trim()),b='<span class="eSpan selectable studentWord" data-wordid="word_'+ ++h+'"><span class="item">'+a+"</span></span>",c&&(b+=" ")):b="<br>",b}function e(b){var c=a.find('.studentWord[data-wordid="'+b.elm+'"]');c.addClass("commented").append('<span class="teacherComment" data-wordid="'+b.elm+'">'+b.text+"</span>")}var f=a.find(".reviewStudentAnswer p"),g="",h=0,i="";if(b.value.user&&(g=b.value.user.value),g=g.length>0?c(g):[],i=g.map(d),f.html(i),b.value.teacher&&b.value.teacher.comments){var j=b.value.teacher.comments;j.forEach(e)}}function c(a){return a.replace(/\n/g," <br/> ").match(/\s*(\S+)\s*/g)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("4f",["3","34","50","51","52","d"],function(a){"use strict";function b(a,b){var f=a.$selector,g=a.$activity,h=b.id,j=g.attr("id");if(h!==j)throw"Invalid JSON answers provided for teacher feedback mode";for(var k in b.answers){var l=b.answers[k],m=l.elm,n=f.filter(function(){return i(this).attr("data-rcfid")===m});d.isEmpty(n)||c(n,l)}e(f.find(".rcfTextArea"))}function c(a,b){f(a,b),g(a,b),h(a,b)}var d,e,f,g,h,i;return a("default",b),{setters:[function(a){d=a},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("53",["4e","4f"],function(a){"use strict";function b(a,b){c(a,b),d(a,b),a.$activity.off("click","span.studentWord")}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("54",["53","4e","4d"],function(a){"use strict";function b(a,b,f){switch(b){case"default":return void d(a,f);case"leaveTeacherFeedback":return void e(a,f);case"reviewTeacherFeedback":return void c(a,f)}}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("4e",["3","d"],function(a){"use strict";function b(a,b){var e=a.$activity,f=a.$selector,g=b.id,h=e.attr("id");if(g!==h)throw"Invalid JSON answers provided for activity ["+h+"]";for(var i in b.answers){var j=b.answers[i],k=j.elm,l=f.filter(function(){return d(this).attr("data-rcfid")===k});if(!c.isEmpty(l)){var m=j.value.user?j.value.user.value||"":"";l.find(".writing.rcfTextArea").val(m).trigger("autosize.resize").toggleClass("populated",m.length>0)}}}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default}],execute:function(){}}}),$__System.register("55",["41","43","44","54","1c","1d","3f","4e"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function(){function a(b){g(this,a),c(this,b)}return f(a,[{key:"getUserAnswers",value:function(){return b(this)}},{key:"showAnswers",value:function(a){i(this,a)}},{key:"setInteractionMode",value:function(a,b){e(this,a,b)}},{key:"getTeacherFeedback",value:function(){return h(this)}},{key:"reset",value:function(){d(this)}}]),a}(),a("default",j)}}}),$__System.register("56",["57","58","59","5a","5b"],function(a){"use strict";function b(a){var b=f(a),i=g(a),j=h(a);b.slideToggle({start:function(){j.text(c(b)?d(a):e(a)),b.toggleClass("collapsibleOpen"),i.toggleClass("collapsibleOpen")}})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.getButtonClosedCaption,e=a.getButtonOpenCaption},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("5c",["56","d"],function(a){"use strict";function b(a){var b=a.$selector;b.on("click",".collapsibleButton",function(a){var b=d(this);c(b),a.stopPropagation()})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("5d",["5c"],function(a){"use strict";function b(a,b){a.$selector=b,c(a)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("59",["5a"],function(a){"use strict";function b(a){var b=c(a),d=b.find(".block:first"),e=b.find(".block.collapsibleTargetBlock:first"),f=b.find(".infoBlock.collapsibleTargetBlock:first");if(e.length<1)if(d.length>0)e=d;else{if(f.length<1)return;e=f}return e}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("5e",[],function(a){"use strict";function b(a){return a.find(".collapsibleButton")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("57",[],function(a){"use strict";function b(a){return a.hasClass("collapsibleOpen")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("58",[],function(a){"use strict";function b(a){return d(a,"data-captionwhenopen")}function c(a){return d(a,"data-captionwhenclosed")}function d(a,b){return a.attr(b)}return{setters:[],execute:function(){a("getButtonOpenCaption",b),a("getButtonClosedCaption",c)}}}),$__System.register("5b",[],function(a){"use strict";function b(a){return a.find(".innerButtonCaption")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("5a",[],function(a){"use strict";function b(a){return a.closest(".collapsibleContainer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("5f",[],function(a){"use strict";function b(a){return"y"===(a.attr("data-initialOpen")||"n")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("60",["58","d","5b","5a","5f"],function(a){"use strict";function b(a){a.each(function(){var a=e(this),b=g(a),i=f(a),j=h(b);i.text(j?c(a):d(a))})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getButtonOpenCaption,d=a.getButtonClosedCaption},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("61",[],function(a){"use strict";function b(a,b,c){b.slideToggle({start:function(){b.toggleClass("collapsibleOpen",c),a.toggleClass("collapsibleOpen",c)}})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("62",["57","59","60","61","d","5f","5e"],function(a){"use strict";function b(a){a.$selector.each(function(){var a,b=g(this),j=i(b),k=h(b),l=d(j),m=c(l);a=k&&!m||!k&&m,e(j,k),a&&f(b,l,k)})}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("63",["62","1c","1d","5d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){d(this,a),e(this,b)}return c(a,[{key:"reset",value:function(){b(this)}}]),a}(),a("default",f)}}}),$__System.register("64",["65"],function(a){"use strict";function b(a){var b=c(a),h=e(a),i=f(a),j=d(a),k=g(a),l=h?1:k>j?j:k;a.owlCarousel({items:l,touchDrag:!1,mouseDrag:!1,margin:10,nav:!b,autoHeight:!b&&i,center:!0,navSpeed:200,singleItem:!0,navText:["<b>&#9664;</b>","<b>&#9657;</b>"]}),a.imagesLoaded(function(){a.trigger("refresh.owl.carousel")})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.isCarouselSimple,d=a.getCarouselChildCount,e=a.isCarouselSinglePanelView,f=a.isCarouselAutoHeight,g=a.getNumberOfChildrenToDisplay}],execute:function(){}}}),$__System.register("66",["65","d"],function(a){"use strict";function b(a){if(c(a)){var b=d('<div class="navLeftButton"></div>'),e=d('<div class="navRightButton"></div>');a.append(b),a.append(e)}}var c,d;return a("default",b),{setters:[function(a){c=a.isCarouselSimple},function(a){d=a.default}],execute:function(){}}}),$__System.register("67",["3","65","66"],function(a){"use strict";function b(a){var b,i,j=f(a),k=g(a),l=c(a);h(a),b=d(a),i=e(a),b.on("click",function(){k._current>0?a.trigger("prev.owl.carousel"):a.trigger("to.owl.carousel",k._items.length-1)}),i.on("click",function(){k._current<k._items.length-1?a.trigger("next.owl.carousel"):a.trigger("to.owl.carousel",0)}),a.on("changed.owl.carousel",function(){l.trigger("rcf.stop.audio",[!0]),RCF.publish("rcf.stop.video",!0),j&&RCF.publish("rcf.reset.triggers")})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.getLeftNavButton,e=a.getRightNavButton,f=a.getResetsTriggers,g=a.getOwlCarouselFromCarousel},function(a){h=a.default}],execute:function(){}}}),$__System.register("68",["3","65","69"],function(a){"use strict";function b(a){if(e(a))throw new Error("Simple Carousel passed to setupStandardCarousel");var b=j(a),m=f(a),n=d(a),o=k(a),p=h(a),q=i(a),r=g(a),s=a.find(".owl-item.active .block.card").attr("data-audio");s&&s.length>0&&o.find(".cardTitle .inlinePlayerContainer").trigger("click"),p.hide(),q.toggle(m>1),a.on("changed.owl.carousel",function(a){c(a,n,r,p,q,b)}),l(r.first())}function c(a,b,c,d,e,f){var g=a.page.count,h=a.page.index,i=$(c[h]),j=i.find(".block.card").attr("data-audio");e.toggle(h<g-1),d.toggle(h>0),RCF.publish("rcf.new.carousel.page",[i]),f&&RCF.publish("rcf.reset.triggers"),m(b),RCF.publish("rcf.stop.video"),j&&j.length>0&&i.find(".cardTitle .inlinePlayerContainer").trigger("click"),l(i)}var d,e,f,g,h,i,j,k,l,m;return a("default",b),{setters:[function(a){d=a.getActivityElementFromChild},function(a){e=a.isCarouselSimple,f=a.getCarouselChildCount,g=a.getSlidesFromCarousel,h=a.getLeftNavButton,i=a.getRightNavButton,j=a.getResetsTriggers,k=a.getActiveSlideFromCarousel,l=a.setFocusToFirstElementInSlide},function(a){m=a.default}],execute:function(){}}}),$__System.register("6a",["65","67","68"],function(a){"use strict";function b(a){var b=c(a);b?d(a):e(a)}var c,d,e;return a("default",b),{setters:[function(a){c=a.isCarouselSimple},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("6b",["3","65"],function(a){"use strict";function b(a){a.find(".owl-item").each(function(a,b){var e=$(b),f=d(e);if(!c(f)){var g=f.last(),h=f.first();g.on("keydown",function(a){9===a.keyCode&&(a.shiftKey||(h.focus(),a.preventDefault()))}),h.on("keydown",function(a){9===a.keyCode&&a.shiftKey&&(g.focus(),a.preventDefault())})}})}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getFocusableElementsFromSlide}],execute:function(){}}}),$__System.register("6c",["64","65","6a","6b","b"],function(a){"use strict";function b(a){a.each(function(a,b){var h=$(b);c(h),e(h),f(h),g.publish("rcf.new.carousel.page",[d(h)])})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.getActiveSlideFromCarousel},function(a){e=a.default},function(a){f=a.default},function(a){g=a}],execute:function(){}}}),$__System.register("6d",["3","6c"],function(a){"use strict";function b(a,b){a.$carouselElements=b,a.$activity=c(b),d(b)}var c,d;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.default}],execute:function(){}}}),$__System.register("6e",["3"],function(a){"use strict";function b(a,b){c(a)||a.trigger("to.owl.carousel",[b])}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("6f",["65","69","70","6e","b"],function(a){"use strict";function b(a,b){var h=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];h||f(b,0),d(a),e(a),g.publish("rcf.new.carousel.page",[c(b)])}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.getActiveSlideFromCarousel},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a}],execute:function(){}}}),$__System.register("71",["70"],function(a){"use strict";function b(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];b||c(a)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("70",[],function(a){"use strict";function b(a){a.find(".owl-dot").removeClass("containsWrongAnswer containsCorrectAnswer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("65",["3","72","d"],function(a){"use strict";function b(a){return a.find(".owl-dot")}function c(a){return a.find(".owl-item")}function d(a){return a.find(".owl-item.active")}function e(a){return a.hasClass("simple")}function f(a){return r(a.find(".owl-item"))?a.children().length:c(a).length}function g(a){return"y"===a.attr("data-singlepanelview")}function h(a){return"y"===a.attr("data-autoheight")}function i(a){return parseInt(a.attr("data-numitems"))||1}function j(a){return"y"===(a.attr("data-resettriggers")||"n")}function k(a){return e(a)?a.find(".navLeftButton"):a.find(".owl-nav .owl-prev")}function l(a){return e(a)?a.find(".navRightButton"):a.find(".owl-nav .owl-next")}function m(a){return s(a,"owl.carousel")}function n(a){var d=b(a),e=c(a);a.find(".wrong").each(function(a,b){var c=t(b).closest(".owl-item"),f=e.index(c);t(d[f]).addClass("containsWrongAnswer")})}function o(a){var d=b(a),e=c(a);a.find(".correct").each(function(a,b){var c=t(b).closest(".owl-item"),f=e.index(c);t(d[f]).addClass("containsCorrectAnswer")})}function p(a){return a.find("input,select,textarea")}function q(a){var b=p(a);r(b)||setTimeout(function(){b.first().focus()},200)}var r,s,t;return{setters:[function(a){r=a.isEmpty},function(a){s=a.getDataFromElement},function(a){t=a.default}],execute:function(){a("getDotsFromCarousel",b),a("getSlidesFromCarousel",c),a("isCarouselSimple",e),a("getCarouselChildCount",f),a("isCarouselSinglePanelView",g),a("isCarouselAutoHeight",h),a("getNumberOfChildrenToDisplay",i),a("getResetsTriggers",j),a("getLeftNavButton",k),a("getRightNavButton",l),a("getOwlCarouselFromCarousel",m),a("setDotsForSlidesWithIncorrectAnswers",o),a("setDotsForSlidesWithCorrectAnswers",n),a("getActiveSlideFromCarousel",d),a("getFocusableElementsFromSlide",p),a("setFocusToFirstElementInSlide",q)}}}),$__System.register("73",["3","65","70"],function(a){"use strict";function b(a){var b=c(a);f(b),a.each(function(a,b){var c=$(b);d(c),e(c)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.setDotsForSlidesWithCorrectAnswers,e=a.setDotsForSlidesWithIncorrectAnswers},function(a){f=a.default}],execute:function(){}}}),$__System.register("69",[],function(a){"use strict";function b(a){a.trigger("rcf.stop.audio",!0)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("74",["69"],function(a){"use strict";function b(a){a.$activity&&a.$carouselElements&&(c(a.$activity),a.$carouselElements=null,a.$activity=null)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("75",["71","73","74","1c","1d","6d","6f"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){"use strict";i=function(){function a(b){f(this,a),g(this,b)}return e(a,[{key:"showAnswers",value:function(){b(this.$activity)}},{key:"showMarkedAnswers",value:function(){c(this)}},{key:"close",value:function(){d(this)}},{key:"reset",value:function(a){h(this.$activity,this.$carouselElements,a)}}]),a}(),a("default",i)}}}),$__System.register("76",["77"],function(a){"use strict";function b(a){a.on("click",function(a){c($(a.currentTarget))})}var c;return a("default",b),{setters:[function(a){c=a.imageClicked}],execute:function(){}}}),$__System.register("78",["79"],function(a){"use strict";function b(a){var b=f(a),i=g(a);i.on("click",function(b){h(a),a.one("click",function(){a.find("img").addClass("hidden")}),b.stopPropagation()}),c(b),d(b),e(b)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.initialiseSpotlightElement,d=a.makeSpotlightElementDraggable,e=a.makeSpotlightElementResizable,f=a.getSpotlightFromInteractiveImage,g=a.getRevealElementFromInteractiveImage,h=a.showImageFromInteractiveImage}],execute:function(){}}}),$__System.register("7a",["7b"],function(a){"use strict";function b(a){a.on("click",".play:not(.playing)",function(){c(a)}),a.on("click",".reveal:not(.playing)",function(){d(a)})}var c,d;return a("default",b),{setters:[function(a){c=a.startTimedImage,d=a.resetTimedImage}],execute:function(){}}}),$__System.register("7c",["13","76","78","7a"],function(a){"use strict";function b(a,b){a.$interactiveImages=b,b.each(function(a,b){var g=$(b),h=c(g,"data-type");switch(h){case"blur":d(g);break;case"spotlight":e(g);break;case"timed":f(g)}})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getDataAttribute},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("77",["72"],function(a){"use strict";function b(a){var b=c(a);d(a),++b>i&&(b=0),e(a,b)}function c(a){return g(a,"blurLevel")||0}function d(a){var b=g(a,"blurLevel")||0;a.removeClass("blur"+b)}function e(a,b){if(isNaN(b))throw"invalid blurLevel passed to setBlurLevelOnImage";h(a,"blurLevel",b),a.addClass("blur"+b)}function f(a){d(a),e(a,0)}var g,h,i;return{setters:[function(a){g=a.getDataFromElement,h=a.setDataOnElement}],execute:function(){a("imageClicked",b),a("resetBlurredImageElement",f),i=3}}}),$__System.register("79",["13"],function(a){"use strict";function b(a){return a.find(".spotlight")}function c(a){return a.find(".reveal")}function d(a){a.find(".hidden").removeClass("hidden")}function e(a){var b=a.closest(".interactiveImageContainer"),c=i(b,"data-imagesrc");a.css({background:"url("+c+") no-repeat 0 0"})}function f(a){a.draggable({containment:"parent",drag:function(b,c){var d=-parseInt(c.position.left)+"px "+-parseInt(c.position.top)+"px";a.css({backgroundPosition:d})}})}function g(a){a.resizable({containment:"parent",handles:{nw:".nwgrip",ne:".negrip",sw:".swgrip",se:".segrip",n:".ngrip",e:".egrip",s:".sgrip",w:".wgrip"},minHeight:75,minWidth:75,resize:function(b,c){var d=-parseInt(c.position.left)+"px "+-parseInt(c.position.top)+"px";a.css({backgroundPosition:d})}})}function h(a){var c=b(a);c.removeClass("size1 size2 size3"),c.addClass("size0"),c.css({left:"0px",top:"0px",height:"",width:"",backgroundPosition:"0px 0px"}),a.find("img").addClass("hidden")}var i;return{setters:[function(a){i=a.getDataAttribute}],execute:function(){a("initialiseSpotlightElement",e),a("makeSpotlightElementDraggable",f),a("makeSpotlightElementResizable",g),a("getSpotlightFromInteractiveImage",b),a("getRevealElementFromInteractiveImage",c),a("showImageFromInteractiveImage",d),a("resetSpotlightElement",h)}}}),$__System.register("7b",["13"],function(a){"use strict";function b(a){var b=d(a),c=m(a,"data-intervalcount")||0,e=m(a,"data-duration")||2;b.fadeOut(),k(a),i(a);var f=window.setInterval(function(){++c>e-1&&(g(a),b.fadeIn())},1e3);n(a,"data-interval",f)}function c(a){g(a),i(a)}function d(a){return a.find(".controlsContainer")}function e(a){return m(a,"data-intervalcount")||0}function f(a){return m(a,"data-duration")||p}function g(a){var b=m(a,"data-interval")||0;0!==b&&(window.clearInterval(b),o(a,"data-intervalcount data-interval"),l(a),j(a))}function h(a){return a.find(".interactiveImage")}function i(a){var b=h(a);b.addClass("show")}function j(a){var b=h(a);b.removeClass("show")}function k(a){a.find(".singleButton").addClass("playing disabled inactive")}function l(a){a.find(".singleButton").removeClass("playing disabled inactive")}var m,n,o,p;return{setters:[function(a){m=a.getDataAttribute,n=a.setDataAttribute,o=a.removeDataAttributes}],execute:function(){a("startTimedImage",b),a("resetTimedImage",c),a("getControlsFromTimedImage",d),a("getImageIntervalCount",e),a("getImageDuration",f),a("stopImageInterval",g),a("getImageFromTimedImageElement",h),a("showImageElement",i),p=2}}}),$__System.register("7d",["13","77","79","d","7b"],function(a){"use strict";function b(a){a.each(function(a,b){var h=f(b),i=c(h,"data-type");switch(i){case"blur":d(h);break;case"spotlight":e(h);break;case"timed":g(h)}})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.getDataAttribute},function(a){d=a.resetBlurredImageElement},function(a){e=a.resetSpotlightElement},function(a){f=a.default},function(a){g=a.resetTimedImage}],execute:function(){}}}),$__System.register("7e",["1c","1d","7c","7d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){c(this,a),d(this,b)}return b(a,[{key:"close",value:function(){this.reset()}},{key:"reset",value:function(){e(this.$interactiveImages)}}]),a}(),a("default",f)}}}),$__System.register("7f",["3"],function(a){"use strict";function b(a,b,d){var e=b.elm;if(e===c.getRcfId(a)&&(0===d||!c.isEmpty(d))){var f=b.value[d],g=a.find("*[data-rcfid="+f+"]");g.addClass("selected")}}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),$__System.register("80",["d","7f"],function(a){"use strict";function b(a,b){b.on("click",".answerKey.selectable:not(.example)",function(a){var b=c(a.currentTarget);b.toggleClass("selected")}),a.on("rcf.single.answer","*[data-rcfinteraction=answerKey]:not(.example)",function(a,b,e){var f=c(a.currentTarget);d(f,b,e)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("81",["80"],function(a){"use strict";function b(a,b){c(a,b)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("82",["81"],function(a){"use strict";function b(a,b,d){a.$activity=b,a.$answerKeyElements=d,c(b,d)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("83",["84"],function(a){"use strict";function b(a){var b=c(a);b.removeClass("selected")}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("84",[],function(a){"use strict";function b(a){return a.find(".answerKey.selectable:not(.example)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("85",["84"],function(a){"use strict";function b(a){var b=c(a);b.addClass("selected")}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("86",["82","83","85","1c","1d"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(c,d){f(this,a),b(this,c,d)}return e(a,[{key:"showAnswers",value:function(){d(this.$activity)}},{key:"reset",value:function(){c(this.$activity)}}]),a}(),a("default",g)}}}),$__System.register("87",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.closest(".card")})}}}),$__System.register("88",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){a.toggleClass("hideTop")})}}}),$__System.register("89",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){a.toggleClass("hideBottom")})}}}),$__System.register("8a",["90","8b","8c","8d","8e","8f"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){a("default",function(a){var h=d(a);if(h){var i=e(a),j=f(i),k=g(i),l=b(i);switch("shuffle"!==h&&c.selected(a),h){case"shuffle":c.shuffle(k,l,j,i);break;case"full":c.full(i);break;case"single":c.single(i);break;case"grid":c.grid(i);break;case"hide-all":c.hideAll(j);break;case"image":c.image(j);break;case"text":c.text(j);break;case"show-all":c.showAll(j)}}})}}}),$__System.register("91",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.index(".cardSet li")})}}}),$__System.register("92",["3","90","91","93","94","8e","8f"],function(a){"use strict";function b(a){var b=k(a),c=l(a),d=g(a),e=i(b),m=b.length;if(!f(e)){var n=h(e),o=n+1,p=o;o<m&&j(e,c,d,p)}}function c(a){var b=k(a),c=l(a),d=g(a),e=i(b);if(!f(e)){var m=h(e),n=m-1,o=n;m>0&&j(e,c,d,o)}}function d(a,b,c){var d=e(b)||"";if(!f(d)){var h=i(c),k=c.closest("li"),l=b.index(".cardList li"),m=c.filter('[data-rcfid="'+d+'"]'),n=g(a);f(m)||j(h,k,n,l)}}var e,f,g,h,i,j,k,l;return{setters:[function(a){e=a.getRcfId,f=a.isEmpty},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){a("nextCard",b),a("previousCard",c),a("gotoCard",d)}}}),$__System.register("95",["13"],function(a){"use strict";var b;return{setters:[function(a){b=a.getDataAttribute}],execute:function(){a("default",function(a){return b(a,"data-nav-mode")||""})}}}),$__System.register("8e",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".cardSet .card")})}}}),$__System.register("96",["3","92","95","8d","8e"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.isEmpty},function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){a("default",function(a){var g=d(a);if(!b(g)){var h=e(a),i=f(h);switch(g){case"nextCard":c.nextCard(h);break;case"previousCard":c.previousCard(h);break;case"thumbnailClick":c.gotoCard(h,a,i)}}})}}}),$__System.register("97",["87","88","89","96","8a"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){a("default",function(a){var g=a.$activity;g.on("click",".topContainer",function(d){if("default"===a.mode){var e=$(d.currentTarget),f=b(e);c(f)}}),g.on("click",".textContainer",function(c){if("default"===a.mode){var e=$(c.currentTarget),f=b(e);
d(f)}}),g.on("click",".blendedFlashcardControls .button",function(a){var b=$(a.currentTarget);f(b),a.stopImmediatePropagation(),a.preventDefault()}),g.on("click",".blendedFlashcardSelection .cardNavigation",function(a){var b=$(a.currentTarget);e(b),a.stopImmediatePropagation(),a.preventDefault()})})}}}),$__System.register("98",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".blendedFlashcards .cardSet .card")})}}}),$__System.register("8f",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".cardSet li")})}}}),$__System.register("90",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".cardList li")})}}}),$__System.register("99",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){a.addClass("hideTop hideBottom")})}}}),$__System.register("9a",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){a.removeClass("layoutGrid layoutSingleThumbnails"),a.addClass("layoutSingle")})}}}),$__System.register("9b",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a,b,c){a.each(function(a,d){$(d).attr(b,c[a])})})}}}),$__System.register("9c",["3","93","94","9b","9d","9e","8d","9f","a0"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.shuffleArrayItems},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){a("default",function(a,k){for(var l=h(a),m=a.length,n=[],o=1;o<=m;o++)n.push(o);b(n),e(a,"data-rank",n),e(k,"data-rank",n),f(a),f(k);var p=c(a),q=p.index(),r=i(l),s=j(l);g(s,r,a,q),d(p,a,k,0)})}}}),$__System.register("8c",["13"],function(a){"use strict";var b;return{setters:[function(a){b=a.getDataAttribute}],execute:function(){a("default",function(a){return b(a,"data-mode")||""})}}}),$__System.register("8b",["99","9a","9c","8c"],function(a){"use strict";function b(a,b,c,d){k(c),o(a,b);var e=d.find("ul.blendedFlashcardModes li.button.active");switch(p(e)){case"show-all":i(c);break;case"hide-all":f(c);break;case"text":h(c);break;case"image":g(c)}}function c(a){l(a),a.addClass("layoutSingle")}function d(a){l(a),a.addClass("layoutSingleThumbnails")}function e(a){l(a),a.addClass("layoutGrid")}function f(a){m(a),a.addClass("hideTop hideBottom")}function g(a){k(a),a.addClass("hideBottom")}function h(a){k(a),a.addClass("hideTop")}function i(a){k(a)}function j(a){var b=a.siblings();a.addClass("active"),b.removeClass("active")}function k(a){a.removeClass("hideBottom hideTop")}function l(a){n(a),a.removeClass("layoutGrid layoutSingle layoutSingleThumbnails")}var m,n,o,p;return{setters:[function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default}],execute:function(){a("shuffle",b),a("full",c),a("single",d),a("grid",e),a("hideAll",f),a("image",g),a("text",h),a("showAll",i),a("selected",j)}}}),$__System.register("a1",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a,b,c){a.each(function(a,d){var e=$(d),f=e.attr(c);e.attr(b,f)})})}}}),$__System.register("9d",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){var b=a;b.tsort("",{attr:"data-rank",order:"asc"})})}}}),$__System.register("9e",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a,b,c,d){var e=c.length-1;a.toggleClass("active",d>0),b.toggleClass("active",d<e)})}}}),$__System.register("8d",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.closest(".blendedFlashcards")})}}}),$__System.register("a0",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".cardNavigation.previousCard")})}}}),$__System.register("9f",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".cardNavigation.nextCard")})}}}),$__System.register("a2",["d"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a,c){var d=a.get(c);return b(d)})}}}),$__System.register("94",["9e","8d","a0","9f","a2"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){a("default",function(a,g,h,i){var j=c(a),k=d(j),l=e(j),m=f(g,i),n=f(h,i);a.removeClass("active"),m.addClass("active"),h.removeClass("active"),n.addClass("active"),b(k,l,g,i)})}}}),$__System.register("93",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.closest("li.active")})}}}),$__System.register("a3",["90","93","94","98","8d","8f","8b","a1","9d"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a},function(a){i=a.default},function(a){j=a.default}],execute:function(){a("default",function(a){var k=a.$activity,l=e(k),m=f(l),n=g(m),o=m.find('.button[data-mode="full"]'),p=m.find('.button[data-mode="hide-all"]'),q=b(m),r=c(n);i(n,"data-rank","data-originalorder"),i(q,"data-rank","data-originalorder"),j(n),j(q),h.selected(o),h.selected(p),h.hideAll(l),h.full(m),d(r,n,q,0)})}}}),$__System.register("a4",["97","1c","1d","a3"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(c){d(this,a);var e=this;this.mode="default",this.$activity=c,b(e)}return c(a,[{key:"clearMarkedAnswers",value:function(){}},{key:"showAnswers",value:function(){}},{key:"isComplete",value:function(){}},{key:"getUserAnswers",value:function(){}},{key:"showMarkedAnswers",value:function(){}},{key:"showUserAnswers",value:function(){}},{key:"reset",value:function(){var a=this;e(a)}}]),a}(),a("default",f)}}}),$__System.register("a5",["13"],function(a){"use strict";var b;return{setters:[function(a){b=a.getDataAttribute}],execute:function(){a("default",function(a){var c=b(a,"data-audioLink")||"";a.trigger("rcf.play.audio",[c])})}}}),$__System.register("a6",["a5"],function(a){"use strict";function b(a){a.on("click","span.imageAudio[data-audiolink]",function(a){var b=$(a.currentTarget);c(b)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("a7",["a6"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a,c){a.$activity=c,b(c)})}}}),$__System.register("a8",[],function(a){"use strict";function b(a){a.$activity.trigger("rcf.stop.audio")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("a9",["1c","1d","a7","a8"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){c(this,a);var e=this;d(e,b)}return b(a,[{key:"reset",value:function(){var a=this;e(a)}}]),a}(),a("default",f)}}}),$__System.register("aa",["3"],function(a){"use strict";function b(a){a.on("click",".slidingButton",function(a){var b=$(a.target),d=b.closest(".slidingContainer"),e=d.find(".slidingBlock");c(e)||e.addClass("slidingOpen")}),a.on("click",".slidingBlock",function(a){var b=$(a.target);(b.is(".slidingBlock")||b.is(".slidingButtonClose"))&&(b.closest(".slidingBlock").removeClass("slidingOpen"),a.preventDefault())})}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("ab",["aa"],function(a){"use strict";function b(a,b){a.$selector=b,c(b)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("ac",[],function(a){"use strict";function b(a){var b=a.find(".slidingBlock.slidingOpen");b.removeClass("slidingOpen")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("ad",["1c","1d","ab","ac"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){c(this,a);var e=this;d(e,b)}return b(a,[{key:"reset",value:function(){e(this.$selector)}}]),a}(),a("default",f)}}}),$__System.register("ae",["d"],function(a){"use strict";function b(a){a.on("input keyup change paste",".unmarkedTextInput",function(a){var b=c(a.target),d=b.val();b.toggleClass("populated",d.length>0)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("af",["3","ae"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty $activity selector passed to Unmarked Text Input constructor";var e=b.find("[data-rcfinteraction='unmarkedTextInput']");d(b),a.$activity=b,a.$selector=e}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("b0",["3","34"],function(a){"use strict";function b(a,b){var e=b.elm,f=a.filter("[data-rcfid='"+e+"']");if(!c(f)){var g=Array.isArray(b.value)?b.value[0]:b.value;f.val(g),d(f),f.toggleClass("populated",g.length>0)}}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("b1",["3","13","b0"],function(a){"use strict";function b(a,b){var f=b.id,g=c(a),h=d(g,"id")||"";if(f!==h)throw"Invalid JSON Answers provided for activity "+h+" - answers were provided for activity "+f;b.answers.forEach(function(b){e(a,b)})}var c,d,e;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.getDataAttribute},function(a){e=a.default}],execute:function(){}}}),$__System.register("b2",["3","d"],function(a){"use strict";function b(a){return a.map(function(a,b){var e=d(b),f=e.val()||"",g=c(e)||"";return{elm:g,type:"simple",value:f}}).get()}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("b3",["33","34"],function(a){"use strict";function b(a){c(a),a.removeClass("populated"),d(a)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("b4",["1c","1d","af","b1","b2","b3"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(){function a(b){c(this,a);var e=this;d(e,b)}return b(a,[{key:"getUserAnswers",value:function(){return f(this.$selector)}},{key:"showAnswers",value:function(a){e(this.$selector,a)}},{key:"reset",value:function(){g(this.$selector)}}]),a}(),a("default",h)}}}),$__System.register("b5",[],function(a){"use strict";function b(a,b){var c="secondPanel"===b?"firstPanel":"secondPanel",d=b+"Open",e=c+"Open";a.hasClass(e)&&!a.hasClass(d)?a.addClass(d):a.hasClass(d)&&a.hasClass(e)&&a.removeClass(e)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("b6",["b5"],function(a){"use strict";function b(a){a.on("click",".singleButton.firstPanel",function(){c(a,"firstPanel")}),a.on("click",".singleButton.secondPanel",function(){c(a,"secondPanel")})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("b7",["b6"],function(a){"use strict";function b(a,b){a.$splitBlockElement=b,c(b)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("b8",["1c","1d","b7"],function(a){var b,c,d,e;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";e=function(){function a(b){c(this,a);var e=this;d(e,b)}return b(a,[{key:"reset",value:function(){}}]),a}(),a("default",e)}}}),$__System.register("b9",["ba"],function(a){"use strict";function b(a){c(a),d(a)}function c(a){a.on("click",".timedMarkupBlock .singleButton.play:not(.playing, .inactive)",function(a){var b=$(a.currentTarget),c=e(b);f(b),g(c),h(c)})}function d(a){a.on("click",".timedMarkupBlock .singleButton.reveal:not(.playing,.inactive)",function(a){var b=$(a.currentTarget),c=e(b),d=i(c),f=j(c);c.removeData("interval"),c.removeClass(f),c.addClass(d),c.find(".singleButton").removeClass("playing disbled inactive"),k(c).text("")})}var e,f,g,h,i,j,k;return a("default",b),{setters:[function(a){e=a.getTimedBlockFromChildElement,f=a.resetPlayButton,g=a.resetTimedBlock,h=a.timedBlockIntervalFunction,i=a.getTimedBlockActiveClass,j=a.getTimedBlockFinalClass,k=a.getTimedBlockCountDown}],execute:function(){}}}),$__System.register("bb",["3","b9"],function(a){"use strict";function b(a,b){a.$selector=b,a.$activity=c(b),d(a.$activity)}var c,d;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.default}],execute:function(){}}}),$__System.register("ba",["3","13","72"],function(a){"use strict";function b(a){var b=h(a),c=e(a),d=k(a),f=j(a),g=setInterval(function(){var e=l(b);c.text(e),b<1&&(clearInterval(n(a,"interval")),a.removeData("interval"),a.removeClass(""+f),a.addClass(d),a.find(".singleButton").removeClass("playing disabled inactive"),c.text("")),b--},1e3);return o(a,"interval",g),g}function c(a){var b=k(a),c=i(a),d=j(a);a.removeClass(c+" "+b),a.addClass(d)}function d(a){var b=a.parent();a.addClass("playing disabled inactive"),b.find(".reveal").addClass("playing disabled inactive")}function e(a){return a.find(".countDown")}function f(a){return a.find(".singleButton.play")}function g(a){return a.closest(".timedMarkupBlock")}function h(a){return parseInt(m(a,"data-duration")||10)}function i(a){return m(a,"data-initialclass")||""}function j(a){return m(a,"data-activeclass")||""}function k(a){return m(a,"data-finalclass")||""}var l,m,n,o;return{setters:[function(a){l=a.getTimeAsHHMMSS},function(a){m=a.getDataAttribute},function(a){n=a.getDataFromElement,o=a.setDataOnElement}],execute:function(){a("timedBlockIntervalFunction",b),a("resetTimedBlock",c),a("resetPlayButton",d),a("getTimedBlockCountDown",e),a("getTimedBlockPlayButton",f),a("getTimedBlockFromChildElement",g),a("getTimedBlockDuration",h),a("getTimedBlockInitialClass",i),a("getTimedBlockActiveClass",j),a("getTimedBlockFinalClass",k)}}}),$__System.register("bc",["72","ba"],function(a){"use strict";function b(a){a.each(function(a,b){var i=$(b),j=e(i),k=f(i),l=g(i),m=c(i,"interval");clearInterval(m),d(i,"interval"),i.removeClass(j+" "+k),i.addClass(l),i.find(".singleButton").removeClass("playing disabled inactive"),h(i).text("")})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getDataFromElement,d=a.removeDataFromElements},function(a){e=a.getTimedBlockActiveClass,f=a.getTimedBlockFinalClass,g=a.getTimedBlockInitialClass,h=a.getTimedBlockCountDown}],execute:function(){}}}),$__System.register("bd",["1c","1d","bb","bc"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){c(this,a),d(this,b)}return b(a,[{key:"reset",value:function(){e(this.$selector)}}]),a}(),a("default",f)}}}),$__System.register("be",[],function(a){"use strict";function b(a){var b=a.find(".imageContainer"),c={type:"image",closeOnContentClick:!0,closeBtnInside:!0,fixedContentPos:!0,mainClass:"rcfImagePopup",image:{verticalFit:!0,titleSrc:function(a){return $(a.el).find(".innerCaption").html()}},callbacks:{open:function(){var a=$.magnificPopup.instance,b=$(this.content),c=b.find(".mfp-title").text(),d=$(a.currItem.el).find("img").attr("class")||"";c.trim().length<1&&b.find("figcaption").remove(),b.find("img.mfp-img").addClass(d)}},zoom:{enabled:!0,duration:300}};"function"==typeof b.magnificPopup&&b.magnificPopup(c)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("bf",["d"],function(a){"use strict";function b(){var a=c.magnificPopup;"function"==typeof a.close&&a.close()}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("c0",["1c","1d","be","bf"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){c(this,a),d(b)}return b(a,[{key:"close",value:function(){e()}},{key:"reset",value:function(){}}]),a}(),a("default",f)}}}),$__System.register("c1",[],function(a){"use strict";function b(a){return a.find(".audioScript.popupPanel")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("c2",["3","c1"],function(a){"use strict";function b(a,b){var f=c(a),g=e(a),h=e(f);return h.removeClass("currentScript"),a.blur(),g.is(":visible")?g.removeClass("currentScript").slideUp():g.addClass("currentScript").slideDown(),h.filter(":not(.currentScript)").slideUp(),d(b),!1}var c,d,e;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild,d=a.preventEventBubble},function(a){e=a.default}],execute:function(){}}}),$__System.register("c3",["13"],function(a){"use strict";function b(a,b){var d=c($(b.currentTarget),"data-time"),e=a;return e.jPlayer("play",parseInt(d)),b.preventDefault(),!1}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("c4",[],function(a){"use strict";function b(a){return a.find(".audioScriptButton")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("c5",[],function(a){"use strict";function b(a){return a.find(".audioScript.popupPanel:visible").length<1}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("c6",["13","c4","c5"],function(a){"use strict";function b(a,b){var f=b,g=f.jPlayer("pauseOthers"),h=g.closest(".activity");h.trigger("rcf.stop.audio"),"y"===c(a,"data-autocc")&&e(a)&&d(a).trigger("click")}var c,d,e;return a("default",b),{setters:[function(a){c=a.getDataAttribute},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("c7",["c8"],function(a){"use strict";function b(a){a.length>0&&c(a,"p.playing")}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("c8",[],function(a){"use strict";function b(a,b){var c=a.find(b);c.removeClass("playing")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("c9",[],function(a){"use strict";function b(a,b){return a.scrollTop()+b.position().top-a.height()/2+b.height()/2}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("ca",[],function(a){"use strict";function b(a){return a.find(".subTitleLine")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("cb",["13"],function(a){"use strict";function b(a,b){return a.filter(function(a,d){return parseInt(c($(d),"data-time")||0)<b+1}).last()}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("cc",[],function(a){"use strict";function b(a){return a.find(".audioScript")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("cd",["13","72","c8","c9","ca","cb","cc"],function(a){"use strict";function b(a,b,k){var l=k,m=l.jPlayer.status.currentTime,n=j(a),o=e(a,"lastLine"),p=h(a),q=i(p,m);if(q.length>0){var r=c(q,"data-time");if(o!==r&&(f(a,".subTitleLine.playing"),d(a,"lastLine",r),q.addClass("playing"),"y"===c(a,"data-autoscroll"))){var s=g(n,q);n.animate({scrollTop:s},200)}}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.getDataAttribute},function(a){d=a.setDataOnElement,e=a.getDataFromElement},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){}}}),$__System.register("ce",["d","c2","c3","c6","c7","cd"],function(a){"use strict";function b(a,b,i,j){var k=c;b.bind(k.jPlayer.event.play,function(){f(a,b)}).bind(k.jPlayer.event.ended,function(){g(i)}).bind(k.jPlayer.event.timeupdate,function(b){h(a,j,b)}),a.on("click",".audioScriptButton",function(b){d(a,b)}).on("click",".subTitleLine",function(a){e(b,a)})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("cf",["13"],function(a){"use strict";function b(a){var b=c(a,"id")||"",d=b.replace(b.split("_")[0]+"_","");return"#audioPlayerInterface_"+d}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("d0",[],function(a){"use strict";function b(a){var b=0;if(a)for(var c=a.split(":"),d=0;d<c.length;d++)b=60*b+parseFloat(c[d].replace(",","."));return b}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("d1",["d0"],function(a){"use strict";function b(a){var b=a.split(" --> ")[0].trim();return parseInt(c(b))}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("d2",["3"],function(a){"use strict";function b(a){var b=a[2];if(a.length>2)for(var d=3;d<a.length;d++)b+="\n"+a[d];return c(b)&&(b=""),b}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("d3",[],function(a){"use strict";function b(a){var b=a;return b=b.replace(/\r\n|\r|\n/g,"\n"),b=b.trim()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("d4",[],function(a){"use strict";function b(a,b){return $("<p class='subTitleLine' data-time='"+a+"'><span>"+b+"</span>")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("d5",["d1","d2","d3","d4"],function(a){"use strict";function b(a,b){var g=e(b),h=g.split("\n\n"),i=a.find(".audioScript .script");h.forEach(function(a){var b=a.split("\n");if(b.length>=2){var e=c(b[1]),g=d(b),h=f(e,g);i.append(h)}}),a.removeClass("noSubtitles")}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("d6",[],function(a){"use strict";function b(a){a.addClass("noSubtitles").find(".audioScriptButton").hide()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("d7",["d5","d6"],function(a){"use strict";function b(a,b){$.ajax({url:b,dataType:"text",async:!1}).done(function(b){c(a,b)}).fail(function(){d(a)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("d8",["3","13"],function(a){"use strict";function b(a,b,e){var f=a.find(".audioPlayer"),g=d(f,"data-lookforid")||"";if("capePreview"===e)return g;var h=b;return c(h,"/")||(h+="/"),h+="srt/"+g+".srt"}var c,d;return a("default",b),{setters:[function(a){c=a.endsWith},function(a){d=a.getDataAttribute}],execute:function(){}}}),$__System.register("d9",["3","13","1d","d7","d8"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getDataAttribute},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function a(g){d(this,a);var h=g.closest(".activity"),i=c(h,"data-levelassetsurl")||"",j=c(h,"data-environment")||"";if(!b(i)){var k=f(g,i,j);e(g,k)}},a("default",g)}}}),$__System.register("da",[],function(a){"use strict";function b(a){return a.filter(".large:not(.noSubtitles)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("db",["3","13"],function(a){"use strict";function b(a,b,e){var f=c(b),g=d(a,"data-levelassetsurl")||"";return""!=g&&(g+="/audio/"),""+g+f+"."+e}var c,d;return a("default",b),{setters:[function(a){c=a.getBaseAudioName},function(a){d=a.getDataAttribute}],execute:function(){}}}),$__System.register("dc",["3","6","13","15","ce","cf","d9","da","dd","db"],function(a){"use strict";function b(a){var b=l(a),n=d(b),o=a,p=f(b,"data-audiosrc")||"",q=e(),r=i(b),s=p.split("/"),t=g(n),u="",v=void 0;try{u=c(s[s.length-1])}catch(a){}v=$(".audioScript[data-audiosrc='"+u+"']");var w={preload:"auto"},x=q.mediaFormats.audio.format,y=q.mediaMappings[x];"capePreview"!=t?w[y]=m(n,p,x):w[y]=p;var z=b;z.jPlayer({errorAlerts:!0,warningAlerts:!1,ready:function(){p&&z.jPlayer("setMedia",w);var a=k(o);a.length>0&&new j(a)},swfPath:q.swfFallbackURL,supplied:y,cssSelectorAncestor:r,cssSelector:{play:".audioPlayButton",pause:".audioPauseButton",stop:".audioStopButton",seekBar:".audioSeekBar",playBar:".audioPlayBar",mute:".audioMuteButton",unmute:".audioUnmuteButton",currentTime:".audioCurrentTime",duration:".audioDuration"}}),h(o,b,v,p)}var c,d,e,f,g,h,i,j,k,l,m;return a("default",b),{setters:[function(a){c=a.getBaseAudioName,d=a.getActivityElementFromChild},function(a){e=a.getRcfOptions},function(a){f=a.getDataAttribute},function(a){g=a.getEnvironmentFromActivity},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default}],execute:function(){}}}),$__System.register("de",["d","dc"],function(a){"use strict";function b(a){a.each(function(a,b){d(c(b))})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("df",["3","de"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty Activity passed to AudioPlayer interaction constructor";a.$selector=b,d(a.$selector)}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("e0",[],function(a){"use strict";function b(a){var b=a;b.jPlayer("stop")}return a("default",b),{setters:[],execute:function(){}}});$__System.register("e1",["dd","e0"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){a("default",function(a){var d=b(a);void 0!==d&&d.each(function(a,b){c($(b))})})}}});$__System.register("dd",[],function(a){"use strict";function b(a){return a.find(".audioPlayer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("e2",[],function(a){"use strict";function b(a){var b=a;b.jPlayer("destroy")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("e3",["dd","e2"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){a("default",function(a){var d=b(a);void 0!==d&&d.each(function(a,b){c($(b))})})}}}),$__System.register("e4",["1c","1d","df","e1","e3"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(b){c(this,a);var e=this;d(e,b)}return b(a,[{key:"reset",value:function(){this.stopAll()}},{key:"stopAll",value:function(){e(this.$selector)}},{key:"close",value:function(){this.stopAll(),f(this.$selector)}}]),a}(),a("default",g)}}}),$__System.register("e5",["b","e6"],function(a){"use strict";function b(a){c.subscribe("rcf.stop.video",function(){d(a)})}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default}],execute:function(){}}}),$__System.register("e7",[],function(a){"use strict";function b(a,b){var c=b.jPlayer.status.paused?"play":"pause";a.jPlayer(c)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("e8",["e9","ea"],function(a){"use strict";function b(a,b,e){var f=d(a);e.jPlayer.status.currentTime<1?(c(a,b),f.removeClass("jp-state-paused")):f.addClass("jp-state-paused")}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("eb",["ea"],function(a){"use strict";function b(a){var b=c(a);a.jPlayer("pauseOthers"),b.removeClass("jp-state-paused"),a.data("stopped",!1)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("ec",["ea","e9"],function(a){"use strict";function b(a,b){var e=c(a);d(a,b),e.removeClass("jp-state-paused")}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("ea",[],function(a){"use strict";function b(a){return a.closest(".rcfVideo")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("ed",["ea","e9"],function(a){"use strict";function b(a,b,e){var f=c(a);e.jPlayer.status.paused&&e.jPlayer.status.currentTime<1&&!a.data("stopped")&&(a.data("stopped",!0),f.removeClass("jp-state-paused"),d(a,b))}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("ee",["d"],function(a){"use strict";function b(a){c("html").toggleClass(d,a.jPlayer.options.fullScreen)}var c,d;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){d="rcf_videoFullScreen"}}}),$__System.register("ef",["d","e7","e8","eb","ec","ed","ee"],function(a){"use strict";function b(a,b){a.bind(c.jPlayer.event.click,function(b){d(a,b)}).bind(c.jPlayer.event.pause,function(c){e(a,b,c)}).bind(c.jPlayer.event.play,function(b){f(a,b)}).bind(c.jPlayer.event.ended,function(c){g(a,b,c)}).bind(c.jPlayer.event.timeupdate,function(c){h(a,b,c)}).bind(c.jPlayer.event.resize,function(a){i(a)})}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("e9",["6"],function(a){"use strict";function b(a,b){var d=c(),e=d.mediaFormats.video.format,f=d.mediaMappings[e],g={poster:d.swfFallbackURL+"background.png"};g[f]=b,a.jPlayer("setMedia",g)}var c;return a("default",b),{setters:[function(a){c=a.getRcfOptions}],execute:function(){}}}),$__System.register("f0",["3"],function(a){"use strict";function b(a){var b=void 0;return b=a.closest(".activity").attr("data-levelassetsurl"),b&&!c.endsWith(b,"/")&&(b+="/"),b&&(b+="video/"),b||(b="/"),b}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),$__System.register("f1",["3"],function(a){"use strict";function b(a){var b="y"==a.attr("data-switchvideo")||!1;return b?c.isTabletDevice()||c.isMobileDevice()?"-SD":"-HD":""}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),$__System.register("15",["13"],function(a){"use strict";function b(a){return c(a,"data-environment")||""}var c;return{setters:[function(a){c=a.getDataAttribute}],execute:function(){a("getEnvironmentFromActivity",b)}}}),$__System.register("f2",["3","6","13","15","f0","f1"],function(a){"use strict";function b(a){var b=d(a),j=g(b),k="",l="";"capePreview"!=j&&(k=h(a),l=i(a));var m=e(),n=m.mediaFormats.video.format,o=c(f(a,"src")||"");return o=""+o+l+"."+n,""+k+o}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.getBaseVideoName,d=a.getActivityElementFromChild},function(a){e=a.getRcfOptions},function(a){f=a.getDataAttribute},function(a){g=a.getEnvironmentFromActivity},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("f3",["6","ef","e9","f2"],function(a){"use strict";function b(a){var b=a.closest(".rcfVideo")[0].id,g=c(),h=f(a),i=g.mediaFormats.video.format,j=g.mediaMappings[i]||"m4v";a.jPlayer({errorAlerts:!0,warningAlerts:!1,preload:"auto",ready:function(){
e(a,h)},swfPath:g.swfFallbackURL,supplied:j,size:{width:"100%",height:"100%"},autoHide:{restored:!1,full:!1,fadeOut:1e4},cssSelectorAncestor:"#"+b}),d(a,h)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getRcfOptions},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("f4",["d","f3"],function(a){"use strict";function b(a){a.$selector.each(function(){d(c(this))})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("f5",["d"],function(a){"use strict";function b(){var a=c(this).closest(".rcfVideo.videoContainer").find("video");if(!(a.length<1)&&"function"==typeof a[0].webkitEnterFullscreen)try{a[0].webkitEnterFullscreen()}catch(a){}}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("f6",["3","f5"],function(a){"use strict";function b(a){var b;c.isTabletDevice()&&(b=a.$selector.closest(".activity"),b.find(".videoFullScreen").on("click",d))}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default}],execute:function(){}}}),$__System.register("f7",["e5","f4","f6"],function(a){"use strict";function b(a,b){var f=a;f.$selector=b.find(".videoPlayer"),c(f),e(f),d(f)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("f8",[],function(a){"use strict";function b(a){a.jPlayer("stop")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("e6",["d","f8"],function(a){"use strict";function b(a){var b=a.$selector;void 0!==b&&b.each(function(){d(c(this))})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("f9",["b"],function(a){"use strict";function b(){c.unsubscribe("rcf.stop.video")}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),$__System.register("fa",[],function(a){"use strict";function b(a){a.jPlayer("destroy")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("fb",["d","fa"],function(a){"use strict";function b(a){a.$selector.each(function(){d(c(this))})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("fc",["f9","fb","fd"],function(a){"use strict";function b(a){e(a),c(a),d(a)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("fd",[],function(a){"use strict";function b(a){a.stopAll()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("fe",["1c","1d","f7","e6","fc","fd"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(){function a(b){c(this,a),d(this,b)}return b(a,[{key:"stopAll",value:function(){e(this)}},{key:"reset",value:function(){g(this)}},{key:"close",value:function(){f(this)}}]),a}(),a("default",h)}}}),$__System.register("ff",[],function(a){"use strict";function b(a){return a.find(".letterChooser")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("100",["ff"],function(a){"use strict";function b(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZ",d=c(a);b.split("").forEach(function(a){d.append($('<div class=letter data-letter="'+a+'">'+a+"</div>"))})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("101",[],function(a){"use strict";function b(a){return a.hasClass("gameOver")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("102",[],function(a){"use strict";function b(a){return a.data("word")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("103",[],function(a){"use strict";function b(a){return a.attr("data-letter")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("104",[],function(a){"use strict";function b(a,b){return a.toUpperCase().indexOf(b.toUpperCase())>-1}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("105",[],function(a){"use strict";function b(a){var b=a.find(".letter").length,c=a.find(".letter.correct").length;return b===c}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("106",["107"],function(a){"use strict";function b(a,b){var d=c(a);d.find('.letter[data-letter="'+b+'"]').addClass("correct")}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("108",["105","106","107","109"],function(a){"use strict";function b(a,b){var g=e(a);d(a,b),c(g)&&f(a,!0)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("109",[],function(a){"use strict";function b(a,b){var c=b?" youWin":"";a.addClass("gameOver"+c)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("10a",[],function(a){"use strict";function b(a){return a.data("attempt")||0}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("10b",[],function(a){"use strict";function b(a,b){a.find(".stage.current").removeClass("current"),a.find(".stage"+b).addClass("current shown")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("10c",["109","10d","10a","10e","10f","10b"],function(a){"use strict";function b(a){var b=e(a),i=f(a);b++,d(a,i-b),h(a,b),b>=i&&c(a,!1),g(a,b)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("110",["101","102","103","104","108","10a","10e","10c"],function(a){"use strict";function b(a,b){var k,l,m=h(a),n=i(a);c(a)||m>=n||(b.addClass("clicked"),k=d(a),l=e(b),f(k,l)?g(a,l):j(a))}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){}}}),$__System.register("111",["110"],function(a){"use strict";function b(a){a.on("click",".letterChooser .letter:not(.clicked)",function(){c(a,$(this))})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("112",["100","111","113","10a","10f"],function(a){"use strict";function b(a){var b=f(a);g(a,b),e(a),c(a),d(a)}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("114",["3","112","d"],function(a){"use strict";function b(a,b){if(c.isEmpty(b))throw"Empty selector passed to Hangman game";Math.seedrandom(),a.$selector=b,a.$selector.each(function(){d(e(this))})}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("115",[],function(a){"use strict";function b(a){a.find(".stage").removeClass("current shown")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("10f",[],function(a){"use strict";function b(a,b){a.data("attempt",b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("116",[],function(a){"use strict";function b(a){a.find(".wordClues .wordClue.active").removeClass("active")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("117",[],function(a){"use strict";function b(a){a.find(".letter.clicked").removeClass("clicked"),a.find(".letterContainer .letter.correct").removeClass("correct")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("118",["115","116","117","10f"],function(a){"use strict";function b(a){a.removeClass("gameOver youWin"),f(a,0),c(a),d(a),e(a)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("119",[],function(a){"use strict";function b(a){return a.attr("data-wordlist").split("|")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("11a",["119"],function(a){"use strict";function b(a){var b=c(a),d=Math.floor(Math.random()*b.length),e=b[d],f=a.find('.wordClue[data-wordid="word_'+d+'"]');e=e.replace(/['"]/g,"").toUpperCase();var g={word:e,$clue:f};return g}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("11b",[],function(a){"use strict";function b(a){return a.find(".triesRemaining")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("10d",["11b"],function(a){"use strict";function b(a,b){var d=c(a);d.find(".tries").text(b)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("10e",[],function(a){"use strict";function b(a){return a.data("data-numattempts")||8}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("107",[],function(a){"use strict";function b(a){return a.find(".wordContainer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("11c",[],function(a){"use strict";function b(a){return a.find(".letterContainer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("11d",[],function(a){"use strict";function b(a){switch(a){case"-":return"hyphen";case" ":return"space";default:return"letter"}}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("11e",[],function(a){"use strict";function b(a){switch(a){case"-":return"hyphen";case" ":return"space";default:return""}}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("11f",["11d","11e"],function(a){"use strict";function b(a,b){var e=c(b),f=d(b);a.append($('<div class="letterContainer '+f+'"><div class="'+e+'" data-letter="'+b+'">'+b+"</div></div>"))}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("120",[],function(a){"use strict";function b(a,b){a.data("word",b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("121",["107","120","11c","11f"],function(a){"use strict";function b(a,b){var g=c(a),h=e(g);d(a,b.word),h.remove();var i=b.word;i.split("").forEach(function(a){f(g,a)}),b.$clue.addClass("active")}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("113",["121","11a","10d","10e"],function(a){"use strict";function b(a){var b=f(a),g=d(a);e(a,b),c(a,g)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("122",["113","118"],function(a){"use strict";function b(a){d(a),c(a)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("123",["122"],function(a){"use strict";function b(a){a.$selector.each(function(){c($(this))})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("124",["114","123","1c","1d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(c){e(this,a),b(this,c)}return d(a,[{key:"reset",value:function(){c(this)}}]),a}(),a("default",f)}}}),$__System.register("125",["126","127","128","129","1d"],function(a){var b,c,d,e,f;return{setters:[function(a){},function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(a){function b(a){e(this,b),c(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,"FlashcardContainer")}return d(b,a),b}(b),a("default",f)}}}),$__System.register("12a",["127","128","129","1d","12b"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function b(a){e(this,b),c(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,"FlashObject")}return d(b,a),b}(b),a("default",f)}}}),$__System.register("12c",["127","128","129","1d","12d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function b(a){e(this,b),c(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,"ToggleElements")}return d(b,a),b}(b),a("default",f)}}}),$__System.register("12e",["127","128","129","1d","12f"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function b(a){e(this,b),c(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,"TriggerElements")}return d(b,a),b}(b),a("default",f)}}}),$__System.register("130",["127","128","129","131","1d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){},function(a){e=a.default}],execute:function(){"use strict";f=function(a){function b(a){e(this,b),c(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,"CanDo")}return d(b,a),b}(b),a("default",f)}}}),$__System.register("127",["1c","1d"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(b,d){c(this,a),this.baseInteraction=new RCF.Interactions.Unmarked[d](b),this.$selector=this.baseInteraction.$selector}return b(a,[{key:"showAnswers",value:function(a,b){"function"==typeof this.baseInteraction.showAnswers&&this.baseInteraction.showAnswers(a,b)}},{key:"showMarkedAnswers",value:function(){"function"==typeof this.baseInteraction.showMarkedAnswers&&this.baseInteraction.showMarkedAnswers()}},{key:"isComplete",value:function(){return"function"!=typeof this.baseInteraction.isComplete||this.baseInteraction.isComplete()}},{key:"getUserAnswers",value:function(){if("function"==typeof this.baseInteraction.getUserAnswers)return this.baseInteraction.getUserAnswers()}},{key:"close",value:function(){"function"==typeof this.baseInteraction.close&&this.baseInteraction.close()}},{key:"reset",value:function(){"function"==typeof this.baseInteraction.reset&&this.baseInteraction.reset()}}]),a}(),a("default",d)}}}),$__System.register("132",["127","128","129","133","1d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){},function(a){e=a.default}],execute:function(){"use strict";f=function(a){function b(a){e(this,b),c(Object.getPrototypeOf(b.prototype),"constructor",this).call(this,a,"Popup")}return d(b,a),b}(b),a("default",f)}}}),$__System.register("134",["27","55","63","75","86","124","125","130","132","2c","3e","7e","a4","a9","ad","b4","b8","bd","c0","e4","fe","12a","12c","12e"],function(a){"use strict";function b(a){if(a.find("[data-rcfinteraction=flashcard]").length>0)return new I(a)}function c(a){var b=a.find('[data-rcfinteraction="carousel"]');if(b.length>0)return new F(b)}function d(a){var b=a.find('[data-rcfinteraction="simpleCarousel"]');if(b.length>0)return new F(b)}function e(a){var b=a.find('[data-rcfinteraction="audioElement"]');if(b.length>0)return new V(b)}function f(a){var b=a.find('[data-rcfinteraction="audioRecorder"]');if(b.length>0)return new C(b)}function g(a){var b=a.find('[data-rcfinteraction="videoElement"]');if(b.length>0)return new W(b)}function h(a){var b=a.find('[data-rcfinteraction="flashObject"]');if(b.length>0)return new X(b)}function i(a){var b=a.find('[data-rcfinteraction="interactiveText"]').not('[data-interactivetexttype^="selectable"]');if(b.length>0){var c=function(){var a=[];return b.each(function(){a.push(new RCF.Interactions.Unmarked.InteractiveText($(this)))}),{v:a}}();if("object"==typeof c)return c.v}}function j(a){var b=a.find("span.toggle");if(b.length>0)return new Y(b)}function k(a){var b=a.find(".chase");if(b.length>0){var c=function(){var a=[];return b.each(function(){a.push(new RCF.Interactions.Unmarked.Chase($(this)))}),{v:a}}();if("object"==typeof c)return c.v}}function l(a){var b=a.find(".canDoList");if(b.length>0)return new J(a)}function m(a){var b=a.find(".popupLink");if(b.length>0)return new K(a)}function n(a){var b=a.find(".collapsibleContainer");if(b.length>0)return new E(b)}function o(a){var b=a.find(".slidingContainer");if(b.length>0)return new Q(b)}function p(a){var b=a.find(".timedMarkupBlock");if(b.length>0)return new T(b)}function q(a){var b=a.find(".unmarkedTextInput");if(b.length>0)return new R(a)}function r(a){var b=a.find('[data-rcfinteraction="recording"]');if(b.length>0)return new M(b)}function s(a){var b=a.find('[data-rcfinteraction="writing"]');if(b.length>0)return new D(b)}function t(a){var b=a.find('[data-rcfinteraction="hangman"]');if(b.length>0)return new H(b)}function u(a){var b=a.find('[data-rcfinteraction="panZoomImage"]');if(b.length>0)return new L(b)}function v(a){var b=a.find('[data-rcfinteraction="interactiveImage"]');if(b.length>0)return new N(b)}function w(a){var b=a.find(".interactiveImageSet");if(b.length>0)return new U(b)}function x(a){var b=a.find('[data-triggerable="y"]');if(b.length>0)return new Z(b)}function y(a){var b=a.find('[data-rcfinteraction="splitBlock"]');if(b.length>0)return new S(b)}function z(a){var b=a.find('[data-rcfinteraction="answerKey"]');if(b.length>0)return new G(a,b)}function A(a){var b=a.find('[data-rcfinteraction="blendedFlashcards"]');if(b.length>0)return new O(a)}function B(a){var b=a.find(".imageAudio");if(b.length>0)return new P(a)}var C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z;return{setters:[function(a){C=a.AudioRecorder},function(a){D=a.default},function(a){E=a.default},function(a){F=a.default},function(a){G=a.default},function(a){H=a.default},function(a){I=a.default},function(a){J=a.default},function(a){K=a.default},function(a){L=a.default},function(a){M=a.default},function(a){N=a.default},function(a){O=a.default},function(a){P=a.default},function(a){Q=a.default},function(a){R=a.default},function(a){S=a.default},function(a){T=a.default},function(a){U=a.default},function(a){V=a.default},function(a){W=a.default},function(a){X=a.default},function(a){Y=a.default},function(a){Z=a.default}],execute:function(){a("flashCard",b),a("carousels",c),a("simpleCarousels",d),a("audioElements",e),a("audioRecorders",f),a("videoElements",g),a("flashObjects",h),a("interactiveText",i),a("toggleElements",j),a("chaseElements",k),a("canDoElements",l),a("popupLinks",m),a("collapsibleBlocks",n),a("slidingBlocks",o),a("timedBlocks",p),a("unmarkedText",q),a("hangmanElements",t),a("panZoomImages",u),a("interactiveImages",v),a("interactiveImageSets",w),a("triggerElements",x),a("splitBlock",y),a("writingInteractions",s),a("recordingInteractions",r),a("answerKeyInteractions",z),a("blendedFlashcardInteractions",A),a("imageAudioElements",B),b.initPriority=1,c.initPriority=1,d.initPriority=1,x.initPriority=-1,y.initPriority=-1}}}),$__System.register("135",["134","136"],function(a){function b(a,b){function f(c){var e;try{var f=d[c];e=f(a)}catch(a){alert("Error initializing "+c+" for activity ["+b+"]\n\n"+a)}void 0!==e&&(Array.isArray(e)?g=g.concat(e):g.push(e))}var g=[],h=e(d).sort(c);return h.forEach(f),g}function c(a,b){return a.initPriority<b.initPriority?-1:a.initPriority>b.initPriority?1:0}var d,e;return{setters:[function(a){d=a},function(a){e=a.default}],execute:function(){"use strict";a("create",b)}}}),$__System.register("137",["3","138","139","13a"],function(a){"use strict";function b(a,b,h){var i=$(a.currentTarget),j=b.elm;if(j===d(i)){var k,l=c(b,h);if(l.length>0)for(var m=0;m<l.length;m++){var n=i.find("input[type=checkbox][data-rcfid="+h+"][value="+l[m]+"]");k=e(n),g(n),f(k)}}}function c(a,b){var c=[];for(var d in a.value){var e=a.value[d];for(var f in e.value)e.value[f]===b&&c.push(e.elm)}return c}var d,e,f,g;return a("default",b),{setters:[function(a){d=a.getRcfId},function(a){e=a.default},function(a){f=a.default},function(a){g=a.checkCheckboxes}],execute:function(){}}}),$__System.register("13b",["138","139","d"],function(a){"use strict";function b(a){var b=e(a.currentTarget);d(c(b))}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("13c",["137","13b"],function(a){"use strict";function b(a){a.on("change","input.complexCategoriseCheckBox",d),a.on("rcf.single.answer",".categorise.checkboxList",c)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("13d",[],function(a){"use strict";function b(a){a.mmRandomizeRanks(".checkboxListCategoryItem")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("13e",[],function(a){"use strict";function b(a){a.tsort("",{attr:"data-rank",order:"asc"})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("13f",["3","13a","13c","13d","13e"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty Activity passed to CategoriseCheckboxList interaction constructor";if(a.$activity=b,a.$selector=b.find(".categorise.complexCategorise.checkboxList[data-rcfinteraction=categorise]"),!c(a.$selector)){d(a.$selector),e(a.$activity),f(a.$selector);var h=a.$selector.find(".checkboxListCategoryItem");g(h)}}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.initialiseExampleCheckboxes},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("140",["3","138","139","141","13a"],function(a){"use strict";function b(a,b,k){if(!b.answers)throw"Invalid answers provided to CategoriseCheckboxList interaction showAnswers method";f(a);for(var l in b.answers){var m=b.answers[l],n=m.elm;if(!c(n)){var o=a.filter(".categorise[data-rcfid="+n+"]");if(!c(o)){var p=g(o);h(p);for(var q in m.value){var r=m.value[q],s=r.elm;if($.isArray(r.value)||!window.console)for(var t in r.value){var u=r.value[t],v=o.find("input[type=checkbox][data-rcfid="+u+"][value="+s+"]");if(!c(v)){var w=!k||r.verification&&"1"==r.verification[t];w?i(v):j(v),e(d(v))}}else console.log("no array passed to [rcf_categorise_checkboxlist.show answers] ! - skipping")}}}}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.storeUserAnswer},function(a){g=a.getActiveCheckboxesFromInteractionElement,h=a.enableCheckboxes,i=a.checkCheckboxes,j=a.uncheckCheckboxes}],execute:function(){}}}),$__System.register("142",["3","143"],function(a){"use strict";function b(a,b){d(a);for(var e in b.answers){var f=b.answers[e],g=f.elm;if(!c(g)){var h=a.filter("[data-rcfid="+g+"]");if(!c(h))for(var i in f.value){var j=f.value[i],k=j.elm;if(!c(j.verification))for(var l in j.value){var m=j.value[l],n=h.find("input[type=checkbox][data-rcfid="+m+"][value="+k+"]:checked");if(!c(n)){var o="1"==j.verification[l]?"correct":"wrong";n.parent().find(".mark").addClass(o)}}}}}}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("138",[],function(a){"use strict";function b(a){return a.closest(".checkboxListCategoryItem")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("144",["145"],function(a){"use strict";function b(a){var b=c(a);if(!d(b))return 0;var e=parseInt(a.attr("data-restrictcount")||0);return e<1?1:e}var c,d;return a("default",b),{setters:[function(a){c=a.getCategoriseElementFromChildElement,d=a.isRestricted}],execute:function(){}}}),$__System.register("139",["144","145","13a"],function(a){"use strict";function b(a){var b=d(a),k=e(b),l=c(a);if(k){k&&l<1&&(l=1);var m=f(a),n=g(m).length;n>=l?j(h(m)):i(m)}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.getCategoriseElementFromChildElement,e=a.isRestricted},function(a){f=a.getActiveCheckboxesFromInteractionElement,g=a.filterCheckedCheckboxes,h=a.filterUncheckedCheckboxes,i=a.enableCheckboxes,j=a.disableCheckboxes}],execute:function(){}}}),$__System.register("146",["3","138","139","141","13a"],function(a){"use strict";function b(a){var b=g(a);i(b),h(b),b.each(function(a,b){var g=$(b),h=f(g);c(h)||j(g),e(d(g))})}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.getUserAnswer},function(a){g=a.getActiveCheckboxesFromInteractionElement,h=a.enableCheckboxes,i=a.uncheckCheckboxes,j=a.checkCheckboxes}],execute:function(){}}}),$__System.register("147",["3","d"],function(a){"use strict";function b(a){return{elm:c(a),type:"composite",value:a.find(".checkboxListCategoryItem:first input[type=checkbox]").map(function(){var b=this.value;return{elm:b,type:"list",value:a.find('input[type=checkbox][value="'+b+'"]:not(.example):checked').map(function(){return c(d(this))}).get()}}).get()}}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("148",["147","d"],function(a){"use strict";function b(a){return a.map(function(a,b){return c(d(b))}).get()}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("149",["141","13a"],function(a){"use strict";function b(a){var b=d(a);c(b),e(b),f(b)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.clearUserAnswer},function(a){d=a.getActiveCheckboxesFromInteractionElement,e=a.enableCheckboxes,f=a.uncheckCheckboxes}],execute:function(){}}}),$__System.register("14a",["d","13a"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,f){var g=c(f);e(d(g)).length<1&&(b=!1)}),b}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.getActiveCheckboxesFromInteractionElement,e=a.filterCheckedCheckboxes}],execute:function(){}}}),$__System.register("14b",["140","142","143","146","148","149","1c","1d","13f","14a"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){i(this,a),j(this,b)}return h(a,[{key:"showAnswers",value:function(a,c){b(this.$selector,a,c)}},{key:"showMarkedAnswers",value:function(a){c(this.$selector,a)}},{key:"showUserAnswers",value:function(){e(this.$selector)}},{key:"isComplete",value:function(){return k(this.$activity)}},{key:"getUserAnswers",value:function(){return f(this.$selector)}},{key:"clearMarkedAnswers",value:function(){d(this.$selector)}},{key:"reset",value:function(){g(this.$selector)}}]),a}(),a("default",l)}}}),$__System.register("14c",[],function(a){"use strict";function b(a){return a.find(".tableAnswerRow:not(.example)")}function c(a){var b=a;b.tsort("",{attr:"data-rank",order:"asc"})}function d(a){return a.filter(":even")}function e(a){return a.filter(":odd")}return{setters:[],execute:function(){a("getNonExampleRowsFromTable",b),a("sortRowsByRank",c),a("getEvenRows",d),a("getOddRows",e)}}}),$__System.register("14d",["14c"],function(a){"use strict";function b(a){var b=c(a);d(b),e(b).addClass("even"),f(b).addClass("odd")}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getNonExampleRowsFromTable,d=a.sortRowsByRank,e=a.getEvenRows,f=a.getOddRows}],execute:function(){}}}),$__System.register("14e",["150","d","14f"],function(a){"use strict";function b(a){var b=d(a.currentTarget);e(c(b))}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("150",[],function(a){"use strict";function b(a){return a.closest(".tableAnswerRow")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("151",["3","150","14f","13a"],function(a){"use strict";function b(a,b,h){var i=$(a.currentTarget),j=b.elm;if(j===c(i)){var k=[];for(var l in b.value){var m=b.value[l];for(var n in m.value)m.value[n]===h&&k.push(m.elm)}if(k.length>0)for(var o=f(i),p=o.filter("[data-rcfid="+h+"]"),q=0;q<k.length;q++){var r=p.filter("[data-catid="+k[q]+"]");g(r);var s=d(r);e(s)}}}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default},function(a){f=a.getActiveCheckboxesFromInteractionElement,g=a.checkCheckboxes}],execute:function(){}}}),$__System.register("152",["151","153","14e"],function(a){"use strict";function b(a){a.on("change",".complexCategoriseCheckBox.example",d),a.on("change",".complexCategoriseCheckBox:not(.example)",e),a.on("rcf.single.answer",".categorise.checkboxTable",c)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("154",["3","152","14d"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty activity passed to CategoriseCheckboxTable interaction constructor";a.$activity=b,a.$selector=b.find('.categorise[data-rcfinteraction="categorise"].checkboxTable'),c(a.$selector)||(a.$selector.each(function(a,b){var c=$(b);e(c)}),d(a.$activity))}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("155",["3","156","14f","13a"],function(a){"use strict";function b(a,b,k){if(!b.answers)throw"Invalid answers provided to CategoriseCheckBoxTable interaction showAnswers method";var l=e(a);l.each(function(){var a=$(this),b=d(a)||"",c=[];c=a.closest("table").find("input[type=checkbox][data-catid="+b+"]:checked").map(function(a,b){return d($(b))}).get(),a.data("user-answer",c)});var m=g(l.closest("table"));j(m),i(m);for(var n in b.answers){var o=b.answers[n],p=o.elm;if(!c(p)){var q=a.filter(".categorise[data-rcfid="+p+"]");if(!c(q))for(var r in o.value){var s=o.value[r],t=s.elm;if($.isArray(s.value)||!window.console)for(var u in s.value){var v=s.value[u],w=q.find("tr[data-rcfid="+v+"]");if(!c(w)){var x=w.find("input[type=checkbox][data-catid="+t+"]");j(x),(k&&s.verification&&"1"==s.verification[u]||c(k)||!k)&&h(x),f(w)}}else console.log("no array passed to [rcf_categorise_checkboxtable.show answers] ! - skipping")}}}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.isEmpty,d=a.getRcfId},function(a){e=a.default},function(a){f=a.default},function(a){g=a.getActiveCheckboxesFromInteractionElement,h=a.checkCheckboxes,i=a.enableCheckboxes,j=a.uncheckCheckboxes}],execute:function(){}}}),$__System.register("157",["3","143"],function(a){"use strict";function b(a,b){d(a);for(var e in b.answers){var f=b.answers[e],g=f.elm;if(!c(g)){var h=a.filter("[data-rcfid="+g+"]");if(!c(h))for(var i in f.value){var j=f.value[i];for(var k in j.value)if(!c(j.verification)){var l=h.find("input[type=checkbox][data-rcfid="+j.value[k]+"][data-catid="+j.elm+"]:checked");
if(!c(l)){var m="1"==j.verification[k]?"correct":"wrong";l.parent().find(".mark").addClass(m)}}}}}}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("158",["13","145"],function(a){"use strict";function b(a){var b=d(a);if(!e(b))return 0;var f=parseInt(c(a,"data-restrictcount")||0);return f<1?1:f}var c,d,e;return a("default",b),{setters:[function(a){c=a.getDataAttribute},function(a){d=a.getCategoriseElementFromChildElement,e=a.isRestricted}],execute:function(){}}}),$__System.register("14f",["145","158","13a"],function(a){"use strict";function b(a){var b=c(a),k=d(b),l=e(a);if(k){k&&l<1&&(l=1);var m=f(a),n=g(m).length;n>=l?j(h(m)):i(m)}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.getCategoriseElementFromChildElement,d=a.isRestricted},function(a){e=a.default},function(a){f=a.getActiveCheckboxesFromInteractionElement,g=a.filterCheckedCheckboxes,h=a.filterUncheckedCheckboxes,i=a.enableCheckboxes,j=a.disableCheckboxes}],execute:function(){}}}),$__System.register("159",["3","141","14f","13a"],function(a){"use strict";function b(a){var b=a.find(".categoryCol"),k=b.closest("table"),l=j(k);g(l),i(l),b.each(function(){var a=$(this),b=d(a)||"",g=e(a);if(!c(g))for(var i=a.closest("table"),j=0,k=g.length;j<k;j++){var l=g[j],m=i.find("tr[data-rcfid="+l+"]"),n=m.find("input[type=checkbox][data-catid="+b+"]");h(n),f(m)}})}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.isEmpty,d=a.getRcfId},function(a){e=a.getUserAnswer},function(a){f=a.default},function(a){g=a.enableCheckboxes,h=a.checkCheckboxes,i=a.uncheckCheckboxes,j=a.getActiveCheckboxesFromInteractionElement}],execute:function(){}}}),$__System.register("15a",["3","156","d"],function(a){"use strict";function b(a){var b=e(a);return{elm:c(a)||"",type:"composite",value:b.map(function(a,b){var e=f(b),g=c(e)||"",h={elm:g,type:"list",value:e.closest("table").find(".tableAnswerRow").map(function(a,b){var e=f(b),h=c(e)||"",i=e.find("input[type=checkbox][data-catid="+g+"]:checked:not(.example)");return d(i)?void 0:h}).get()};return h}).get()}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.isEmpty},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("15b",["d","15a"],function(a){"use strict";function b(a){return a.map(function(a,b){return d(c(b))}).get()}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("156",[],function(a){"use strict";function b(a){return a.find(".categoryCol")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("15c",["141","156","13a"],function(a){"use strict";function b(a){var b=d(a),h=b.closest("table"),i=g(h);c(b),e(i),f(i)}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.clearUserAnswer},function(a){d=a.default},function(a){e=a.uncheckCheckboxes,f=a.enableCheckboxes,g=a.getActiveCheckboxesFromInteractionElement}],execute:function(){}}}),$__System.register("15d",["d","13a"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,f){var g=c(f),h=d(g),i=e(h);i.length<1&&(b=!1)}),b}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.getActiveCheckboxesFromInteractionElement,e=a.filterCheckedCheckboxes}],execute:function(){}}}),$__System.register("15e",["143","154","155","157","159","1c","1d","15b","15c","15d"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){h(this,a),c(this,b)}return g(a,[{key:"showAnswers",value:function(a,b){d(this.$selector,a,b)}},{key:"showMarkedAnswers",value:function(a){e(this.$selector,a)}},{key:"showUserAnswers",value:function(){f(this.$selector)}},{key:"isComplete",value:function(){return k(this.$activity)}},{key:"getUserAnswers",value:function(){return i(this.$selector)}},{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"reset",value:function(){j(this.$selector)}}]),a}(),a("default",l)}}}),$__System.registerDynamic("15f",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.CAT_DROPDOWN]=function(){function c(a){this._initialize(a)}return c.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty Activity passed into Categorise DropDown constructor !";if(this.$activity=b,this.$selector=this.$activity.find(".categorise[data-rcfinteraction='categorise'].dropDown"),!RCF.Utils.isEmpty(this.$selector)){var c=this.$selector.find("li");this.$selector.mmRandomizeRanks("li:not(.example)"),c.tsort("",{attr:"data-rank",order:"asc"}),this.$selector.filter(".example").focus(function(){var b=a(this).data("existingVal");RCF.Utils.isEmpty(b)&&a(this).data("existingVal",a(this).val())}).on("change",function(){return a(this).val(a(this).data("existingVal")),!1}),this.$selector.find("select:not(.example)").prop("selectedIndex",-1),this.$activity.on("rcf.single.answer",".categorise.dropDown[data-rcfinteraction=categorise]:not(.example)",function(b,c,d){var e=a(this),f=c.elm;if(f===e.attr("data-rcfid")){var g=[];for(var h in c.value){var i=c.value[h];for(var j in i.value)i.value[j]===d&&g.push(i.elm)}if(g.length>0)for(var k=e.find(".categoriseDropDown[data-rcfid='"+d+"'] select"),l=0;l<g.length;l++)k[0].value=g[l]}})}},showAnswers:function(c,d){this.$selector.each(function(){var b=a(this),c=a(b.find("select:not(.example)")[0]),d={elm:b.attr("data-rcfid"),value:c.find("option").map(function(){var c=a(this),d=c.attr("data-rcfid");return{elm:d,value:b.find("option[value='"+d+"']:selected").map(function(){return a(this).closest(".categoriseDropDown").attr("data-rcfid")}).get()}}).get()};b.data("user-answer",d),b.find("select:not(.example)").prop("selectedIndex","-1")});for(var e in c.answers){var f=c.answers[e],g=f.elm;if(!RCF.Utils.isEmpty(g)){var h=this.$selector.filter(".categorise[data-rcfid='"+g+"']");if(!RCF.Utils.isEmpty(h))for(var i in f.value){var j=f.value[i],k=j.elm;if(a.isArray(j.value)||!b.console)for(var l in j.value){var m=j.value[l],n=h.find(".categoriseDropDown[data-rcfid='"+m+"'] select");d?j.verification&&"1"==j.verification[l]?n[0].value=k:n.prop("selectedIndex",-1):n[0].value=k}else console.log("no array passed to [rcf_categorise_dropdown.show answers] ! - skipping")}}}},showMarkedAnswers:function(a){this.clearMarkedAnswers();for(var b in a.answers){var c=a.answers[b],d=c.elm;if(void 0!==d){var e=this.$selector.filter(".categorise[data-rcfid='"+d+"']");if(!RCF.Utils.isEmpty(e))for(var f in c.value){var g=c.value[f];if(!RCF.Utils.isEmpty(g.verification))for(var h in g.value){var i=e.find(".categoriseDropDown[data-rcfid='"+g.value[h]+"'] select");if(!RCF.Utils.isEmpty(i)){var j="1"==g.verification[h]?"correct":"wrong";i.closest(".categoriseDropDown").find(".mark").addClass(j)}}}}}},showUserAnswers:function(){this.$selector.each(function(){var c=a(this);c.find("select:not(.example)").prop("selectedIndex","-1");var d=c.data("user-answer");if(!RCF.Utils.isEmpty(d)){var e=d.elm;if(e!=c.attr("data-rcfid"))return void(b.console&&console.log("Saved user answers are for different category !"));for(var f in d.value){var g=d.value[f],h=g.elm,i=g.value;for(var j in i){var k=i[j],l=c.find(".categoriseDropDown[data-rcfid='"+k+"'] select");RCF.Utils.isEmpty(l)||(l[0].value=h)}}}})},isComplete:function(){var b=!0;return this.$selector.find("select:not(.example)").each(function(){var c=a(this);c.find("option:selected").length<1&&(b=!1)}),b},getUserAnswers:function(){var b=this.$selector.map(function(){var b=a(this),c=a(b.find("select:not(.example)")[0]);return{elm:b.attr("data-rcfid"),type:"composite",value:c.find("option").map(function(){var c=a(this),d=c.attr("data-rcfid");return{elm:d,type:"list",value:b.find("option[value='"+d+"']:selected").map(function(){return a(this).closest(".categoriseDropDown:not(.example)").attr("data-rcfid")}).get()}}).get()}}).get();return b},clearMarkedAnswers:function(){this.$selector.find(".mark").removeClass("correct wrong")},reset:function(){this.$selector.find("select:not(.example)").prop("selectedIndex",-1)}},c}()}(jQuery,window)}(this),d()}),$__System.register("160",["128","129","161","1d","15f"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_categorise_dropDown")}return c(d,a),d}(d),a("default",f)}}}),$__System.register("162",[],function(a){"use strict";function b(a){return a.find("[data-rcfinteraction='categorise'].categorise.hybrid")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("163",["3","164","165","166"],function(a){"use strict";function b(a){var b=a.$wordBox,g=d(b),h=c(g);b.droppable({cursor:"pointer",tolerance:"intersect",hoverClass:"dragOverDrop",accept:function(a){var b=d(a),e=c(b);return h===e&&!f(a)},drop:function(b,c){var d=c.draggable;e(d,a,!0)}})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("167",["3","164","168","169"],function(a){"use strict";function b(a){var b=a.$wordBox,g=d(b),h=g.find(".category .dropTarget"),i=c(g)||"";h.droppable({hoverClass:"dragOverDrop",revert:"invalid",greedy:"true",tolerance:"pointer",accept:function(a){var b=$(this),f=c(a)||"",g=d(a),h=c(g);return i===h&&!e(b,f)},drop:function(b,c){var d=c.draggable,e=$(this);return f(e,d,a,!0)}})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("16a",["163","167","16b"],function(a){"use strict";function b(a,b){var f=b.getWordItems();e(f,b),c(b),d(b)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("165",["3","72","16c","b","16d","16e","16f"],function(a){"use strict";function b(a,b){var k=arguments.length<=2||void 0===arguments[2]||arguments[2],l=c(a)||"";if(f(a),i(a)){var m=b.getWordItem(l);d(m)||(b.addWordItem(m),k?(h(a),e(a,"remove-me",!0)):(j(a),a.remove(),setTimeout(function(){g.publish("update.categories.size")},50)))}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.isEmpty},function(a){e=a.setDataOnElement},function(a){f=a.deselectItem},function(a){g=a},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){}}}),$__System.register("170",["3","165"],function(a){"use strict";function b(a,b){var e=a.find(".dev-droppable.selected");c(e)||d(e,b,!1)}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("171",["3","170","172","173"],function(a){"use strict";function b(a,b){var g="ontouchstart"in document?"touchstart":"click",h=b.$wordBox,i=a,j=a.find(".category .dropTarget.rcfDroppable");h.on(g,function(){d(i,b)}),h.on(g,".clickAndStickable:not(.example,.selected)",function(a){var b=$(a.currentTarget);b.hasClass("ui-draggable-draggable")||(e(b,j),c(a))}),f(h)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.preventEventBubble},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("174",[],function(a){"use strict";function b(a){return a.find(".clickAndStickable.selected")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("175",["3","166","169","174","176","16c"],function(a){"use strict";function b(a,b){var l="ontouchstart"in document?"touchstart":"click";a.on("click",".rcfDroppable.clickAndStickable [data-audiolink]:not(.inlinePlayerContainer)",function(){i($(this))}),a.on("click",".rcfDroppable.clickAndStickable .inlinePlayerContainer[data-audiolink]",function(a){i($(this)),c(a)}),a.on(l,".rcfDroppable.dropTarget li.clickAndStickable",function(b){var e=h(a),f=$(b.currentTarget);d(e)!==d(f)&&j(e),k(f),c(b)}),a.on(l,".rcfDroppable.dropTarget",function(d){var i=$(d.currentTarget),k=h(a);e(k)||(j(k),g(i,k,b,!1)&&f(k)&&b.removeWordItem(k),c(d))})}var c,d,e,f,g,h,i,j,k;return a("default",b),{setters:[function(a){c=a.preventEventBubble,d=a.getRcfId,e=a.isEmpty},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.deselectItem,k=a.toggleSelectItem}],execute:function(){}}}),$__System.register("177",["171","175"],function(a){"use strict";function b(a,b){c(a,b),d(a,b)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("178",[],function(a){"use strict";function b(a){var b=a.find(".category:even"),c=a.find(".category:odd");b.addClass("leftCategory"),c.addClass("rightCategory"),b.each(function(a,b){var c=$(b);c.next(".category").add(c).wrapAll("<div class='mobileCategoryContainer'>")})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("179",[],function(a){"use strict";function b(a){return a.hasClass("mobile")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("17a",["177","178","179","16a","17b","17c","17d"],function(a){"use strict";function b(a,b){var j=g(b),k=h(a),l=i(a);j.randomizeItems(),l?(f(b,j),c(b,j)):k?f(b,j):c(b,j),!l&&e(b)&&d(b)}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("17e",[],function(a){"use strict";function b(a,b){return a.filter(function(a){return a.value.indexOf(b)>-1}).map(function(a){return a.elm})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("17f",["169","180"],function(a){"use strict";function b(a,b,e,f){f.forEach(function(f){var g=d(a,f);c(g,b,e,!1),e.removeWordItem(b)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("181",["3","b","17b","17e","17f"],function(a){"use strict";function b(a){a.on("rcf.single.answer",'.categorise.hybrid[data-rcfinteraction="categorise"]:not(.example)',function(a,b,i){var j=$(this),k=b.elm;if(k===c(j)){var l=b.value,m=g(l,i);if(!d(m)){var n=f(j),o=n.getWordItem(i);h(j,o,n,m),e.publish("update.categories.size")}}})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.isEmpty},function(a){e=a},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("182",["3","6","13"],function(a){"use strict";function b(a){a.on("rcf.categorise.answer.changed",function(b,f,g,h){var i=d();if(i.feedbackOptions){var j=e(a,"id")||"",k=i.feedbackOptions?i.feedbackOptions.onAnswerChanged:null;c(k)||"function"!=typeof k||k({activity_id:j,id:j,answers:[{elm:f,type:"composite",value:[{elm:g,type:"list",value:[h]}]}]})}})}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getRcfOptions},function(a){e=a.getDataAttribute}],execute:function(){}}}),$__System.register("183",["162","181","182","d","17a"],function(a){"use strict";function b(a,b){var h=c(b);h.each(function(a,c){var d=f(c);g(b,d)}),d(b),e(b),a.$selector=h,a.$activity=b}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("184",["3"],function(a){"use strict";function b(a,b){b.answers.forEach(function(b){var d=b.elm;if(!c(d)){var e=a.filter("[data-rcfid='"+d+"']");c(e)||b.value.forEach(function(a){if(!c(a.verification)){var b=a.elm,d=e.find(".category[data-rcfid='"+b+"']");c(d)||a.value.forEach(function(b,e){var f=d.find(".dragItem[data-rcfid='"+b+"']");if(!c(f)){var g=a.verification[e],h=f.find(".mark");h.addClass("1"==g?"correct":"wrong")}})}})}})}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("180",[],function(a){"use strict";function b(a,b){return a.find(".category[data-rcfid='"+b+"']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("16e",["3"],function(a){"use strict";function b(a){return!c(a.closest(".category"))}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("168",["3"],function(a){"use strict";function b(a,b){var d=a.find("li[data-rcfid='"+b+"']");return!c(d)}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("185",[],function(a){"use strict";function b(a){var b=a.clone();return b.removeClass("dragged"),b.removeAttr("data-restrictcount data-displaycount"),b}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("186",[],function(a){"use strict";function b(a,b){var c=a.find("ul");c.append(b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("187",["3","13","72","188","189","b","16c","16f"],function(a){"use strict";function b(a){var b=a;b.draggable({scroll:!0,scrollSensitivity:100,cursor:"pointer",hoverClass:"dragOverDrop",helper:function(b){var c=$(b.currentTarget);l(c);var f=d(c)||"",g=i(c);return a.addClass("dragged"),e(g,"id",f+"_clone"),g.find(".mark").removeClass("correct wrong"),g},start:function(){var b=f(a,"data-audiolink");c(b)||a.trigger("rcf.play.audio",[b])},stop:function(){j(a)||a.removeClass("dragged"),g(a,"remove-me")&&(h(a,"remove-me"),m(a),a.remove()),setTimeout(function(){k.publish("update.categories.size")},50)}})}var c,d,e,f,g,h,i,j,k,l,m;return a("default",b),{setters:[function(a){c=a.isEmpty,d=a.getRcfId},function(a){e=a.setDataAttribute,f=a.getDataAttribute},function(a){g=a.getDataFromElement,h=a.removeDataFromElements},function(a){i=a.default},function(a){j=a.default},function(a){k=a},function(a){l=a.deselectItem},function(a){m=a.default}],execute:function(){}}}),$__System.register("16f",[],function(a){"use strict";function b(a){var b=a;try{b.draggable("destroy")}catch(a){}}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("169",["3","13","72","164","166","168","185","186","187","b","16e","16d","16f"],function(a){"use strict";function b(a,b,q,r){var s=c(b)||"",t=h(b),u=n(b);if(d(s))return!1;if(i(a,s))return!1;var v=$("");if(t?v=b:u&&(v=q.getWordItem(s)),d(v))return!1;o(v);var w=j(b),x=e(a,"data-categoryid")||"",y=g(b),z=c(y)||"";return k(a,w),u&&r&&f(b,"remove-me",!0),u&&!r&&(p(b),b.remove()),l(w),setTimeout(function(){m.publish("update.categories.size")},50),a.trigger("rcf.categorise.answer.changed",[z,x,s]),!0}var c,d,e,f,g,h,i,j,k,l,m,n,o,p;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.isEmpty},function(a){e=a.getDataAttribute},function(a){f=a.setDataOnElement},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default}],execute:function(){}}}),$__System.register("18a",["3","169","180"],function(a){"use strict";function b(a,b,f,g){var h=b.elm,i=e(a,h);c(i)||b.value.forEach(function(a,c){var e=f.getWordItem(a);(g&&b.verification&&"1"==b.verification[c]||!g)&&(d(i,e,f,!1),f.removeWordItem(e))})}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("18b",["3","17b","18a"],function(a){"use strict";function b(a,b,f){var g=b.elm;if(!c(g)){var h=a.filter("[data-rcfid='"+g+"']");if(!c(h)){var i=d(h);b.value.forEach(function(a){e(h,a,i,f)})}}}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("18c",["b","18b"],function(a){"use strict";function b(a,b){var e=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];b.answers.forEach(function(b){d(a,b,e)}),c.publish("update.categories.size")}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default}],execute:function(){}}}),$__System.register("18d",["3","141","18c","18e"],function(a){"use strict";function b(a){var b=d(a);f(a),c(b)||e(a,b,!1)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getUserAnswer},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("18f",["3"],function(a){"use strict";function b(a){var b=a.find("li:not(.example)");return b.map(function(a,b){return c($(b))}).get()}var c;return a("default",b),{setters:[function(a){c=a.getRcfId}],execute:function(){}}}),$__System.register("190",["3","18f"],function(a){"use strict";function b(a){return{elm:c(a),type:"list",value:d(a)}}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("191",["190","d"],function(a){"use strict";function b(a){return a.map(function(a,b){var e=d(b);return c(e)}).get()}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("192",["3","191"],function(a){"use strict";function b(a,b){var e=$(b),f=e.find(".category"),g={elm:c(e),type:"composite",value:d(f)};return g}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("193",["192"],function(a){"use strict";function b(a){var b=a.map(c).get();return b}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("18e",["b","17b"],function(a){"use strict";function b(a){a.each(function(a,b){var c=$(b),e=c.find(".category li:not(.example)"),f=c.find(".category"),g=d(c);g.reset(),e.remove(),f.css("height","")}),c.publish("update.categories.size")}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default}],execute:function(){}}}),$__System.register("194",["3"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,d){var e=$(d).find(".category li:not(.example)");c(e)&&(b=!1)}),b}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("195",["3","17b"],function(a){"use strict";function b(a,b){var c=b.answers[0].elm,e=a.filter("[data-rcfid='"+c+"']");if(!d(e)){var g=b.answers[0].value[0].elm,h=b.answers[0].value[0].value[0],i="1"==b.answers[0].value[0].verification[0],j=e.find(".category[data-rcfid='"+g+"'] li.dragItem[data-rcfid='"+h+"']");window.RCF&&window.RCF.Handlers&&window.RCF.Handlers.FeedbackHandler&&window.RCF.Handlers.FeedbackHandler.provideFeedback&&RCF.Handlers.FeedbackHandler.provideFeedback(e,j,i,f)}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.isEmpty},function(a){e=a.default}],execute:function(){f=function(a,b){var d=e(a),f=c(b)||"";d.addWordItem(d.getWordItem(f)),b.remove()}}}}),$__System.register("196",["141","143","183","184","193","194","195","1c","1d","18c","18d","18e"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){b=a.storeUserAnswer,c=a.clearUserAnswer},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default}],execute:function(){"use strict";o=function(){function a(b){k(this,a),e(this,b)}return j(a,[{key:"showAnswers",value:function(a,c){var d={id:this.$activity[0].id,answers:g(this.$selector)};this.reset(),b(this.$selector,d),l(this.$selector,a,c)}},{key:"provideFeedback",value:function(a){i(this.$selector,a)}},{key:"showMarkedAnswers",value:function(a){f(this.$selector,a)}},{key:"showUserAnswers",value:function(){m(this.$selector)}},{key:"isComplete",value:function(){return h(this.$activity)}},{key:"getUserAnswers",value:function(){return g(this.$selector)}},{key:"clearMarkedAnswers",value:function(){d(this.$selector)}},{key:"reset",value:function(){c(this.$selector),n(this.$selector)}}]),a}(),a("default",o)}}}),$__System.register("197",["d"],function(a){"use strict";function b(a){a.each(c)}function c(){var a=d(this);a.mmRandomizeRanks("li.itemSelectListItem:not(.example)");var b=a.find("li.itemSelectListItem");b.tsort("",{attr:"data-rank",order:"asc"})}var d;return a("default",b),{setters:[function(a){d=a.default}],execute:function(){}}}),$__System.register("198",["145","199","d"],function(a){"use strict";function b(a){a.on("click",".itemSelectListItem:not(.example) .categoriseItemSelect .category.selectable:not(.disabled, .example)",c)}function c(){var a=h(this),b=d(a),c=e(b),i=a.closest(".itemSelectListItem"),j=f(b);c?a.toggleClass("selected"):(i.find(".categoriseItemSelect .category.selectable.selected:not(.example)").removeClass("selected"),a.addClass("selected")),j&&g(i)}var d,e,f,g,h;return a("default",b),{setters:[function(a){d=a.getCategoriseElementFromChildElement,e=a.isComplex,f=a.isRestricted},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("19a",["3","199","d"],function(a){"use strict";function b(a){a.on("rcf.single.answer",".categorise.itemSelectList",c)}function c(a,b,c){var g=f(this),h=b.elm;if(h===d(g)){var i=[];for(var j in b.value){var k=b.value[j];for(var l in k.value)k.value[l]===c&&i.push(k.elm)}if(i.length>0)for(var m=0;m<i.length;m++){var n=g.find(".itemSelectListItem:not(.example)[data-rcfid="+c+"] .category.selectable[data-rcfid="+i[m]+"]");n.addClass("selected"),e(n.closest(".itemSelectListItem"))}}}var d,e,f;return a("default",b),{setters:[function(a){d=a.getRcfId},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("19b",["3","197","198","19c","19a"],function(a){"use strict";function b(a,b){if(c.isEmpty(b))throw"Empty Activity passed to CategoriseItemSelectList constructor";a.$activity=b,a.$selector=b.find(".categorise.itemSelectList[data-rcfinteraction=categorise]"),c.isEmpty(a.$selector)||(d(a.$selector),f(a.$selector),e(a.$selector),g(a.$activity))}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("19d",["141","d","19e","19f"],function(a){"use strict";function b(a){a.each(c),f(a)}function c(){var a=e(this),b=g(a);d(a,b)}var d,e,f,g;return a("default",b),{setters:[function(a){d=a.storeUserAnswer},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("1a0",["3","19d","1a1","19e"],function(a){"use strict";function b(a,b,g){if(!b.answers)throw"Invalid answers provided to rcf_Categorise_itemselectlist:showAnswers";d(a),f(a);for(var h in b.answers){var i=b.answers[h],j=i.elm;if(!c(j)){var k=a.filter(".categorise[data-rcfid="+j+"]");e(k,i,g)}}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("1a2",["3","143"],function(a){"use strict";function b(a,b){d(a);for(var e in b.answers){var f=b.answers[e],g=f.elm;if(!c(g)){var h=a.filter("[data-rcfid="+g+"]");if(!c(h))for(var i in f.value){var j=f.value[i],k=j.elm;if(!c(j.verification))for(var l in j.value){var m=j.value[l],n=h.find(".itemSelectListItem[data-rcfid="+m+"]:not(.example) .category.selectable[data-rcfid="+k+"]");if(!c(n)){var o="1"==j.verification[l]?"correct":"wrong";n.find(".mark").addClass(o)}}}}}}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("199",["145"],function(a){"use strict";function b(a){var b=c(a),e=d(b),f=parseInt(a.attr("data-restrictcount")||0),g=0;if(e){f<1&&(f=1),g=a.find(".category.selectable.selected:not(.example)").length;var h=a.find(".category.selectable:not(.selected, .example)"),i=g>=f;h.toggleClass("disabled",i)}}var c,d;return a("default",b),{setters:[function(a){c=a.getCategoriseElementFromChildElement,d=a.isRestricted}],execute:function(){}}}),$__System.register("164",[],function(a){"use strict";function b(a){return a.closest(".categorise")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1a3",[],function(a){"use strict";function b(a){return a.hasClass("complexCategorise")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1a4",[],function(a){"use strict";function b(a){return a.hasClass("restricted")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("145",["164","1a3","1a4"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("getCategoriseElementFromChildElement",b),a("isComplex",c),a("isRestricted",d)}}}),$__System.register("1a1",["145","199"],function(a){"use strict";function b(a,b,e){var f=c(a);for(var g in b.value){var h=b.value[g],i=h.elm;for(var j in h.value){var k=h.value[j],l=a.find(".itemSelectListItem[data-rcfid="+k+"]:not(.example)");if(l.length>0){f||l.find(".selected").removeClass("selected");var m=l.find("[data-rcfid="+i+"]");e?h.verification&&"1"==h.verification[j]&&m.addClass("selected"):m.addClass("selected")}}}a.find(".itemSelectListItem:not(.example)").each(function(){var a=$(this);d(a)})}var c,d;return a("default",b),{setters:[function(a){c=a.isComplex},function(a){d=a.default}],execute:function(){}}}),$__System.register("1a5",["3","141","d","1a1","19e"],function(a){"use strict";function b(a){h(a),a.each(c)}function c(){var a=f(this),b=e(a);d(b)||g(a,b)}var d,e,f,g,h;return a("default",b),{setters:[function(a){d=a.isEmpty},function(a){e=a.getUserAnswer},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("19f",["3","d"],function(a){"use strict";function b(a){var b=a.find(".categoriseItemSelect:first .category.selectable");return{elm:c(a)||"",type:"composite",value:b.map(function(b,e){var f=c(d(e))||"",g={elm:f,type:"list",value:a.find(".itemSelectListItem .category.selectable.selected:not(.example)[data-rcfid="+f+"]").map(function(){return c(d(this).closest(".itemSelectListItem"))}).get()};return g}).get()}}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("1a6",["d","19f"],function(a){"use strict";function b(a){return a.map(function(a,b){return d(c(b))}).get()}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("19e",[],function(a){"use strict";function b(a){a.find(".itemSelectListItem:not(.example) .category:not(.example)").removeClass("selected disabled")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("19c",["141","d","19e"],function(a){"use strict";function b(a){e(a),a.each(function(){var a=d(this);c(a)})}var c,d,e;return a("default",b),{setters:[function(a){c=a.clearUserAnswer},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1a7",[],function(a){
"use strict";function b(a){return a.find(".itemSelectListItem:not(.example)").length}function c(a){return a.find(".itemSelectListItem:not(.example) .category.selected").length}return{setters:[],execute:function(){a("getNumberCategoriesAvailable",b),a("getNumberCategoriesSelected",c)}}}),$__System.register("1a8",["1a7"],function(a){"use strict";function b(a){var b=d(a),e=c(a);return e>=b}var c,d;return a("default",b),{setters:[function(a){c=a.getNumberCategoriesSelected,d=a.getNumberCategoriesAvailable}],execute:function(){}}}),$__System.register("1a9",["143","1c","1d","19b","1a0","1a2","1a5","1a6","19c","1a8"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){d(this,a),e(this,b)}return c(a,[{key:"showAnswers",value:function(a,b){f(this.$selector,a,b)}},{key:"showMarkedAnswers",value:function(a){g(this.$selector,a)}},{key:"showUserAnswers",value:function(){h(this.$selector)}},{key:"isComplete",value:function(){return k(this.$activity)}},{key:"getUserAnswers",value:function(){return i(this.$selector)}},{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"reset",value:function(){j(this.$selector)}}]),a}(),a("default",l)}}}),$__System.registerDynamic("1aa",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.CAT_RADIOLIST]=function(){function c(a){this._initialize(a)}return c.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty Activity passed into Categorise RadioList constructor !";if(this.$activity=b,this.$selector=b.find(".categorise.radioList[data-rcfinteraction=categorise]"),!RCF.Utils.isEmpty(this.$selector)){var c=this.$selector.find("li.radioListCategoryItem");this.$selector.mmRandomizeRanks("li.radioListCategoryItem:not(.example)"),c.tsort("",{attr:"data-rank",order:"asc"}),this.$selector.find(".radioListCategoryItem:not(.example) input[type=radio]").prop("checked",!1),this.$selector.find(".radioListCategoryItem.example").find("input[type=radio]").on("change",function(b){b.stopPropagation(),b.preventDefault(),"y"==a(this).attr("data-correct")||a(this).closest(".radioList").find("input[type='radio']").filter("[data-correct='y']").prop("checked",!0)}),this.$activity.on("rcf.single.answer",".categorise.radioList[data-rcfinteraction=categorise]:not(.example)",function(b,c,d){var e=a(this),f=c.elm;if(f===e.attr("data-rcfid")){var g=[];for(var h in c.value){var i=c.value[h];for(var j in i.value)i.value[j]===d&&g.push(i.elm)}if(g.length>0)for(var k=0;k<g.length;k++)e.find("input[data-rcfid='"+d+"'][value='"+g[k]+"']").prop("checked",!0)}})}},showAnswers:function(c,d){this.$selector.each(function(){var b=a(this),c=b.find(".radioListCategoryItem:first input[type=radio]"),d={elm:b.attr("data-rcfid"),value:c.map(function(){var c=this.value;return{elm:c,value:b.find(".radioListCategoryItem:not(.example) input[type=radio][value='"+c+"']:checked").map(function(){return a(this).attr("data-rcfid")}).get()}}).get()};b.data("user-answer",d),b.find(".radioListCategoryItem:not(.example) input[type=radio]").prop("checked",!1)});for(var e in c.answers){var f=c.answers[e],g=f.elm;if(!RCF.Utils.isEmpty(g)){var h=this.$selector.filter(".categorise[data-rcfid='"+g+"']");if(!RCF.Utils.isEmpty(h))for(var i in f.value){var j=f.value[i];if(a.isArray(j.value)||!b.console){var k=j.elm;for(var l in j.value){var m=j.value[l],n=h.find("input[type=radio][data-rcfid='"+m+"'][value='"+k+"']");n.length>0&&(d?j.verification&&"1"==j.verification[l]?n.prop("checked",!0):n.prop("checked",!1):n.prop("checked",!0))}}else console.log("no array passed to [rcf_categorise_radiolist.show answers] ! - skipping")}}}},showMarkedAnswers:function(a){this.clearMarkedAnswers();for(var b in a.answers){var c=a.answers[b],d=c.elm;if(!RCF.Utils.isEmpty(d)){var e=this.$selector.filter("[data-rcfid='"+d+"']");if(!RCF.Utils.isEmpty(e))for(var f in c.value){var g=c.value[f];if(!RCF.Utils.isEmpty(g.verification))for(var h in g.value){var i=e.find("input[type=radio][data-rcfid='"+g.value[h]+"']:checked");if(!RCF.Utils.isEmpty(i)){var j="1"==g.verification[h]?"correct":"wrong";i.closest(".categoriseRadioList").find(".mark").addClass(j)}}}}}},showUserAnswers:function(){this.$activity.find(".radioListCategoryItem:not(.example) input[type=radio]").prop("checked",!1),this.$selector.each(function(){var c=a(this),d=c.data("user-answer");if(!RCF.Utils.isEmpty(d)){var e=d.elm;if(e!=c.attr("data-rcfid"))return void(b.console&&console.log("Saved user answers are for a different categorise... aborting"));for(var f in d.value){var g=d.value[f],h=g.elm,i=g.value;for(var j in i){var k=i[j],l=c.find(".radioListCategoryItem:not(.example) input[type=radio][data-rcfid='"+k+"'][value='"+h+"']");RCF.Utils.isEmpty(l)||l.prop("checked",!0)}}}})},isComplete:function(){var b=!0;return this.$selector.each(function(){var c=a(this),d=c.find(".radioListCategoryItem:not(.example)"),e=d.find("input[type=radio]:checked");d.length!==e.length&&(b=!1)}),b},getUserAnswers:function(){var b=this.$selector.map(function(){var b=a(this),c=b.find(".radioListCategoryItem:first input[type=radio]");return{elm:b.attr("data-rcfid"),type:"composite",value:c.map(function(){var c=this.value;return{elm:c,type:"list",value:b.find(".radioListCategoryItem:not(.example) input[type=radio][value='"+c+"']:checked").map(function(){return a(this).attr("data-rcfid")}).get()}}).get()}}).get();return b},clearMarkedAnswers:function(){this.$selector.find(".mark").removeClass("correct wrong")},reset:function(){this.$selector.find(".radioListCategoryItem:not(.example) input[type=radio]").prop("checked",!1)}},c}()}(jQuery,window)}(this),d()}),$__System.register("1ab",["128","129","161","1d","1aa"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_categorise_radioList")}return c(d,a),d}(d),a("default",f)}}}),$__System.registerDynamic("1ac",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.CAT_RADIOTABLE]=function(){function c(a){this._initialize(a)}return c.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty Activity passed into CategoriseCheckBoxList constructor !";if(this.$activity=b,this.$selector=this.$activity.find(".categorise.radioTable[data-rcfinteraction=categorise]"),!RCF.Utils.isEmpty(this.$selector)){var c=this,d=this.$selector.find(".tableAnswerRow:not(.example)");this.$selector.find("table").mmRandomizeRanks(".tableAnswerRow"),d.tsort("",{attr:"data-rank",order:"asc"});var e=this.$selector.find(".tableAnswerRow");e.filter(":odd").addClass("odd"),e.filter(":even").addClass("even"),this.$selector.find("input[type=radio].example").on("change",function(b){b.stopPropagation(),b.preventDefault(),"y"==a(this).attr("data-correct")||a(this).closest("tr").find("input[type=radio]").filter("[data-correct='y']").prop("checked",!0)}),this.$selector.on("click","td",function(){var b=a(this).find("input[type=radio]:not(.example)");RCF.Utils.isEmpty(b)||b.prop("checked",!0)}),this.$activity.on("rcf.single.answer",".categorise.radioTable[data-rcfinteraction=categorise]:not(.example)",function(b,d,e){var f=a(this),g=d.elm;if(g===f.attr("data-rcfid")){var h="";for(var i in d.value){var j=d.value[i];for(var k in j.value)if(j.value[k]===e){h=j.elm;break}if(h.length>0)break}if(h.length>0){var l=c.$selector.find(".tableAnswerRow:not(.example) input[type='radio'][data-rcfid='"+e+"']"),m=c.$selector.find(".tableAnswerRow:not(.example) input[type='radio'][data-rcfid='"+e+"']:checked"),n=l.closest("tr");n.data("user-answer",m.val()),m=l.filter("[value='"+h+"']"),m.prop("checked",!0)}}})}},showAnswers:function(c,d){this.$selector.find(".tableAnswerRow:not(.example)").each(function(){var b=a(this),c=b.find("input[type=radio]:not(.example):checked");RCF.Utils.isEmpty(c)||b.data("user-answer",c.val())}),d||this.$selector.find("input[type=radio]:not(.example)").prop("checked",!1);for(var e in c.answers){var f=c.answers[e],g=f.elm,h=this.$selector.filter("[data-rcfid='"+g+"']");if(!RCF.Utils.isEmpty(h))for(var i in f.value){var j=f.value[i],k=j.elm;if(a.isArray(j.value)||!b.console)for(var l in j.value){var m=j.value[l];h.find("[data-rcfid='"+m+"']").prop("checked",!1),(d&&j.verification&&"1"==j.verification[l]||RCF.Utils.isEmpty(d)||!d)&&h.find("[data-rcfid='"+m+"'][value='"+k+"']").prop("checked",!0)}else console.log("no array passed to [rcf_categorise_radiotable.show answers] ! - skipping")}}},showMarkedAnswers:function(a){this.clearMarkedAnswers();for(var b in a.answers){var c=a.answers[b],d=c.elm;if(!RCF.Utils.isEmpty(d)){var e=this.$selector.filter("[data-rcfid='"+d+"']");if(!RCF.Utils.isEmpty(e))for(var f in c.value){var g=c.value[f];if(!RCF.Utils.isEmpty(g.verification))for(var h in g.value){var i=e.find("input[type=radio][data-rcfid='"+g.value[h]+"']:checked");if(!RCF.Utils.isEmpty(i)){var j="1"==g.verification[h]?"correct":"wrong";i.closest(".radioTableItem").find(".mark").addClass(j)}}}}}},showUserAnswers:function(){this.$selector.find(".tableAnswerRow:not(.example)").each(function(){var b=a(this),c=b.data("user-answer");RCF.Utils.isEmpty(c)?b.find("input[type=radio]").prop("checked",!1):b.find("input[type=radio][value='"+c+"']").prop("checked",!0)})},isComplete:function(){var b=!0;return this.$selector.each(function(){var c=a(this),d=c.find(".tableAnswerRow:not(.example)");d.find("input[type=radio]:checked").length<d.length&&(b=!1)}),b},getUserAnswers:function(){var b=this.$selector.map(function(){var b=a(this),c=b;return{elm:b.attr("data-rcfid"),type:"composite",value:c.find(".tableHeadRow th[data-catid]").map(function(){var b=a(this).attr("data-catid");return{elm:b,type:"list",value:c.find(".tableAnswerRow:not(.example) input[type=radio][value='"+b+"']:checked").map(function(){return a(this).attr("data-rcfid")}).get()}}).get()}}).get();return b},clearMarkedAnswers:function(){this.$selector.find(".mark").removeClass("correct wrong")},reset:function(){this.$selector.find(".tableAnswerRow:not(.example)").removeData("user-answer").find("input[type=radio]").prop("checked",!1)}},c}()}(jQuery,window)}(this),d()}),$__System.register("1ad",["128","129","161","1d","1ac"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_categorise_radioTable")}return c(d,a),d}(d),a("default",f)}}}),$__System.register("1ae",["1af"],function(a){"use strict";var b;return{setters:[function(a){b=a}],execute:function(){!function(a,c){c.RCF=c.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.CAT_SELECTABLE]=function(){function c(b){if(RCF.Utils.isEmpty(b))throw"Empty Activity passed into the interaction constructor (CategoriseSelectable)";if(this.$activity=b,this.$interactiveTextElements=this.$activity.find(".interactiveText[data-interactivetexttype^='selectableCat']"),this.$selector=this.$activity.find(".eSpan.selectableCat:not(.example)"),!RCF.Utils.isEmpty(this.$selector)){var c=a("#rcfCatSelectMask"),d=b.closest(".activityContainer");c.length<1&&(c=a("<div class='rcfMask' id='rcfCatSelectMask'></div>").appendTo(d)),this.$mask=c,this._initialize()}}return c.prototype={_initialize:function(){var b=this;b._buildCategoriesObjects(),b.$selector.closest(".interactiveText").on("click",".eSpan.selectableCat:not(.example, .selecting)",function(c){b._selectableElementClicked(a(this),c),c.preventDefault(),c.stopPropagation()}),b.$activity.on("click",".interactiveText_popup span",function(c){b._categoryChosen(a(this)),b._hidePopups(),c.preventDefault(),c.stopPropagation()}),b.$activity.on("rcf.single.answer",".interactiveText[data-rcfinteraction='interactiveText']",function(c,d,e){var f=a(this),g=d.elm;if(g===f.attr("data-rcfid")&&(f.hasClass("type_selectableCat")||f.hasClass("type_selectableCatWords"))){var h=f.data("categories");b._hidePopups();for(var i=0;i<d.value.length;i++){var j=d.value[i];if(j.elm===e){var k=f.find("[data-rcfid='"+e+"']");if(j.value.length>0){var l=h[j.value]||{title:""};b._populateAnswer(j.value,l.title,k)}}}}})},_buildCategoriesObjects:function(){this.$interactiveTextElements.each(function(){var b=a(this),c=b.attr("data-cats").split("|"),d=b.find(".interactiveText_popup"),e={categoryClassString:""},f=0;c.forEach(function(a){var b="cat_"+ ++f;e[a]={index:b,title:d.find("[data-catid='"+a+"']").text()},e.categoryClassString+=b+" "}),b.data("categories",e)})},_selectableElementClicked:function(c,d){var e=this,f=c.closest(".interactiveText").attr("data-rcfid"),g=this.$activity.find('.interactiveText_popup[data-interactivetext-rcfid="'+f+'"]');e.$selector.removeClass("selecting"),c.addClass("selecting");var h=c.data("chosen-answer");RCF.Utils.isEmpty(h)?g.find(".clear").hide():g.find(".clear").show(),g.data("selectableElement",c),e.$mask.parent().css("position","relative"),e.$mask.css({opacity:"0.4"}).show().one("click",function(){e._hidePopups(),a(this).parent().css("position","static"),c.removeClass("selecting")}),b.reparentPopup(g),b.showPopup(d,g,c.find(".selectableCatItem"))},_categoryChosen:function(a){var b=a.closest(".interactiveText_popup"),c=a.attr("data-catid"),d=a.text(),e=b.data("selectableElement");RCF.Utils.isEmpty(e)||this._populateAnswer(c,d,e)},_hidePopups:function(){this.$activity.find(".interactiveText_popup").removeData("selectableElement","").hide(),this.$mask.hide()},_populateAnswer:function(a,b,c){var d=c.find(".answer"),e=c.closest(".interactiveText"),f=e.data("categories");return c.removeClass(f.categoryClassString),"-99"===a||0==a.length?(c.removeData("chosen-answer").removeClass("selecting answered"),void d.text("").hide()):(c.data("chosen-answer",a).removeClass("selecting").addClass("answered").addClass(f[a].index),void d.text(" ("+b+")").show())},showAnswers:function(b,c){var d=this;d._hidePopups();for(var e in b.answers){var f=b.answers[e],g=f.elm,h=f.type;if(!RCF.Utils.isEmpty(g)){var i=this.$activity.find(".interactiveText[data-rcfid='"+g+"'][data-interactivetexttype^='selectableCat']"),j=i.data("categories");if(!RCF.Utils.isEmpty(i)){if(i.find(".eSpan.selectableCat.answered:not(.example)").each(function(){var b=a(this);b.removeClass(" answered "+j.categoryClassString).data("user-answer",b.data("chosen-answer")).data("chosen-answer","").find(".answer").text("").hide()}),"composite"!=h)throw"Invalid JSON Answers provided for interactive text block - should be 'composite' : \n\n"+JSON.stringify(b);for(var k in f.value){var l=f.value[k],m=l.elm,n=l.value,o=i.find("[data-rcfid='"+m+"']"),p=j[n]?j[n].title:"";(c&&l.verification&&"1"==l.verification[0]||RCF.Utils.isEmpty(c)||!c)&&d._populateAnswer(n,p,o)}}}}},showMarkedAnswers:function(a){var b=a.id,c=this.$activity.attr("id");if(b!=c)throw"Invalid JSON Marked Answers Object provided for activity ["+c+"]\n\nAnswers provided were for activity ["+a.id+"]";this.clearMarkedAnswers();for(var d in a.answers){var e=a.answers[d],f=e.elm;if(!RCF.Utils.isEmpty(f)){var g=this.$activity.find(".interactiveText[data-rcfinteraction=interactiveText][data-rcfid='"+f+"']");if(!RCF.Utils.isEmpty(g))for(var h in e.value){var i=e.value[h];if(!RCF.Utils.isEmpty(i.verification)){var j=g.find("[data-rcfid='"+i.elm+"']");if(!RCF.Utils.isEmpty(j)){var k="1"==i.verification[0]?"correct":"wrong";j.find(".mark").addClass(k)}}}}}},showUserAnswers:function(){var b=this;b._hidePopups(),b.$interactiveTextElements.each(function(){var c=a(this),d=c.data("categories");c.find(".eSpan.selectableCat:not(.example)").each(function(){var c=a(this),e=c.data("user-answer")||"",f=d[e]?d[e].title:"";b._populateAnswer(e,f,c)})})},isComplete:function(){var b=!0;return this.$interactiveTextElements.each(function(){var c=a(this),d=c.find(".eSpan.selectableCat:not(.example)"),e=d.filter(".answered");e.length<d.not(".distractor").length&&(b=!1)}),b},getUserAnswers:function(){return this.$interactiveTextElements.map(function(){var b=a(this);return{elm:b.attr("data-rcfid"),type:"composite",value:b.find(".eSpan.selectableCat.answered:not(.example, .selecting)").map(function(){var b=a(this),c=b.data("chosen-answer"),d={elm:b.attr("data-rcfid"),type:"simple",value:c||""};return b.hasClass("distractor")&&(d.isDistractor=!0),d}).get()}}).get()},clearMarkedAnswers:function(){this.$selector.find(".mark").removeClass("correct wrong")},reset:function(){this.$interactiveTextElements.each(function(){var b=a(this),c=(b.data("categories")||{categoryClassString:""}).categoryClassString;b.find(".eSpan.selectableCat:not(.example)").removeClass("answered selecting "+c).removeData("user-answer").removeData("chosen-answer").find(".answer").text("").hide()})}},c}()}(jQuery,window)}}}),$__System.register("1b0",["128","129","161","1d","1ae"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_categorise_selectable")}return c(d,a),d}(d),a("default",f)}}}),$__System.register("1b1",[],function(a){"use strict";function b(a){var b=a.prop("checked");return b=!b,a.prop("checked",b),!1}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1b2",["3","141","1b3","1b4","13a"],function(a){"use strict";function b(a,b,i){var j=b.elm;if(j===a.attr("data-rcfid")&&(0==i||!c(i))){var k=b.value[i],l=e(a,k),m=g(l);d(l,m),h(l),f(a)}}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.storeUserAnswer},function(a){e=a.default},function(a){f=a.default},function(a){g=a.isCheckboxChecked,h=a.checkCheckboxes}],execute:function(){}}}),$__System.register("1b5",["1b4","1b1","1b2"],function(a){"use strict";function b(a,b){b.on("change",".example",function(a){a.preventDefault(),a.stopImmediatePropagation(),d($(a.currentTarget))}),b.on("change",function(a){var b=$(a.currentTarget);c(b)}),a.on("rcf.single.answer","*[data-rcfinteraction=checkboxList]:not(.example)",function(a,b,c){var d=$(a.currentTarget);e(d,b,c)})}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1b6",[],function(a){"use strict";function b(a){return a.find("*[data-rcfinteraction=checkboxList]")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1b7",["3","1b5","1b6"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty activity passed to CheckboxList constructor";a.$activity=b,a.$selector=e(b),c(a.$selector)||d(a.$activity,a.$selector)}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1b8",["141","13a"],function(a){"use strict";function b(a){var b=d(a);f(b),b=e(b),c(b,!0)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.storeUserAnswer},function(a){d=a.getActiveCheckboxesFromInteractionElement,e=a.filterCheckedCheckboxes,f=a.clearStoredAnswers}],execute:function(){}}}),$__System.register("1b9",["d"],function(a){"use strict";function b(a){if(!c.isArray(a)){var b=a;a=[],a.push(b)}return a}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("1ba",["1b3","13a"],function(a){"use strict";function b(a,b,f){var g=c(a,b);f?d(g):e(g)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.checkCheckboxes,e=a.uncheckCheckboxes}],execute:function(){}}}),$__System.register("1bb",["3","1bc","1b4","1b8","1b9","1bd","1ba","13a"],function(a){"use strict";function b(a,b,k){var l=b.elm,m=b.value,n=b.type;if(!c.isEmpty(l)&&"list"===n){var o=h(a,l);if(!c.isEmpty(o)){f(o);var p=d(o),q=j.getActiveCheckboxesFromInteractionElement(o),r=c.getMarkTypeFromElement(o);("item"===r||"list"===r&&!k||"list"===r&&k&&"0"==b.verification[0])&&j.uncheckCheckboxes(q),m=g(m);for(var s in m){var t=j.getAnswerToUseFromJsonValues(b,s,r,k),u=m[s];i(o,u,t)}p>0&&e(o)}}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a}],execute:function(){}}}),$__System.register("1be",["1bb"],function(a){"use strict";function b(a,b,d){for(var e in b.answers)c(a,b.answers[e],d)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("1b4",["1bc","13a"],function(a){"use strict";function b(a){var b=c(a);if(!(b<1)){var i=d(a);g(i);var j=e(i).length;j>=b?h(f(i)):g(i)}}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.getActiveCheckboxesFromInteractionElement,e=a.filterCheckedCheckboxes,f=a.filterUncheckedCheckboxes,g=a.enableCheckboxes,h=a.disableCheckboxes}],execute:function(){}}}),$__System.register("1bf",["141","13a"],function(a){"use strict";function b(a){e(a),c(a)&&d(a)}var c,d,e;return a("default",b),{setters:[function(a){c=a.getUserAnswer},function(a){d=a.checkCheckboxes,e=a.uncheckCheckboxes}],execute:function(){}}}),$__System.register("1c0",["1b4","1bf","13a"],function(a){"use strict";function b(a,b){var f=e(a);f.each(function(a,b){return d($(b))}),b.each(function(a,b){c($(b))})}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.getActiveCheckboxesFromInteractionElement}],execute:function(){}}}),$__System.register("1bd",[],function(a){"use strict";function b(a,b){return a.filter('[data-rcfid="'+b+'"]')}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1b3",[],function(a){"use strict";function b(a,b){return a.find('.checkbox[data-rcfid="'+b+'"]')}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1c1",["3","143","1bd","1b3"],function(a){"use strict";function b(a,b){d(a);for(var g in b.answers){var h=b.answers[g],i=h.elm;if(!c.isEmpty(i)&&!c.isEmpty(h.verification)){var j=e(a,i);if(!c.isEmpty(j)){var k=c.getMarkTypeFromElement(j),l="";if("item"===k)for(var m in h.value){var n=f(j,h.value[m]);l="1"==h.verification[m]?"correct":"wrong",n.closest(".markable").find(".mark").addClass(l)}else"list"===k&&(l="1"==h.verification[0]?"correct":"wrong",j.find(".mark").addClass(l))}}}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("1c2",["3","d","1c3"],function(a){"use strict";function b(a){var b=e(a);return b.map(function(a,b){var e=d(b),f={elm:c(e)||"",type:"list",value:e.find("input:checkbox:checked:not(.example)").map(function(a,b){return c(d(b))}).get()};return f}).get()}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1bc",[],function(a){"use strict";function b(a){return parseInt(a.attr("data-rcfrestrict"),10)||0}return a("default",b),{setters:[],execute:function(){}}});$__System.register("1c4",[],function(a){"use strict";function b(a){return a.find("input:checkbox")}return a("default",b),{setters:[],execute:function(){}}});$__System.register("1c5",["1c3","1bc","1c4"],function(a){"use strict";function b(a){var b=a,f=!0;return b=c(b),b.each(function(a,b){var c=$(b),g=d(c),h=e(c).filter(":checked:not(.example)");g>0?h.length!==g&&(f=!1):h.length<1&&(f=!1)}),f}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1c3",[],function(a){"use strict";function b(a){return a.filter(":not(.example)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1c6",[],function(a){"use strict";function b(a){return a.data("user-answer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1c7",[],function(a){"use strict";function b(a){a.attr("disabled","disabled")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1c8",[],function(a){"use strict";function b(a){return a.find("input[type=checkbox].example")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1c9",["1c8","1ca"],function(a){"use strict";function b(a){d(c(a))}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("1cb",[],function(a){"use strict";function b(a){a.removeAttr("disabled")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1ca",[],function(a){"use strict";function b(a){a.prop("checked",!0)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("153",["d","1cc","1ca","1cd"],function(a){"use strict";function b(a){var b=c(a.currentTarget);return a.preventDefault(),d(b)?f(b):e(b),!1}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("1cc",[],function(a){"use strict";function b(a){return a.prop("checked")===!0}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1ce",["141","1cc"],function(a){"use strict";function b(a){var b=d(a),e=b?a.val():null;c(a,e)}var c,d;return a("default",b),{setters:[function(a){c=a.storeUserAnswer},function(a){d=a.default}],execute:function(){}}}),$__System.register("1cf",[],function(a){"use strict";function b(a){return a.filter(":checked")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1d0",["141","1d1","1ce","1cd","1cf"],function(a){"use strict";function b(a){a.each(function(a,b){var h=$(b),i=d(h);c(i),g(i).each(function(a,b){var c=$(b);e(c),f(c)})})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.clearUserAnswer},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("1d2",[],function(a){"use strict";function b(a){return a.filter(":not(:checked)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1cd",[],function(a){"use strict";function b(a){a.prop("checked",!1)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1d1",[],function(a){"use strict";function b(a){return a.find("input[type=checkbox]:not(.example)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("13a",["153","1ca","1c8","1d3","1c6","1c7","1c9","1cb","1cc","1cf","1ce","1d0","1d2","1cd","1d1","1d4"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default}],execute:function(){a("checkCheckboxes",c),a("getExampleCheckboxes",d),a("clearStoredAnswers",e),a("getUserAnswerFromCheckbox",f),a("disableCheckboxes",g),a("initialiseExampleCheckboxes",h),a("enableCheckboxes",i),a("isCheckboxChecked",j),a("exampleCheckboxClickHandler",b),a("filterCheckedCheckboxes",k),a("storeCurrentAnswer",l),a("storeCurrentAnswers",m),a("filterUncheckedCheckboxes",n),a("uncheckCheckboxes",o),a("getActiveCheckboxesFromInteractionElement",p),a("getAnswerToUseFromJsonValues",q)}}}),$__System.register("1d5",["141","1c3","13a"],function(a){"use strict";function b(a){var b=a.find("input:checkbox"),g=d(b);f(g),e(g),c(g)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.clearUserAnswer},function(a){d=a.default},function(a){e=a.enableCheckboxes,f=a.uncheckCheckboxes}],execute:function(){}}}),$__System.register("1d6",["143","1c","1d","1b7","1be","1c0","1c1","1c2","1c5","1d5"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){d(this,a),e(this,b)}return c(a,[{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"showAnswers",value:function(a,b){f(this.$selector,a,b)}},{key:"isComplete",value:function(){return j(this.$selector)}},{key:"getUserAnswers",value:function(){return i(this.$selector)}},{key:"showMarkedAnswers",value:function(a){h(this.$selector,a)}},{key:"showUserAnswers",value:function(){g(this.$activity,this.$selector)}},{key:"reset",value:function(){k(this.$selector)}}]),a}(),a("default",l)}}}),$__System.register("1d7",["3","1d8","1d9"],function(a){"use strict";function b(a,b,f){var g=b.elm;if(g===a.attr("data-rcfid")&&(0==f||!c(f))){var h=b.value[f],i=d(a,h);i.data("user-answer",i.hasClass("selected")?"Y":"").addClass("selected"),e(a)}}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1da",["13"],function(a){"use strict";function b(a){var b=c(a,"data-markType")||"item";return b}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("1db",["141","1d9","1da"],function(a){"use strict";function b(a){var b=a.closest(".checkboxItemSelect"),f=e(b),g=a.attr("data-rcfid"),h=b.attr("data-rcfid"),i=b.closest(".activity").attr("id");a.toggleClass("selected");var j=a.hasClass("selected");if(c(b,j?"Y":"N"),d(b),!j)return void a.find(".mark").removeClass("correct wrong");if(RCF.options.feedbackOptions&&"list"!==f){if(!RCF.options.feedbackOptions.onAnswerChanged)return void console.log('Feedback specified but no "onAnswerChanged" method provided');RCF.options.feedbackOptions.onAnswerChanged({id:i,answers:[{elm:h,type:"simple",value:g}]})}}var c,d,e;return a("default",b),{setters:[function(a){c=a.storeUserAnswer},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1dc",["3","176","1d7","1db"],function(a){"use strict";function b(a,b){b.on("click",".selectable.checkbox:not(.example, .disabled) .inlinePlayerContainer[data-audiolink]",function(a){d($(a.currentTarget)),c(a)}),b.on("click",".selectable.checkbox:not(.example, .disabled)",function(a){f($(a.currentTarget))}),a.on("rcf.single.answer","*[data-rcfinteraction=checkboxItemSelect]:not(.example)",function(a,b,c){var d=$(a.currentTarget);e(d,b,c)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.preventEventBubble},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("1dd",[],function(a){"use strict";function b(a){return a.find("*[data-rcfinteraction=checkboxItemSelect]");
}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1de",["3","1dc","1dd"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty activity passed to CheckboxListItemSelect constructor";a.$activity=b,a.$selector=e(b),c(a.$selector)||d(a.$activity,a.$selector)}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1df",["141","1e0","1e1"],function(a){"use strict";function b(a){var b=e(a);b=f(b),c(b);var g=b.filter(".selected");d(g,"Y")}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.clearUserAnswer,d=a.storeUserAnswer},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("1e2",["1d8"],function(a){"use strict";function b(a,b,d){var e=c(a,b);e.toggleClass("selected",d)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("1d4",[],function(a){"use strict";function b(a,b,c,d){return!("item"!==c||!d||!a.verification||"1"!=a.verification[b])||!("list"!==c||!d||!a.verification||"1"!=a.verification[0])||"item"===c&&!d||"list"===c&&!d}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1e3",["3","1e4","1e0","1d9","1df","1e5","1e2","1e6","1e7","1e1","1d4"],function(a){"use strict";function b(a,b,n){var o=b.elm,p=b.value,q=b.type;if(!c.isEmpty(o)&&"list"===q){var r=h(a,o);if(!c.isEmpty(r)){var s=e(r),t=d(r);g(r),s=l(s),k(s);var u=c.getMarkTypeFromElement(r);("item"===u||"list"===u&&!n||"list"===u&&n&&"0"==b.verification[0])&&j(s);for(var v in p){var w=m(b,v,u,n),x=p[v];i(r,x,w)}t>0&&f(r)}}}var c,d,e,f,g,h,i,j,k,l,m;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default}],execute:function(){}}}),$__System.register("1e8",["1e3"],function(a){"use strict";function b(a,b,d){for(var e in b.answers)c(a,b.answers[e],d)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("1e9",["141","1d9"],function(a){"use strict";function b(a,b){var e=a.find(".checkbox.selectable:not(.example)");e.each(function(a,b){var d=$(b);d.removeClass("selected disabled"),d.toggleClass("selected","Y"===c(d)||!1)}),b.each(function(a,b){d($(b))})}var c,d;return a("default",b),{setters:[function(a){c=a.getUserAnswer},function(a){d=a.default}],execute:function(){}}}),$__System.register("1ea",["3","143","1e5","1d8"],function(a){"use strict";function b(a,b){d(a);for(var g in b.answers){var h=b.answers[g],i=h.elm;if(!c.isEmpty(i)&&!c.isEmpty(h.verification)){var j=e(a,i);if(!c.isEmpty(j)){var k=c.getMarkTypeFromElement(j),l="";if("item"===k)for(var m in h.value){var n=f(j,h.value[m]);l="1"==h.verification[m]?"correct":"wrong",n.closest(".markable").find(".mark").addClass(l)}else"list"===k&&(l="1"==h.verification[0]?"correct":"wrong",j.find(".mark").addClass(l))}}}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("1eb",["3","d","1e1"],function(a){"use strict";function b(a){var b=e(a);return b.map(function(a,b){var e=d(b),f={elm:c(e)||"",type:"list",value:e.find(".checkbox.selectable.selected:not(.example)").map(function(a,b){return c(d(b))||""}).get()};return f}).get()}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1ec",["1e1","1e4","1e0"],function(a){"use strict";function b(a){var b=a,f=!0;return b=c(b),b.each(function(a,b){var c=$(b),g=d(c),h=e(c).filter(".selected:not(.example)");g>0?h.length!==g&&(f=!1):h.length<1&&(f=!1)}),f}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("1e5",[],function(a){"use strict";function b(a,b){return a.filter('[data-rcfid="'+b+'"]')}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1d8",[],function(a){"use strict";function b(a,b){return a.find('.checkbox.selectable[data-rcfid="'+b+'"]:not(.example)')}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1e4",[],function(a){"use strict";function b(a){return parseInt(a.attr("data-rcfrestrict"),10)||0}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1e0",[],function(a){"use strict";function b(a){return a.find(".selectable.checkbox")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1ed",[],function(a){"use strict";function b(a){a.not(".selected").addClass("disabled")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1d9",["1e4","1e0","1e1","1ed","1e7"],function(a){"use strict";function b(a){var b=c(a);if(!(b<1)){var h,i=d(a);i=e(i),h=i.filter(".selected"),h.length>=b?(g(h),f(i)):g(i)}}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("1ee",["3","1e5","1d8","1d9"],function(a){"use strict";function b(a,b){function g(a,b){b.removeClass("selected").find(".mark").removeClass("correct wrong"),f(a)}var h=b.answers[0].elm,i=d(a,h);if(!c(i)){var j=b.answers[0].value,k=e(i,j),l="1"==b.answers[0].verification[0];c(k)||RCF.Handlers.FeedbackHandler.provideFeedback(i,k,l,g)}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("1e1",[],function(a){"use strict";function b(a){return a.filter(":not(.example)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1e7",[],function(a){"use strict";function b(a){a.removeClass("disabled")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1e6",[],function(a){"use strict";function b(a){a.removeClass("selected")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1ef",["141","1e1","1e7","1e6"],function(a){"use strict";function b(a){var b=a.find(".selectable.checkbox"),g=d(b);f(g),e(g),c(g)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.clearUserAnswer},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("1f0",["143","1c","1d","1de","1e8","1e9","1ea","1eb","1ec","1ee","1ef"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){"use strict";m=function(){function a(b){d(this,a),e(this,b)}return c(a,[{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"showAnswers",value:function(a,b){f(this.$selector,a,b)}},{key:"isComplete",value:function(){return j(this.$selector)}},{key:"getUserAnswers",value:function(){return i(this.$selector)}},{key:"showMarkedAnswers",value:function(a){h(this.$selector,a)}},{key:"showUserAnswers",value:function(){g(this.$activity,this.$selector)}},{key:"provideFeedback",value:function(a){k(this.$selector,a)}},{key:"reset",value:function(){l(this.$selector)}}]),a}(),a("default",m)}}}),$__System.register("1f1",["3"],function(a){"use strict";function b(a,b){var d=a.$colouringScene.find(".colourPaletteItem.selected"),e=$(b.currentTarget),f=e.attr("data-rcf-colour-id");if(a.game.stopAudio(),c(d)||!e.hasClass("current")||f!==d.attr("data-rcf-colour-id"))return void a.game.playAudio({audio:[a.game.audio.incorrectAudio,a.$currentTargetItem.attr("data-audio-clue")]});a.items.setItemCorrect(e);var g=a.$currentTargetItem.next();return 0===g.length?void a.game.gameOver():(a.items.setCurrentTargetItem(g),void a.game.playAudio({audio:[a.game.audio.correctAudio,a.$currentTargetItem.attr("data-audio-clue")]}))}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("1f2",["1f1"],function(a){"use strict";function b(a){a.$activity.on("click",a.selector+".playing .playClueButton",function(){var b=a.$currentTargetItem.attr("data-audio-clue");b&&a.game.playAudio(b)}),a.$activity.on("click",a.selector+".playing .colourPaletteItem:not(.current)",function(){a.game.playAudio({audio:[a.game.audio.incorrectAudio,a.$currentTargetItem.attr("data-audio-clue")]})}),a.$activity.on("click",a.selector+".playing .colourPaletteItem.current",function(b){$(b.currentTarget).addClass("selected"),a.$colouringScene.addClass($(b.currentTarget).attr("data-rcf-class"))}),a.$activity.on("click",a.selector+".playing .colourItem",function(b){c(a,b)}),a.$colouringScene.on("click",".startGameButton",function(){a.game.playing()})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("1f3",[],function(a){"use strict";function b(a){return a.$activity.find(a.selector)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1f4",["3","13","1c","1d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getDataAttribute},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){e(this,a),this.gameStates={START_SCREEN:0,PLAYING:1,GAME_OVER:2},this.audio=this.initAudio(b),this.interaction=b,this.$activity=b.$activity}return d(a,[{key:"setGameState",value:function(a){switch(this.currentState=a,this.currentState){case this.gameStates.START_SCREEN:this.playAudio(this.audio.gameStartAudio);break;case this.gameStates.PLAYING:this.interaction.items.initialise(),this.interaction.items.setCurrentTargetItem(this.interaction.$colourTargetItems.first()),this.interaction.$colouringScene.addClass("playing");var d=c(this.interaction.$currentTargetItem,"data-audio-clue");b(d)||this.playAudio(d);break;case this.gameStates.GAME_OVER:this.playAudio({audio:[this.audio.correctAudio,this.audio.gameOverAudio]}),this.interaction.resetScene(),this.interaction.$colourTargetItems.removeClass("current selected")}}},{key:"initAudio",value:function(a){return{gameStartAudio:c(a.$colouringScene,"data-audio-gamestart"),gameOverAudio:c(a.$colouringScene,"data-audio-gameover"),correctAudio:c(a.$colouringScene,"data-audio-correct"),incorrectAudio:c(a.$colouringScene,"data-audio-incorrect")}}},{key:"start",value:function(){this.setGameState(this.gameStates.START_SCREEN)}},{key:"playing",value:function(){this.setGameState(this.gameStates.PLAYING)}},{key:"gameOver",value:function(){this.setGameState(this.gameStates.GAME_OVER)}},{key:"playAudio",value:function(a){this.stopAudio(),this.$activity.trigger("rcf.play.audio",[a])}},{key:"stopAudio",value:function(){this.$activity.trigger("rcf.stop.audio")}}]),a}(),a("default",f)}}}),$__System.register("1f5",["3","13","1c","1d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getDataAttribute},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(){function a(b){e(this,a),this.interaction=b}return d(a,[{key:"initialise",value:function(){this.interaction.$colouringScene.removeClass("complete gameOver"),this.interaction.$colouringScene.find('*[data-addedrank="y"]').removeAttr("data-addedrank").removeAttr("data-sortindex").removeAttr("data-rank");var a=this.interaction.$colouringScene,b=a.find(".colourItemsContainer");b.mmRandomize(".colourItem",(new Date).getTime().toString());var c=a.find(".colourItem"),d=c;d.tsort("",{attr:"data-sortindex",order:"asc"}),this.interaction.$colourTargetItems=c,this.interaction.$paletteItems=a.find(".coloursContainer .colourPaletteItem").removeClass("selected current"),a.removeClass(this.interaction.$paletteItems.map(function(a,b){return $(b).attr("data-rcf-class")}).get().join(" ")),this.interaction.$colourTargetItems.find("img[old-src]").each(function(a,b){var c=$(b);c.attr("src",c.attr("old-src")).removeAttr("old-src")})}},{key:"setItemCorrect",value:function(a){var b=a.attr("data-correctimage"),d=a.find("img"),e=this.interaction.$currentTargetItem?this.interaction.$currentTargetItem:$(""),f=c(e,"data-rcf-class"),g=f?f:"";this.interaction.$colouringScene.removeClass(g),a.addClass("correct").removeClass("current"),d.attr("old-src",d.attr("src")).attr("src",b)}},{key:"setCurrentTargetItem",value:function(a){this.interaction.$colourTargetItems.removeClass("current selected"),this.interaction.$paletteItems.removeClass("current selected"),this.interaction.$currentTargetItem=$(),b(a)||(this.interaction.$currentTargetItem=a,this.interaction.$currentTargetItem.addClass("current"),this.interaction.$currentPaletteItem=this.interaction.$paletteItems.filter("[data-rcf-colour-id='"+this.interaction.$currentTargetItem.attr("data-rcf-colour-id")+"']"),this.interaction.$currentPaletteItem.addClass("current"))}}]),a}(),a("default",f)}}}),$__System.register("1f6",["3","1f2","1f3","1f4","1f5"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty activity passed to Colouring constructor";if(a.selector='*[data-rcfinteraction="colouring"]',a.$activity=b,a.$selector=e(a),a.$colouringScene=a.$selector.jquery?a.$selector.first():$(""),c(a.$colouringScene))throw"No colouring scene in activity !";a.game=new f(a),a.items=new g(a),d(a),a.resetScene(),a.game.start()}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("1f7",[],function(a){"use strict";function b(a){a.resetScene(),a.game.start(),a.items.initialise()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1f8",[],function(a){"use strict";function b(a){a.$colouringScene.removeClass("complete").removeClass("playing").removeClass("complete gameOver")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1f9",["1c","1d","1f6","1f7","1f8"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";g=function(){function a(b){c(this,a);var e=this;d(e,b)}return b(a,[{key:"resetScene",value:function(){var a=this;f(a)}},{key:"reset",value:function(){var a=this;e(a)}}]),a}(),a("default",g)}}}),$__System.register("1fa",["128","129","1d","1fb"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(a){function e(a){d(this,e),b(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,a,"complexOrdering")}return c(e,a),e}(e),a("default",f)}}}),$__System.register("1fc",["3","1fd"],function(a){"use strict";function b(a,b){a.on("click","[data-rcfinteraction='compositeScene']:not(.complete) .playClueButton",function(){var f=d(b),g=e(f);a.trigger("rcf.stop.audio"),c(g)||a.trigger("rcf.play.audio",[g])})}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getCurrentSceneItem,e=a.getAudioClueFromSceneItem}],execute:function(){}}}),$__System.register("1fe",["3","1fd","1ff"],function(a){"use strict";function b(a,b,i){a.on("click","[data-rcfinteraction='compositeScene']:not(.complete) .sceneItem.current",function(){var j=$(this),k=d(j),l="";e(j,!1),f(j),j=j.next(),a.trigger("rcf.stop.audio"),c(j)?(l=i,h(b)):(e(j),l=g(j)),a.trigger("rcf.play.audio",{audio:[k,l]})})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getCorrectAudioFromSceneItem,e=a.setSceneItemCurrent,f=a.setSceneItemCorrect,g=a.getAudioClueFromSceneItem},function(a){h=a.setCompositeSceneComplete}],execute:function(){}}}),$__System.register("200",["3","1fd"],function(a){"use strict";function b(a,b,f){a.on("click","[data-rcfinteraction='compositeScene']:not(.complete) .sceneItem:not(.current)",function(){var g=d(b);if(a.trigger("rcf.stop.audio"),!c(g)){var h=e(g);a.trigger("rcf.play.audio",{audio:[f,h]})}})}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getCurrentSceneItem,e=a.getAudioClueFromSceneItem}],execute:function(){}}}),$__System.register("201",["202","1fd","1ff"],function(a){"use strict";function b(a,b){b.on("click",".startGameButton",function(){c(b),f(b),g(b);var h=d(b),i=e(h);a.trigger("rcf.stop.audio"),a.trigger("rcf.play.audio",[i])})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.getCurrentSceneItem,e=a.getAudioClueFromSceneItem},function(a){f=a.resetCompositeSceneStatus,g=a.setCompositeScenePlayingStatus}],execute:function(){}}}),$__System.register("203",["200","201","1fc","1fe"],function(a){"use strict";function b(a){var b=a.$activity,g=a.$compositeScene,h=a.gameOverAudio,i=a.incorrectAudio;e(b,g),f(b,g,h),c(b,g,i),d(b,g)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("204",["3","203","205","1ff"],function(a){function b(a,b){if(c(b))throw"No activity passed to composite scene interaction";var k=f(b);if(c(k))throw"No composite scene is passed $activity";var l=g(k),m=h(k),n=i(k),o=j(k);e(a,{$activity:b,$compositeScene:k,gameStartAudio:l,gameOverAudio:m,incorrectAudio:n,$startGameButton:o}),d(a)}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.getCompositeSceneFromActivity,g=a.getGameStartAudioFromCompositeScene,h=a.getGameOverAudioFromCompositeScene,i=a.getIncorrectAudioFromCompositeScene,j=a.getStartButtonFromCompositeScene}],execute:function(){"use strict";a("default",b)}}}),$__System.register("206",["1ff"],function(a){"use strict";function b(a){return c(a)}var c;return a("default",b),{setters:[function(a){c=a.isCompositeSceneComplete}],execute:function(){}}}),$__System.register("207",[],function(a){"use strict";function b(a,b){a.trigger("rcf.stop.audio"),a.off("click",'[data-rcfinteraction="compositeScene"]:not(.complete) .playClueButton'),a.off("click","[data-rcfinteraction='compositeScene']:not(.complete) .sceneItem.current"),a.off("click","[data-rcfinteraction='compositeScene']:not(.complete) .sceneItem:not(.current)"),b.off("click",".startGameButton")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1ff",["13"],function(a){"use strict";function b(a){return a.find("*[data-rcfinteraction='compositeScene']")}function c(a){return m(a,"data-audio-gamestart")||""}function d(a){return m(a,"data-audio-gameover")||""}function e(a){return m(a,"data-audio-incorrect")||""}function f(a){return a.find(".startGameButton")}function g(a){return a.hasClass("complete")}function h(a){a.removeClass("complete playing")}function i(a){a.addClass("playing")}function j(a){a.removeClass("playing"),a.addClass("complete")}function k(a){return a.find('.sceneItem[data-addedrank="y"]')}function l(a){a.find(".sceneItems").mmRandomize(".sceneItem",(new Date).getTime());var b=a.find(".sceneItem");return b.tsort("",{attr:"data-sortindex",order:"asc"})}var m;return{setters:[function(a){m=a.getDataAttribute}],execute:function(){a("getCompositeSceneFromActivity",b),a("getGameStartAudioFromCompositeScene",c),a("getGameOverAudioFromCompositeScene",d),a("getIncorrectAudioFromCompositeScene",e),a("getStartButtonFromCompositeScene",f),a("isCompositeSceneComplete",g),a("resetCompositeSceneStatus",h),a("setCompositeScenePlayingStatus",i),a("getRankedSceneItemsFromCompositeScene",k),a("getRandomizedSceneItems",l),a("setCompositeSceneComplete",j)}}}),$__System.register("1fd",["13"],function(a){"use strict";function b(a){return a.find(".sceneItem.current")}function c(a){return i(a,"data-audio-clue")||""}function d(a){return i(a,"data-audio-correct")||""}function e(a){a.removeClass("correct current")}function f(a){a.addClass("correct")}function g(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];a.toggleClass("current",b)}function h(a){["data-addedrank","data-sortindex","data-rank"].forEach(function(b){j(a,b)})}var i,j;return{setters:[function(a){i=a.getDataAttribute,j=a.removeDataAttributes}],execute:function(){a("getCurrentSceneItem",b),a("getAudioClueFromSceneItem",c),a("getCorrectAudioFromSceneItem",d),a("setSceneItemCorrect",f),a("setSceneItemCurrent",g),a("resetRankedAttributes",h),a("resetSceneItemClasses",e)}}}),$__System.register("202",["3","1ff","1fd"],function(a){"use strict";function b(a){var b=d(a);c(b)||f(b);var i=e(a);g(i);var j=i.first();h(j)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getRankedSceneItemsFromCompositeScene,e=a.getRandomizedSceneItems},function(a){f=a.resetRankedAttributes,g=a.resetSceneItemClasses,h=a.setSceneItemCurrent}],execute:function(){}}}),$__System.register("208",["202","1ff"],function(a){"use strict";function b(a){var b=a.$compositeScene,e=a.$activity,f=a.gameStartAudio;d(b),c(b),e.trigger("rcf.play.audio",[f])}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.resetCompositeSceneStatus}],execute:function(){}}}),$__System.register("209",["208"],function(a){"use strict";function b(a){c(a)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("20a",["204","206","207","208","209","1c","1d"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){"use strict";i=function(){function a(c){h(this,a);var d=this;b(d,c),e(d)}return g(a,[{key:"isComplete",value:function(){return c(this.$compositeScene)}},{key:"close",value:function(){d(this.$activity,this.$compositeScene)}},{key:"reset",value:function(){var a=this;f(a)}}]),a}(),a("default",i)}}}),$__System.registerDynamic("20b",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.CROSSWORD]=function(){function c(a){this._initialize(a)}function d(a){this.character=a,this.across=null,this.down=null}function e(a,b){this.startOfWord=a,this.index=b.index,this.wordID=b.id,this.isExample=b.isExample,this.wordElement=b}function f(a,b,c,d,e){this.word=a.toUpperCase(),this.id=b,this.index=c,this.isExample=d,this.isExampleFirstLetter=e}function g(a){var c,g=50,h=50,i={};this.getSquareGrid=function(a){for(var b=null,c=0,d=null,e=0,f=0;f<a&&(d=this.getGrid(1),null===d||(e=1*Math.min(d.length,d[0].length)/Math.max(d.length,d[0].length),e>c&&(b=d,c=e),1!==c));f++);return b},this.getGrid=function(a){for(var b=[],d=!1,e=0,f=0,g=0,h=null,i=0;i<a;i++){if(q(),e=o(),f=Math.floor(r.length/2),g=Math.floor(r[0].length/2),h=t[0],"across"==e?g-=Math.floor(h.word.length/2):f-=Math.floor(h.word.length/2),n(h.word,f,g,e)===!1)return c=[h],null;l(h,f,g,e),b.push(t.slice(1));for(var k=0;k<b.length;k++){d=!1;for(var m=0;m<b[k].length;m++){var s=b[k][m],u=p(s.word);if(u){var v=u.row,w=u.col,x=u.direction;l(s,v,w,x),d=!0}else b.length-1==k&&b.push([]),b[k+1].push(s)}if(!d)break}if(d)return j()}return c=b[b.length-1],null},this.getBadWords=function(){return c},this.getLegend=function(b){for(var c={across:[],down:[]},d=!1,e=1,f=0;f<b.length;f++)for(var g=0;g<b[f].length;g++){var h=b[f][g];d=!1;for(var i in c)if(h&&h[i]&&h[i].startOfWord){var j=h[i].index;c[i].push({position:e,index:j,clue:a[j].clue,word:a[j].word,isExample:a[j].isExample,wordID:a[j].id}),d=!0}d&&e++}return c},this.getHTML=function(a){this.deviceMode=RCF.Utils.cookie("deviceMode"),RCF.Utils.isEmpty(this.deviceMode)&&(this.deviceMode="desktop");var c="desktop"!=this.deviceMode;if(null==a)return b.console&&console.log("No grid supplied to 'getHTML'"),"<table class='crossword'><tr><td>No grid supplied</td></tr></table>";var d=[],e=1,f="",g=!1,h=null,i="",j="";d.push("<table class='crossword'>");for(var k=0;k<a.length;k++){d.push("<tr data-row='"+k+"'>");for(var l=0;l<a[k].length;l++){if(h=a[k][l],g=!1,f=h?"word":"no-border",g=!!h&&(h.across&&h.across.startOfWord||h.down&&h.down.startOfWord),j=!!h&&(h.across&&"y"==h.across.isExample||h.down&&"y"==h.down.isExample),j=j||g&&(h.across&&h.across.startOfWord&&h.across.wordElement.isExampleFirstLetter||h.down&&h.down.startOfWord&&h.down.wordElement.isExampleFirstLetter),d.push("<td data-col='"+l+"' class='"+f+(g?" word"+e:"")+(j?" example ":"")+"' >"),"word"==f){i="",i=h.across&&h.down?"none":h.across?"horizontal":"vertical",g&&d.push("<span class='relSpan'><span class='clueNumber'>"+e+"</span></span>"),d.push("<input class='cwWord "+(j?" example ":"")+(g?"wordStart word"+e:"")+"' type='text' colid='"+l+"' data-direction='"+i+"' ");var m="",n="";h&&h.across&&(m+="|"+h.across.index+"|",n+="|"+h.across.wordID+"|"),h&&h.down&&(m+="|"+h.down.index+"|",n+="|"+h.down.wordID+"|"),j&&d.push(" READONLY value='"+h.character+"' "),d.push(" data-letter='"+h.character+"' "),d.push(" data-wordindex='"+m+"' data-wordid='"+n+"' "+(c?" READONLY ":"")+">")}else d.push("&nbsp;");g&&e++}d.push("</td>")}return d.push("</table>"),d.join("\n")};var j=function(){var a=g-1,b=0,c=h-1,d=0,e=0,f=0,i=0,j=0,k=null;for(i=0;i<g;i++)for(j=0;j<h;j++)k=r[i][j],null!=k&&(i<a&&(a=i),i>b&&(b=i),j<c&&(c=j),j>d&&(d=j));var l=b-a+1,m=d-c+1,n=new Array(l);for(i=0;i<l;i++)for(j=0;j<m;j++)n[i]=new Array(m);for(i=a,e=0;e<l;i++,e++)for(j=c,f=0;f<m;j++,f++)n[e][f]=r[i][j];return n},k=function(a,b,c,f,g){var h=a.word.charAt(b);null==r[c][f]&&(r[c][f]=new d(h),i[h]||(i[h]=[]),i[h].push({row:c,col:f}));var j=0===b;r[c][f][g]=new e(j,a)},l=function(a,b,c,d){var e=0,f=0,g=0;if("across"==d)for(e=c,f=0;e<c+a.word.length;e++,f++)k(a,f,b,e,d);else{if("down"!=d)throw"Invalid Direction";for(g=b,f=0;g<b+a.word.length;g++,f++)k(a,f,g,c,d)}},m=function(a,b,c){return null==r[b][c]?0:r[b][c].character==a&&1},n=function(a,b,c,d){var e=0,f=0,g=!1,h=!1,i=!1,j=!1,k=0;if(b<0||b>=r.length||c<0||c>=r[b].length)return!1;if("across"==d){if(c+a.length>r[b].length)return!1;if(c-1>=0&&null!=r[b][c-1])return!1;if(c+a.length<r[b].length&&null!=r[b][c+a.length])return!1;for(e=b-1,f=c,s=0;e>=0&&f<c+a.length;f++,s++)if(h=null==r[e][f],i=null!=r[b][f]&&r[b][f].character==a.charAt(s),j=h||i,!j)return!1;for(e=b+1,f=c,s=0;e<r.length&&f<c+a.length;f++,s++)if(h=null==r[e][f],i=null!=r[b][f]&&r[b][f].character==a.charAt(s),j=h||i,!j)return!1;for(k=0,f=c,s=0;f<c+a.length;f++,s++){if(g=m(a.charAt(s),b,f),g===!1)return!1;k+=g}}else{if("down"!=d)throw"Invalid Direction";if(b+a.length>r.length)return!1;if(b-1>=0&&null!=r[b-1][c])return!1;if(b+a.length<r.length&&null!=r[b+a.length][c])return!1;for(f=c-1,e=b,s=0;f>=0&&e<b+a.length;e++,s++)if(h=null==r[e][f],i=null!=r[e][c]&&r[e][c].character==a.charAt(s),j=h||i,!j)return!1;for(f=c+1,e=b,s=0;e<b+a.length&&f<r[e].length;e++,s++)if(h=null==r[e][f],i=null!=r[e][c]&&r[e][c].character==a.charAt(s),j=h||i,!j)return!1;for(k=0,e=b,s=0;e<b+a.length;e++,s++){if(g=m(a.charAt(s,1),e,c),g===!1)return!1;k+=g}}return k},o=function(){return Math.floor(2*Math.random())?"across":"down"},p=function(a){for(var b=[],c=0;c<a.length;c++){var d=i[a.charAt(c)];if(d)for(var e=0;e<d.length;e++){var f=d[e],g=f.row,h=f.col,j=n(a,g,h-c,"across"),k=n(a,g-c,h,"down");j!==!1&&b.push({intersections:j,row:g,col:h-c,direction:"across"}),k!==!1&&b.push({intersections:k,row:g-c,col:h,direction:"down"})}}if(b.length<1)return!1;var l=b[Math.floor(Math.random()*b.length)];return l},q=function(){for(var a=0;a<r.length;a++)for(var b=0;b<r[a].length;b++)r[a][b]=null;i={}};if(a.length<2)throw"A crossword must have at least 2 words";var r=new Array(g),s=0;for(s=0;s<g;s++)r[s]=new Array(h);var t=[];for(s=0;s<a.length;s++)t.push(new f(a[s].word,a[s].id,s,a[s].isExample,a[s].firstLetterExample));t.sort(function(a,b){return b.word.length===a.word.length?b.word>a.word?-1:b.word<a.word?1:0:b.word.length-a.word.length}),this.words=t}return c.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty Activity passed to Crossword interaction constructor";this.$activity=b,this.$selector=b.find("*[data-rcfinteraction='crossword']");var c="";c=this.$activity.attr("id"),c+=this.$activity.attr("data-seed")||"",Math.seedrandom(c),this.deviceMode=RCF.Utils.cookie("deviceMode"),RCF.Utils.isEmpty(this.deviceMode)&&(this.deviceMode="desktop");var d=this,e=a("#rcfCrosswordMask"),f=b.closest(".activityContainer");e.length<1&&(e=a("<div class='rcfMask' id='rcfCrosswordMask'></div>").appendTo(f)),this.$mask=e,this.$selector.each(function(){var b=a(this),c=b.find(".rcfCrossword"),e=b.find(".crosswordClueContainer"),f=JSON.parse(c.find(".jsonObject").html()),h=new g(f),i=10,j=h.getSquareGrid(i);if(RCF.Utils.isEmpty(j)){var k="<div class='rcfCrossword invalid'><h3>Cannot build a crossword with these words</h3>";k+="<h4>The following words could not be placed in a grid / intersection</h4>";var l=h.getBadWords();k+="<ul>";for(var m=0;m<l.length;m++)k+="<li>id['"+l[m].id+"]: "+l[m].word+"</li>";return k+="</ul>",void c.html(k)}c.html(h.getHTML(j)),b.data("internalCW",h);var n=b.attr("data-hiddenword");if(n&&n.length>0)for(var o=n.toUpperCase().split(""),p=0;p<o.length;p++){var q=c.find("input.cwWord[data-letter='"+o[p]+"']:not(.hiddenLetter,.example)");if(!(q.length<1&&(q=c.find("input.cwWord[data-letter='"+o[p]+"']:not(.hiddenLetter)"),q.length<1))){var r=q.length,s=Math.floor(Math.random()*r);a(q[s]).addClass("hiddenLetter")}}var t=b.find(".hiddenClues"),u=[],v=0,w=h.getLegend(j);for(var x in w){var y=v++<1?"across":"down",z="across"===y?"Across":"Down";u.push("<div class='"+y+"'>"),u.push("<h3>"+z+"</h3>"),u.push("<ul>");for(var A=0;A<w[x].length;A++){var B=t.find("li[data-wordid='"+w[x][A].wordID+"']");B.find(".crosswordClueNumbering").text(w[x][A].position),B.find(".crosswordClueNumberPunctuation").text("."),u.push(B[0].outerHTML)}u.push("</ul></div>")}if(t.remove(),e.prepend(u.join("\n")),"desktop"!==d.deviceMode){var C=function(b){D.data("wordID",b),d.$mask.parent().css("position","relative"),d.$mask.css({opacity:"0.4"}).show().on("click",function(){d.$mask.hide(),d.$mask.parent().css("position","static"),D.hide()});var e=c.find("input.cwWord[data-wordid*='|"+b+"|']"),f=e.map(function(){return a(this).val()}).get().join("");f.length<e.length&&(f=e[0].value);var g=c.closest(".crosswordContainer").find(".crosswordClueContainer li[data-wordid='"+b+"']");D.data("wordID",b),D.find(".crosswordClueLabel").html(g.html()+" ("+e.length+")"),D.show(),D.find(".crosswordMobileTypein").val(f).focus().attr("maxlength",e.length)};c.on("click",".cwWord:not(.example)",function(){var b=a(this);if("none"!=b.attr("data-direction")){var c=b.attr("data-wordid").replace(/\|/g,"");C(c)}});var D=c.closest(".crosswordContainer").find(".crosswordPopup");D.on("keyup",function(b){13===b.keyCode?D.find(".okButton").trigger("click"):D.find(".crosswordMobileTypein").val(a(this).find(".crosswordMobileTypein").val().toUpperCase())}),D.on("click",".okButton",function(){var a={elm:c.closest(".crosswordContainer").attr("data-rcfid"),value:[{elm:D.data("wordID"),value:D.find(".crosswordMobileTypein").val()}]};D.hide(),d.$mask.trigger("click"),c.closest(".crosswordContainer").trigger("rcf.single.answer",[a,D.data("wordID")])}),D.on("click",".cancelButton",function(){D.hide(),d.$mask.trigger("click")}),e.on("click","li",function(){var b=a(this),e=b.attr("data-wordid");
C(e),d.$activity.scrollTop(c.scrollTop())})}else{var E=c.find("table.crossword"),F=function(b){return a.grep(b.attr("data-wordid").split("|"),function(a){return a.length>0})},G=function(a){return e.find("li[data-wordid='"+a+"']")},H=function(a){return e.find("li:not([data-wordid='"+a.join("'],[data-wordid='")+"'])")},I=function(a){return E.find("input[data-wordid*='|"+a+"|']")},J=function(a){return E.find("input:not([data-wordid*='|"+a.join("|'],[data-wordid*='|")+"|'])")};c.on("click","td .relSpan",function(){var b=a(this).closest("td"),c=b.find("input");c.focus()}),e.on("click","li",function(){var b=a(this),c=b.attr("data-wordid");b.addClass("selected"),H(new Array(c)).removeClass("selected");var d=I(c);d.removeClass("incorrect"),d.addClass("editing"),J(new Array(c)).removeClass("editing"),d.first().focus()}),c.on("focus",".cwWord",function(){var b=a(this),c=F(b);b.hasClass("editing")?(J(c).removeClass("editing"),H(c).removeClass("selected")):(E.find("input").removeClass("editing"),e.find("li").removeClass("selected"),a.each(c,function(a,b){var c=I(b);c.removeClass("incorrect"),c.addClass("editing"),G(b).addClass("selected")})),b.select()}),c.on("keydown",".cwWord",function(b){var d=a(this),e=d.closest("td"),f=e.closest("tr").attr("data-row"),g=e.attr("data-col"),h=c.data("previousOrientation"),i=d.attr("data-direction"),j=function(a,b){return E.find("tr[data-row='"+a+"'] td[data-col='"+b+"'] input")},k=function(a){if("none"===i){var b,c;a?(b=j(f,parseInt(g)-1),c=j(parseInt(f)-1,g)):(b=j(f,parseInt(g)+1),c=j(parseInt(f)+1,g)),b.hasClass("editing")?i=c.hasClass("editing")?null==h||"none"===h?"horizontal":h:"horizontal":c.hasClass("editing")&&(i="vertical")}};if(b.which>=37&&b.which<=40)switch(b.which){case 37:g--;break;case 38:f--;break;case 39:g++;break;case 40:f++}else b.which>64?(d.hasClass("example")||d.val(String.fromCharCode(b.which)),k(!1),"horizontal"===i?g++:"vertical"===i&&f++):8===b.which&&(d.hasClass("example")||d.val(""),k(!0),"horizontal"===i?g--:"vertical"===i&&f--);var l=j(f,g);null==l?e.select():(h=i,c.data("previousOrientation",h),l.focus()),b.preventDefault()})}}),this.$activity.on("rcf.single.answer","*[data-rcfinteraction='crossword']",function(b,c,d){var e=a(this),f=c.elm;if(f===e.attr("data-rcfid")){var g=e,h=g.data("internalCW");if(h)for(var i=0;i<c.value.length;i++){var j=c.value[i].elm,k=c.value[i].value;j==d&&(g.find("input.cwWord[data-wordid*='|"+j+"|']").each(function(b){a(this).hasClass("example")||a(this).val(k.substr(b,1))}),g.find("input.cwWord[data-wordid*='|"+j+"|']").addClass("editing"),setTimeout(function(){g.find("input.cwWord").removeClass("editing")},1e3))}}})},showAnswers:function(b,c){for(var d in b.answers){var e=b.answers[d],f=e.elm;if(!RCF.Utils.isEmpty(f)){var g=this.$selector.filter("[data-rcfid='"+f+"']");if(!RCF.Utils.isEmpty(g)){var h=g,i=h.data("internalCW");if(!i)continue;h.find("input.cwWord:not(.example)").each(function(){var b=a(this);b.data("user-answer",b.val()),b.removeClass("incorrect").val("")});for(var j in e.value){var k=e.value[j].elm,l=e.value[j].value;c&&"0"==e.value[j].verification[0]||h.find("input.cwWord[data-wordid*='|"+k+"|']").each(function(b){a(this).val(l.substr(b,1))})}}}}},showMarkedAnswers:function(b){var c=b.id,d=this.$activity.attr("id");if(c!=d)throw"Invalid JSON Marked answers object provided for activity ["+d+"]\n\nAnswers provided were for activity ["+b.id+"]";this.clearMarkedAnswers();for(var e in b.answers){var f=b.answers[e],g=f.elm;if(!RCF.Utils.isEmpty(g)){var h=this.$selector.filter("[data-rcfid='"+g+"']");if(!RCF.Utils.isEmpty(h))for(var i in f.value){var j=f.value[i],k=j.elm,l="1"==j.verification[0],m=h.find("input.cwWord[data-wordid*='|"+k+"|']");l||m.addClass("incorrect");var n=m.eq(-2).attr("data-direction")||"horizontal";"none"===n&&(n=m.eq(-3).attr("data-direction")||"horizontal");var o=m.last().parent().find(".relSpan.marks");o.length<1?(o=a("<span class='relSpan marks'><span class='mark "+n+(l?" correct":" wrong")+"'></span></span>"),m.last().parent().append(o)):o.append(a("<span class='mark "+n+(l?" correct":" wrong")+"'></span>"))}}}},clearMarkedAnswers:function(){this.$selector.each(function(){a(this).find(".mark").parent().remove(),a(this).find("input.cwWord").removeClass("incorrect")})},showUserAnswers:function(){this.$selector.each(function(){var b=a(this);b.find("input.cwWord:not(.example)").each(function(){var b=a(this);b.val(b.data("user-answer")).removeData("user-answer")})})},isComplete:function(){var b=!0;return this.$selector.each(function(){var c=a(this);c.find("input.cwWord").each(function(){a(this).val().length<1&&(b=!1)})}),b},getUserAnswers:function(){var b=this.$selector.map(function(){var b=a(this),c=b.find(".rcfCrossword"),d=b.data("internalCW");if(!d)return null;var e=function(){for(var b=d.words,e=[],f=0;f<b.length;f++){var g=b[f],h=g.index;"y"!==g.isExample&&e.push({elm:g.id,type:"simple",value:c.find("input.cwWord[data-wordindex*='|"+h+"|']").map(function(){return a(this).val()||" "}).get().join("")})}return e}();return{elm:b.attr("data-rcfid"),type:"composite",markType:"item",value:e}}).get();return b},reset:function(){this.$selector.each(function(){a(this).find("input.cwWord:not(.example)").removeClass("incorrect").val("")})}},c}()}(jQuery,window)}(this),d()}),$__System.register("20c",["128","129","161","1d","20b"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_crossword")}return c(d,a),d}(d),a("default",f)}}}),$__System.register("20d",["3","d","20e"],function(a){"use strict";function b(a,b){var f=d(a.currentTarget),g=f.find(".dragTarget.movable"),h=b.elm;h===c(f)&&e(g,b,!1)}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("20f",["20d"],function(a){"use strict";function b(a){a.on("rcf.single.answer","*[data-rcfinteraction*=roppable]",c)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("210",["13"],function(a){"use strict";function b(a){a.on("rcf.droppable.answer.changed","*[data-rcfinteraction*=roppable]",function(b,d,e){RCF.options.feedbackOptions&&RCF.options.feedbackOptions.onAnswerChanged&&RCF.options.feedbackOptions.onAnswerChanged({id:c(a,"id"),answers:[{elm:d,type:"simple",value:e}]})})}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("211",["210","212","213","214","17c","20f","17d","17b"],function(a){"use strict";var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){a("default",function(a,j){a.$activity=j,a.$selector=e(j);var k=f(j),l=i(j);l.randomizeItems(),h(j)?(c(j,l),d(j,l.$wordBox,l)):k?c(j,l):d(j,l.$wordBox,l),g(j),b(j)})}}}),$__System.register("20e",["3","72","141","215","216","17b"],function(a){"use strict";function b(a,b){var j=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],k=c(a),l=i(k),m=Array.isArray(b.value)?b.value[0]:b.value,n=l.getWordItem(m),o=e(a,"wordItemID");d(o)||f(a,o);var p=a,q=n,r=b.verification&&"1"==b.verification[0];!j||j&&r?(h(a),g(p,q,n,l),l.removeWordItem(n)):h(a,!0)}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild,d=a.isEmpty},function(a){e=a.getDataFromElement},function(a){f=a.storeUserAnswer},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("217",["3","143","218","17b","20e"],function(a){"use strict";function b(a,b,h){var i=f(a),j=e(a);d(j),i.reset(),b.answers.forEach(function(a){var b=a.elm;if(!c(b)){var d=j.filter("[data-rcfid='"+b+"']").find(".dev-droppable");c(d)||g(d,a,h)}})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("219",["3","215","216","17b","21a"],function(a){"use strict";function b(a,b){var h=f(b);h.reset(),a.each(function(a,b){var f=$(b),i=g(f),j=h.getWordItem(i);e(f),c(i)||(h.removeWordItem(j),d(f,j,j,h))})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("21b",["3","143","218"],function(a){"use strict";function b(a,b,f){var g=e(b);d(a),f.answers.forEach(function(a){var b=a.elm;if(!c(b)&&!c(a.verification)){var d=g.filter("[data-rcfid='"+b+"']");if(!c(d)){var e="1"==a.verification[0]?"correct":"wrong",f=d.find(".mark");f.addClass(e)}}})}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("21c",["3","72","d"],function(a){"use strict";function b(a){return a.map(function(a,b){var f=e(b),g=f.parent(),h=d(f,"wordItemID"),i={elm:c(g)||"",type:"simple",value:h};return i}).get()}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.getDataFromElement},function(a){e=a.default}],execute:function(){}}}),$__System.register("21d",["72"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,d){var e=$(d),f=c(e,"wordItemID")||"";f.length<1&&(b=!1)}),b}var c;return a("default",b),{setters:[function(a){c=a.getDataFromElement}],execute:function(){}}}),$__System.register("21e",["3","141","143","216","218","17b"],function(a){"use strict";function b(a){var b=c(a),i=g(b),j=a,k=h(b);e(i),f(j),k.reset(),d(j)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.clearUserAnswer},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("21f",["3","72","141","143","216","220","17b"],function(a){"use strict";function b(a){var b=a.find(".dragTarget.movable"),j=c(b),k=i(j),l=d(b,"wordItemID");g(b),l&&k.addWordItem(k.getWordItem(l)),e(a),h(a),f(a)}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.getDataFromElement},function(a){e=a.clearUserAnswer},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("221",["3","218","21f"],function(a){"use strict";function b(a,b){var f=b.answers[0],g=d(a),h=f.elm,i=g.filter("[data-rcfid='"+h+"']");if(!c(i)){var j=f.verification&&"1"==f.verification[0];window.RCF&&window.RCF.Handlers&&window.RCF.Handlers.FeedbackHandler&&window.RCF.Handlers.FeedbackHandler.provideFeedback&&RCF.Handlers.FeedbackHandler.provideFeedback(i,i,j,e)}}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("218",[],function(a){"use strict";function b(a){return a.find("*[data-rcfinteraction*='roppable']:not(.example)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("222",["143","211","217","218","219","221","1c","1d","21b","21c","21d","21e"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default}],execute:function(){"use strict";n=function(){function a(b){i(this,a);var d=this;c(d,b)}return h(a,[{key:"clearMarkedAnswers",value:function(){var a=e(this.$activity);b(a)}},{key:"showAnswers",value:function(a,b){d(this.$activity,a,b)}},{key:"isComplete",value:function(){return l(this.$selector)}},{key:"getUserAnswers",value:function(){return k(this.$selector)}},{key:"showMarkedAnswers",value:function(a){j(this.$selector,this.$activity,a)}},{key:"showUserAnswers",value:function(){f(this.$selector,this.$activity)}},{key:"provideFeedback",value:function(a){g(this.$activity,a)}},{key:"reset",value:function(){m(this.$selector)}}]),a}(),a("default",n)}}}),$__System.register("223",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){a.addClass("selected"),a.siblings().removeClass("selected")})}}}),$__System.register("224",["225"],function(a){"use strict";var b;return{setters:[function(a){b=a.getSvgElementFromListenAndColour}],execute:function(){a("default",function(a,c){var d=b(a);return d.find("#"+c)})}}}),$__System.register("226",["3","223","224","225","227"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a.isEmpty},function(a){c=a.default},function(a){d=a.default},function(a){e=a.getSvgElementFromListenAndColour,f=a.getPaletteColourByColourValue},function(a){g=a.default}],execute:function(){a("default",function(a,h,i){var j=e(a);b(j)||h.value.some(function(e){var h=e.elm;if(h===i){var j=f(a,h);return!b(j)&&(c(j),e.value.forEach(function(b){var c=d(a,b);g(c,h)}),!0)}return!1})})}}}),$__System.register("228",["225","227"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.getSelectedPaletteColourFromListenAndColour},function(a){c=a.default}],execute:function(){a("default",function(a){var d=a.closest(".listenAndColour"),e=b(d);c(a,e)})}}}),$__System.register("229",["223","225","226","228","d","22a"],function(a){"use strict";function b(a){var b=e(a),c=f(a);b.forEach(function(a){var b=c.find("#"+a);j.addClass(b," clickableElement")}),a.on("click",".clickableElement:not(.example)",function(a){h(i(a.currentTarget))})}var c,d,e,f,g,h,i,j;return{setters:[function(a){c=a.default},function(a){d=a.setupExampleElements,e=a.getClickableSvgElementIdsFromListenAndColour,f=a.getSvgElementFromListenAndColour},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a}],execute:function(){a("default",function(a,e){a.$selector=e.find(".listenAndColour"),e.on("click",".colourPaletteItem",function(a){var b=i(a.currentTarget);c(b)}),a.$selector.each(function(a,c){var e=i(c);d(e),b(e)}),e.on("rcf.single.answer",".listenAndColour",function(a,b,c){var d=i(a.currentTarget);g(d,b,c)})})}}}),$__System.register("227",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a,b){a.attr("class","clickableElement "+b)})}}}),$__System.register("22b",["3","227"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.isEmpty},function(a){c=a.default}],execute:function(){a("default",function(a,d,e){var f=d.elm,g=d.value.map(function(b){return a.find("#"+b)});if(!b(g.length)){var h=!e||e&&"1"==d.verification[0]?f:"";g.forEach(function(a){c(a,h)})}})}}}),$__System.register("22c",["3","225","22b"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getSvgElementFromListenAndColour},function(a){d=a.default}],execute:function(){a("default",function(a,e,f){var g=e.elm;if(!b(g)){var h=a.filter("[data-rcfid="+g+"]");if(!b(h)){var i=c(h);e.value.forEach(function(a){return d(i,a,f)})}}})}}}),$__System.register("22d",["22c"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a,c){var d=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];c.answers.forEach(function(c){b(a,c,d)})})}}}),$__System.register("22e",["3","13","141","d","22d"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.getActivityElementFromChild},function(a){c=a.getDataAttribute},function(a){d=a.getUserAnswer},function(a){e=a.default},function(a){f=a.default}],execute:function(){a("default",function(a){var g=[];a.each(function(a,b){var c=e(b),f=d(c);g=g.concat(f)});var h=b(a),i=c(h,"id"),j={elm:i,answers:g};f(a,j)})}}}),$__System.register("22f",["3","143","225"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.isEmpty},function(a){c=a.default},function(a){d=a.getListenAndColourFromSelectorById,e=a.getSvgElementFromListenAndColour,f=a.getPaletteColoursFromListenAndColour}],execute:function(){a("default",function(a,g){c(a);for(var h in g.answers){var i=g.answers[h],j=i.elm;if(!b(j)){var k=d(a,j);if(!b(k)){var l=e(k),m=f(k);for(var n in i.value){var o=i.value[n],p=o.elm,q=m.filter("[data-colourValue="+p+"]"),r=l.find("."+p+":not(.example)").length>0;if(!b(q))if(q.hasClass("distractor"))o.value.length>0&&q.find(".mark").addClass("wrong");else if(r){var s="0"==o.verification[0]?"wrong":"correct";q.find(".mark").addClass(s)}}}}}})}}}),$__System.register("230",["3","225"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getClickableSvgElementIdsFromListenAndColour,d=a.getSvgElementFromListenAndColour}],execute:function(){a("default",function(a){var e=!1;return a.each(function(a,f){var g=$(f),h=c(g),i=d(g);h.forEach(function(a){var c=i.find("#"+a);if(!b(c)){var d=c.attr("class");b(d)||"clickableelement"===d.trim().toLowerCase()||(e=!0)}})}),e})}}}),$__System.register("231",["3","13","225","d"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.getRcfId},function(a){c=a.getDataAttribute},function(a){d=a.getPaletteColoursFromListenAndColour,e=a.getSvgElementFromListenAndColour},function(a){f=a.default}],execute:function(){a("default",function(a){return a.map(function(a,g){var h=f(g),i=b(h)||"",j=d(h),k=e(h),l={elm:i,type:"composite",markType:"item",value:j.map(function(a,b){var d=f(b),e=c(d,"data-colourvalue")||"",g={elm:e,type:"list",markType:"list",value:k.find("."+e+":not(.example)").map(function(){return f(this)[0].id}).get()};return g}).get()};return l}).get()})}}}),$__System.register("232",["141","231"],function(a){"use strict";var b,c;return{setters:[function(a){b=a},function(a){c=a.default}],execute:function(){a("default",function(a){a.each(function(a,d){var e=$(d),f=c(e);b.storeUserAnswer(e,f)})})}}}),$__System.register("233",["225"],function(a){"use strict";var b;return{setters:[function(a){b=a}],execute:function(){a("default",function(a){a.each(function(a,c){var d=$(c);b.resetListenAndColourInteraction(d)})})}}}),$__System.register("234",["233"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a){b(a)})}}}),$__System.register("235",["143","229","230","231","232","234","1c","1d","22d","22e","22f"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){"use strict";m=function(){function a(b){i(this,a),c(this,b)}return h(a,[{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"showAnswers",value:function(a,b){f(this.$selector),b||g(this.$selector),j(this.$selector,a,b)}},{key:"isComplete",value:function(){return d(this.$selector)}},{key:"getUserAnswers",value:function(){return e(this.$selector)}},{key:"showMarkedAnswers",value:function(a){l(this.$selector,a,!0)}},{key:"showUserAnswers",value:function(){k(this.$selector)}},{key:"reset",value:function(){g(this.$selector)}}]),a}(),a("default",m)}}}),$__System.register("236",[],function(a){"use strict";function b(a){a.find(".locating_answer.example").show()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("237",["d"],function(a){"use strict";function b(a){var b=c("#rcfLocatingMask"),d=a.closest(".activityContainer");return b.length<1&&(b=c('<div class="rcfMask" id="rcfLocatingMask"></div>').appendTo(d)),b}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("238",[],function(a){"use strict";function b(a){return a.closest(".locating")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("239",[],function(a){"use strict";function b(a){return a.find(".contentLocatingAnswer").text()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("23a",["3","238","239","240","241","242","23b","23c","23d","23e","23f","1af"],function(a){"use strict";function b(a,b,r,s){var t=e(a),u=l(t),v=g(t),w=k(t),x=void 0,y=c(t),z=h(y);if(o(z),m(r,!1),m(w,!0),j(s),q(u),p(b,u,a),"typein"===v)x=n(u),x.val(f(t)),x.focus();else{var A=i(t);u.toggleClass("withAnswer",!d(A))}}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild,d=a.isEmpty},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.showMask},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.hidePopups,p=a.showPopup,q=a.reparentPopup}],execute:function(){}}}),$__System.register("243",[],function(a){"use strict";function b(a){return a.find(".locatingSelecting")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("244",["3","241","243","23b","1af","23e"],function(a){"use strict";function b(a,b){var i=c(b),j=e(b),k=d(i);h(j,!1),g(k),f(a)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.default},function(a){e=a.default},function(a){f=a.hideMask},function(a){g=a.hidePopups},function(a){h=a.default}],execute:function(){}}}),$__System.register("245",[],function(a){"use strict";function b(a){return!a.hasClass("clear")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("246",["3","241","245","247","248","249","23c","24a","23e","24b","24c","1af","23b"],function(a){"use strict";function b(a,b,p){var q=c(a)||"",r=l(a),s=f(r),t=i(s),u=g(s),v=d(b),w=e(a);w?h(u,q,a.text().trim()):m(u),j(s,w),k(t,!1),n(v),o(p)}var c,d,e,f,g,h,i,j,k,l,m,n,o;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.hidePopups},function(a){o=a.hideMask}],execute:function(){}}}),$__System.register("23f",[],function(a){"use strict";function b(a){return a.find("input[type=text]")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("24d",["247","248","249","23b","24c","24a","23c","23e","23f","1af"],function(a){"use strict";function b(a,b){var m=k(a),n=c(a),o=i(n),p=d(n),q=m.val(),r=q.length>0;r?e(p,q,q):g(p),h(n,r),j(o,!1),l(a),f(b)}var c,d,e,f,g,h,i,j,k,l;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.hideMask},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.hidePopups}],execute:function(){}}}),$__System.register("24e",[],function(a){"use strict";function b(a){return a.find('*[data-rcfinteraction="locating"]')}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("247",["3","13","24e"],function(a){"use strict";function b(a){var b=d(a,"data-locatingid")||"",f=c(a),g=e(f).filter("[data-rcfid='"+b+"']");return g}var c,d,e;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.getDataAttribute},function(a){e=a.default}],execute:function(){}}}),$__System.register("23e",[],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];a.toggleClass("locatingSelecting",b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("24f",["247","23b","23c","23e","1af"],function(a){"use strict";function b(a,b){var h=c(a),i=e(h);f(i,!1),g(a),d(b)}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.hideMask},function(a){e=a.default},function(a){f=a.default},function(a){g=a.hidePopups}],execute:function(){}}}),$__System.register("1af",["3"],function(a){"use strict";function b(a,b,c){b.show();var d=e(a,b,c);b.position(d)}function c(a){a.hide()}function d(a){var b=f(a);g(b)||(a.detach(),b.append(a))}var e,f,g;return{setters:[function(a){e=a.getPopupPositionFromElement,f=a.getActivityElementFromChild,g=a.isEmpty}],execute:function(){a("showPopup",b),a("hidePopups",c),a("reparentPopup",d)}}}),$__System.register("23b",[],function(a){"use strict";function b(a){a.parent().css("position","static"),a.hide()}function c(a){a.parent().css("position","relative"),a.css("opacity","0.4").show()}return{setters:[],execute:function(){a("showMask",c),a("hideMask",b)}}}),$__System.register("250",["3","240","241","248","249","251","1af","23b","24a"],function(a){"use strict";function b(a,b,l){var m=b.elm,n=c(a)||"",o=a.closest(".activity"),p=e(o);if(n==m){i(p),j(l);var q=b,r=q.type,s=f(a),t=d(a),u="",v="";"simple"===r?v=q.value:"list"!==r&&"choice"!==r||(v=q.value[0]),u="list"===t?h(a,v):v,g(s,v,u),k(a,!0)}}var c,d,e,f,g,h,i,j,k;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.hidePopups},function(a){j=a.hideMask},function(a){k=a.default}],execute:function(){}}}),$__System.register("24b",[],function(a){"use strict";function b(a){return a.closest(".locating_popup")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("252",["244","246","250","23a","24d","24f","24b"],function(a){"use strict";function b(a,b,c){a.on("click",".locating .locatingItem:not(.markable, .example),.locating .locating_answer:not(.example)",function(a){j($(a.currentTarget),a,b,c)})}function c(a,b){a.on("click",function(){g(a,b)})}function d(a,b){a.on("click",".locatingSpanPopup",function(c){h($(c.currentTarget),a,b)})}function e(a,b){a.on("click",".locating_popup .okButton",function(a){var c=m($(a.currentTarget));k(c,b)}),a.on("click",".locating_popup .cancelButton",function(a){var c=m($(a.currentTarget));l(c,b)}),a.on("keyup",".locating_popup",function(a){var b,c,d;13===a.keyCode?(b=$(a.currentTarget),c=b.find(".okButton"),c.trigger("click")):27===a.keyCode&&(b=$(a.currentTarget),d=b.find(".cancelButton"),d.trigger("click"))})}function f(a,b){a.on("rcf.single.answer","*[data-rcfinteraction=locating]",function(a,c){var d=$(a.currentTarget);i(d,c,b)})}var g,h,i,j,k,l,m;return{setters:[function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default}],execute:function(){a("setupLocatingItemClickHandler",b),a("setupMaskClickHandler",c),a("setupLocatingPopupChoiceClickHandler",d),a("setupLocatingTypeinPopupEvents",e),a("setupNextAnswerEvents",f)}}}),$__System.register("253",["252"],function(a){"use strict";function b(a,b,h){c(a,b,h),d(h,b),e(a,h),f(a,h),g(a,h)}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.setupLocatingItemClickHandler,d=a.setupMaskClickHandler,e=a.setupLocatingPopupChoiceClickHandler,f=a.setupLocatingTypeinPopupEvents,g=a.setupNextAnswerEvents}],execute:function(){}}}),$__System.register("254",["3","236","237","248","253","255","24e"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty activity passed to Locating constructor";a.$activity=b,a.$selector=i(b),a.$locatingInteractionsSelector=a.$selector.filter(":not(.example)"),a.$answerSelector=f(a.$locatingInteractionsSelector),d(a.$selector),a.$mask=e(b),g(a.$activity,a.$locatingInteractionsSelector,a.$mask)}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("256",["3","141","240","242","248","249","251","24c","24a"],function(a){"use strict";function b(a,b,m){var n=b.elm,o=void 0,p=void 0,q=void 0,r=void 0,s=void 0;if(!d(n)&&(o=b.type,p=a.filter("[data-rcfid="+n+"]"),!d(p))){q=f(p),r=c(o,b),s="list"===q?j(p,r):r;var t=h(p),u=!1,v=g(p)||"";e(t,v),m?(u=!!b.verification&&"1"==b.verification[0],u?i(t,r,s):k(t),l(p,u)):(u=!!s&&s.length>0,u?i(t,r,s):k(t),l(p,u))}}function c(a,b){return"simple"===a?b.value:"list"===a||"choice"===a?$.isArray(b.value)?b.value[0]:b.value||"":null}var d,e,f,g,h,i,j,k,l;return a("default",b),{setters:[function(a){d=a.isEmpty},function(a){e=a.storeUserAnswer},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){}}}),$__System.register("257",["255","256"],function(a){"use strict";function b(a,b,c){for(var e in b.answers)d(a.$locatingInteractionsSelector,b.answers[e],c)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("24c",[],function(a){"use strict";function b(a){a.removeData("chosen-answer").removeData("user-answer").html("").hide()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("240",[],function(a){"use strict";function b(a){return a.attr("data-type")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("23c",[],function(a){"use strict";function b(a){return a.find(".locatingItem")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("24a",["23c"],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1],d=c(a);d.toggleClass("answered",b)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("258",["3"],function(a){"use strict";function b(a){return!a||a.length<1?"":" <span class='locatingAnswerBracket leftBracket'>(</span><span class='contentLocatingAnswer'>"+c(a)+"</span><span class='locatingAnswerBracket rightBracket'>)</span>"}var c;return a("default",b),{setters:[function(a){c=a.escapeHtml}],execute:function(){}}}),$__System.register("249",["258"],function(a){"use strict";function b(a,b,d){a.data("chosen-answer",b).html(c(d)).show()}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("23d",["3"],function(a){"use strict";function b(a){var b=a.closest(".activity"),d=c(a);return d?b.find(".locating_popup[data-locatingid="+d+"]"):$([])}var c;return a("default",b),{setters:[function(a){c=a.getRcfId}],execute:function(){}}}),$__System.register("251",["23d"],function(a){"use strict";function b(a,b){if(!b||b.length<1)return"";var d=c(a),e=d.find(".locatingSpanPopup[data-rcfid="+b+"]");return e?e.text():""}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("259",["3","141","240","248","249","251","24c","24a"],function(a){"use strict";function b(a){a.each(function(a,b){var k=$(b),l=f(k),m=d(l),n=e(k),o="";return c(m)?(i(l),void j(k,!1)):("list"===n?o=h(k,m):"typein"===n&&(o=m),g(l,m,o),void j(k,!0))})}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getUserAnswer},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){}}}),$__System.register("25a",["3"],function(a){"use strict";function b(a,b){var d=b.elm;if(!c(d)&&!c(b.verification)){var e=a.filter("[data-rcfid="+d+"]");if(!c(e)){var f="1"==b.verification[0]?"correct":"wrong";e.closest(".locating").find(".mark").addClass(f);
}}}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("25b",["143","25a"],function(a){"use strict";function b(a,b){c(a),b.answers.forEach(function(b){d(a,b)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("25c",["3","242","d"],function(a){"use strict";function b(a){return a.map(function(a,b){var h=g(b),i=f(h);return i=c(i),h.hasClass("distractor")||(i=e(i)),{elm:d(h),type:"simple",value:i}}).get()}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.fixQuotables,d=a.getRcfId,e=a.trimExcessSpaces},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("241",[],function(a){"use strict";function b(a){return a.find(".locating_popup")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("25d",["241"],function(a){"use strict";function b(a){var b=c(a);b.remove()}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("248",[],function(a){"use strict";function b(a){return a.find(".locating_answer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("242",["72","248"],function(a){"use strict";function b(a){var b=d(a),e=c(b,"chosen-answer")||"";return e}var c,d;return a("default",b),{setters:[function(a){c=a.getDataFromElement},function(a){d=a.default}],execute:function(){}}}),$__System.register("25e",["3","242"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,e){var f=$(e),g=d(f)||"";g=c(g),g.length<1&&(b=!1)}),b}var c,d;return a("default",b),{setters:[function(a){c=a.trimExcessSpaces},function(a){d=a.default}],execute:function(){}}}),$__System.register("25f",[],function(a){"use strict";function b(a){a.removeData("user-answer").removeData("chosen-answer").text("").hide().closest(".locating").find(".locatingItem").removeClass("answered")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("255",["143","254","257","259","1c","1d","25b","25c","25d","25e","25f"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){"use strict";m=function(){function a(b){g(this,a);var d=this;c(d,b)}return f(a,[{key:"clearMarkedAnswers",value:function(){b(this.$locatingInteractionsSelector)}},{key:"showAnswers",value:function(a,b){var c=this;d(c,a,b)}},{key:"isComplete",value:function(){var a=this.$locatingInteractionsSelector.filter(":not(.distractor)");return k(a)}},{key:"getUserAnswers",value:function(){return i(this.$locatingInteractionsSelector)}},{key:"showMarkedAnswers",value:function(a){h(this.$locatingInteractionsSelector,a)}},{key:"showUserAnswers",value:function(){e(this.$locatingInteractionsSelector)}},{key:"close",value:function(){j(this.$activity)}},{key:"reset",value:function(){l(this.$answerSelector)}}]),a}(),a("default",m)}}}),$__System.register("260",["261","262","d"],function(a){"use strict";function b(a){e(c).resize(function(){d(a)})}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("263",["3","264","d"],function(a){"use strict";function b(a){a.on("rcf.single.answer","*[data-rcfinteraction='matching']",c)}function c(a,b,c){var g=f(a.currentTarget),h=b.elm,i=JSON.parse(JSON.stringify(b));if(h===d(g)){var j=i.value.filter(function(a){return a.elm===c});i.value=j,e(g,i,!1)}}var d,e,f;return a("default",b),{setters:[function(a){d=a.getRcfId},function(a){e=a.showAnswer},function(a){f=a.default}],execute:function(){}}}),$__System.register("265",["3","266","d"],function(a){"use strict";function b(a){var b=function(a){var b=e(a);b.bind("click",function(e){var g=f(e.source),h=f(e.target),i=c(a);if(!i.hasClass("rcfFeedbackPlaying")&&!(d(g)||d(h)||g.hasClass("example")||h.hasClass("example"))){b.detachAllConnections(e.target);var j=h.closest(".matchTargetContainer"),k=j.find(".correct, .wrong");k.removeClass("correct wrong")}})};a.each(function(a,c){var d=f(c);b(d)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild,d=a.isEmpty},function(a){e=a.getJsPlumbInstance},function(a){f=a.default}],execute:function(){}}}),$__System.register("267",["266","d"],function(a){"use strict";function b(a){a.on("click",".matchItemContainer:not(.example)",function(){var a=d(this).find(".matchItem"),b=c(a);a.toggleClass("selected"),a.hasClass("selected")&&a.addClass("currentM"),b.find(".matchItem.selected:not(.currentM)").removeClass("selected"),a.removeClass("currentM")})}var c,d;return a("default",b),{setters:[function(a){c=a.getMatchingContainerFromChild},function(a){d=a.default}],execute:function(){}}}),$__System.register("268",["3","6","266","269","d"],function(a){"use strict";function b(a,b,c){var g=f();if(g.feedbackOptions){var h=g.feedbackOptions.onAnswerChanged;if(h&&"function"==typeof h){var j=d(a),k=e(a),l=i(j,"id"),m=e(c),n=e(b);h({id:l,answers:[{elm:k,type:"composite",markType:"item",value:[{elm:m,type:"simple",value:n}]}]})}}}function c(a){var b=f();if(b.feedbackOptions){var c=h(a),d=g(a),e=i(c,"id"),k=d.getConnections({source:e});if(k&&!(k.length<1)){var l=j(k[0].target),m=l.parent(),n=m.find(".mark");n.removeClass("correct wrong")}}}var d,e,f,g,h,i,j;return{setters:[function(a){d=a.getActivityElementFromChild,e=a.getRcfId},function(a){f=a.getRcfOptions},function(a){g=a.getJsPlumbInstance,h=a.getSelectedMatchItem},function(a){i=a.getDataAttribute},function(a){j=a.default}],execute:function(){a("triggerInstantFeedback",b),a("clearMarkingForInstantFeedback",c)}}}),$__System.register("26a",["3","262","266","268"],function(a){"use strict";function b(a,b){b.on("click",".matchTargetContainer:not(.example)",function(){var b=$(this).find(".matchTarget"),k=e(b),l=f(k),m=g(k),n=h(k);if(!c(l)){var o=l.attr("id"),p=b.attr("id");if(RCF.options.feedbackOptions){var q=n.getConnections({source:o});c(q)||$(q[0].target).parent().find(".mark").removeClass("correct wrong")}i(k),n.detachAllConnections(o),n.detachAllConnections(p),n.connect({source:o,target:p,anchors:m,connector:["Bezier",{cssClassName:"userAnswer"}],cssClass:"userAnswer",detachable:!1}),l.removeClass("selected"),b.removeClass("selected"),d(a),j(k,l,b)}})}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.getMatchingContainerFromChild,f=a.getSelectedMatchItem,g=a.getAnchorPosition,h=a.getJsPlumbInstance},function(a){i=a.clearMarkingForInstantFeedback,j=a.triggerInstantFeedback}],execute:function(){}}}),$__System.register("26b",["3","265","267","26a"],function(a){"use strict";function b(a){var b=a.filter(":not(.example)");c(b)||(d(b),e(b),f(a,b))}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("26c",["260","262","263","266","26d","26b"],function(a){"use strict";function b(a,b){var j=b.find("*[data-rcfinteraction='matching']");a.$activity=b,a.$selector=j,g(j),h(j),i(j),e(b),f(j),c(j),j.imagesLoaded(function(){d(j)})}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.connectExampleMatchings,g=a.randomizeMatchTargets,h=a.randomizeMatchItems},function(a){},function(a){i=a.default}],execute:function(){}}}),$__System.register("264",["3","13","141","262","266","26d"],function(a){"use strict";function b(a,b,d){var e=a.$selector;b.answers.forEach(function(a){c(e,a,d,!0)})}function c(a,b){var c=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],f=!(arguments.length<=3||void 0===arguments[3])&&arguments[3],l=b.elm;if(!e(l)){var m=a.filter("[data-rcfid='"+l+"']");e(m)||(f&&k(m),b.value.forEach(function(a){var b=a.verification&&"1"==a.verification[0],e=a.value,f=i(m,a.elm),h=j(m,e);d(m,h,f,b,c),c&&!b&&g(f)}),h(a))}}function d(a,b,c,d,e){var g=l(a),h=m(a);b.each(function(a,b){var i=$(b),j=f(i,"id"),k=f(c,"id");!d&&e&&(h.detachAllConnections(j),h.detachAllConnections(k));var l=h.getConnections({target:k}),m=h.getConnections({source:j});l.length>0||m.length>0||(h.detachAllConnections(j),h.detachAllConnections(k),(!e||e&&d)&&h.connect({source:j,target:k,anchors:g,connector:["Bezier",{cssClass:e?"userAnswer":"showCorrectAnswer"}],detachable:!1}))})}var e,f,g,h,i,j,k,l,m,n;return{setters:[function(a){e=a.isEmpty},function(a){f=a.getDataAttribute},function(a){g=a.clearUserAnswer},function(a){h=a.default},function(a){i=a.getMatchTargetById,j=a.getMatchItemsByMatchItemIds,k=a.saveUserAnswers,l=a.getAnchorPosition,m=a.getJsPlumbInstance},function(a){n=a.jsPlumb}],execute:function(){a("showAnswers",b),a("showAnswer",c)}}}),$__System.register("26e",["262","266"],function(a){"use strict";function b(a){a.each(function(a,b){var c=$(b);d(c)}),c(a)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.showSavedUserAnswers}],execute:function(){}}}),$__System.register("26f",["3","266"],function(a){"use strict";function b(a,b){var e=b.elm,f=a.filter("[data-rcfid='"+e+"']");c(f)||b.value.forEach(function(a){var b=a.elm,e=d(f,b),g="1"==a.verification[0];if(!c(e)){var h=e.closest(".matchTargetContainer"),i=h.find(".mark");i.addClass(g?"correct":"wrong")}})}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getMatchTargetById}],execute:function(){}}}),$__System.register("270",["143","26f"],function(a){"use strict";function b(a,b){c(a),b.answers.forEach(function(b){d(a,b)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("271",["3","13","266"],function(a){"use strict";function b(a){return a.map(function(a,b){var f=$(b),g=e(f),h=function(){return f.find(".matchTarget:not(.example,.distractor)").map(function(a,b){var e=$(b),f=g.getConnections({target:d(e,"id")}),h="";return f&&f.length>0&&(h=c($("#"+f[0].sourceId))),{elm:c(e),type:"simple",value:h}}).get()};return{elm:c(f),type:"composite",markType:"item",value:h()}}).get()}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.getDataAttribute},function(a){e=a.getJsPlumbInstance}],execute:function(){}}}),$__System.register("272",["266","d"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,e){var f=d(e);c(f)||(b=!1)}),b}var c,d;return a("default",b),{setters:[function(a){c=a.isAttempted},function(a){d=a.default}],execute:function(){}}}),$__System.register("273",["141","262","266","269"],function(a){"use strict";function b(a){a.filter(":not(.example)").each(c),e(a)}function c(a,b){var c=$(b),e=f(c),h=c.find(".matchTarget:not(.example)");h.each(function(a,b){var c=$(b);d(c);var f=g(c,"id");e.detachAllConnections(f)})}var d,e,f,g;return a("default",b),{setters:[function(a){d=a.clearUserAnswer},function(a){e=a.default},function(a){f=a.getJsPlumbInstance},function(a){g=a.getDataAttribute}],execute:function(){}}}),$__System.register("274",["13"],function(a){"use strict";function b(a){var b=c(a,"data-display")||"v";return f[b]}var c,d,e,f;return{setters:[function(a){c=a.getDataAttribute}],execute:function(){a("getAnchorPositionFromMatchingContainer",b),d=["Bottom","Top"],e=["RightMiddle","LeftMiddle"],f={h:d,v:e}}}}),$__System.register("275",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(){return window.jsPlumb.getInstance()})}}}),$__System.register("262",["266","d"],function(a){"use strict";function b(a){a.each(function(a,b){var e=d(b),f=c(e);if(f)try{f.setSuspendDrawing(!1,!0)}catch(a){}})}var c,d;return a("default",b),{setters:[function(a){c=a.getJsPlumbInstance},function(a){d=a.default}],execute:function(){}}}),$__System.register("266",["3","72","141","262","269","274","275"],function(a){"use strict";function b(a){var b=e(a).find(".matchTarget.example"),d=function(a){var b=f(a),d=c(b),e=y(a,"data-matchItem-rcfid").split("|")[0],g=j(b,e),i=h(b);if(r(g))throw"Cannot find match item with id ["+e+"]";var k=y(a,"id"),l=y(g,"id");i.detachAllConnections(k),i.connect({source:l,target:k,anchors:d,connector:["Bezier",{cssClass:"showCorrectAnswer"}],cssClass:"showExampleAnswer",detachable:!1})};b.each(function(a,b){d($(b))})}function c(a){return z(a)}function d(a){return a.find(".matchItems")}function e(a){return a.find(".matchTargets")}function f(a){return a.closest(".matchingContainer")}function g(a){return a.find(".matchItem.selected").first()}function h(a){var b=t(a,"jsPlumbInstance");return b||(b=A(),u(a,"jsPlumbInstance",b)),b}function i(a){a.find(".matchItem.selected:not(.currentM)").removeClass("selected")}function j(a,b){return a.find(".matchItem[data-rcfid='"+b+"']")}function k(a,b){return a.find(".matchTarget[data-rcfid='"+b+"']")}function l(a){var b=e(a);b.mmRandomize(".matchTargetContainer","seed:matchTargets")}function m(a){var b=d(a);b.mmRandomize(".matchItemContainer","seed:matchItems")}function n(a,b){return a.find(".matchItem").filter(function(a,c){var d=$(c),e=s(d);return Array.isArray(b)?b.indexOf(e)>-1:b===e})}function o(a){var b=h(a),c=a.find(".matchTarget:not(.example)");c.each(function(a,c){var d=$(c),e=b.getConnections({target:y(d,"id")});r(e)||w(d,e[0].sourceId),b.detachAllConnections(d[0].id)})}function p(a){var b=h(a),d=c(a);b.setSuspendDrawing(!0),a.find(".matchTarget:not(.example)").each(function(a,c){var e=$(c),f=y(e,"id"),g=v(e);b.detachAllConnections(f),g&&b.connect({source:g,target:f,anchors:d,connector:["Bezier",{cssClass:"userAnswer"}],detachable:!0})}),x(a)}function q(a){var b=h(a),c=a.find(".matchTarget:not(.example,.distractor)"),d=!0;return c.each(function(a,c){var e=$(c),f=b.getConnections({target:y(e,"id")});r(f)&&(d=!1)}),d}var r,s,t,u,v,w,x,y,z,A;return{setters:[function(a){r=a.isEmpty,s=a.getRcfId},function(a){t=a.getDataFromElement,u=a.setDataOnElement},function(a){v=a.getUserAnswer,w=a.storeUserAnswer},function(a){x=a.default},function(a){y=a.getDataAttribute},function(a){z=a.getAnchorPositionFromMatchingContainer},function(a){A=a.default}],execute:function(){a("connectExampleMatchings",b),a("getAnchorPosition",c),a("getMatchItems",d),a("getMatchTargets",e),a("getMatchingContainerFromChild",f),a("getSelectedMatchItem",g),a("getJsPlumbInstance",h),a("isAttempted",q),a("clearSelectedMatchingElements",i),a("getMatchItemById",j),a("getMatchTargetById",k),a("getMatchItemsByMatchItemIds",n),a("randomizeMatchTargets",l),a("randomizeMatchItems",m),a("saveUserAnswers",o),a("showSavedUserAnswers",p)}}}),$__System.register("276",["13","141","266"],function(a){"use strict";function b(a,b){var f=b.find(".matchTarget"),g=e(a),h=b.find(".mark"),i=c(f,"id");h.removeClass("correct wrong"),d(f),g.detachAllConnections(i)}var c,d,e;return a("default",b),{setters:[function(a){c=a.getDataAttribute},function(a){d=a.clearUserAnswer},function(a){e=a.getJsPlumbInstance}],execute:function(){}}}),$__System.register("277",["3","266","276"],function(a){"use strict";function b(a,b){var f=b.answers[0].elm,g=a.filter("[data-rcfid='"+f+"']");if(!c(g)){var h=b.answers[0].value[0].elm,i="1"==b.answers[0].value[0].verification[0],j=d(g,h);window.RCF.Handlers.FeedbackHandler.provideFeedback(g,j.closest(".matchTargetContainer"),i,e)}}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getMatchTargetById},function(a){e=a.default}],execute:function(){}}}),$__System.register("278",["143","264","270","271","272","273","277","1c","1d","26c","26e"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.showAnswers},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){"use strict";m=function(){function a(b){j(this,a),k(this,b)}return i(a,[{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"showAnswers",value:function(a,b){var d=this;c(d,a,b)}},{key:"isComplete",value:function(){return f(this.$selector)}},{key:"getUserAnswers",value:function(){return e(this.$selector)}},{key:"showMarkedAnswers",value:function(a){d(this.$selector,a)}},{key:"showUserAnswers",value:function(){l(this.$selector)}},{key:"provideFeedback",value:function(a){h(this.$selector,a)}},{key:"reset",value:function(){g(this.$selector)}}]),a}(),a("default",m)}}}),$__System.registerDynamic("279",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.MOVING_TARGETS]=function(){function a(a){this._initialize(a)}return a.prototype={_initialize:function(a){if(this.$activity=a,this.$movingTargets=a.find("*[data-rcfinteraction='movingTargets']").first(),this.$gameStage=this.$movingTargets.find(".rcfMovingTargets"),RCF.Utils.isEmpty(this.$gameStage))throw"Error ! No rcfMovingTargets stage !";var c=b.Phaser||!1;if(!c)return this.$gameStage.addClass("missingLibrary"),void this.$gameStage.html("<h2>PhaserJS library missing</h2><h3>This activity requires the use of the PhaserJS game library</h3>");var d="";d=this.$activity.attr("id"),d+=this.$activity.attr("data-seed")||"",Math.seedrandom(d);var e=this.$gameStage.find(".jsonObject").text();try{this.gameSettings=JSON.parse(e)}catch(a){throw"Error getting game settings for Moving Targets ! \n\n"+a}this.$gameStage.find(".jsonObject").text(""),this.movingTargetsGame=new RCF.Handlers.MovingTargetsGame(this.$gameStage,this.gameSettings)},pause:function(){this.movingTargetsGame.pauseGame()},resume:function(){this.movingTargetsGame.resumeGame()},isComplete:function(){return this.$gameStage.hasClass("complete")},reset:function(){this.movingTargetsGame.resetGame()}},a}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("27a",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Handlers=RCF.Handlers||{},RCF.Handlers.MovingTargetsGame=function(){function a(a,b){if(RCF.Utils.isEmpty(a))throw"No $gameStage passed to moving targets game";if(!b)throw"No game settings json passed to moving targets game";this.$gameStage=a,this.gameSettings=b,this.game=new Phaser.Game(d,e,Phaser.CANVAS,a[0].id,this),this.remainingClues=[],this.currentClue=null,this.gameTargets=null,this.crosshairs=null,this.collisionTarget=null,this.clueButton=null,this.successAudio=null,this.failAudio=null,this.gameOverAudio=null}var b=-300,c=300,d=700,e=480;return a.prototype={preload:function(){function a(a,b){["sceneBackground","targetBackground","foreground"].forEach(function(b){var d=a[b];d&&c.game.load.image(b,d)}),["crosshairs","collisionTarget","clueButton"].forEach(function(b){var d=a[b];if(!d)throw'Image asset expected in ("assets"): "'+b+'"';c.game.load.image(b,d)}),b.forEach(function(a){c.game.load.image(a.image.split("/").pop(),a.image,!0)})}function b(a,b){["fail","success","gameover"].forEach(function(b){var d=a[b];if(!d)throw'Audio asset expected in ("audio"): "'+b+'"';c.game.load.audio(b,d)}),b.forEach(function(a){c.game.load.audio(a.id,a.audio)})}var c=this;a(c.gameSettings.assets,c.gameSettings.targets),b(c.gameSettings.audio,c.gameSettings.targets),c.game.stage.disableVisibilityChange=!0},create:function(){function a(){g.gameSettings.assets.sceneBackground&&(g.sceneBackground=g.game.add.tileSprite(0,0,g.game.world.width,g.game.world.height,"sceneBackground"),"y"===g.gameSettings.assets.sceneBackgroundMoving&&g.sceneBackground.autoScroll(h*-.6,0)),g.gameSettings.assets.targetBackground&&(g.targetBackground=g.game.add.tileSprite(0,120,g.game.world.width,g.game.world.height-150,"targetBackground"),"y"===g.gameSettings.assets.targetBackgroundMoving&&g.targetBackground.autoScroll(h,0)),g.gameSettings.assets.foreground&&(g.foreground=g.game.add.tileSprite(0,g.game.world.height-50,g.game.world.width,100,"foreground"),"y"===g.gameSettings.assets.foregroundMoving&&g.foreground.autoScroll(h*-1.2,0),"y"===g.gameSettings.assets.foregroundBounce&&g.game.add.tween(g.foreground).to({y:g.game.world.height-100},1500,Phaser.Easing.Cubic.InOut,!0,0,Number.MAX_VALUE,!0))}function d(){g.gameTargets=g.game.add.group(),g.gameTargets.enableBody=!0,g.gameTargets.physicsBodyType=Phaser.Physics.ARCADE;var a=0;g.gameSettings.targets.forEach(function(d){var e=null;try{var f=d.image.split("/").pop();e=g.gameTargets.create(b-a*c,160,f),a++}catch(a){console.log("Error loading target ["+d.id+"] \n\n"+a)}e&&(e.id=d.id,e.body.velocity.setTo(parseInt(h),0),e.body.acceleration.setTo(0,0))})}function e(){g.crosshairs=g.game.add.sprite(g.game.camera.width/2-224,g.game.camera.height/2-141,"crosshairs"),g.collisionTarget=g.game.add.sprite(g.game.camera.width/2-15,g.game.camera.height/2-15,"collisionTarget")}function f(){g.clueButton=g.game.add.button(g.game.world.width-140,10,"clueButton",function(){g.$gameStage.hasClass("complete")||g.currentClue.play()},this),g.clueButton.input.useHandCursor=!0}var g=this,h=g.gameSettings.speed;g.scale.pageAlignHorizontally=!0,a(),d(),e(),f(),g.failAudio=g.game.add.audio("fail"),g.successAudio=g.game.add.audio("success"),g.gameOverAudio=g.game.add.audio("gameover"),g.resetGame(),RCF.publish("rcf.movingTargets.create")},_initialiseClues:function(){var a=this;a.remainingClues=[];for(var b=0;b<a.gameSettings.targets.length;b++){var c=a.gameSettings.targets[b],d=a.game.add.audio(c.id);a.remainingClues.push(d)}RCF.Utils.shuffleArrayItems(a.remainingClues),a.currentClue=a.remainingClues.pop()},update:function(){function a(a){if(!e.$gameStage.hasClass("complete")){var b=a.x-e.game.camera.width/2;e.gameTargets.forEach(function(c){c.x-=b+a.width/2}),e.pauseGame(),a.id===e.currentClue.key?0===e.remainingClues.length?(e.successAudio.onStop.addOnce(function(){e.gameOverAudio.play(),e.$gameStage.addClass("complete")}),e.successAudio.play()):(e.currentClue=e.remainingClues.pop(),e.successAudio.onStop.addOnce(function(){e.currentClue.onStop.addOnce(function(){e.resumeGame()}),e.currentClue.play()}),e.successAudio.play()):(e.failAudio.onStop.addOnce(function(){e.currentClue.onStop.addOnce(function(){e.resumeGame()}),e.currentClue.play()}),e.failAudio.play())}}var b=0,d=null,e=this;e.gameTargets.forEach(function(b){b.overlap(e.collisionTarget)?b.inputEnabled||(b.inputEnabled=!0,b.input.useHandCursor=!0,b.events.onInputDown.add(a)):(b.inputEnabled=!1,b.events.onInputDown.removeAll())}),e.gameTargets.forEach(function(a){a.x<b&&(b=a.x),a.x>a.width*e.gameTargets.length&&(d=a)}),null!=d&&(d.x=b-c)},pauseGame:function(){var a=this;a.gameTargets.forEach(function(a){a.body.velocity.setTo(0,0)}),a.targetBackground&&a.targetBackground.autoScroll(0,0),RCF.publish("rcf.movingTargets.pauseGame")},resumeGame:function(){var a=this,b=a.gameSettings.speed;a.gameTargets.forEach(function(a){a.body.velocity.setTo(parseInt(b),0)}),a.targetBackground&&"y"===a.gameSettings.assets.targetBackgroundMoving&&a.targetBackground.autoScroll(b,0),RCF.publish("rcf.movingTargets.resumeGame")},resetGame:function(){var a=this,d=a.gameTargets.length,e=0;a.$gameStage.removeClass("complete"),a._initialiseClues();for(var f=[],g=0;g<d;g++)f[g]=b-g*c;RCF.Utils.shuffleArrayItems(f),a.gameTargets.forEach(function(a){a.x=f[e],e++}),a.currentClue.play(),a.resumeGame(),RCF.publish("rcf.movingTargets.resetGame")}},a}()}(jQuery,window)}(this),d()}),$__System.register("27b",["128","129","161","279","1d","27a"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_moving_targets")}return c(d,a),d}(d),a("default",f)}}}),$__System.register("27c",["128","129","1d","1fb"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(a){function e(a){d(this,e),b(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,a,"ordering")}return c(e,a),e}(e),a("default",f)}}}),$__System.register("27d",[],function(a){"use strict";function b(a){return a.find("*[data-rcfinteraction='pelmanism']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("27e",["27f"],function(a){"use strict";function b(a){a.each(function(a,b){c($(b))})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("280",[],function(a){"use strict";function b(a){return a.closest(".pelmanismContainer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("281",["72"],function(a){"use strict";function b(a){return c(a,"firstPick")||$([])}var c;return a("default",b),{setters:[function(a){c=a.getDataFromElement}],execute:function(){}}}),$__System.register("282",["13"],function(a){"use strict";function b(a){return parseInt(c(a,"data-flipbackdelay")||1200)}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("283",["13"],function(a){"use strict";function b(a,b){c(a,"interval",b)}var c;return a("default",b),{setters:[function(a){c=a.setDataAttribute}],execute:function(){}}}),$__System.register("284",["72"],function(a){"use strict";function b(a,b){c(a,"firstPick",b)}var c;return a("default",b),{setters:[function(a){c=a.setDataOnElement}],execute:function(){}}}),$__System.register("285",["13"],function(a){"use strict";function b(a){return c(a,"data-pairclass")||""}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("286",[],function(a){"use strict";function b(a){a.addClass("matched")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("287",["286","288","289","28a"],function(a){"use strict";function b(a){var b=a.closest(".cardContainer");d(a),c(a),f(a),e(a),b.addClass("matchedPair")}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("28b",["28c"],function(a){"use strict";function b(a){var b=c(a),d=a.find(".matched").length;return b.length===d}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("28d",[],function(a){"use strict";function b(a){a.addClass("gameOver")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("28e",[],function(a){"use strict";function b(a,b){a.toggleClass("completed",b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("28f",[],function(a){"use strict";function b(a){a.addClass("unmatched")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("290",["291","28a","28f"],function(a){"use strict";function b(a){var b=c(a);d(b),e(b)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("292",["290","293","294","295","296","297","298","28d","28e"],function(a){"use strict";function b(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];if(d(a),e(a),f(a),j(a),k(a,b),b||c(a),g(a)){var l=i(a);setTimeout(function(){h(a)},l)}}var c,d,e,f,g,h,i,j,k;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){}}}),$__System.register("299",["292","29a","29b","29c"],function(a){"use strict";function b(a){return setInterval(function(){var b=d(a);--b<0&&(b=0),e(a,b),f(a,b),b<1&&c(a,!1)},1e3)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("29d",[],function(a){"use strict";function b(a){return a.hasClass("matched")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("29e",[],function(a){"use strict";function b(a){return a.hasClass("unmatched")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("29f",["13"],function(a){"use strict";function b(a,b){c(a,"data-timeout",b)}var c;return a("default",b),{setters:[function(a){c=a.setDataAttribute}],execute:function(){}}}),$__System.register("2a0",["29d","29e","29f"],function(a){"use strict";function b(a,b,f){var g=arguments.length<=3||void 0===arguments[3]?500:arguments[3];return setTimeout(function(){a.hasClass("gameOver")||(!c(b)&&d(b)&&b.removeClass("flipped unmatched"),!c(f)&&d(f)&&f.removeClass("flipped unmatchd")),e(a,0)},g)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("2a1",["3","280","281","282","283","284","285","287","292","299","2a2","2a3","29a","2a4","2a5","29c","29f","2a6","2a7","28b","28f","2a0"],function(a){"use strict";function b(a){var b=e(a),z=f(b),A=n(b),B=o(b),C=p(b),D=q(b),E=g(b),F=0===A&&B>-1&&0===D,G=r(b),H=c(a)||"",I=c(z)||"",J=void 0;if(a.addClass("flipped"),F&&(C=parseInt(B),s(b,C),D=m(b),h(b,D)),d(z)&&(z=a,I=c(z)||"",G>0&&(clearTimeout(G),G=0,t(b,0)),i(b,z),b.find(".card.unmatched[data-cardid!='"+I+"']").removeClass("unmatched flipped")),H!==I){A++,u(b,A);var K=b.find(".numAttempts");K.html(""+A);var L=j(a),M=j(z);if(L===M)return k(a),k(z),v(b),void(w(b)&&l(b,!0));x(z),x(a),J=a,v(b);var N=E<500?500:E>5e3?5e3:E;G=y(b,z,J,N),t(b,G)}}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.isEmpty},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default},function(a){t=a.default},function(a){u=a.default},function(a){v=a.default},function(a){w=a.default},function(a){x=a.default},function(a){y=a.default}],execute:function(){}}}),$__System.register("2a8",["2a1"],function(a){"use strict";function b(a){a.on("click","*[data-rcfinteraction=pelmanism]:not(.gameOver) .card:not(.flipped)",function(){var a=$(this);c(a)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("2a9",["3","2aa","27d","27e","2a8"],function(a){"use strict";function b(a,b){var h=e(b);a.$activity=b,a.$selector=h,c(h)||(d(h),f(h),g(b))}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("288",[],function(a){"use strict";function b(a){a.removeClass("unmatched")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("28a",[],function(a){"use strict";function b(a){a.addClass("flipped")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("289",[],function(a){"use strict";function b(a){a.addClass("userAnswer")}return a("default",b),{setters:[],execute:function(){}}});$__System.register("297",["13","28c"],function(a){"use strict";function b(a){
var b=d(a);b.each(function(a,b){var d=$(b);c(d,"data-pre-show-answers",a)}),b.tsort("",{attr:"data-cardorder",order:"asc"})}var c,d;return a("default",b),{setters:[function(a){c=a.setDataAttribute},function(a){d=a.default}],execute:function(){}}});$__System.register("2ab",["288","289","291","296","297","28a","28c"],function(a){"use strict";function b(a){f(a)&&g(a);var b=e(a),j=b.filter(".matched"),k=i(a);k.addClass("matchedPair shownAnswer"),c(b),d(j),setTimeout(function(){h(a.find(".playingCard .card"))},100)}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("2ac",["2ab"],function(a){"use strict";function b(a){a.each(function(a,b){var d=$(b);c(d)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("2ad",[],function(a){"use strict";function b(a){a.removeClass("flipped")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("296",["13"],function(a){"use strict";function b(a){return"y"==c(a,"data-reorderanswers")}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("2ae",["291","296","298","2ad","28c"],function(a){"use strict";function b(a){var b=e(a),h=g(a),i=c(a),j=i.filter(":not(.userAnswer)"),k=j.closest(".cardContainer");k.removeClass("matchedPair shownAnswer"),f(j),setTimeout(function(){d(a)&&h.tsort("",{attr:"data-pre-show-answers",order:"asc"})},b+100)}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("2af",["2ae"],function(a){"use strict";function b(a){a.each(function(a,b){var d=$(b);c(d)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("29a",["72"],function(a){"use strict";function b(a){return c(a,"numSeconds")||0}var c;return a("default",b),{setters:[function(a){c=a.getDataFromElement}],execute:function(){}}}),$__System.register("2a2",["72"],function(a){"use strict";function b(a){return c(a,"tries")||0}var c;return a("default",b),{setters:[function(a){c=a.getDataFromElement}],execute:function(){}}}),$__System.register("2b0",["3","2a3","29a","2b1","2a2"],function(a){"use strict";function b(a){var b=c(a)||"",h=d(a),i=e(a),j=h-i,k=f(a),l=k?""+g(a):"0";return{elm:b,type:"composite",markType:"unmarked",value:[{elm:"tries",type:"simple",value:l},{elm:"timetaken",type:"simple",value:k?""+j:"0"}]}}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("2b2",["2b0"],function(a){"use strict";function b(a){return a.map(function(a,b){return c($(b))}).get()}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("2b1",[],function(a){"use strict";function b(a){return a.hasClass("completed")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2b3",["2b1"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,d){var e=$(d);c(e)||(b=!1)}),b}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("2a5",["13"],function(a){"use strict";function b(a){return parseInt(c(a,"data-timeout")||0)}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("2b4",["13"],function(a){"use strict";function b(a){c(a,"data-timeout")}var c;return a("default",b),{setters:[function(a){c=a.removeDataAttributes}],execute:function(){}}}),$__System.register("293",["294","2a4","2a5","2b4"],function(a){"use strict";function b(a){var b=d(a),g=e(a);b>0&&(clearInterval(b),c(a)),g>0&&(clearTimeout(g),f(a))}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("2b5",["293"],function(a){"use strict";function b(a){a.each(function(a,b){var d=$(b);c(d)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("2a7",["72"],function(a){"use strict";function b(a){c(a,"firstPick")}var c;return a("default",b),{setters:[function(a){c=a.removeDataFromElements}],execute:function(){}}}),$__System.register("2b6",[],function(a){"use strict";function b(a,b){var c=a.find(".numAttempts");c.html(""+b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2b7",[],function(a){"use strict";function b(a){return a.find(".cards")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2b8",[],function(a){"use strict";function b(a){return a.find(".cardContainer[data-addedrank='y']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2b9",["13"],function(a){"use strict";function b(a){c(a,"data-addedrank data-rank data-sortindex")}var c;return a("default",b),{setters:[function(a){c=a.removeDataAttributes}],execute:function(){}}}),$__System.register("2ba",[],function(a){"use strict";function b(a,b){a.mmRandomize(".cardContainer",b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2a6",["72"],function(a){"use strict";function b(a,b){c(a,"tries",b)}var c;return a("default",b),{setters:[function(a){c=a.setDataOnElement}],execute:function(){}}}),$__System.register("295",[],function(a){"use strict";function b(a){a.removeClass("hurryUp")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("291",[],function(a){"use strict";function b(a){return a.find(".card")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2bb",[],function(a){"use strict";function b(a){a.removeClass("matched unmatched userAnswer flipped")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2bc",["291","2bb"],function(a){"use strict";function b(a){var b=a.find(".matchedPair"),e=a.find(".playingCard"),f=c(a);b.removeClass("matchedPair"),e.removeClass("playingCard"),d(f)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("2aa",["3","295","2b7","2b8","2b9","2ba","2a6","29c","2bc"],function(a){"use strict";function b(a){var b=""+c();Math.seedrandom(b);var l=e(a),m=f(a);g(m),h(l,""+b),i(a,0),j(a,0),d(a),k(a)}var c,d,e,f,g,h,i,j,k;return a("default",b),{setters:[function(a){c=a.getMillisecondsSinceMidnight},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){}}}),$__System.register("2bd",["13"],function(a){"use strict";function b(a){return c(a,"data-pairs")||""}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("2be",["13"],function(a){"use strict";function b(a){return parseInt(c(a,"data-numpairs")||1)}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("2a3",["13"],function(a){"use strict";function b(a){return parseInt(c(a,"data-timelimit")||-1)}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("2a4",["13"],function(a){"use strict";function b(a){return parseInt(c(a,"interval")||0)}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("294",["13"],function(a){"use strict";function b(a){c(a,"interval")}var c;return a("default",b),{setters:[function(a){c=a.removeDataAttributes}],execute:function(){}}}),$__System.register("2bf",[],function(a){"use strict";function b(a){return a.find(".timer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("29c",["72"],function(a){"use strict";function b(a,b){c(a,"numSeconds",b)}var c;return a("default",b),{setters:[function(a){c=a.setDataOnElement}],execute:function(){}}}),$__System.register("2c0",[],function(a){"use strict";function b(a){a.addClass("hurryUp")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("29b",["3","2bf","29c","2c0"],function(a){"use strict";function b(a,b){var g=d(a);if(!c(g)){var h=parseInt(b/60)%60,i=parseInt(b%60,10);e(a,b),b<11&&f(a),g.text((h<10?"0"+h:h)+":"+(i<10?"0"+i:i))}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("27f",["3","294","2bd","2be","2a3","2a4","29c","29b"],function(a){"use strict";function b(a){var b=e(a),k=f(a),l=g(a),m=h(a),n=b.split("|");if(m>0&&(clearInterval(m),d(a)),l>-1){var o=parseInt(l);i(a,o),j(a,o)}var p=c(n);p=p.splice(0,k),p.forEach(function(b){var c=a.find(".card[data-pairClass='"+b+"']").closest(".cardContainer");c.addClass("playingCard")})}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.shuffleArray},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){}}}),$__System.register("298",["3"],function(a){"use strict";function b(a){var b=a.find(".card .front"),d=b.css("transition-duration")||"500ms";return c(d)}var c;return a("default",b),{setters:[function(a){c=a.getCssMilliseconds}],execute:function(){}}}),$__System.register("28c",[],function(a){"use strict";function b(a){return a.find(".cardContainer.playingCard")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2c1",["291","298","2a6","2a7","2b6","2bb","2aa","27f","28c"],function(a){"use strict";function b(a){var b=c(a),l=k(a),m=d(a);a.removeClass("completed gameOver hurryUp"),e(a,0),f(a),h(b),g(a,0),setTimeout(function(){l.removeClass("playingCard matchedPair shownAnswer"),i(a),j(a)},m+200)}var c,d,e,f,g,h,i,j,k;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){}}}),$__System.register("2c2",["2b5","2c1"],function(a){"use strict";function b(a){c(a),a.each(function(a,b){var c=$(b);d(c)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("2c3",["1c","1d","2a9","2ac","2af","2b2","2b3","2b5","2c2"],function(a){var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){"use strict";k=function(){function a(b){c(this,a);var e=this;d(e,b)}return b(a,[{key:"showAnswers",value:function(){var a=this;e(a.$selector)}},{key:"isComplete",value:function(){var a=this;return h(a.$selector)}},{key:"getUserAnswers",value:function(){var a=this;return g(a.$selector)}},{key:"showUserAnswers",value:function(){var a=this;f(a.$selector)}},{key:"close",value:function(){var a=this;i(a.$selector)}},{key:"reset",value:function(){var a=this;j(a.$selector)}}]),a}(),a("default",k)}}}),$__System.register("2c4",[],function(a){"use strict";function b(a,b,c){a?b.insertBefore(c):b.insertAfter(c)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2c5",["3","13","d","2c6","2c4","2c7"],function(a){"use strict";function b(a){var b=e(a.currentTarget),p=f(b),q=g(p),r=h(p),s=d(p,"data-rcfinteraction")||"ordering",t="positioning"===s,u=b.hasClass("orderingUpControl");if(l(p),!c(r)){var v=function(){var a=t?"":".orderingItem:not(.fixed)";return u?r.prevAll(a).first():r.nextAll(a).first()}();c(v)||(n(u,r,v),t&&r.addClass("dragged"),t||m(q),i(p)&&j(p),k(p)&&o(p))}}var c,d,e,f,g,h,i,j,k,l,m,n,o;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getDataAttribute},function(a){e=a.default},function(a){f=a.getOrderingInteractionFromChildElement,g=a.getOrderingListElementFromOrderingInteraction,h=a.getSelectedItemFromOrderingInteraction,i=a.isOrderingInteractionCapitalised,j=a.makeOrderingInteractionCapitalised,k=a.orderingInteractionHasFeedback,l=a.recordFixedPositions,m=a.resetFixedItems},function(a){n=a.default},function(a){o=a.default}],execute:function(){}}}),$__System.register("2c8",["3","d","2c6"],function(a){"use strict";function b(a){var b=d(a.currentTarget),k=e(b);if(!g(b)){if(h(b))return void j(b);var l=f(k);c(l)||j(l),i(b)}}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.getOrderingInteractionFromChildElement,f=a.getSelectedItemFromOrderingInteraction,g=a.isOrderingItemFixed,h=a.isOrderingItemSelected,i=a.selectOrderingItem,j=a.unselectOrderingItem}],execute:function(){}}}),$__System.register("2c9",["d","2c6","2c5","2c8"],function(a){"use strict";function b(a,b){var h=c(b),i=e(h),j=d(i),k=i.find(".desktop");k.removeClass("desktop"),k.addClass("mobileOverride"),h.on("click","li",g),j.on("click","a",f)}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.getOrderingControlsFromOrderingInteraction,e=a.getOrderingInteractionFromChildElement},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("2ca",["2c6","2c7"],function(a){"use strict";function b(a,b){var k=$(b),l=c(k),m=k;m.sortable({cancel:'li[data-fixed="y"]',placeholder:"draggablePlaceHolder",forcePlaceholderSize:!0,dragOnEmpty:!1,tolerance:"pointer",helper:"original",cursor:"pointer",scrollSpeed:10,axis:l,change:function(){var a=$(this);a.hasClass("positionable")||h(a)},start:function(a,b){var c=$(this);b.placeholder.html("&nbsp;"),g(c)},stop:function(a,b){var c=$(this),g=d(c);$(b.item).addClass("dragged"),e(g)&&f(g),i(g)&&j(g)}})}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.getAxisValueFromOrderingInteraction,d=a.getOrderingInteractionFromChildElement,e=a.isOrderingInteractionCapitalised,f=a.makeOrderingInteractionCapitalised,g=a.recordFixedPositions,h=a.resetFixedItems,i=a.orderingInteractionHasFeedback},function(a){j=a.default}],execute:function(){}}}),$__System.register("2cb",["3","13","2c9","2ca"],function(a){"use strict";function b(a){var b=c("deviceMode")||"desktop",h=d(a),i=e(h,"data-desktopdraggable")||"y",j=e(h,"data-mobiledragdrop")||"n",k="mobile"===b&&"n"===j||"desktop"===b&&"n"===i,l=k?f:g;a.each(l)}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.cookie,d=a.getActivityElementFromChild},function(a){e=a.getDataAttribute},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("2cc",["3"],function(a){"use strict";function b(a,b){var d=b.$activity;d.on("rcf.single.answer",'*[data-rcfinteraction="'+a+'"]',function(d,e){var f=$(d.currentTarget),g=e.elm;if(g==c(f)){var h={answers:[e]};"positioning"===a&&f.find(".orderingItem").addClass("dragged"),b.showAnswers(h)}})}var c;return a("default",b),{setters:[function(a){c=a.getRcfId}],execute:function(){}}}),$__System.register("2cd",["2cb","2cc","2c6"],function(a){"use strict";function b(a,b,n){var o=e(b,n),p=f(o);a.$activity=b,a.$selector=o,a.correctAnswers=a.getUserAnswers(),l(o),g(p),h(p),i(p),k(o),a.originalAnswers=a.getUserAnswers();var q=j(p);a.$orderingSelector=q,d(n,a),c(a.$orderingSelector),m(a)}var c,d,e,f,g,h,i,j,k,l,m;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.getNamedInteractionsFromActivity,f=a.getOrderingListElementFromOrderingInteraction,g=a.setupExampleOrderingInteractions,h=a.randomizeOrderingInteractions,i=a.resetSuffixItems,j=a.filterOutExampleInteractions,k=a.saveCorrectAnswersToDomData,l=a.setMobileAndDesktopStyles,m=a.setupInstanceFeedbackForInteraction}],execute:function(){}}}),$__System.register("2ce",["3","13","2cf"],function(a){function b(a,b){var f=b.value,g=h(null,{});e(f)||f.forEach(function(b,f){b=d(b),e(g[b])&&(g[b]=1),c(a,b,f,g)})}function c(a,b,c,d){var e=f(a,"data-rcfinteraction")||"ordering",h="positioning"===e,i=a.find("[data-ordervalue='"+b+"']");if(h||(i=i.filter("[data-fixed!='y']")),i.length>1){var j=d[b];i=i.eq(j-1),d[b]++}g(i,"data-showanswer",c)}function d(a){return a=a.replace(/'/g,"\\'"),a=a.replace(/"/g,'\\\\"')}var e,f,g,h;return{setters:[function(a){e=a.isEmpty},function(a){f=a.getDataAttribute,g=a.setDataAttribute},function(a){h=a.default}],execute:function(){"use strict";a("default",b)}}}),$__System.register("2d0",["3","13"],function(a){"use strict";function b(a,b){var e=[];e=c(b,e),e.forEach(function(b,c){d(a,b,c)})}function c(a,b){return Array.isArray(a.value[0])?b=a.value[0]:Array.isArray(a.value)&&(b=a.value),b}function d(a,b,c){var d=a.find("[data-rcfid='"+b+"']");e(d)||f(d,"data-showanswer",""+c)}var e,f;return a("default",b),{setters:[function(a){e=a.isEmpty},function(a){f=a.setDataAttribute}],execute:function(){}}}),$__System.register("2d1",["3","13","2c6","2ce","2d0","2c7"],function(a){"use strict";function b(a,b){var o=b.elm;if(!c(o)){var p=a.filter('[data-rcfid="'+o+'"]');if(!c(p)){var q=d(p,"data-rcfinteraction")||"ordering",r=p.find("li"),s=r.closest("ul"),t="positioning"===q;switch(g(p),b.type){case"sequence":l(p,b);break;case"complexordering":m(p,b)}h(s),i(p),j(p)&&k(p),t||f(p),e(p)&&n(p),t&&p.find(".orderingItem").addClass("dragged")}}}var c,d,e,f,g,h,i,j,k,l,m,n;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getDataAttribute},function(a){e=a.orderingInteractionHasFeedback,f=a.resetFixedItemsForShowingAnswers,g=a.resetOrderingInteraction,h=a.resetSuffixItems,i=a.sortOrderingInteractionByShowAnswers,j=a.isOrderingInteractionCapitalised,k=a.makeOrderingInteractionCapitalised},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default}],execute:function(){}}}),$__System.register("2d2",["2d1"],function(a){"use strict";function b(a,b){var d=b.answers;d.forEach(function(b){return c(a,b)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("2d3",["2c6","2c7"],function(a){"use strict";function b(a){a.each(function(a,b){var g=$(b),h=d($(b));c(g),e(h)&&f(h)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.sortOrderingInteractionByUserAnswers,d=a.getOrderingInteractionFromChildElement,e=a.orderingInteractionHasFeedback},function(a){f=a.default}],execute:function(){}}}),$__System.register("2d4",["3"],function(a){"use strict";function b(a,b){var d=a.find(".orderingItem:not(.fixed)"),e=b.value;e.forEach(function(a,e){var f=$(d.get(e)),g=f.find(".mark");if(!c(f)){var h=b.verification&&"1"==b.verification[e]?"correct":"wrong";g.addClass(h)}})}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("2d5",[],function(a){"use strict";function b(a,b){var c=b.verification&&"1"==b.verification[0]?"correct":"wrong",d=a.find(".mark");d.addClass(c)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2d6",["3","2c6","2d4","2d5"],function(a){"use strict";function b(a,b){var g=b.elm;if(!c(g)&&!c(b.verification)){var h=a.filter('[data-rcfid="'+g+'"]');if(!c(h)){var i=d(h);"item"===i?e(h,b):"list"==i&&f(h,b)}}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getMarkTypeFromOrderingInteraction},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("2d7",["2d6"],function(a){"use strict";function b(a,b){var d=b.answers;d.forEach(function(b){return c(a,b)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("2d8",["3","2c6"],function(a){"use strict";function b(a){var b=function(a){return a.find("ul.ordering:not(.positionable, .example) li:not(.fixed)").map(function(a,b){var c=f($(b));return c.replace(/\\'/g,"'").replace(/\\"/g,'"')}).get()},h=e(a).filter(":not(.positionable)");return h.map(function(a,e){var f=$(e),h=b(f);return{elm:c(f),type:d(f),markType:g(f),value:h}}).get()}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.getAnswerTypeFromOrderingInteraction,e=a.filterOutExampleInteractions,f=a.getOrderValueFromOrderItem,g=a.getMarkTypeFromOrderingInteraction}],execute:function(){}}}),$__System.register("2d9",[],function(a){"use strict";function b(a){var b=a.getUserAnswers();return b.some(function(b,c){var d=JSON.stringify(b),e=JSON.stringify(a.originalAnswers[c]);return d!==e})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2da",["2c6","2c7"],function(a){"use strict";function b(a){a.each(function(a,b){c($(b))})}function c(a){var b=d(a),c=f(b);e(b),g(c),h(b),k(b),i(b),j(a),l(b)&&m(b)}var d,e,f,g,h,i,j,k,l,m;return a("default",b),{setters:[function(a){d=a.getOrderingInteractionFromChildElement,e=a.resetOrderingInteractionCapitalise,f=a.getSelectedItemFromOrderingInteraction,g=a.unselectOrderingItem,h=a.sortOrderingInteractionBySortIndex,i=a.resetUserAnswers,j=a.resetSuffixItems,k=a.removeDraggedClass,l=a.orderingInteractionHasFeedback},function(a){m=a.default}],execute:function(){}}}),$__System.register("1fb",["143","1c","1d","2cd","2d2","2d3","2d7","2d8","2d9","2da"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?"ordering":arguments[1];d(this,a),e(this,b,c)}return c(a,[{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"showAnswers",value:function(a){f(this.$selector,a)}},{key:"isComplete",value:function(){return j(this)}},{key:"getUserAnswers",value:function(){return i(this.$selector)}},{key:"showMarkedAnswers",value:function(a){this.clearMarkedAnswers(),h(this.$selector,a)}},{key:"showUserAnswers",value:function(){g(this.$orderingSelector)}},{key:"reset",value:function(){k(this.$orderingSelector)}}]),a}(),a("default",l)}}}),$__System.register("2db",["3","2c6"],function(a){"use strict";function b(a){var b=function(a){return a.find("ul.ordering.positionable:not(.example) li").map(function(a,b){var c=f($(b));return c.replace(/\\'/g,"'").replace(/\\"/g,'"')}).get()},g=e(a);return g.map(function(a,e){var f=$(e),g=b(f);return{elm:c(f),type:"sequence",markType:d(f),value:g}}).get()}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.getMarkTypeFromOrderingInteraction,e=a.filterOutExampleInteractions,f=a.getOrderValueFromOrderItem}],execute:function(){}}}),$__System.register("2dc",["2dd"],function(a){"use strict";function b(a,b,e,f){var g=JSON.parse(b);f.forEach(function(a,b){var f=g.some(function(d){return d.some(c(a,b))});d(e,b,f)})}var c,d;return a("default",b),{setters:[function(a){c=a.compareCurrentAnswerToCorrectAnswer,d=a.setOrderingItemFeedback}],execute:function(){}}}),$__System.register("2dd",["3"],function(a){"use strict";function b(a,b){return function(c,d){return c===a&&b===d}}function c(a,b,c){var e=a.eq(b).filter(":not(.fixed)");d(e)||e.addClass(c?"correctPosition":"incorrectPosition")}var d;return{setters:[function(a){d=a.isEmpty}],execute:function(){a("compareCurrentAnswerToCorrectAnswer",b),a("setOrderingItemFeedback",c)}}}),$__System.register("2de",["2dd"],function(a){"use strict";function b(a,b,e,f){var g=JSON.parse(b);f.forEach(function(a,b){var f=g.some(d(a,b));c(e,b,f)})}var c,d;return a("default",b),{setters:[function(a){c=a.setOrderingItemFeedback,d=a.compareCurrentAnswerToCorrectAnswer}],execute:function(){}}}),$__System.register("2c7",["72","d","2dc","2de"],function(a){"use strict";function b(a){var b=c(a,"correct-answers"),g=a.find("li:not(.suffix)"),h=g.map(function(a,b){return d(b).attr("data-ordervalue")}).get();g.removeClass("correctPosition incorrectPosition"),a.filter(".complex").each(function(a,c){var f=d(c);e(f,b,g,h)}),a.filter(":not(.complex)").each(function(a,c){var e=d(c);f(e,b,g,h)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getDataFromElement},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("2c6",["3","13","d","2c7"],function(a){"use strict";function b(a){return a.filter(":not(.example)")}function c(a){return a.hasClass("complex")?"complexordering":"sequence"}function d(a){return a.find("span.ordering").hasClass("vertical")?"y":""}function e(a){return N(a)}function f(a,b){return a.find('[data-rcfinteraction="'+b+'"]')}function g(a){return a.find(".orderingControls")}function h(a){return a.closest("[data-rcfinteraction]")}function i(a){return a.find("ul.ordering")}function j(a){return O(a,"data-ordervalue")||""}function k(a){return a.filter(".positionable").find("li")}function l(a){return a.find("li.selected")}function m(a){return"y"===O(a,"data-capitalise")}function n(a){return"y"===O(a,"data-fixed")}function o(a){return a.hasClass("selected")}function p(a){a.find("ul").addClass("capitalise")}function q(a){return"y"===O(a,"data-feedback")}function r(a){var b=a,c=Q("<li></li>").prependTo(b),d=b.find('li[data-fixed="y"]:not(.suffix)').detach();d.each(function(a,c){var d=Q(c),e=parseInt(d.data("pos")||0);d.insertAfter(Q("li",b).eq(e))}),z(b),c.remove()}function s(a){var b=a.find("ul"),c=a.find('li[data-fixed="y"]:not(.suffix)');c.tsort("",{attr:"data-fixedpos",order:"asc"}),c.each(function(a,c){var d=Q(c),e=parseInt(O(d,"data-fixedpos"))-1,f=Q("<li></li>").prependTo(b);d.insertAfter(Q("li",b).eq(e)),f.remove()})}function t(a){a.find('li[data-fixed="y"]').each(function(a,b){var c=Q(b);c.data("pos",c.index())})}function u(a){a.find("li").each(function(a,b){P(Q(b),"user-answer",""+a)})}function v(a){a.find("li").each(function(a,b){var c=Q(b),d=O(c,"data-sortindex")||""+a;P(c,"user-answer",d)})}function w(a){a.find("ul").removeClass("capitalise")}function x(a){a.filter(".example").each(function(a,b){var c=Q(b);c.find("li").each(function(a,b){P(Q(b),"data-rank",a)})})}function y(a){var b=a.filter(":not(.positionable)"),c=b;c.mmRandomize("li")}function z(a){a.each(function(a,b){var c=Q(b),d=c.find("li.suffix");d.length>0&&(d.appendTo(c),P(d,"data-sortindex",d.index()))})}function A(a){var b=a.find(".ordering.markable"),c=M("deviceMode")||"desktop";b.removeClass("mobile desktop"),b.addClass(c)}function B(a){a.removeClass("selected")}function C(a){a.addClass("selected")}function D(a){var b=a.find("li");P(b.filter(":not(.fixed)"),"data-showanswer","0"),P(b.filter(".fixed"),"data-showanswer","999")}function E(a){var b=a.find(".dragged");b.removeClass("dragged")}function F(a){I(a,"data-showanswer")}function G(a){I(a,"data-sortindex")}function H(a){I(a,"user-answer")}function I(a,b){var c=a.find("li"),d=c;d.tsort("",{attr:b,order:"asc"})}function J(a){var b=a.find("li");D(a),t(a),u(a),B(b)}function K(a){a.each(function(a,b){var c=Q(b),d=c.attr("data-correct");c.data("correct-answers",d),c.removeAttr("data-correct")})}function L(a){a.$selector.filter('[data-feedback="y"]').each(function(a,b){var c=Q(b);R(c)})}var M,N,O,P,Q,R;return{setters:[function(a){M=a.cookie,N=a.getMarkTypeFromElement},function(a){O=a.getDataAttribute,P=a.setDataAttribute},function(a){Q=a.default},function(a){R=a.default}],execute:function(){a("filterOutExampleInteractions",b),a("getAnswerTypeFromOrderingInteraction",c),a("getAxisValueFromOrderingInteraction",d),a("getMarkTypeFromOrderingInteraction",e),a("getNamedInteractionsFromActivity",f),a("getOrderingControlsFromOrderingInteraction",g),a("getOrderingInteractionFromChildElement",h),a("getOrderingListElementFromOrderingInteraction",i),a("getOrderValueFromOrderItem",j),a("getPositionableOrderingElements",k),a("getSelectedItemFromOrderingInteraction",l),a("isOrderingInteractionCapitalised",m),a("isOrderingItemFixed",n),a("isOrderingItemSelected",o),a("makeOrderingInteractionCapitalised",p),a("orderingInteractionHasFeedback",q),a("randomizeOrderingInteractions",y),a("recordFixedPositions",t),a("recordUserAnswers",u),a("resetOrderingInteraction",J),a("resetOrderingInteractionCapitalise",w),a("resetFixedItems",r),a("resetFixedItemsForShowingAnswers",s),a("resetShowAnswersIndex",D),a("resetSuffixItems",z),a("resetUserAnswers",v),a("removeDraggedClass",E),a("saveCorrectAnswersToDomData",K),a("selectOrderingItem",C),a("setMobileAndDesktopStyles",A),a("setupInstanceFeedbackForInteraction",L),a("setupExampleOrderingInteractions",x),a("sortOrderingInteractionByShowAnswers",F),a("sortOrderingInteractionBySortIndex",G),a("sortOrderingInteractionByUserAnswers",H),a("unselectOrderingItem",B)}}}),$__System.register("2df",["128","129","1c","1d","1fb","2db","2c6"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.sortOrderingInteractionBySortIndex}],execute:function(){"use strict";i=function(a){function f(a){e(this,f),b(Object.getPrototypeOf(f.prototype),"constructor",this).call(this,a,"positioning"),h(this.$orderingSelector),this.originalAnswers=this.getUserAnswers()}return c(f,a),d(f,[{key:"getUserAnswers",value:function(){return g(this.$selector)}}]),f}(f),a("default",i)}}}),$__System.register("2e0",["13"],function(a){"use strict";var b;return{setters:[function(a){b=a.getDataAttribute}],execute:function(){a("default",function(a){return b(a,"data-mode")||""})}}}),$__System.register("2e1",["2e2"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a){var c=b(a);return c.prev(".scene")})}}}),$__System.register("2e3",["3","72","2e2","2e1","2e4","2e5","2e6","2e7","2e8","2e9","2ea","2eb","2ec","2ed"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getDataFromElement},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.showPageEvent},function(a){n=a.default},function(a){o=a.makePreviousNavigationButtonActive,p=a.makeNextNavigationButtonActive,q=a.makeNextNavigationButtonInactive}],execute:function(){a("default",function(a){var r=d(a),s=e(a),t=!b(s),u=l(a),v=c(r,"controller"),w=c(s,"controller"),x=k(),y=!1,z=!1,A=!1,B=!1;if(o(a),x){var C=f(r);if(C&&!g(r))return v.stopPlaying(),h(a,r,u),B=!0,A=!t,t?p(a):q(a),void m(B,z,y,A);C&&n(a,r)}if(!t)return m(B,z,y,!0),void q(a);j(r),i(s),w.startPlaying();var D=x&&f(s)||!b(e(a));D?p(a):q(a),A=!D,m(B,z,y,A)})}}}),$__System.register("2ee",["2e2"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a){var c=b(a);return c.next(".scene")})}}}),$__System.register("2e4",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.hasClass("comprehension")})}}}),$__System.register("2e5",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.hasClass("showQuestions")})}}}),$__System.register("2e6",["2ef"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.getSpeechElementsFromScene,c=a.makeSpeechActive}],execute:function(){a("default",function(a,d,e){var f=$(b(d));a.addClass("showQuestions"),
d.addClass("showQuestions"),"modeListen"!==e&&c(f)})}}}),$__System.register("2e9",["6"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.getRcfOptions}],execute:function(){c="comprehension",a("default",function(){var a=b(),d=a.storyPlayingMode||c,e=d===c;return e})}}}),$__System.register("2f0",["3","72","2e2","2ee","2e4","2e5","2e6","2ec","2e7","2e8","2e9","2f1","2ea","2eb","2ed"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getDataFromElement},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.showPageEvent},function(a){p=a.makeNextNavigationButtonActive,q=a.makePreviousNavigationButtonInactive}],execute:function(){a("default",function(a){var r=d(a),s=e(a),t=l(),u=c(r,"controller"),v=c(s,"controller"),w=n(a),x=b(s),y=!1,z=!1,A=!1;return p(a),t&&f(r)&&g(r)?(i(a,r),o(!1,z,x,y),void u.startPlaying()):x?(u.stopPlaying(),m(a),void q(a)):(t&&f(s)?(A=!0,h(a,s,w),u.stopPlaying()):v.startPlaying(),o(A,z,x,y),j(s),void k(r))})}}}),$__System.register("2f2",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".scene:last")})}}}),$__System.register("2f3",["72","2f4","2f2","2e7","2e8","2eb","2ed"],function(a){"use strict";var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a.getDataFromElement},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.showPageEvent},function(a){h=a.makeNextNavigationButtonActive,i=a.makePreviousNavigationButtonActive}],execute:function(){a("default",function(a){var j=c(a),k=d(a);f(j),e(k),h(a),i(a);var l=!1,m=!1,n=!0,o=!1;g(l,m,n,o);var p=b(k,"controller");p.startPlaying()})}}}),$__System.register("2f5",["2e3","2f0","2f3"],function(a){"use strict";function b(a){a.removeClass("modeListen").removeClass("modeListenRead").addClass("modeRead"),g(a)}function c(a){a.removeClass("modeRead").removeClass("modeListenRead").addClass("modeListen"),g(a)}function d(a){a.removeClass("modeListen").removeClass("modeRead").addClass("modeListenRead"),g(a)}var e,f,g;return{setters:[function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){a("showNextStoryItem",e),a("showPreviousStoryItem",f),a("showFirstSceneFromStory",g),a("setStoryModeToListen",c),a("setStoryModeToRead",b),a("setStoryModeToListenRead",d)}}}),$__System.register("2f6",["2e0","2f7","2f5"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a}],execute:function(){a("default",function(a){var e=c(a),f=b(a);switch(f){case"read":d.setStoryModeToRead(e);break;case"listen":d.setStoryModeToListen(e);break;case"listenRead":d.setStoryModeToListenRead(e);break;case"previous":d.showPreviousStoryItem(e);break;case"next":d.showNextStoryItem(e)}})}}}),$__System.register("2f8",["72","2ef"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.getDataFromElement},function(a){c=a.getSceneFromSpeech}],execute:function(){a("default",function(a){var d=c(a),e=b(d,"controller");e.replayAudio(a)})}}}),$__System.register("2f9",["2f6","2f8"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){a("default",function(a){a.on("click",".navigation .button",function(a){var c=$(a.currentTarget);b(c),a.preventDefault()}),a.on("click",".cover .button",function(a){var c=$(a.currentTarget);b(c),a.preventDefault()}),a.on("click",".frame .speech",function(a){var b=$(a.currentTarget);c(b),a.preventDefault()})})}}}),$__System.register("2fa",[],function(a){"use strict";function b(a){var b=a.find(".sceneAudio, .speechAudio"),c=a.find(".speech");if(0===b.length){var d=a.find(".cover .button.listen, .cover .button.listenRead");d.removeClass("active")}if(0===c.length){var e=a.find(".cover .button.read,.cover .button.listenRead");e.removeClass("active")}}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("2ef",["3","13"],function(a){"use strict";function b(a){return d(a,"data-delayafter")}function c(a){return d(a,"data-delaybefore")}function d(a,b){return parseInt(l(a,b)||0)}function e(a){return a.closest(".scene")}function f(a){return a.find(".speech").get()}function g(a){return a.find(".dev-scenePlayableElement").get()}function h(a){a.addClass("active")}function i(a){a.removeClass("active")}function j(a){return!k(l(a,"data-speechaudio"))}var k,l;return{setters:[function(a){k=a.isEmpty},function(a){l=a.getDataAttribute}],execute:function(){a("getDelayAfterValueFromSpeech",b),a("getDelayBeforeValueFromSpeech",c),a("getSceneFromSpeech",e),a("getSpeechElementsFromScene",f),a("getPlayableElementsFromScene",g),a("makeSpeechActive",h),a("makeSpeechInactive",i),a("speechHasAudio",j)}}}),$__System.register("2fb",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){var b=a.find("audio.storyAudio");b.each(function(a,b){var c=b;$(b).removeClass("playing"),c.pause(),c.currentTime=0})})}}}),$__System.register("2ea",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.hasClass("modeListen")?"modeListen":a.hasClass("modeRead")?"modeRead":(a.hasClass("modeListenRead"),"modeListenRead")})}}}),$__System.register("2f7",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.closest(".story")})}}}),$__System.register("2fc",["3","72","1c","1d","2ef","2fb","2ea","2f7"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;return{setters:[function(a){b=a.dummyPromise,c=a.getRcfId},function(a){d=a.getDataFromElement},function(a){e=a.default},function(a){f=a.default},function(a){g=a.getPlayableElementsFromScene,h=a.getDelayAfterValueFromSpeech,i=a.getDelayBeforeValueFromSpeech,j=a.makeSpeechActive,k=a.makeSpeechInactive,l=a.speechHasAudio},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default}],execute:function(){"use strict";p=0,q=1,r=2,s=0,t=function(){function a(b){f(this,a),this.$scene=b,this.$story=o(b),this.$sequence=g(b),this.position=0,this.phase=0,this.playing=!1,this.promiseResolver=this.promiseResolver.bind(this),this.playCurrentPhase=this.playCurrentPhase.bind(this),this.startPlaying=this.startPlaying.bind(this),this.stopPlaying=this.stopPlaying.bind(this),this.replayAudio=this.replayAudio.bind(this),this.replayAudioWithSequence=this.replayAudioWithSequence.bind(this),this.paused=!1}return e(a,[{key:"startPlaying",value:function(){this.position=0,this.phase=p,this.playing=!0,this.mode=n(this.$story);var a=this.$scene.siblings(".scene");a.each(function(){var a=$(this),b=d(a,"controller");b.stopPlaying()}),this.playCurrentPhase()}},{key:"stopPlaying",value:function(){this.playing=!1,m(this.$scene)}},{key:"promiseResolver",value:function(a,b){a===this.position&&b===this.phase&&this.playing&&(b===r?(this.phase=0,this.position++):this.phase++,a<this.$sequence.length?this.playCurrentPhase():this.playing=!1)}},{key:"getResolver",value:function(a,b,c){return function(){c(a,b)}}},{key:"playCurrentPhase",value:function(){var a=this.getResolver(this.position,this.phase,this.promiseResolver),b=$(this.$sequence[this.position]);switch(this.phase){case p:this.playDelayBefore(b,a);break;case q:this.playSpeech(b,a);break;case r:this.playDelayAfter(b,a)}}},{key:"playDelayBefore",value:function(a,c){var d=void 0;d="modeRead"===this.mode?0:i(a),b(d).then(c)}},{key:"playDelayAfter",value:function(a,c){var d=void 0;d="modeRead"===this.mode?s:h(a),b(d).then(c)}},{key:"playSpeech",value:function(a,d){var e=c(a)||"",f=void 0;if("modeListen"!==this.mode&&j(a),l(a)&&"modeRead"!==this.mode){var g=this.$scene.find('.storyAudio[data-speechid="'+e+'"]');f=this.playAudioElement(g)}else f=b();f.then(d)}},{key:"playAudioElement",value:function(a){var b=$.Deferred();a.addClass("playing"),a.off("ended"),a.on("ended",function(){a.removeClass("playing"),b.resolve()});var c=a[0];return c.play(),b.promise()}},{key:"replayAudioWithSequence",value:function(a){m(this.$scene),this.position=this.$sequence.indexOf(a[0]),this.phase=q;for(var b=this.position+1;b<this.$sequence.length;b++){var c=$(this.$sequence[b]);k(c)}this.playCurrentPhase()}},{key:"replayAudio",value:function(a){if(this.playing)this.replayAudioWithSequence(a);else if(l(a)){var b=c(a)||"",d=this.$scene.find('.storyAudio[data-speechid="'+b+'"]');this.playAudioElement(d)}}},{key:"pauseSequence",value:function(){this.paused=this.playing,this.playing=!1;var a=$(this.$sequence[this.position]);if(this.phase===q&&"modeRead"!==this.mode&&l(a)){var b=c(a)||"",d=this.$scene.find('.storyAudio[data-speechid="'+b+'"]');d[0].pause(),d.removeClass("playing")}}},{key:"resumeSequence",value:function(){if(this.paused){this.playing=!0;var a=$(this.$sequence[this.position]);if(this.phase===q&&"modeRead"!==this.mode&&l(a)){var b=c(a)||"",d=this.$scene.find('.storyAudio[data-speechid="'+b+'"]');d[0].play(),d.addClass("playing")}else this.promiseResolver(this.position,this.phase)}}}]),a}(),a("default",t)}}}),$__System.register("2fd",["72","2fc"],function(a){"use strict";function b(a){a.each(function(){var a=$(this);c(a,"controller",new d(a))})}var c,d;return{setters:[function(a){c=a.setDataOnElement},function(a){d=a.default}],execute:function(){a("default",b)}}}),$__System.register("2eb",["d"],function(a){"use strict";function b(a,b,e,f){var g=c(".activity");g.trigger(d,{hasQuestions:a,isCoverPage:b,isFirstPage:e,isLastPage:f})}var c,d;return{setters:[function(a){c=a.default}],execute:function(){a("showPageEvent",b),d="rcf.story.change.page"}}}),$__System.register("2ed",["2fe","2ff"],function(a){"use strict";function b(a){var b=f(a);b.addClass("active")}function c(a){var b=f(a);b.removeClass("active")}function d(a){var b=g(a);b.addClass("active")}function e(a){var b=g(a);b.removeClass("active")}var f,g;return{setters:[function(a){f=a.default},function(a){g=a.default}],execute:function(){a("makeNextNavigationButtonActive",b),a("makeNextNavigationButtonInactive",c),a("makePreviousNavigationButtonActive",d),a("makePreviousNavigationButtonInactive",e)}}}),$__System.register("2f1",["2e2","2f4","2e7","2e8","2eb","2ed"],function(a){"use strict";var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.showPageEvent},function(a){g=a.makeNextNavigationButtonInactive,h=a.makePreviousNavigationButtonInactive}],execute:function(){a("default",function(a){var i=b(a),j=c(a);e(i),d(j),g(a),h(a);var k=!1,l=!0,m=!1,n=!1;f(k,l,m,n)})}}}),$__System.register("300",["6"],function(a){"use strict";var b;return{setters:[function(a){b=a.getRcfOptions}],execute:function(){a("default",function(a){var c=b();if("ogg"===c.mediaFormats.audio.format){var d=a.find(".hiddenAudio source");d.each(function(a,b){var c=b.src.split(".");c[c.length-1]="ogg",b.src=c.join("."),b.parentElement.load()})}})}}}),$__System.register("301",["300","2f9","2fa","2fd","2f1"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){a("default",function(a,g){a.$activity=g,a.$story=g.find(".story"),a.$cover=g.find(".story .cover"),a.$scenes=g.find(".story .scene"),c(a.$story),d(a.$story),f(a.$story),e(a.$scenes),b(g)})}}}),$__System.register("302",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".scene")})}}}),$__System.register("2f4",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".cover")})}}}),$__System.register("303",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){a.find(".speech.active").removeClass("active")})}}}),$__System.register("2e8",["303"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a){a.addClass("hide"),a.removeClass("active"),b(a)})}}}),$__System.register("2e7",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){a.addClass("active"),a.removeClass("hide")})}}}),$__System.register("2ec",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a,b){a.removeClass("showQuestions"),b.removeClass("showQuestions")})}}}),$__System.register("2fe",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".navigation .button.next")})}}}),$__System.register("2ff",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".navigation .button.back")})}}}),$__System.register("304",[],function(a){"use strict";function b(a){a.removeClass("modeRead"),a.removeClass("modeListen"),a.removeClass("modeListenRead")}return{setters:[],execute:function(){a("default",b)}}}),$__System.register("305",["72"],function(a){"use strict";function b(a){a.each(function(){var a=c($(this),"controller");a.stopPlaying()})}var c;return{setters:[function(a){c=a.getDataFromElement}],execute:function(){a("default",b)}}}),$__System.register("306",["302","304","305","2f4","2e8","2e7","2ec","2fe","2ff"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){a("default",function(a){var k=a.$story,l=e(k),m=b(k),n=j(k),o=i(k);f(m),h(k,m),d(m),g(l),n.removeClass("active"),o.removeClass("active"),c(k)})}}}),$__System.register("307",["72","2e2"],function(a){"use strict";function b(a){var b=d(a),e=c(b,"controller");e.pauseSequence()}var c,d;return{setters:[function(a){c=a.getDataFromElement},function(a){d=a.default}],execute:function(){a("default",b)}}}),$__System.register("2e2",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".scene.active")})}}}),$__System.register("308",["72","2e2"],function(a){"use strict";function b(a){var b=d(a),e=c(b,"controller");e.resumeSequence()}var c,d;return{setters:[function(a){c=a.getDataFromElement},function(a){d=a.default}],execute:function(){a("default",b)}}}),$__System.register("309",["301","306","307","308","1c","1d"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(){function a(c){g(this,a);var d=this;b(d,c)}return f(a,[{key:"clearMarkedAnswers",value:function(){}},{key:"showAnswers",value:function(){}},{key:"isComplete",value:function(){return!1}},{key:"getUserAnswers",value:function(){return[]}},{key:"showMarkedAnswers",value:function(){}},{key:"showUserAnswers",value:function(){}},{key:"reset",value:function(){var a=this;c(a)}},{key:"pause",value:function(){d(this.$story)}},{key:"resume",value:function(){e(this.$story)}}]),a}(),a("default",h)}}}),$__System.registerDynamic("30a",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.VERTICAL_CROSSWORD]=function(){function b(a){this._initialize(a)}return b.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty activity passed vertical crossword interaction constructor";this.$activity=b,this.$selector=this.$activity.find("*[data-rcfinteraction='verticalCrossword']"),this.$typeIns=this.$selector.find("input.vcTypeIn:not(.example)");var c=navigator.userAgent,d=c.match(/iPhone/i)||c.match(/iPod/i)||c.match(/iPad/i);d&&this.$selector.css("-webkit-appearance","caret");var e=this;e.$activity.on("focusin",".vcTypeIn:not(.example)",function(){a(this).select()}).on("focus",".vcTypeIn:not(.example)",function(){a(this).select()}).on("mouseup",".vcTypeIn:not(.example)",function(b){a(this).select(),b.preventDefault()}),this.$typeIns.on("keyup",function(b){var c=!1,d=e.$typeIns.index(this);if(8===b.which&&(a(this).val(""),c=!0),37===b.which&&0===a(this).getCursorPosition()&&(c=!0),c)return--d<0?e.$typeIns.last().focus():e.$typeIns.eq(d).focus(),void b.preventDefault();var f=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,40,45,46,144,145];a.inArray(b.which,f)==-1&&(d=e.$typeIns.index(this),++d>e.$typeIns.length-1?e.$typeIns.first().focus():e.$typeIns.eq(d).focus(),b.stopImmediatePropagation(),b.preventDefault())}),this.$activity.on("rcf.single.answer","*[data-rcfinteraction=verticalCrossword]",function(b,c,d){var e=a(this),f=c.elm;if(f===e.attr("data-rcfid"))for(var g in c.value){var h=c.value[g];h.elm==d&&e.find(".vcLine[data-rcf-wordid='"+d+"'] input.vcTypeIn").each(function(b){a(this).val(h.value.split("")[b])})}})},showAnswers:function(b,c){for(var d in b.answers){var e=b.answers[d],f=e.elm;if(!RCF.Utils.isEmpty(f)){var g=this.$activity.find("*[data-rcfid='"+f+"']");if(!RCF.Utils.isEmpty(g)){g.find("input.vcTypeIn:not(.example)").each(function(){a(this).data("user-answer",a(this).val())});for(var h in e.value){var i=e.value[h],j=i.elm,k=i.value,l=g.find("tr.vcLine[data-rcf-wordid='"+j+"']").find("input.vcTypeIn");c&&i.verification&&"1"==i.verification[0]||!c?l.each(function(b){a(this).val(k.split("")[b])}):l.val("").removeData("user-answer")}}}}},showMarkedAnswers:function(a){var b=a.id,c=this.$activity.attr("id");if(b!=c)throw"invalid JSON marked answers object provided for 'showMarkedAnswers'";this.clearMarkedAnswers();for(var d in a.answers){var e=a.answers[d],f=e.elm;if(!RCF.Utils.isEmpty(f)){var g=this.$selector.filter("[data-rcfid='"+f+"']");if(!RCF.Utils.isEmpty(g))for(var h in e.value){var i=e.value[h],j=i.elm,k="1"==i.verification[0];g.find("tr.vcLine[data-rcf-wordid='"+j+"']").find(".mark").addClass(k?"correct":"wrong")}}}},clearMarkedAnswers:function(){this.$selector.find(".mark").removeClass("correct wrong")},showUserAnswers:function(){this.$typeIns.each(function(){var b=a(this);b.val(b.data("user-answer")||"")})},isComplete:function(){var b=!0;return this.$typeIns.each(function(){a(this).val().length<1&&(b=!1)}),b},getUserAnswers:function(){var b=this.$selector.map(function(){var b=a(this);return{elm:b.attr("data-rcfid"),type:"composite",markType:"item",value:b.find("tr.vcLine:not(.example)").map(function(){return{elm:a(this).attr("data-rcf-wordid"),type:"simple",value:a(this).find("input.vcTypeIn").map(function(){return a(this).val().toUpperCase()}).get().join("")}}).get()}}).get();return b},reset:function(){this.$typeIns.removeData("user-answer").val("")}},b}()}(jQuery,window)}(this),d()}),$__System.register("30b",["128","129","161","1d","30a"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_vertical_crossword")}return c(d,a),d}(d),a("default",f)}}}),$__System.registerDynamic("30c",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.WORDSEARCH]=function(){function b(a){this._initialize(a)}return b.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty Activity passed to WordSearchGrid interaction constructor";this.$activity=b,this.$selector=b.find("*[data-rcfinteraction=wordSearch]");var c="";c=this.$activity.attr("id"),c+=this.$activity.attr("data-seed")||"",Math.seedrandom(c);var d=this;this.$selector.each(function(){var b=a(this),e=b.find(".wordSearchGridContainer"),f=b.find(".rcfWordSearchGridChosenWords .wordSearchWords"),g=b.attr("data-gridsize"),h=b.attr("data-longestword"),i=b.attr("data-usediagonal"),j=b.attr("data-usevertical"),k=b.attr("data-usereverse"),l=b.attr("data-words"),m="y"===b.attr("data-interactive"),n=!!g&&parseInt(g)||!!h&&parseInt(h)||10,o=new RCF.Handlers.WordSearch.Grid(i,j),p=new RCF.Handlers.WordSearch.WordList(k);p.loadWords(l);var q=parseInt(!!h&&parseInt(h)||p.words.sort(function(a,b){return b.originalValue.length-a.originalValue.length})[0].value.length),r=0;for(n<q&&(n=q+2);r<8;)if(o.validGrid=!0,o.initializeGrid(n),o.fillGrid(p),!o.validGrid&&r<5)Math.seedrandom(c+"_retry_"+r),r++,r%2===0&&n++;else{if(o.validGrid)break;r++}var s=o.getHTML();e.append(s).data("grid",o).data("wordList",p),b.removeAttr("data-words");var t=new RCF.Handlers.WordSearch.SelectionHandler(e);if(e.data("selectionHandler",t),m){var u=o.cells;e.find("tr").each(function(b){var c=a(this);c.find("td").each(function(c){var d=u[b][c],e=a(this);e.data("cell",d)})}),e.on("rcf.selectionChanged",function(a,b){d._renderSelections(f,b)}),f.on("mouseover",".wordSearchSelection",function(){var b=a(this),c=b.attr("data-selid"),d=t.getSelection(c);d&&d.cells&&(d.cells.addClass("ws-glowing"),setTimeout(function(){d.cells.removeClass("ws-glowing")},400))}),f.on("click",".removeWordListItem",function(b){var c=a(this),d=c.closest(".wordSearchSelection").attr("data-selid");return t.removeSelection(d),a(this).closest("li").fadeOut(200,function(){a(this).remove()}),b.preventDefault(),b.stopPropagation(),b.preventDefault(),!1})}}),this.$activity.on("rcf.single.answer","*[data-rcfInteraction=wordSearch]",function(b,c,e){var f=a(this),g=c.elm;if(g===f.attr("data-rcfid")){for(var h=[],i=null,j=null,k=f.find(".wordSearchWords"),l=f.find(".wordSearchGridContainer").data("selectionHandler"),m=c.value[e],n=0;n<e+1;n++)m=c.value[n],i=f.find(".rcfWSCell[data-words*='|"+m+"|']"),j="showAnswers_"+n,i.each(function(){var b=a(this),c=b.data("selectionID")||"";c.indexOf("|"+j+"|")<0&&(c+="|"+j+"|"),b.data("selectionID",c)}),h.push({id:"showAnswers_"+n,word:m,cells:i});"y"==f.attr("data-interactive")&&d._renderSelections(k,h),l.setSelections(h)}})},_renderSelections:function(a,b){var c="";for(var d in b)c+="<li><span data-selid='"+b[d].id+"' data-item='"+b[d].word+"' class='wordSearchSelection markable'><span>"+b[d].word+"</span><span class='mark'>    </span><a class='removeWordListItem'>x</a></span></span></li>";a.html(c)},_showGridAnswers:function(b,c,d,e){var f=[],g=b.find(".wordSearchGridContainer").data("selectionHandler");g.setUserSelections(a.extend(!0,[],g.selectedWords)),g.clearHighlighting();for(var h in c.value){var i=c.value[h];if(!d||d&&"1"==c.verification[h]){var j=b.find(".rcfWSCell[data-words*='|"+i+"|']"),k="showAnswers_"+h;j.each(function(){var b=a(this),c=b.data("selectionID")||"";c.indexOf("|"+k+"|")<0&&(c+="|"+k+"|"),b.data("selectionID",c)}),f.push({id:"showAnswers_"+h,word:i,cells:j})}}e&&this._renderSelections(b.find(".wordSearchWords"),f),g.setSelections(f)},showAnswers:function(a,b){for(var c in a.answers){var d=a.answers[c],e=d.elm;if(!RCF.Utils.isEmpty(e)){var f=this.$activity.find("*[data-rcfinteraction='wordSearch'][data-rcfid='"+e+"']");RCF.Utils.isEmpty(f)||this._showGridAnswers(f,d,b,"y"===f.attr("data-interactive"))}}},showMarkedAnswers:function(a){this.clearMarkedAnswers();for(var b in a.answers){var c=a.answers[b],d=c.elm;if(!RCF.Utils.isEmpty(d)&&!RCF.Utils.isEmpty(c.verification)){var e=this.$selector.filter("[data-rcfid='"+d+"']");if(!RCF.Utils.isEmpty(e)&&"y"===e.attr("data-interactive"))for(var f in c.value){var g=c.value[f],h="1"==c.verification[f];e.find(".wordSearchSelection[data-item='"+g+"']").find(".mark").addClass(h?"correct":"wrong")}}}},clearMarkedAnswers:function(){this.$selector.find(".mark").removeClass("correct wrong")},showUserAnswers:function(){var b=this;this.$selector.each(function(){var c=a(this),d=c.find(".wordSearchGridContainer"),e=c.find(".wordSearchWords"),f=d.data("selectionHandler"),g=f.userSelections;g&&(f.clearHighlighting(),f.setSelections(g),b._renderSelections(e,g))})},isComplete:function(){var b=!0;return this.$selector.each(function(){var c=a(this),d="y"===c.attr("data-interactive");if(d){for(var e=0,f=c.find(".wordSearchGridContainer").data("wordList"),g=0;g<f.words.length;g++){var h=f.words[g];h.example||e++}var i=c.find(".wordsContainer .wordSearchWords li");e!==i.length&&(b=!1)}}),b},getUserAnswers:function(){var b=this.$selector.map(function(){var b=a(this),c=b.find(".wordSearchGridContainer"),d="y"===b.attr("data-interactive"),e=c.data("selectionHandler")||{userSelections:null},f=d?function(){return e&&e.selectedWords?e.selectedWords.map(function(a){return a.word}):[]}():[];return{elm:b.attr("data-rcfid"),type:"list",marked:d?"item":"unmarked",value:f}}).get();return b},reset:function(){this.$selector.each(function(){var b=a(this),c=b.find(".wordSearchGridContainer"),d=c.data("selectionHandler");b.removeData("selectionID"),b.find(".isWord").removeClass("showAnswer"),b.find(".wordSearchWords li").remove(),d&&(d.clearUserSelections(),d.clearSelections())})}},b}()}(jQuery,window)}(this),d()}),$__System.register("30d",["128","129","161","1d","30c"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_wordsearch")}return c(d,a),d}(d),a("default",f)}}}),$__System.registerDynamic("30e",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.WORDSNAKE]=function(){function b(a){this._initialize(a)}return b.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty Activity passed into the interaction constructor (TextInput)";this.$activity=b,this.$selector=this.$activity.find("*[data-rcfinteraction=wordsnake]"),this.deviceMode=RCF.Utils.cookie("deviceMode"),RCF.Utils.isEmpty(this.deviceMode)&&(this.deviceMode="desktop");var c="desktop"!=this.deviceMode,d=function(a,b){for(var c=a.data("selectionUID")||0,d=!1,e="",f=b.first().prev(),g=b.last().next();!d;)e="highlight"+c++%5,f.length>0?f.hasClass(e)||(g.length>0?g.hasClass(e)||(d=!0):d=!0):g.length>0?g.hasClass(e)||(d=!0):d=!0;return a.data("selectionUID",c),e},e=function(b){var c=b.data("selectionUID")||0,e=b.find("li.ui-selecting");if(e.filter(".rangeMade").each(function(){var c=a(this),d=c.data("selectedRange");d&&b.find(d).removeClass("highlight0 highlight1 highlight2 highlight3 highlight4 rangeMade").removeAttr("data-selid").removeData("selectedRange")}),e.length>1){c++;var f=d(b,e),g=e.map(function(){return"#"+this.id}).get().join(",");e.data("selectedRange",g).removeClass("ui-selecting").addClass("rangeMade").removeAttr("data-selid").attr("data-selid","selection_"+c).addClass(f)}else e.removeClass("ui-selecting");b.removeData("startElem").removeAttr("selecting")},f=function(a,b,c){var d=a.find("li"),e=d.index(b),f=d.index(c),g=Math.min(e,f),h=Math.max(e,f)+1,i=d.slice(g,h),j=i.filter(".example");if(d.removeClass("ui-selecting"),j.length>0){var k=d.index(j.first()),l=d.index(j.last());e<k?h=k:g=l+1,i=d.slice(g,h)}i.addClass("ui-selecting")};this.$selector.filter("[data-interactive=y]").each(function(){var b=a(this),d=b.find(".wordSnake"),g=!0,h=this;c&&(g=!1),g&&(g="y"===b.attr("data-draggable")),g?(b.on("mousedown",".wordSnake li.letter:not(.example)",function(b){1===b.which&&(d.attr("selecting","y").data("startElem",a(this)),a(this).addClass("ui-selecting")),h.mouseDown=!0}),b.on("mousemove",".wordSnake li.letter:not(.example)",function(){h.mouseDown&&f(d,d.data("startElem"),a(this))}),b.on("rcf.stopselecting",".wordSnake",function(){h.mouseDown=!1,e(d)}),b.on("mouseup",".wordSnake li",function(a){h.mouseDown&&e(d),a.preventDefault()}),a(document).on("mouseup",function(){h.mouseDown=!1,e(d)})):(b.addClass("mobile"),b.on("click",".wordSnake li.letter:not(.example)",function(){var b="y"===d.attr("selecting"),c=null,g=null;b?(c=d.data("startElem"),g=a(this),d.removeAttr("selecting").removeData("startElem"),f(d,c,g),e(d),c=null,g=null):(c=a(this),c.addClass("ui-selecting"),d.attr("selecting","y").data("startElem",c))}))}),a(document).on("mouseup",function(){a(".wordSnake[selecting='y']").length>0&&a(".wordSnake[selecting='y']").trigger("rcf.stopselecting")});var g=0;this.$activity.on("rcf.single.answer","*[data-rcfinteraction=wordsnake]",function(b,c,d){var e=a(this),f=c.elm;if(f===e.attr("data-rcfid")){g=d%5;var h=c.value[d],i=a.map(h.split(","),function(a){return"#"+a}).join(",");e.find(i).attr("data-selid","selection_"+d).attr("class","letter rangeMade highlight"+g)}})},showAnswers:function(b,c){for(var d in b.answers){var e=b.answers[d],f=e.elm;if(!RCF.Utils.isEmpty(f)){var g=this.$selector.filter("[data-rcfid='"+f+"']");if(!RCF.Utils.isEmpty(g)){g.find("li.letter").each(function(){var b=a(this);b.data("userSelection",{className:b.attr("class"),selectionID:b.attr("data-selid")})}),g.removeData("startElem").removeAttr("selecting").find("li.letter:not(.example)").attr("class","letter").removeAttr("data-selid").removeData("selectedRange"),g.find("li.letter[data-distractor=y]").addClass("distractor");for(var h in e.value){var i=e.value[h],j=a.map(i.split(","),function(a){return"#"+a}).join(","),k=0;c?"1"==e.verification[h]&&(k=h%5,g.find(j).attr("data-selid","selection_"+h).attr("class","letter rangeMade highlight"+k)):(k=h%5,g.find(j).attr("data-selid","selection_"+h).attr("class","letter rangeMade highlight"+k))}}}}},showMarkedAnswers:function(b){this.clearMarkedAnswers();for(var c in b.answers){var d=b.answers[c],e=d.elm;if(!RCF.Utils.isEmpty(e)&&!RCF.Utils.isEmpty(d.verification)){var f=this.$selector.filter("[data-rcfid="+e+"]");if(!RCF.Utils.isEmpty(f))for(var g in d.value){var h=d.value[g],i=a.map(h.split(","),function(a){return"#"+a}),j=i.length,k=f.find(i[j-1]),l="1"==d.verification[g]?"correct":"wrong";k.length>0&&a("<span class='markContext'><span class='mark "+l+"'></span></span>").appendTo(k)}}}},showUserAnswers:function(){this.$selector.find("li.letter").each(function(){var b=a(this),c=b.data("userSelection")||{className:"letter",selectionID:""};b.attr("class",c.className),b.attr("data-selid",c.selectionID)})},isComplete:function(){var b=!0;return this.$selector.filter("[data-interactive='y']:not(.example)").each(function(){var c=a(this).find(".wordSnake"),d=c.find(".letter.distractor").length>0,e=c.find(".letter:not(.example,.distractor)"),f=e.filter(".rangeMade:not(.distractor)");d?0===f.length&&(b=!1):e.length!==f.length&&(b=!1)}),b},getUserAnswers:function(){var b=this.$selector.filter("[data-interactive=y]:not(.example)").map(function(){var b=a(this),c=a(this).find(".wordSnake"),d="",e=[],f=[],g=c.find(".rangeMade");return g.each(function(b){var c=a(this),h=c.attr("data-selid");""===d&&(d=h),h!==d&&(f.push(e.join(",").replace(/#/g,"")),d=h,e=[]),e.push(this.id),b===g.length-1&&f.push(e.join(",").replace(/#/g,""))}),{elm:b.attr("data-rcfid"),type:"list",value:f}}).get();return b},clearMarkedAnswers:function(){this.$selector.find(".markContext").remove()},close:function(){a(document).off("mouseup")},reset:function(){var a=this.$selector.find(".wordSnake:not(.example)");a.removeData("startElem").removeAttr("selecting").find("li.letter:not(.example)").removeData("userSelection").attr("class","letter").removeAttr("data-selid").removeData("selectedRange"),a.find("li.letter[data-distractor=y]").addClass("distractor")}
},b}()}(jQuery,window)}(this),d()}),$__System.register("30f",["128","129","161","1d","30e"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_wordsnake")}return c(d,a),d}(d),a("default",f)}}}),$__System.register("310",["128","129","311","1d"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f="wordInsert",g=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,f)}return c(d,a),d}(d),a("default",g)}}}),$__System.register("312",["160","196","222","235","255","261","278","309","310","311","313","314","315","316","317","318","14b","15e","1a9","1ab","1ad","1b0","1d6","1f0","1f9","1fa","20a","20c","27b","27c","2c3","2df","30b","30d","30f"],function(a){"use strict";function b(a,b){switch(b){case"rcf_categorise_checkboxList":return new s(a);case"rcf_categorise_checkboxTable":return new t(a);case"rcf_categorise_draggable":return new d(a);case"rcf_categorise_dropDown":return new c(a);case"rcf_categorise_itemSelectList":return new u(a);case"rcf_categorise_radioList":return new v(a);case"rcf_categorise_radioTable":return new w(a);case"rcf_categorise_selectable":return new x(a);case"rcf_categorise_touchable":return new d(a);case"rcf_checkbox_item_selectable":return new z(a);case"rcf_checkboxlist":return new y(a);case"rcf_colouring":return new A(a);case"rcf_complex_ordering":return new B(a);case"rcf_composite_scene":return new C(a);case"rcf_crossword":return new D(a);case"rcf_dropdown":return new m(a);case"rcf_droppables":return new e(a);case"rcf_listen_and_colour":return new f(a);case"rcf_locating":return new g(a);case"rcf_matching":return new i(a);case"rcf_moving_targets":return new E(a);case"rcf_ordering":return new F(a);case"rcf_pelmanism":return new G(a);case"rcf_positioning":return new H(a);case"rcf_radio_item_selectable":return new o(a);case"rcf_radiolist":return new n(a);case"rcf_selectable":return new p(a);case"rcf_story":return new j(a);case"rcf_typein_group":return new r(a);case"rcf_typein":return new q(a);case"rcf_vertical_crossword":return new I(a);case"rcf_wordsearch":return new J(a);case"rcf_wordsnake":return new K(a);case"rcf_sentence_builder":return new l(a);case"rcf_wordinsert":return new k(a)}var L=h.RCF.Interactions.Marked[b];if(void 0!==L)return new L(a)}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.default},function(a){s=a.default},function(a){t=a.default},function(a){u=a.default},function(a){v=a.default},function(a){w=a.default},function(a){x=a.default},function(a){y=a.default},function(a){z=a.default},function(a){A=a.default},function(a){B=a.default},function(a){C=a.default},function(a){D=a.default},function(a){E=a.default},function(a){F=a.default},function(a){G=a.default},function(a){H=a.default},function(a){I=a.default},function(a){J=a.default},function(a){K=a.default}],execute:function(){a("create",b)}}}),$__System.register("319",["261","312","31a"],function(a){"use strict";function b(a,b){function f(e){if(e.trim().length>0){var f=d.create(a,e);void 0===f?c.alert("No RCF interaction defined for : "+e+" in activity : "+b):h.push(f)}}var g=e(a);if(0!=g.length){var h=[];try{g.forEach(f)}catch(a){c.alert("Error creating marked interactions ["+g+"]\n\n"+a)}return h}}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.getInteractionNamesFromActivityAttributes}],execute:function(){a("create",b)}}}),$__System.register("31b",["3","13"],function(a){"use strict";function b(a){if(a){var b=d.getDataAttribute(a,"data-itemBasedInteractions")||"";return b.length>0?c.distinctArray(b.trim().split(" ")):[]}}var c,d;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){a("getItemBasedInteractionsFromActivity",b)}}}),$__System.register("31c",[],function(a){"use strict";function b(a){return a.find("select.example")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("31d",["3","31e"],function(a){"use strict";function b(a){var b=c(a),e=a.find(".dev-example-answer"),f=d(b);if(e.prop("selected",!0),f){var g=a;g.selectmenu("refresh")}}var c,d;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.default}],execute:function(){}}}),$__System.register("31f",["d","31c","31d"],function(a){"use strict";function b(a){var b=d(a);b.on({change:function(a){var b=c(a.currentTarget);e(b)},selectmenuchange:function(a){var b=c(a.currentTarget);e(b)}})}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("320",["3","31f","31e"],function(a){"use strict";function b(a,b){var f=e(a);d(b),a.on("rcf.single.answer","*[data-rcfinteraction=dropDown]",function(a,b){var d=$(a.currentTarget),e=b.elm;if(e===c(d)){var g=d.find("select:not(.example)");g.data("user-answer",g.val()).val(b.value),f&&g.selectmenu("refresh")}})}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("321",[],function(a){"use strict";function b(a){return a.find('*[data-rcfinteraction="dropDown"]')}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("322",[],function(a){"use strict";function b(a){var b=a.find("select");b.selectmenu({width:null})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("323",["3","320","321","322","324","31e"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty activity passed to DropDown constructor";if(a.$activity=b,a.$selector=e(b),!c(a.$selector)){var i=h(b);i&&f(a.$selector),g(a.$selector),d(a.$activity,a.$selector),a.$selector=a.$selector.filter(":not(.example)")}}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("325",[],function(a){"use strict";function b(a,b){return b?a.verification&&"1"==a.verification[0]?a.value:"":$.isArray(a.value)?a.value[0]:a.value}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("326",[],function(a){"use strict";function b(a){a.data("user-answer",a.val())}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("327",["3","325","326","328","31e"],function(a){"use strict";function b(a,b,i){var j=b.elm;if(!c(j)){var k=d(a),l=h(k),m=g(a,j);if(!c(m)){var n=m.find("select:not(.example)"),o="";o=e(b,i),f(n),o.length<1?n.prop("selectedIndex",-1):n.val(o),l&&n.selectmenu("refresh")}}}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty,d=a.getActivityElementFromChild},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("329",["327"],function(a){"use strict";function b(a,b,d){for(var e in b.answers)c(a,b.answers[e],d)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("32a",[],function(a){"use strict";function b(a){return a.data("user-answer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("32b",["3","32a","31e"],function(a){"use strict";function b(a){var b=d(a),g=f(b);a.each(function(a,b){var d=$(b),f=d.find("select:not(.example)");f.each(function(a,b){var d=$(b),f=e(d);c(f)?(d.prop("selectedIndex",-1),d.val(""),g&&d.closest(".dropDown").find(".ui-selectmenu-text").text("")):(d.val(f),g&&d.selectmenu("refresh"))})})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty,d=a.getActivityElementFromChild},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("31e",["13"],function(a){"use strict";function b(a){return"y"===c(a,"data-dropdownListOutput")}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("324",["3","31e"],function(a){"use strict";function b(a){var b=c(a),e=d(b),f=a.find("select:not(.example)");if(f.removeData("user-answer"),f.prop("selectedIndex",-1),e){f.selectmenu("refresh");var g=a.filter(":not(.example)"),h=g.find(".ui-selectmenu-text");h.text("")}}var c,d;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.default}],execute:function(){}}}),$__System.register("313",["143","323","324","329","1c","1d","32b","32c","32d","32e"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){g(this,a),c(this,b)}return f(a,[{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"showAnswers",value:function(a,b){e(this.$selector,a,b)}},{key:"isComplete",value:function(){return k(this.$selector)}},{key:"getUserAnswers",value:function(){return j(this.$selector)}},{key:"showMarkedAnswers",value:function(a){i(this.$selector,a)}},{key:"showUserAnswers",value:function(){h(this.$selector)}},{key:"reset",value:function(){d(this.$selector)}}]),a}(),a("default",l)}}}),$__System.register("32d",["d"],function(a){"use strict";function b(a){return a.map(function(a,b){var d=c(b);return{elm:d.attr("data-rcfid"),type:"simple",value:d.filter(":not(.example)").find("select").val()||""}}).get()}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("32f",["330","32d"],function(a){"use strict";function b(a,b){var e=c(a,b);return d(e)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("328",[],function(a){"use strict";function b(a,b){return a.filter("[data-rcfid='"+b+"']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("331",[],function(a){"use strict";function b(a){return a.find(".mark")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("32c",["3","143","328","331"],function(a){"use strict";function b(a,b){d(a);for(var g in b.answers){var h=b.answers[g],i=h.elm;if(!c(i)&&!c(h.verification)){var j=e(a,i);if(!c(j)){var k="1"==h.verification[0],l=f(j);l.addClass(k?"correct":"wrong")}}}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("332",["330","32c"],function(a){"use strict";function b(a,b,e){var f=c(a,e);d(f,b)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("32e",[],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,c){var d=$(c).find("select");d.prop("selectedIndex")<0&&(b=!1)}),b}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("333",["330","32e"],function(a){"use strict";function b(a,b){var e=c(a,b);return d(e)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("334",["128","129","313","332","333","1c","1d","32f"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function(a){function d(){h(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}return c(d,a),g(d,[{key:"getUserAnswers",value:function(a){return a?i(this.$selector,a):b(Object.getPrototypeOf(d.prototype),"getUserAnswers",this).call(this)}},{key:"showMarkedAnswers",value:function(a,b){e(this.$selector,a,b)}},{key:"isComplete",value:function(a){return f(this.$selector,a)}}]),d}(d),a("default",j)}}}),$__System.register("335",[],function(a){"use strict";function b(a){return a.find("*[data-rcfinteraction='markedTextInput']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("336",[],function(a){"use strict";function b(a,b){["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing","word-spacing","text-indent","padding","margin"].forEach(function(c){a.css(c,b.css(c))})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("337",[],function(a){"use strict";function b(a,b){var c=b.width();a.css("width",c)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("338",["3","13","336","337","d"],function(a){"use strict";function b(a){var b=c(a);return a.each(function(a,c){var h=g(c),i=d(h,"data-longestString")||"WWWWWWW",j=g('<span class="text markedTextInput offscreenInput">'+i+"W</span>");j.appendTo(b),e(j,h),f(h,j)}),b.find(".offscreenInput")}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.getDataAttribute},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("339",[],function(a){"use strict";function b(a){a.remove()}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("33a",["3","13","d","33b"],function(a){"use strict";function b(a){var b=e("<textarea>"),g={id:d(a,"id")||"",autocomplete:"false",autocapitalize:"off",spellcheck:"false",autocorrect:"off","data-longestitem":d(a,"data-longestitem")||"","data-casesensitive":d(a,"data-casesensitive")||"","data-acceptable":d(a,"data-acceptable")||"",class:"rcfTextArea "+(d(a,"class")||"")},h=a.val()||"";b.attr(g),b.val(h),c(h)||f(b),a.replaceWith(b)}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.getDataAttribute},function(a){e=a.default},function(a){f=a.setPopulated}],execute:function(){}}}),$__System.register("33c",["3","13","338","339","d","33a"],function(a){"use strict";function b(a){var b=c(a),k=g(a),l=d(k);h(k);var m=a.filter('[data-resize="activity"]');m.css("width",l),f(a,"data-longestString");var n="mobile"===e("deviceMode");!n||l<b.width()-20||a.each(function(a,b){var c=i(b);j(c)})}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild,d=a.getLargestWidthFromSelector,e=a.cookie},function(a){f=a.removeDataAttributes},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){}}}),$__System.register("33d",[],function(a){"use strict";function b(a){return a.find("input.markedTextInput")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("33e",[],function(a){"use strict";function b(a){a.on("focusout",".markedTextInput",function(){var a=$(this),b=a.val().replace(/\s+$/,"");a.val(b)})}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("33f",["33b"],function(a){"use strict";function b(a){a.on("input keyup change paste",".markedTextInput",function(){var a=$(this),b=a.val();b.length>0?c(a):d(a)})}var c,d;return a("default",b),{setters:[function(a){c=a.setPopulated,d=a.clearPopulated}],execute:function(){}}}),$__System.register("340",["3","141","341","33b"],function(a){"use strict";function b(a){a.on("rcf.single.answer",'*[data-rcfinteraction="markedTextInput"]',function(a,b){var i=$(this),j=b.elm,k=c(i)||"";if(j===k){var l=f(i),m=Array.isArray(b.value)?b.value[0]:b.value;e(i,m),l.val(m),d(m)?h(l):g(l)}})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.isEmpty},function(a){e=a.storeUserAnswer},function(a){f=a.default},function(a){g=a.setPopulated,h=a.clearPopulated}],execute:function(){}}}),$__System.register("342",["340","33e","33f"],function(a){"use strict";function b(a){d(a),e(a),c(a)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("343",[],function(a){"use strict";function b(a){var b=window.top.navigator.userAgent,c=!!(b.match(/iPhone/i)||b.match(/iPod/i)||b.match(/iPad/i));c&&a.css("-webkit-appearance","caret")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("344",["335","342","343","33c","33d","16c"],function(a){"use strict";function b(a,b){var i=c(b);e(i);var j=g(i);f(j),d(b),a.$activity=b,a.$selector=h(i)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.filterOutExamples}],execute:function(){}}}),$__System.register("345",["3","34","141","341","33b"],function(a){"use strict";function b(a,b,i){var j=b.elm;if(!c(j)){var k=a.filter('[data-rcfinteraction=markedTextInput][data-rcfid="'+j+'"]');if(!c(k)){var l=f(k);if(!c(l)){var m=Array.isArray(b.value)?b.value[0]:b.value,n=l.val()||"",o=!!b.verification&&"1"==b.verification[0];e(k,n),i?l.val(o?m:""):l.val(m),m.length>0?g(l):h(l),d(l)}}}}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.storeUserAnswer},function(a){f=a.default},function(a){g=a.setPopulated,h=a.clearPopulated}],execute:function(){}}}),$__System.register("346",["3","345"],function(a){"use strict";function b(a,b,e){c(b)||c(b.answers)||b.answers.forEach(function(b){d(a,b,e)})}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("347",["3"],function(a){"use strict";function b(a,b){var d=b.elm;if(!c(d)&&!c(b.verification)){var e=a.filter('[data-rcfid="'+d+'"]');if(!c(e)){var f="1"==b.verification[0]?"correct":"wrong";e.find(".mark").addClass(f)}}}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("348",["3","143","347"],function(a){"use strict";function b(a,b){d(a),c(b.answers)||b.answers.forEach(function(b){e(a,b)})}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("349",["3","34","141","341","33b"],function(a){"use strict";function b(a){var b=f(a),i=e(a)||"";b.val(i),d(b),c(i)?h(b):g(b)}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.getUserAnswer},function(a){f=a.default},function(a){g=a.setPopulated,h=a.clearPopulated}],execute:function(){}}}),$__System.register("34a",["349","d"],function(a){"use strict";function b(a){a.each(function(a,b){c(d(b))})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("34b",["3","341"],function(a){"use strict";function b(a){var b=f(a),g=b.val()||"",h=c(g),i=d(a)||"";return{elm:i,type:"simple",value:e(h)}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.trimExcessSpaces,d=a.getRcfId,e=a.fixQuotables},function(a){f=a.default}],execute:function(){}}}),$__System.register("34c",["d","34b"],function(a){"use strict";function b(a){return a.map(function(a,b){return d(c(b))}).get()}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("33b",[],function(a){"use strict";function b(a){a.addClass("populated")}function c(a){a.removeClass("populated")}return{setters:[],execute:function(){a("setPopulated",b),a("clearPopulated",c)}}}),$__System.register("33",[],function(a){"use strict";function b(a){a.val("")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("34",[],function(a){"use strict";function b(a){a.trigger("autosize.resize")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("34d",["33","34","141","341","33b"],function(a){"use strict";function b(a){var b=f(a);c(b),g(b),d(b),e(a)}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.clearUserAnswer},function(a){f=a.default},function(a){g=a.clearPopulated}],execute:function(){}}}),$__System.register("341",[],function(a){"use strict";function b(a){return a.find(".markedTextInput")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("34e",["341","d"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,e){var f=c(d(e)),g=f.val();g.length<1&&(b=!1)}),b}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("317",["143","344","346","348","1c","1d","34a","34c","34d","34e"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){g(this,a);var d=this;c(d,b)}return f(a,[{key:"showAnswers",value:function(a,b){var c=this;d(c.$selector,a,b)}},{key:"showMarkedAnswers",value:function(a){var b=this;e(b.$selector,a)}},{key:"showUserAnswers",value:function(){var a=this;h(a.$selector)}},{key:"isComplete",value:function(){var a=this;return k(a.$selector)}},{key:"getUserAnswers",value:function(){var a=this;return i(a.$selector)}},{key:"clearMarkedAnswers",value:function(){var a=this;b(a.$selector)}},{key:"reset",value:function(){var a=this;j(a.$selector)}}]),a}(),a("default",l)}}}),$__System.register("34f",["3","330"],function(a){"use strict";function b(a,b){var f=e(a,b);return f.map(function(a,b){var e=$(b),f=e.find(".markedTextInput").val()||"";return f=f.length>0?d(f):"",{elm:e.attr("data-rcfid"),type:"simple",value:c(f)}}).get()}var c,d,e;return a("default",b),{setters:[function(a){c=a.fixQuotables,d=a.trimExcessSpaces},function(a){e=a.default}],execute:function(){}}}),$__System.register("350",["3","143","330"],function(a){"use strict";function b(a,b,f){var g=e(a,f);d(g);for(var h in b.answers){var i=b.answers[h],j=i.elm;if(!c.isEmpty(j)&&!c.isEmpty(i.verification)){var k=g.filter('[data-rcfid="'+j+'"]');if(!c.isEmpty(k)){var l="1"==i.verification[0]?"correct":"wrong",m=k.find(".mark");m.addClass(l)}}}}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("351",["330"],function(a){"use strict";function b(a,b){var d=!0,e=c(a,b);return e.each(function(a,b){var c=$(b),e=c.find(".markedTextInput").val()||"";e.length<1&&(d=!1)}),d}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("352",["128","129","317","350","351","1c","1d","34f"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function(a){function d(){h(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}return c(d,a),g(d,[{key:"getUserAnswers",value:function(a){return a?i(this.$selector,a):b(Object.getPrototypeOf(d.prototype),"getUserAnswers",this).call(this)}},{key:"showMarkedAnswers",value:function(a,b){return e(this.$selector,a,b)}},{key:"isComplete",value:function(a){return f(this.$selector,a)}}]),d}(d),a("default",j)}}}),$__System.register("353",["d"],function(a){"use strict";function b(a,b){b.select()}function c(a,b,c){var d=!1;8===a.which&&b[0].value.length<1&&(d=!0),37===a.which&&0===f(b)&&(d=!0),d&&(c.eq(c.index(b)-1).focus(),a.preventDefault())}function d(a,b){b.select()}function e(a,b,c){var d=b.val(),e=parseInt(b.attr("maxlength"));if(b.toggleClass("populated",d.length>0),d.length<e);else if(a.altKey&&a.keyCode>64&&a.keyCode<91||192==a.keyCode);else{var f=[8,9,16,17,18,19,20,27,33,34,35,36,37,38,40,45,46,144,145];g.inArray(a.which,f)==-1&&(c.eq(c.index(b)+1).focus(),a.stopImmediatePropagation(),a.preventDefault())}}function f(a){var b=a.get(0);if(b){if("selectionStart"in b)return b.selectionStart;if(document.selection){b.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;return c.moveStart("character",-b.value.length),c.text.length-d}}}var g;return{setters:[function(a){g=a.default}],execute:function(){a("focusIn",b),a("keyDown",c),a("mouseUp",d),a("keyUp",e)}}}),$__System.register("354",["353","d"],function(a){"use strict";var b,c;return{setters:[function(a){b=a},function(a){c=a.default}],execute:function(){!function(a){a.RCF=a.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Marked[RCF.InteractionName.TYPEIN_GROUP]=function(){function a(a){this._initialize(a)}return a.prototype={_initialize:function(a){if(RCF.Utils.isEmpty(a))throw"Empty activity passed into interaction constructor (TypeinGroup)";this.$activity=a,this.$selector=this.$activity.find("*[data-rcfinteraction=typeinGroup]:not(.example)"),this.$typeIns=this.$selector.find("input.typeinGroup:not(.example)");var d=navigator.userAgent,e=d.match(/iPhone/i)||d.match(/iPod/i)||d.match(/iPad/i);e&&this.$selector.css("-webkit-appearance","caret"),this._setupTypeinSizes(this.$activity.find("input.typeinGroup"));var f=this;f.$typeIns.on("focusin",function(a){b.focusIn(a,c(this))}).on("keydown",function(a){b.keyDown(a,c(this),f.$typeIns)}).on("mouseup",function(a){b.mouseUp(a,c(this))}).on("keyup",function(a){b.keyUp(a,c(this),f.$typeIns)}),this.$activity.on("rcf.single.answer","*[data-rcfinteraction=typeinGroup]",function(a,b,d){var e=c(this),f=b.elm;if(f===e.attr("data-rcfid")){var g=e,h=null;if("list"!=b.markType)throw"TypeInGroup used in 'rcf.single.answer' with markType!=list !";if(d||0===d){var i=b.value[d];h=g.find("input[data-rcfid='"+i.elm+"']"),h.data("user-answer",h.val()).val("choice"===i.type?i.value[0]:b.value[d].value).toggleClass("populated",h.val().length>0)}else for(var j in b.value)h=g.find("input[data-rcfid='"+b.value[j].elm+"']"),h.data("user-answer",h.val()).val("choice"===b.value[j].type?b.value[j].value[0]:b.value[j].value).toggleClass("populated",h.val().length>0)}})},_setupTypeinSizes:function(a){var b=this.$activity,d=0,e=c("<span class='.text'>x</span>").appendTo(b);d=parseInt(e.width())+2,e.remove(),a.each(function(){var a=1,b=c(this);try{a=parseInt(b.attr("data-longestItem"))}catch(b){a=1}a>1&&b.css("width",a*d+10+"px")})},showAnswers:function(a,b){for(var d in a.answers){var e=a.answers[d],f=e.elm;if(!RCF.Utils.isEmpty(f)){var g=this.$activity.find("[data-rcfid='"+f+"'][data-rcfinteraction='typeinGroup']");if(!RCF.Utils.isEmpty(g))for(var h=0;h<e.value.length;h++){var i=e.value[h],j=i.elm,k=g.find("[data-rcfid='"+j+"']"),l=k.val(),m="";m=c.isArray(i.value)?i.value[0]:i.value,b&&e.verification&&"1"!=e.verification[0]&&(l="",m=""),k.data("user-answer",l).val(m).toggleClass("populated",k.val().length>0)}}}},showMarkedAnswers:function(a){this.clearMarkedAnswers();for(var b in a.answers){var c=a.answers[b],d=c.elm;if(!RCF.Utils.isEmpty(d)&&!RCF.Utils.isEmpty(c.verification)){var e=this.$selector.filter("[data-rcfid='"+d+"']");if(!RCF.Utils.isEmpty(e)&&!RCF.Utils.isEmpty(c.verification)){var f="1"==c.verification[0]?"correct":"wrong";e.find(".mark").addClass(f)}}}},showUserAnswers:function(){this.$typeIns.each(function(){var a=c(this);a.val(a.data("user-answer")).toggleClass("populated",a.val().length>0)})},isComplete:function(){var a=!0;return this.$selector.each(function(){var b=c(this);b.find("input.typeinGroup:not(.example)").each(function(){var b=c(this).val()||"";b.length<1&&(a=!1)})}),a},getUserAnswers:function(){var a=this.$selector.map(function(){var a=c(this);return a.find("input.typeinGroup:not(.example)").length>0?{elm:a.attr("data-rcfid"),type:"composite",markType:"list",value:a.find("input.typeinGroup:not(.example)").map(function(){var a=c(this);return{elm:a.attr("data-rcfid"),type:"simple",value:a.val()||""}}).get()}:null}).get();return a},clearMarkedAnswers:function(){this.$selector.find(".mark").removeClass("correct wrong")},reset:function(){this.$selector.find("input.typeinGroup:not(.example)").val("").removeData("user-answer").removeClass("populated")}},a}()}(window)}}}),$__System.register("161",["1c","1d"],function(a){var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){"use strict";d=function(){function a(b,d){c(this,a),this.baseInteraction=new RCF.Interactions.Marked[d](b),this.$selector=this.baseInteraction.$selector}return b(a,[{key:"showAnswers",value:function(a,b){"function"==typeof this.baseInteraction.showAnswers&&this.baseInteraction.showAnswers(a,b)}},{key:"showMarkedAnswers",value:function(a){"function"==typeof this.baseInteraction.showMarkedAnswers&&this.baseInteraction.showMarkedAnswers(a)}},{key:"showUserAnswers",value:function(){"function"==typeof this.baseInteraction.showAnswers&&this.baseInteraction.showUserAnswers()}},{key:"isComplete",value:function(){return"function"!=typeof this.baseInteraction.isComplete||this.baseInteraction.isComplete()}},{key:"getUserAnswers",value:function(){if("function"==typeof this.baseInteraction.getUserAnswers)return this.baseInteraction.getUserAnswers()}},{key:"clearMarkedAnswers",value:function(){"function"==typeof this.baseInteraction.clearMarkedAnswers&&this.baseInteraction.clearMarkedAnswers()}},{key:"provideFeedback",value:function(a){"function"==typeof this.baseInteraction.provideFeedback&&this.baseInteraction.provideFeedback(a)}},{key:"close",value:function(){"function"==typeof this.baseInteraction.close&&this.baseInteraction.close()}},{key:"reset",value:function(){"function"==typeof this.baseInteraction.reset&&this.baseInteraction.reset()}}]),a}(),a("default",d)}}}),$__System.register("318",["128","129","161","354","1d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){},function(a){e=a.default}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"rcf_typein_group")}return c(d,a),d}(d),a("default",f)}}}),$__System.register("355",["330","356"],function(a){"use strict";function b(a,b){var e=c(a,b),f=e.map(function(a,b){var c=$(b);return d.hasAnswerableTypeins(c)?d.getAnswerObjectForTypeinGroup(c):void 0}).get();return f}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a}],execute:function(){}}}),$__System.register("357",["3","143","330"],function(a){"use strict";function b(a,b,f){var g=e(a,f);d(g);for(var h in b.answers){var i=b.answers[h],j=i.elm;if(!c.isEmpty(j)&&!c.isEmpty(i.verification)){var k=g.filter('[data-rcfid="'+j+'"]');if(!c.isEmpty(k)){var l="1"==i.verification[0]?"correct":"wrong",m=k.find(".mark");m.addClass(l)}}}}var c,d,e;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("356",["3"],function(a){"use strict";function b(a){
var b=c(a);return!f.isEmpty(b)}function c(a){return a.find("input.typeinGroup:not(.example)")}function d(a){return{elm:f.getRcfId(a),type:"composite",markType:"list",value:c(a).map(function(a,b){return e($(b))}).get()}}function e(a){return{elm:f.getRcfId(a),type:"simple",value:a.val()||""}}var f;return{setters:[function(a){f=a}],execute:function(){a("hasAnswerableTypeins",b),a("getAnswerableTypeinsFromTypeinGroup",c),a("getAnswerObjectForTypeinGroup",d),a("getAnswerObjectForTypein",e)}}}),$__System.register("358",["330","356"],function(a){"use strict";function b(a,b){var f=!0,g=d(a,b);return g.each(function(a,b){var d=$(b),g=e.getAnswerableTypeinsFromTypeinGroup(d);g.each(function(a,b){c($(b))||(f=!1)})}),f}function c(a){var b=a.val()||"";return b.length>0}var d,e;return a("default",b),{setters:[function(a){d=a.default},function(a){e=a}],execute:function(){}}}),$__System.register("359",["128","129","318","355","357","358","1c","1d"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function(a){function d(){i(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}return c(d,a),h(d,[{key:"getUserAnswers",value:function(a){return a?e(this.$selector,a):b(Object.getPrototypeOf(d.prototype),"getUserAnswers",this).call(this)}},{key:"showMarkedAnswers",value:function(a,b){f(this.$selector,a,b)}},{key:"isComplete",value:function(a){return g(this.$selector,a)}}]),d}(d),a("default",j)}}}),$__System.register("35a",["35b","35c"],function(a){"use strict";function b(a){var b=c(a),e=b.filter("[data-correct='y']");d(e)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("35b",[],function(a){"use strict";function b(a){return a.filter(".example").find("input[type='radio']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("35d",["35b"],function(a){"use strict";function b(a){var b=c(a);b.filter("[data-correct!='y']").on("change",function(a){var b=$(a.currentTarget);b.closest(".radioList").find("input[type='radio']").filter("[data-correct='y']").prop("checked",!0),a.stopPropagation(),a.preventDefault()})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("35e",["3","141","360","35f","35c"],function(a){"use strict";function b(a){a.on("rcf.single.answer","*[data-rcfinteraction='radioList']",function(a,b){var i=$(a.target),j=b.elm;if(c(i)===j){var k=f(i),l=c(k)||"";d(i,l);var m=h(b.value),n=e(i,m);g(n)}})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.storeUserAnswer},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){h=function(a){return Array.isArray(a)?a[0]:a}}}}),$__System.register("361",["35a","35d","35e"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",function(a,e){var f=e.find("*[data-rcfinteraction='radioList']");b(f),c(f),d(e),a.$activity=e,a.$selector=f})}}}),$__System.register("362",["3","141","363","d","35f"],function(a){"use strict";function b(a){var b=e(a);b.each(function(a,b){var e=f(b),h=g(e),i=c(h)||"";d(e,i)})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.storeUserAnswer},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("364",["3","141","360","365","366","35c"],function(a){"use strict";function b(a,b,i){var j=b.value,k=b.elm;if(!c(j)){j=Array.isArray(j)?j[0]:j;var l=f(a,k),m=e(l,j);if(!c(m)){if(!i)return void h(m);var n=b.verification&&"1"==b.verification[0];n?h(m):(d(l),g(l.find("input[type='radio']")))}}}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.clearUserAnswer},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("367",["363","366","35f"],function(a){"use strict";function b(a){var b=c(a),f=e(b);d(f)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("368",["362","364","367"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",function(a,e,f){b(a),d(a),e.answers.forEach(function(b){c(a,b,f)})})}}}),$__System.register("35c",[],function(a){"use strict";function b(a){a.prop("checked",!0)}return a("default",b),{setters:[],execute:function(){}}});$__System.register("369",["3","360","363","d","21a","35c"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a.isEmpty},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){a("default",function(a){var h=d(a);h.each(function(a,d){var h=e(d),i=f(h)||"";if(!b(i)){var j=c(h,i);g(j)}})})}}});$__System.register("365",[],function(a){"use strict";function b(a,b){return a.filter("[data-rcfid='"+b+"']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("360",[],function(a){"use strict";function b(a,b){return a.find("input[type='radio'][data-rcfid='"+b+"']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("36a",["3","360","365","36b","36c"],function(a){"use strict";function b(a,b){var h=b.elm,i=b.value;if(!c(h)&&!c(b.verification)){var j=e(a,h);if(!c(j)){var k=d(j,i);if(!c(k)){var l="1"==b.verification[0],m=f(k);g(m,l)}}}}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("36d",["143","363","36a"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",function(a,e){var f=c(a);b(f),e.answers.forEach(function(b){d(a,b)})})}}}),$__System.register("36e",["3","363","d","35f"],function(a){"use strict";var b,c,d,e;return{setters:[function(a){b=a.getRcfId},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){a("default",function(a){var f=c(a);return f.map(function(a,c){var f=d(c),g=e(f),h={elm:b(f)||"",type:"simple",value:b(g)||""};return h}).get()})}}}),$__System.register("35f",[],function(a){"use strict";function b(a){return a.find("input[type='radio']:checked")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("36f",["363","35f"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){a("default",function(a){var d=b(a),e=d.length,f=c(d).length;return e===f})}}}),$__System.register("366",[],function(a){"use strict";function b(a){a.prop("checked",!1)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("363",[],function(a){"use strict";function b(a){return a.filter(":not(.example)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("370",["141","363","366"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.clearUserAnswer},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",function(a){var e=c(a),f=e.find("input[type='radio']");b(e),d(f)})}}}),$__System.register("314",["143","361","368","369","370","1c","1d","36d","36e","36f"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){h(this,a);var d=this;c(d,b)}return g(a,[{key:"showAnswers",value:function(a,b){d(this.$selector,a,b)}},{key:"showMarkedAnswers",value:function(a){i(this.$selector,a)}},{key:"showUserAnswers",value:function(){e(this.$selector)}},{key:"isComplete",value:function(){return k(this.$selector)}},{key:"getUserAnswers",value:function(){return j(this.$selector)}},{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"reset",value:function(){f(this.$selector)}}]),a}(),a("default",l)}}}),$__System.register("371",["128","129","314","372","373","374","1c","1d"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function(a){function d(){i(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}return c(d,a),h(d,[{key:"getUserAnswers",value:function(a){return a?e.getUserAnswersForRadioList(this.$selector,a):b(Object.getPrototypeOf(d.prototype),"getUserAnswers",this).call(this)}},{key:"showMarkedAnswers",value:function(a,b){f(this.$selector,a,b)}},{key:"isComplete",value:function(a){return g.isItemBasedRadioListComplete(this.$selector,a)}}]),d}(d),a("default",j)}}}),$__System.register("375",["3","6","13"],function(a){"use strict";function b(a){var b=c(a),g=a.closest(".radioItemSelect"),h=f(b,"id")||"",i=e();if(i.feedbackOptions){var j=i.feedbackOptions.onAnswerChanged;"function"==typeof j&&j({id:h,answers:[{elm:d(g),type:"simple",value:d(a)}]})}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild,d=a.getRcfId},function(a){e=a.getRcfOptions},function(a){f=a.getDataAttribute}],execute:function(){}}}),$__System.register("376",["3","375","377","378"],function(a){"use strict";function b(a){a.on("click",".selectable.radio",function(a){if(a.currentTarget!==a.target){var b=$(a.target),g=b.closest(".inlinePlayerContainer[data-audiolink]");if(!c(g))return}var h=$(a.currentTarget),i=h.closest("[data-rcfinteraction='radioItemSelect']");f(i),e(h),d(h)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("379",["3","378","d","37a"],function(a){"use strict";function b(a){a.on("rcf.single.answer","*[data-rcfinteraction='radioItemSelect']",function(a,b){var g=e(a.target),h=c(g)||"",i=b.elm,j=b.value;i===h&&(Array.isArray(j)&&(j=j[0]),d(g),f(g,j))})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("37b",["376","379"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){a("default",function(a,d){var e=d.find("span.radioItemSelect:not(.example)");b(e),c(d),a.$activity=d,a.$selector=e})}}}),$__System.register("37c",["3","37d","37e"],function(a){"use strict";function b(a){var b=d(a),f=c(b)||"";e(a,f)}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("37f",["3","380","37a"],function(a){"use strict";function b(a,b,f){var g=b.elm,h=b.verification&&"1"==b.verification[0];if(!c(g)){var i=Array.isArray(b.value)?b.value[0]:b.value,j=d(a,g);c(j)||(!f||f&&h)&&e(j,i)}}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("381",["378","d","37c","37f"],function(a){"use strict";function b(a,b,g){a.each(function(a,b){var c=d(b);e(c)}),c(a),b.answers.forEach(function(b){f(a,b,g)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("377",[],function(a){"use strict";function b(a){a.addClass("selected")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("37a",["377"],function(a){"use strict";function b(a,b){var d=a.find("[data-rcfid='"+b+"']");c(d)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("382",["3","383","d","37d","21a","37a"],function(a){"use strict";function b(a){var b=f(a);d(b),a.each(function(a,b){var d=e(b),f=g(d)||"";c(f)||h(d,f)})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("384",["3","380","385","36b","36c"],function(a){"use strict";function b(a,b){var h=b.elm,i=Array.isArray(b.value)?b.value[0]:b.value;if(!c(h)&&!c(i)){var j=d(a,h);if(!c(j)){var k=e(j,i);if(!c(k)){var l=b.verification&&"1"==b.verification[0],m=f(k);g(m,l)}}}}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("386",["143","384"],function(a){"use strict";function b(a,b){c(a),b.answers.forEach(function(b){b.verification&&b.verification.length>0&&d(a,b)})}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("387",["3","d","37d"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.getRcfId},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",function(a){return a.map(function(a,e){var f=c(e),g=d(f),h={elm:b(f)||"",type:"simple",value:b(g)||""};return h}).get()})}}}),$__System.register("380",[],function(a){"use strict";function b(a,b){return a.filter("[data-rcfid='"+b+"']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("385",[],function(a){"use strict";function b(a,b){return a.find("[data-rcfid='"+b+"']")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("388",["3","141","143","378","380","385"],function(a){"use strict";function b(a,b){var e=b.answers[0].elm,g=h(a,e);if(!d(g)){var j=b.answers[0].value||"",k="1"==b.answers[0].verification[0],l=i(g,j);f(g);var m=RCF.Handlers.FeedbackHandler.provideFeedback;"function"==typeof m&&m(g,l,k,c)}}function c(a){e(a),g(a),f(a)}var d,e,f,g,h,i;return a("default",b),{setters:[function(a){d=a.isEmpty},function(a){e=a.clearUserAnswer},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("389",["37d"],function(a){"use strict";function b(a){var b=c(a),d=b.length,e=a.length;return d===e}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("383",[],function(a){"use strict";function b(a){a.removeClass("selected")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("37d",[],function(a){"use strict";function b(a){return a.find(".selectable.radio.selected")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("378",["383","37d"],function(a){"use strict";function b(a){var b=d(a);c(b)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("38a",["141","378"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.clearUserAnswer},function(a){c=a.default}],execute:function(){a("default",function(a){b(a),c(a)})}}}),$__System.register("315",["143","381","382","386","387","388","389","1c","1d","37b","38a"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){"use strict";m=function(){function a(b){j(this,a);var c=this;k(c,b)}return i(a,[{key:"showAnswers",value:function(a,b){c(this.$selector,a,b)}},{key:"showMarkedAnswers",value:function(a){e(this.$selector,a)}},{key:"showUserAnswers",value:function(){d(this.$selector)}},{key:"isComplete",value:function(){return h(this.$selector)}},{key:"getUserAnswers",value:function(){return f(this.$selector)}},{key:"provideFeedback",value:function(a){g(this.$selector,a)}},{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"reset",value:function(){l(this.$selector)}}]),a}(),a("default",m)}}}),$__System.register("372",["330"],function(a){"use strict";function b(a,b){var c=f(a,b);return d(c,".selectable.radio.selected")}function c(a,b){var c=f(a,b);return d(c,"input[type=radio]:checked")}function d(a,b){var c=a.map(function(){var a=$(this),c=a.find(b);return e(a,c)}).get();return c}function e(a,b){return{elm:a.attr("data-rcfid"),type:"simple",value:b.attr("data-rcfid")}}var f;return{setters:[function(a){f=a.default}],execute:function(){a("getUserAnswersForRadioList",c),a("getUserAnswersForRadioItemSelect",b)}}}),$__System.register("36b",[],function(a){"use strict";function b(a){return a.closest(".dev-markable-container")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("36c",[],function(a){"use strict";function b(a,b){var c=b?"correctAnswer":"incorrectAnswer",d=b?"correct":"wrong",e=a.find(".mark");a.addClass(c),e.addClass(d)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("38b",["3","36b","36c"],function(a){"use strict";function b(a,b){var f=b.elm,g=b.verification,h=b.value;if(!c(f)&&!c(g)&&!c(h)){var i=a.filter('[data-rcfid="'+f+'"]');if(!c(i)){var j=i.find('*[data-rcfid="'+b.value+'"]');if(!c(j)){var k="1"==g[0],l=d(j);e(l,k)}}}}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("373",["143","330","38b"],function(a){"use strict";function b(a,b,f){var g=d(a,f);c(g),b.answers.forEach(function(a){e(g,a)})}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("374",["330"],function(a){"use strict";function b(a,b){var c=d(a,b),e=c.length,f=c.find("input[type=radio]:checked").length;return f===e}function c(a,b){var c=d(a,b),e=c.length,f=c.find(".selectable.radio.selected").length;return e===f}var d;return{setters:[function(a){d=a.default}],execute:function(){a("isItemBasedRadioListComplete",b),a("isItemBasedRadioListItemSelectComplete",c)}}}),$__System.register("38c",["128","129","315","372","373","374","1c","1d"],function(a){var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a},function(a){f=a.default},function(a){g=a},function(a){h=a.default},function(a){i=a.default}],execute:function(){"use strict";j=function(a){function d(){i(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}return c(d,a),h(d,[{key:"getUserAnswers",value:function(a){return a?e.getUserAnswersForRadioItemSelect(this.$selector,a):b(Object.getPrototypeOf(d.prototype),"getUserAnswers",this).call(this)}},{key:"showMarkedAnswers",value:function(a,b){f(this.$selector,a,b)}},{key:"isComplete",value:function(a){return g.isItemBasedRadioListItemSelectComplete(this.$selector,a)}}]),d}(d),a("default",j)}}}),$__System.register("38d",["3","38e"],function(a){"use strict";function b(a,b,e){var f=b.elm;(a.hasClass("type_selectableWords")||a.hasClass("type_selectable"))&&f==c(a)&&(a.find(".selectable[data-rcfid="+e+"]").data("user-answer","y").find(".selectable").addClass("selected"),d(a))}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.setupRestrictionOnInteractiveText}],execute:function(){}}}),$__System.register("38f",["38e"],function(a){"use strict";function b(a){var b=c.getInteractiveTextInteractionFromChild(a),d=c.getRestrictionCountFromInteractiveText(b),e=c.getSelectableItemsFromInteractiveText(b),f=0;c.toggleSelectableElement(a),d<1||(c.isElementSelected(a)?(f=c.getNumberOfSelectedItemsInInteractiveTextElement(b),f>=d&&e.not(".selected").addClass("disabled")):e.removeClass("disabled"))}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),$__System.register("390",["d","38d","38f"],function(a){"use strict";function b(a,b){b.on("click",".selectable:not(.markable, .example, .radio, .disabled)",function(a){var b=c(a.currentTarget);e(b)}),a.on("rcf.single.answer",'.interactiveText[data-rcfinteraction="interactiveText"]',function(a,b,e){var f=c(a.currentTarget);d(f,b,e)})}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("391",["3","390","38e"],function(a){"use strict";function b(a,b){if(c(b))throw"Empty activity passed to CheckboxListItemSelect constructor";a.$activity=b,a.$selector=e.getSelectableInteractionsFromActivity(b),d(b,a.$selector)}var c,d,e;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a}],execute:function(){}}}),$__System.register("392",["3","141","38e"],function(a){"use strict";function b(a,b){var g=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],h=b,i=b.elm,j=b.value;if(!d.isEmpty(i)){var k=a.filter("[data-rcfid="+i+"]");if(!d.isEmpty(k)){var l=f.getSelectableItemsFromInteractiveText(k),m=f.getRestrictionCountFromInteractiveText(k),n=d.getMarkTypeFromElement(k),o=f.getSelectedElementsFromInteractiveText(k);e.clearUserAnswer(l),e.storeUserAnswer(o,"y"),d.isEmpty(o)||c(o,n,b);for(var p in j)if(g&&h.verification&&"item"==n&&"1"==h.verification[p]||!g){var q=f.getSelectableElementByIdFromInteractiveTextBlock(k,j[p]);q.children().filter(":first-child").addClass("selected")}m>0&&(o=f.getSelectedElementsFromInteractiveText(k),o.length>=m?l.not(".selected").addClass("disabled"):l.not(".selected").removeClass("disabled"))}}}function c(a,b,c){"item"===b?a.removeClass("selected"):"list"===b&&(c.verification&&"0"!=c.verification[0]||a.removeClass("selected"))}var d,e,f;return a("default",b),{setters:[function(a){d=a},function(a){e=a},function(a){f=a}],execute:function(){}}}),$__System.register("393",["392"],function(a){"use strict";function b(a,b,d){for(var e in b.answers)c(a,b.answers[e],d)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("394",["3","141","d","38e"],function(a){"use strict";function b(a,b){var g=f.getSelectableItemsFromInteractiveText(b);g.removeClass("selected disabled"),g.each(function(a,b){var f=e(b),g=d.getUserAnswer(f);c(g)||(f.addClass("selected"),d.clearUserAnswer(f))}),b.each(function(a,b){var c=e(b);f.setupRestrictionOnInteractiveText(c)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a},function(a){e=a.default},function(a){f=a}],execute:function(){}}}),$__System.register("395",["3","143","d","38e"],function(a){"use strict";function b(a,b){d(a);for(var g in b.answers){var h=b.answers[g],i=h.elm;if(!c.isEmpty(i)&&!c.isEmpty(h.verification)){var j=a.filter(".interactiveText[data-rcfid="+i+"]");if(!c.isEmpty(j)){var k=c.getMarkTypeFromElement(j);if("item"===k)if(e.isArray(h.value))for(var l in h.value){var m=h.value[l];f.markInteractiveTextBlockSelectableItem(j,m,h.verification[l])}else{var m=h.value,n=h.verification;f.markInteractiveTextBlockSelectableItem(j,m,n)}else if("list"===k){var o="1"==h.verification[0]?"correct":"wrong";j.find(".mark").addClass(o)}}}}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.default},function(a){f=a}],execute:function(){}}}),$__System.register("396",["3","d"],function(a){"use strict";function b(a){return a.map(function(a,b){var e=d(b),f={elm:c(e)||"",type:"list",value:e.find(".selectable.selected:not(.markable,.example,.radio)").map(function(a,b){return c(d(b).parent())}).get()};return f}).get()}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("397",["d","38e"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,e){var f=c(e);if(!d.isInteractiveTextInteractionComplete(f))return b=!1,!1}),b}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a}],execute:function(){}}}),$__System.register("38e",["3","13","141","d"],function(a){"use strict";function b(a){return a.closest(".interactiveText")}function c(a){return parseInt(q.getDataAttribute(a,"data-rcfrestrict"),10)||0}function d(a){var b=e(a);return b.filter(".selected").length}function e(a){return a.find(".selectable:not(.markable,.example,.radio)")}function f(a){a.toggleClass(function(){return g(a)?r.clearUserAnswer(a):r.storeUserAnswer(a,"Y"),"selected"})}function g(a){return a.hasClass("selected")}function h(a,b,c){var d=i(a,b);p(d)||j(d,c)}function i(a,b){return a.find(".selectable[data-rcfid="+b+"]")}function j(a,b){var c="1"==b?"correct":"wrong";a.find(".mark").addClass(c)}function k(a){return a.find(".interactiveText:not(.example)").filter(function(a,b){var c=s(b).attr("data-interactivetexttype").toLowerCase();return"selectable"===c||"selectablewords"===c})}function l(a){return a.find(".selectable.selected:not(.example, .radio, .markable)")}function m(a){var b=e(a);return b.filter(function(a,b){var c=s(b);return 0===c.closest(".distractor,.example").length})}function n(a){var b=c(a),d=l(a),e=m(a);if(b>0){if(d.length<b)return!1}else if(d.length<e.length)return!1;return!0}function o(a){var b=c(a);if(!(b<1)){var d=l(a),f=e(a);d.length>=b&&f.filter(":not(.selected)").addClass("disabled")}}var p,q,r,s;return a("getInteractiveTextInteractionFromChild",b),a("getRestrictionCountFromInteractiveText",c),a("getNumberOfSelectedItemsInInteractiveTextElement",d),a("getSelectableItemsFromInteractiveText",e),a("toggleSelectableElement",f),a("isElementSelected",g),a("markInteractiveTextBlockSelectableItem",h),a("getSelectableElementByIdFromInteractiveTextBlock",i),a("applyMarkClassToSelectable",j),a("getSelectableInteractionsFromActivity",k),a("getSelectedElementsFromInteractiveText",l),a("getCorrectSelectablesFromInteractiveText",m),a("isInteractiveTextInteractionComplete",n),a("setupRestrictionOnInteractiveText",o),{setters:[function(a){p=a.isEmpty},function(a){q=a},function(a){r=a},function(a){s=a.default}],execute:function(){}}}),$__System.register("398",["141","38e"],function(a){"use strict";function b(a){var b=d.getSelectableItemsFromInteractiveText(a);c.clearUserAnswer(b),b.removeClass("selected disabled")}var c,d;return a("default",b),{setters:[function(a){c=a},function(a){d=a}],execute:function(){}}}),$__System.register("316",["143","391","393","394","395","396","397","398","1c","1d"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){k(this,a);var d=this;c(d,b)}return j(a,[{key:"clearMarkedAnswers",value:function(){b(this.$selector)}},{key:"showAnswers",value:function(a,b){d(this.$selector,a,b)}},{key:"isComplete",value:function(a){return h(a||this.$selector)}},{key:"getUserAnswers",value:function(a){return g(a||this.$selector)}},{key:"showMarkedAnswers",value:function(a,b){f(b||this.$selector,a)}},{key:"showUserAnswers",value:function(){e(this.$activity,this.$selector)}},{key:"reset",value:function(){i(this.$selector)}}]),a}(),a("default",l)}}}),$__System.register("399",["128","129","316","330","1c","1d"],function(a){var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){"use strict";h=function(a){function d(){g(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).apply(this,arguments)}return c(d,a),f(d,[{key:"getUserAnswers",value:function(a){return b(Object.getPrototypeOf(d.prototype),"getUserAnswers",this).call(this,this._getFilteredSelector(a))}},{key:"showMarkedAnswers",value:function(a,c){b(Object.getPrototypeOf(d.prototype),"showMarkedAnswers",this).call(this,a,this._getFilteredSelector(c))}},{key:"isComplete",value:function(a){return b(Object.getPrototypeOf(d.prototype),"isComplete",this).call(this,this._getFilteredSelector(a))}},{key:"_getFilteredSelector",value:function(a){return a?e(this.$selector,a):this.$selector}}]),d}(d),a("default",h)}}}),$__System.register("39a",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".itemComplexDroppableBlockWordBox.wordBox")})}}}),$__System.register("39b",["3","220","39c","39d","39e"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.isEmpty},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){a("default",function(a,g){var h=a.find(".dev-droppable.selected");if(!b(h)){if(!f(h))return void c(h);var i=h;d(i,g),e(i)}})}}}),$__System.register("172",["3","13","220","39f"],function(a){"use strict";var b,c,d,e;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getDataAttribute},function(a){d=a.default},function(a){e=a.default}],execute:function(){a("default",function(a,f){var g=c(a,"data-audiolink")||"",h=f.find(".selected"),i=a.siblings();b(h)||d(h),e(a),b(i)||d(i),b(g)||a.trigger("rcf.play.audio",[g])})}}}),$__System.register("3a0",[],function(a){"use strict";function b(a){return a.hasClass("populated")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("39f",["16c"],function(a){"use strict";function b(a){c(a)}var c;return a("default",b),{setters:[function(a){c=a.selectItem}],execute:function(){}}}),$__System.register("3a1",["16c"],function(a){"use strict";function b(a){return c(a)}var c;return a("default",b),{setters:[function(a){c=a.isItemSelected}],execute:function(){}}}),$__System.register("39e",[],function(a){"use strict";function b(a){return a.hasClass("dev-droppable")&&a.hasClass("dragTarget")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3a2",["3","13","215","220","39d","3a0","39f","3a1","39e"],function(a){"use strict";var b,c,d,e,f,g,h,i,j,k;return{setters:[function(a){b=a.isEmpty,c=a.getRcfId},function(a){d=a.getDataAttribute},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){a("default",function(a,l,m){var n=a.find(".dev-droppable.selected"),o=d(l,"data-audiolink")||"";if(b(o)||l.trigger("rcf.play.audio",[o]),b(n))return void(h(l)&&i(l));if(j(n)&&j(l))return void f(l);var p=k(n);if(p)return f(n),void(h(l)&&i(l));m.removeWordItem(n),e(l,n,n,m),p&&g(n),f(n);var q=c(l.parent())||"",r=c(n)||"";q&&r&&l.trigger("rcf.droppable.answer.changed",[q,r])})}}}),$__System.register("176",["3"],function(a){"use strict";function b(a){var b=c(a),e=a.find(".inlinePlayer");!d(e)&&e.hasClass("playing")?a.trigger("rcf.stop.audio"):a.trigger("rcf.play.audio",[b])}var c,d;return a("default",b),{setters:[function(a){c=a.getAudioLinkFromElement,d=a.isEmpty}],execute:function(){}}}),$__System.register("173",["3","176"],function(a){"use strict";function b(a){a.on("click",".clickAndStickable .inlinePlayerContainer[data-audiolink]",function(a){
var b=$(this);d(b),c(a)}),a.on("click",".clickAndStickable .imageAudio[data-audiolink]",function(){var a=$(this);d(a)})}var c,d;return a("default",b),{setters:[function(a){c=a.preventEventBubble},function(a){d=a.default}],execute:function(){}}}),$__System.register("213",["3","172","173","d","3a3","39b","3a2"],function(a){"use strict";var b,c,d,e,f,g,h,i,j;return{setters:[function(a){b=a.preventEventBubble},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){a("default",function(a,k,l){var m="ontouchstart"in f?"touchstart":"click",n=a.find(".rcfDroppable.clickAndStickable:not(.example)");k.on(m,function(){g(a,l)}),d(k),k.on(m,".clickAndStickable:not(.example,.selected)",function(a){var d=e(a.currentTarget);d.hasClass("ui-draggable-draggable")||(c(d,n),b(a))}),a.on(m,".rcfDroppable.clickAndStickable:not(.example) .dragTarget",function(c){var d=e(c.currentTarget),f=e(c.target);i(f)&&!j(f)||d.hasClass("ui-draggable-draggable")||(h(a,d,l),j(f)||b(c))})}),i=function(a){return a.hasClass("audioPlayButton")||a.hasClass("audioPauseButton")},j=function(a){return a.hasClass("imageAudio")}}}}),$__System.register("3a4",["3","13","3a5"],function(a){"use strict";function b(a,b,g){var h=f(a);if(c(h))return $([]);var i=g.getWordItem(h),j=i.clone().removeClass("dragged"),k=a.width()+1,l=g.$wordBox;Math.abs(k-i.width())>10?b.draggable("option","cursorAt",{left:25,top:5}):b.draggable("option","cursorAt",null),j.css({width:i.width()+2+"px"}),l.prepend(j);var m=e(j,"id")||"";return d(j,"id",m+"_clone"),j}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.setDataAttribute,e=a.getDataAttribute},function(a){f=a.default}],execute:function(){}}}),$__System.register("269",["13"],function(a){"use strict";var b;return{setters:[function(a){b=a.getDataAttribute}],execute:function(){a("getDataAttribute",b)}}}),$__System.register("3a6",["3","72","220","269","16d"],function(a){"use strict";function b(a){var b=g(a,"data-audiolink"),i=a.html(),j=d(a),k=j.find(".dev-droppable.selected");c(k)||f(k),h(a,!1),e(a,"html",i),a.removeClass("selected populated"),a.parent().removeClass("selected"),a.html(""),c(b)||a.trigger("rcf.play.audio",[b])}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty,d=a.getActivityElementFromChild},function(a){e=a.setDataOnElement},function(a){f=a.default},function(a){g=a.getDataAttribute},function(a){h=a.default}],execute:function(){}}}),$__System.register("39d",["72","189","216","16d"],function(a){"use strict";function b(a){var b=e(a);b?f(a):(a.addClass("populated"),a.html(c(a,"html"))),g(a,!1),d(a,"html")}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.getDataFromElement,d=a.removeDataFromElements},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("3a7",["d","3a4","3a6","39d"],function(a){"use strict";function b(a,b){a.draggable({cancel:".inlinePlayer",distance:5,hoverClass:"dragOverDrop",scroll:!0,disabled:!0,helper:function(e){var f=c(e.currentTarget);return d(f,a,b)},start:function(a){var b=c(a.currentTarget);e(b)},stop:function(a){var b=c(a.target);f(b)}})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("3a8",["3","215","220","d"],function(a){"use strict";function b(a,b){a.droppable({accept:".dragItem, .dragTarget",hoverClass:"dragOverDrop",revert:"invalid",greedy:"true",tolerance:"pointer",drop:function(a,i){var j=i.draggable,k=h(a.target),l=i.helper,m=c(k.parent())||"",n=c(j)||"",o=d(k),p=o.find(".dev-droppable.selected");e(p)||g(p),f(k,j,l,b),k.trigger("rcf.droppable.answer.changed",[m,n])}})}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.getActivityElementFromChild,e=a.isEmpty},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){}}}),$__System.register("39c",["16d","3a9","3a5"],function(a){"use strict";function b(a,b){var f=e(a),g=b.getWordItem(f);c(g,!1),b.addWordItem(g),c(a),d(a)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("3aa",["39c"],function(a){"use strict";function b(a,b){a.droppable({cursor:"pointer",tolerance:"intersect",hoverClass:"dragOverDrop",accept:".dragTarget",drop:function(a,d){var e=d.draggable;c(e,b)}})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("212",["214","3a7","3a8","16b","3aa"],function(a){"use strict";var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){a("default",function(a,g){var h=g.getWordItems(),i=g.$wordBox,j=b(a);e(h,g),c(j,g),f(i,g),d(j,g)})}}}),$__System.register("3ab",["212","213","1c","1d","3ac","39a","17c"],function(a){var b,c,d,e,f,g,h,i;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){"use strict";i=function(){function a(d){e(this,a);var i=h(d),j=f(d),k=g(d);this.$complexDroppableBlock=d,j.randomizeItems(),i&&b(d,j),c(d,k,j)}return d(a,[{key:"clear",value:function(){var a="ontouchend"in document?"touchend":"click",b=g(this.$complexDroppableBlock);b.off(a),this.$complexDroppableBlock.off(a)}}]),a}(),a("default",i)}}}),$__System.register("3ad",["3","13"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.getRandomString},function(a){c=a.setDataAttribute}],execute:function(){a("default",function(a){var d=a.find(".itemComplexDroppable .inlinePlayerContainer");d.each(function(a,d){var e=$(d),f="audio-"+b(10);c(e,"data-audiolinkid",f)})})}}}),$__System.register("3ae",["72","3ab","3ad"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.setDataOnElement},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",function(a){a.each(function(a,e){var f=$(e),g=new c(f);b(f,"handler",g),d(f)})})}}}),$__System.register("3af",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find('[data-rcfinteraction="itemComplexDroppableBlock"]')})}}}),$__System.register("3b0",["3b1","3ae","3af"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",function(a,b){a.$activity=b,a.$selector=d(b),c(a.$selector)})}}}),$__System.register("3b2",["3","72"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.getRcfId},function(a){c=a.getDataFromElement}],execute:function(){a("default",function(a){var d=a.map(function(a,d){var e=$(d);return{elm:b(e),type:"composite",value:e.find(".itemComplexDroppable.dragTarget:not(.example)").map(function(a,d){var e=$(d);return{elm:b(e.parent()),type:"simple",value:c(e,"wordItemID")||""}}).get()}}).get();return d})}}}),$__System.register("3b3",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){var b=a.find(".itemComplexDroppable.dragTarget:not(.example)"),c=b.filter(".populated").length;return c===b.length})}}}),$__System.register("3b4",["3","72"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getDataFromElement,d=a.removeDataFromElements}],execute:function(){a("default",function(a){a.each(function(a,e){var f=$(e),g=f,h=c(g,"handler");b(h)||"function"!=typeof h.clear||(h.clear(),d(f,"handler"))})})}}}),$__System.register("3b5",["141","214","216","3ac"],function(a){"use strict";var b,c,d,e;return{setters:[function(a){b=a.clearUserAnswer},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){a("default",function(a){a.each(function(a,f){var g=$(f),h=e(g),i=c(g);d(i),h.reset(),b(i)})})}}}),$__System.register("3b6",["3","72","141","215","216","3ac"],function(a){"use strict";function b(a){a.find(".itemComplexDroppable.movable:not(.example)").each(function(a,b){var c=$(b),f=d(c,"wordItemID")||"";e(c,f)})}var c,d,e,f,g,h;return{setters:[function(a){c=a.isEmpty},function(a){d=a.getDataFromElement},function(a){e=a.storeUserAnswer},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){a("default",function(a,d){d.answers.forEach(function(d){var e=d.elm;if(!c(e)){var i=a.filter('[data-rcfid="'+e+'"]');if(!c(i)){var j=h(i);b(i);var k=d.value;k.forEach(function(a){var b=a.elm,c=a.value[0],d=j.getWordItem(c),e=i.find('.itemComplexDroppable.clickAndStickable[data-rcfid="'+b+'"] .dragTarget.movable');g(e),j.removeWordItem(d),f(e,d,d,j)})}}})})}}}),$__System.register("3b7",["3"],function(a){"use strict";var b;return{setters:[function(a){b=a.isEmpty}],execute:function(){a("default",function(a,c){c.answers.forEach(function(c){var d=c.elm;if(!b(d)){var e=a.filter('[data-rcfid="'+d+'"]');b(e)||c.value.forEach(function(a){var c="1"==a.verification[0],d=a.elm,f=e.find('[data-rcfid="'+d+'"]');b(f)||f.find(".mark").addClass(c?"correct":"wrong")})}})})}}}),$__System.register("3ac",["3b8"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a){var c=a.find(".wordBox.itemComplexDroppableBlockWordBox");return new b(c,".itemComplexDroppableBlock")})}}}),$__System.register("214",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.find(".rcfDroppable:not(.example) .dragTarget.movable")})}}}),$__System.register("3b9",["3"],function(a){"use strict";function b(a){function b(a){if(c(a))return!1;if(a.nodeType===Node.TEXT_NODE&&""!==a.textContent.trim())return a.textContent=d(a.textContent),!0;if(0===a.childNodes.length)return!1;var e=0,f=!1;do f=b(a.childNodes[e]),e++;while(f===!1&&e<a.childNodes.length);return f}var e=a[0];b(e)}var c,d;return{setters:[function(a){c=a.isEmpty,d=a.capitaliseString}],execute:function(){a("default",b)}}}),$__System.register("3a5",["72"],function(a){"use strict";function b(a){return c(a,"wordItemID")}var c;return a("default",b),{setters:[function(a){c=a.getDataFromElement}],execute:function(){}}}),$__System.register("3ba",["3","13","72"],function(a){"use strict";function b(a,b){var h=a.hasClass("dragItem"),i=c(a),j=f(a,"wordItemID"),k=h?i:j,l=d(a,"data-audiolink")||"",m=d(a,"data-audiolinkid")||"";""!==l&&(e(b,"data-audiolink",l),e(b,"data-audiolinkid",m)),g(b,"wordItemID",k),g(a,"moved","Y")}var c,d,e,f,g;return{setters:[function(a){c=a.getRcfId},function(a){d=a.getDataAttribute,e=a.setDataAttribute},function(a){f=a.getDataFromElement,g=a.setDataOnElement}],execute:function(){a("default",b)}}}),$__System.register("3bb",["3bc","17c"],function(a){"use strict";function b(a){var b=c(a);d(b)&&a.draggable("option","disabled",!1)}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("17d",["13"],function(a){"use strict";function b(a){return"y"===(c(a,"data-mobileDragDrop")||"n")}var c;return a("default",b),{setters:[function(a){c=a.getDataAttribute}],execute:function(){}}}),$__System.register("17c",["3","13","17d"],function(a){"use strict";function b(a){var b=f(a,"data-usingdragdrop");if(!c(b))return"y"===b;var i=e(a),j="y"==(f(i,"data-desktopdraggable")||"y"),k="mobile"===(d("deviceMode")||"desktop"),l=h(i),m=l||!k&&j;return g(a,"data-usingdragdrop",m?"y":"n"),m}var c,d,e,f,g,h;return a("default",b),{setters:[function(a){c=a.isEmpty,d=a.cookie,e=a.getActivityElementFromChild},function(a){f=a.getDataAttribute,g=a.setDataAttribute},function(a){h=a.default}],execute:function(){}}}),$__System.register("3bd",[],function(a){"use strict";function b(a){return a.closest(".itemComplexDroppableBlock")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3bc",["3","3bd"],function(a){"use strict";function b(a){var b=e(a),f=c(a),g=!d(b);return g?b:f}var c,d,e;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild,d=a.isEmpty},function(a){e=a.default}],execute:function(){}}}),$__System.register("3a9",["17c","3bc"],function(a){"use strict";function b(a){var b=d(a);c(b)&&(a.draggable("option","disabled")||a.draggable("option","disabled",!0))}var c,d;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){}}}),$__System.register("216",["13","72","141","220","3a9"],function(a){"use strict";function b(a){var b=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],h=a.parent();f(h),a.removeClass("populated selected inline"),a.html(""),c(a,"data-audiolink data-audiolinkid"),d(a,"wordItemID");var i=a;g(i),b&&e(a)}var c,d,e,f,g;return{setters:[function(a){c=a.removeDataAttributes},function(a){d=a.removeDataFromElements},function(a){e=a.clearUserAnswer},function(a){f=a.default},function(a){g=a.default}],execute:function(){a("default",b)}}}),$__System.register("3be",[],function(a){"use strict";function b(a,b){var c=b.getWordItem(a);b.addWordItem(c)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("215",["3","13","216","3b9","3a5","3ba","3bb","3be"],function(a){"use strict";function b(a,b,m,n){var o=!b.hasClass("dragItem"),p=c(b),q=i(b),r=i(a),s=o?q:p,t=m.width(),u=a.hasClass("capitalise"),v=0,w=$.trim(b.html());e(r)||l(r,n),j(b,a),o&&(s&&(w=$.trim(n.getWordItem(s).html())),g(b)),a.html(""),a.removeClass("inline populated"),v=a.width(),a.html(w),a.addClass("populated"),k(a),u&&h(a);var x=a.find(".playing");e(x)||(x.removeClass("playing"),x.trigger("rcf.stop.audio")),a.find(".playing").removeClass("playing"),a.toggleClass("inline",t>v);var y=a.find(".inlinePlayerContainer");if(!e(y)){var z="audio_"+d(10);f(y,"data-audiolinkid",z)}}var c,d,e,f,g,h,i,j,k,l;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.getRandomString,e=a.isEmpty},function(a){f=a.setDataAttribute},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){}}}),$__System.register("3bf",["3","141","214","215","216","3ac"],function(a){"use strict";var b,c,d,e,f,g;return{setters:[function(a){b=a.isEmpty},function(a){c=a.getUserAnswer},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){a("default",function(a){a.each(function(a,h){var i=$(h),j=g(i);j.reset();var k=d(i);k.each(function(a,d){var g=$(d),h=c(g),i=j.getWordItem(h);f(g),b(h)||(j.removeWordItem(i),e(g,i,i,j))})})})}}}),$__System.register("330",["3"],function(a){"use strict";function b(a,b){return c.isEmpty(b)?$([]):a.filter(function(a,d){var e=$(d),f=e.closest(".itemBasedQuestion");return c.getRcfId(f)===b})}var c;return a("default",b),{setters:[function(a){c=a}],execute:function(){}}}),$__System.register("3b1",["143","330","1c","1d","3c0","3b0","3b2","3b3","3b4","3b5","3b6","3b7","3bf"],function(a){function b(a,b){return b?d(a,b):a}var c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default}],execute:function(){"use strict";o=function(){function a(b){f(this,a);var c=this;g(c,b)}return e(a,[{key:"clearMarkedAnswers",value:function(){c(this.$selector)}},{key:"showAnswers",value:function(a){l(this.$selector,a)}},{key:"isComplete",value:function(a){var c=b(this.$selector,a);return i(c)}},{key:"getUserAnswers",value:function(a){var c=b(this.$selector,a);return h(c)}},{key:"showMarkedAnswers",value:function(a,c){this.clearMarkedAnswers();var d=b(this.$selector,c);m(d,a)}},{key:"showUserAnswers",value:function(){n(this.$selector)}},{key:"close",value:function(){j(this.$selector)}},{key:"reset",value:function(){k(this.$selector)}}]),a}(),a("default",o)}}}),$__System.register("3c1",["128","129","311","1d"],function(a){var b,c,d,e,f;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,"itemSentenceBuilder")}return c(d,a),d}(d),a("default",f)}}}),$__System.registerDynamic("3c2",["3c3","3c4"],!0,function(a,b,c){var d=(this||self,a("3c3")),e=a("3c4");c.exports=function(a){return d(e(a))}}),$__System.registerDynamic("3c5",["3c2","3c6"],!0,function(a,b,c){var d=(this||self,a("3c2"));a("3c6")("getOwnPropertyDescriptor",function(a){return function(b,c){return a(d(b),c)}})}),$__System.registerDynamic("3c7",["3c8","3c5"],!0,function(a,b,c){var d=(this||self,a("3c8"));a("3c5"),c.exports=function(a,b){return d.getDesc(a,b)}}),$__System.registerDynamic("3c9",["3c7"],!0,function(a,b,c){this||self;c.exports={default:a("3c7"),__esModule:!0}}),$__System.registerDynamic("128",["3c9"],!0,function(a,b,c){"use strict";var d=(this||self,a("3c9").default);b.default=function(a,b,c){for(var e=!0;e;){var f=a,g=b,h=c;e=!1,null===f&&(f=Function.prototype);var i=d(f,g);if(void 0!==i){if("value"in i)return i.value;var j=i.get;if(void 0===j)return;return j.call(h)}var k=Object.getPrototypeOf(f);if(null===k)return;a=k,b=g,c=h,e=!0,i=k=void 0}},b.__esModule=!0}),$__System.registerDynamic("3ca",["3c8"],!0,function(a,b,c){var d=(this||self,a("3c8"));c.exports=function(a,b){return d.create(a,b)}}),$__System.registerDynamic("2cf",["3ca"],!0,function(a,b,c){this||self;c.exports={default:a("3ca"),__esModule:!0}}),$__System.registerDynamic("3cb",["3c8","3cc","3cd","3ce"],!0,function(a,b,c){var d=(this||self,a("3c8").getDesc),e=a("3cc"),f=a("3cd"),g=function(a,b){if(f(a),!e(b)&&null!==b)throw TypeError(b+": can't set as prototype!")};c.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(b,c,e){try{e=a("3ce")(Function.call,d(Object.prototype,"__proto__").set,2),e(b,[]),c=!(b instanceof Array)}catch(a){c=!0}return function(a,b){return g(a,b),c?a.__proto__=b:e(a,b),a}}({},!1):void 0),check:g}}),$__System.registerDynamic("3cf",["3d0","3cb"],!0,function(a,b,c){var d=(this||self,a("3d0"));d(d.S,"Object",{setPrototypeOf:a("3cb").set})}),$__System.registerDynamic("3d1",["3cf","3d2"],!0,function(a,b,c){this||self;a("3cf"),c.exports=a("3d2").Object.setPrototypeOf}),$__System.registerDynamic("3d3",["3d1"],!0,function(a,b,c){this||self;c.exports={default:a("3d1"),__esModule:!0}}),$__System.registerDynamic("129",["2cf","3d3"],!0,function(a,b,c){"use strict";var d=(this||self,a("2cf").default),e=a("3d3").default;b.default=function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=d(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(e?e(a,b):a.__proto__=b)},b.__esModule=!0}),$__System.register("3d4",[],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]?"sentenceBuilder":arguments[1];return a.find("*[data-rcfinteraction='"+b+"']:not(.example)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("16c",[],function(a){"use strict";function b(a){a.addClass("selected")}function c(a){a.removeClass("selected")}function d(a){a.toggleClass("selected",!e(a))}function e(a){return a.hasClass("selected")}function f(a){return a.filter(":not(.example)")}return{setters:[],execute:function(){a("selectItem",b),a("deselectItem",c),a("isItemSelected",e),a("toggleSelectItem",d),a("filterOutExamples",f)}}}),$__System.register("220",["16c"],function(a){"use strict";function b(a){c(a)}var c;return a("default",b),{setters:[function(a){c=a.deselectItem}],execute:function(){}}}),$__System.register("3d5",["3","13","220"],function(a){"use strict";function b(a,b){var g=e(a,"data-audiolink"),h=d(a),i=h.find(".dev-droppable.selected"),j=a.siblings();c(i)||f(i),f(a),f(j),b.removeWordItem(a),c(g)||a.trigger("rcf.play.audio",[g])}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.isEmpty,d=a.getActivityElementFromChild},function(a){e=a.getDataAttribute},function(a){f=a.default}],execute:function(){}}}),$__System.register("189",["72"],function(a){"use strict";function b(a){return"Y"===c(a,"moved")}var c;return a("default",b),{setters:[function(a){c=a.getDataFromElement}],execute:function(){}}}),$__System.register("188",[],function(a){"use strict";function b(a){var b=a.clone().css({width:a.width()+2+"px"});return b}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("16b",["188","189","d","3d5"],function(a){"use strict";function b(a,b){a.draggable({cancel:".inlinePlayer",cursor:"pointer",distance:5,scroll:!0,scrollSensitivity:100,helper:function(a){var b=e(a.currentTarget);return c(b)},start:function(a){var c=e(a.currentTarget);f(c,b)},stop:function(a){var c=e(a.target);d(c)||b.addWordItem(c)}})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("166",["3"],function(a){"use strict";function b(a){return!c(a.closest(".wordBox"))}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("3d6",["3","166","16d"],function(a){"use strict";function b(a){var b=a.$wordBox;b.droppable({accept:".sentenceBuilderContainer .dragItem",hoverClass:"hoverClass",drop:function(b,f){var g=$(f.draggable),h=c(g)||"";if(d(g))return!1;g.remove();var i=a.getWordItem(h);e(i,!1),a.addWordItem(i)}}),b.disableSelection()}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("3d7",["16b","3d8","3d6"],function(a){"use strict";function b(a,b){var f=b.getWordItems(),g=d(a);c(f,b),e(b),f.draggable("option",{connectToSortable:g,containment:a})}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("16d",["72"],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];c(a,"moved",b?"Y":"N")}var c;return a("default",b),{setters:[function(a){c=a.setDataOnElement}],execute:function(){}}}),$__System.register("3d9",["13","72","d"],function(a){"use strict";function b(a){a.find("li").each(function(a,b){var f=e(b),g="y"===c(f,"data-fixed"),h=c(f,"data-fixedpos")||"";g&&d(f,"pos",h)})}var c,d,e;return a("default",b),{setters:[function(a){c=a.getDataAttribute},function(a){d=a.setDataOnElement},function(a){e=a.default}],execute:function(){}}}),$__System.register("3da",["d","3db","16d","3d9"],function(a){"use strict";function b(a,b){var c=f(b.placeholder),d=c.closest("ul");c.html("&nbsp;"),i(d)}function c(a,b){var c=f(b.item),d=f(b.helper);d.removeAttr("style"),h(c,!0),g(c)}function d(a){a.find("li.dev-placeholder").remove()}function e(a){var b=a;b.disableSelection()}var f,g,h,i;return{setters:[function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){a("removeDevPlaceholderItems",d),a("startOrderingSentence",b),a("disableMouseTextSelection",e),a("wordDroppedOntoSentence",c)}}}),$__System.register("3dc",["3d8","3dd","3d9","3da"],function(a){"use strict";function b(a){var b=c(a),j=b;j.sortable({cancel:".fixed",placeholder:"draggablePlaceHolder",forcePlaceholderSize:!0,tolerance:"pointer",helper:"clone",cursor:"pointer",scrollSpeed:10,containment:a,start:function(a,b){g(a,b)},over:function(){d(j)},change:function(){d(j)},update:function(){d(j)},receive:function(a,b){h(a,b)}}),f(j),i(j),e(j)}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.removeDevPlaceholderItems,g=a.startOrderingSentence,h=a.wordDroppedOntoSentence,i=a.disableMouseTextSelection}],execute:function(){}}}),$__System.register("3de",["17b","3d7","3dc"],function(a){"use strict";function b(a){var b=c(a);b.randomizeItems(),e(a),d(a,b)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("3df",["3","3e0"],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]?"sentenceBuilder":arguments[1];a.on("rcf.single.answer","*[data-rcfinteraction='"+b+"']",function(a,b){var e=$(a.currentTarget),f=b.elm;f==c(e)&&d(e,b)})}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("3e1",["3d4","3de","3df"],function(a){"use strict";function b(a,b){var f=arguments.length<=2||void 0===arguments[2]?"sentenceBuilder":arguments[2],g=c(b,f);g.each(function(a,b){var c=$(b);d(c)}),e(b,f),a.$activity=b,a.$selector=g}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("3e2",["3"],function(a){"use strict";function b(a,b){var d=b.elm;if(!c(d)&&!c(b.verification)){var e=a.filter("[data-rcfid='"+d+"']");if(!c(e)){var f=b.verification&&"1"==b.verification[0],g=e.find(".mark"),h=f?"correct":"wrong";g.addClass(h)}}}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("3e3",["3e2"],function(a){"use strict";function b(a,b){var d=b.answers;d.forEach(function(b){return c(a,b)})}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("3d8",[],function(a){"use strict";function b(a){return a.find(".sentenceBuilder ul.sentenceWordList")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3e4",["3","d"],function(a){"use strict";function b(a){var b=a.find("li.prefix");c(b)||(b.detach(),b.insertAfter(d("li:first",a)))}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("3e5",["3","d"],function(a){"use strict";function b(a){var b=a.find("li.suffix");c(b)||(b.detach(),b.insertAfter(d("li:last",a)))}var c,d;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.default}],execute:function(){}}}),$__System.register("3dd",["d","3e4","3e5"],function(a){"use strict";function b(a){var b=c("<li></li>"),f=a.find("li.ui-sortable-helper");b.prependTo(a),d(a),e(a),f.detach(),f.insertAfter(c("li:last",a)),b.remove()}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("3e6",["3e7"],function(a){"use strict";function b(a){var b=c(a);b.filter(":not(.fixed)").remove()}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("3e8",["3"],function(a){"use strict";function b(a,b,d){var e=b.getWordItem(a);if(!c(e)){var f=e.clone();return b.removeWordItem(e),d.append(f),f}return e=d.find("li.fixed[data-rcfid='"+a+"']")}var c;return a("default",b),{setters:[function(a){c=a.isEmpty}],execute:function(){}}}),$__System.register("3e0",["3","13","17b","3d8","3dd","3e6","3e8"],function(a){"use strict";function b(a,b){var j=e(a),k=f(a);h(a),j.reset(),b.items.forEach(function(a,b){var e=i(a,j,k);c(e)||d(e,"data-sortindex",b)});var l=k.find("li[data-sortindex]");l.tsort("",{attr:"data-sortindex",order:"asc"}),g(k)}var c,d,e,f,g,h,i;return a("default",b),{setters:[function(a){c=a.isEmpty},function(a){d=a.setDataAttribute},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default}],execute:function(){}}}),$__System.register("3e9",["3","3e0"],function(a){"use strict";function b(a,b,e){a.each(function(a,f){var g=$(f),h=b.elm;c(g)===h&&(!e||e&&b.verification&&"1"==b.verification[0])&&d(g,b)})}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("3ea",["3","3e9"],function(a){"use strict";function b(a,b){var e=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],f=b.answers,g=c(a),h=g[0].id,i=b.id;i===h&&f.forEach(function(b){return d(a,b,e)})}var c,d;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild},function(a){d=a.default}],execute:function(){}}}),$__System.register("3eb",["3","141","3ea"],function(a){"use strict";function b(a){var b=e(a),g=c(a);d(b)||f(a,{id:g[0].id,answers:b})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getActivityElementFromChild,d=a.isEmpty},function(a){e=a.getUserAnswer},function(a){f=a.default}],execute:function(){}}}),$__System.register("3ec",["3","72","d","3ed"],function(a){"use strict";function b(a){f(a).each(function(a,b){var f=e(b),g=c(f)||"";d(f,"wordItemID",g)})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.setDataOnElement},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("3ee",["3ec"],function(a){"use strict";function b(a,b,d){a.$wordBox=b,a.parentSelector=d,c(a)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("3ef",["3"],function(a){"use strict";function b(a){var b="",e=a.$wordBox.closest(".itemBasedQuestion");d(e)||(b=c(e)||"");var f=a.$wordBox.find("ul");f.mmRandomize("li",b)}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId,d=a.isEmpty}],execute:function(){}}}),$__System.register("3f0",[],function(a){"use strict";function b(a,b){return b?a.$wordBox.find('li[data-rcfid="'+b+'"]'):$([])}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3f1",[],function(a){"use strict";function b(a){return a.hasClass("complex")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3f2",["3db","3f3","3f4"],function(a){"use strict";function b(a){var b=e(a);b<1||(--b,c(a,b<1),d(a,b))}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("3f5",["3f6","3f1","3db","3f2"],function(a){"use strict";function b(a,b){if(b)return b.data("moved",""),c(b)?void f(b):void(d(b)||e(b))}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("3f6",[],function(a){"use strict";function b(a){return!!a.attr("data-restrictcount")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3f4",["3f7"],function(a){"use strict";function b(a){var b=c(a),d=parseInt(a.attr("data-displaycount")||b);return d}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("3f8",["3f6","3f7","3f4","3f3"],function(a){"use strict";function b(a,b){if(b&&(b.data("moved","N").removeClass("dragged"),c(b))){var g=d(b);if(!(g<1)){var h=e(b);h<g&&f(b,++h)}}}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("3f9",[],function(a){"use strict";function b(a){return a.$wordBox.closest(a.parentSelector).find(".rcfDroppable .dragTarget:not(.example)")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3fa",["3","3f9"],function(a){"use strict";function b(a,b){var e=d(a).filter(".populated"),f=c(b)||"",g=0;return e.each(function(){var a=$(this);a.data("wordItemID")===f&&g++}),g}var c,d;return a("default",b),{setters:[function(a){
c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("3db",[],function(a){"use strict";function b(a){var b=arguments.length<=1||void 0===arguments[1]||arguments[1];a.toggleClass("dragged",b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3fb",["3f7","3ed","3fa","3f3","3db"],function(a){"use strict";function b(a){var b=d(a);b.each(function(){var b=$(this),d=0,h=c(b),i=e(a,b);h>0?(d=h-i,f(b,d),g(b,d<1)):i>0&&g(b,!0)})}var c,d,e,f,g;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default}],execute:function(){}}}),$__System.register("3ed",[],function(a){"use strict";function b(a){return a.$wordBox.find("li")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3f7",[],function(a){"use strict";function b(a){return parseInt(a.attr("data-restrictcount")||0)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3f3",["3f7"],function(a){"use strict";function b(a,b){var d=c(a);b>d&&(b=d),a.attr("data-displaycount",b)}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("3fc",["d","3ed","3f7","3f3"],function(a){"use strict";function b(a){var b=d(a);b.removeClass("selected dragged").data("moved","N").each(function(){var a=c(this);f(a,e(a))})}var c,d,e,f;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default}],execute:function(){}}}),$__System.register("3b8",["1c","1d","3ee","3ef","3f0","3ed","3f5","3f8","3fb","3fc"],function(a){var b,c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){"use strict";l=function(){function a(b){var e=arguments.length<=1||void 0===arguments[1]?".activity":arguments[1];c(this,a);var f=this;d(f,b,e)}return b(a,[{key:"randomizeItems",value:function(){var a=this;e(a)}},{key:"getWordItem",value:function(a){var b=this;return f(b,a)}},{key:"getWordItems",value:function(){var a=this;return g(a)}},{key:"removeWordItem",value:function(a){var b=this;h(b,a)}},{key:"addWordItem",value:function(a){var b=this;i(b,a)}},{key:"updateRestrictionCounts",value:function(){var a=this;j(a)}},{key:"reset",value:function(){var a=this;k(a)}}]),a}(),a("default",l)}}}),$__System.register("17b",["3b8"],function(a){"use strict";function b(a){var b=a.find("div.wordBox"),d=new c(b);return d}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("3fd",["141","17b","3e7"],function(a){"use strict";function b(a){a.each(function(a,b){var f=$(b),g=d(f),h=e(f),i=h.filter(":not(.fixed)");c(f),g.reset(),i.remove()})}var c,d,e;return a("default",b),{setters:[function(a){c=a.clearUserAnswer},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("3fe",[],function(a){"use strict";function b(a){return a.find(".mark")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("3ff",[],function(a){"use strict";function b(a){a.removeClass("correct wrong")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("400",[],function(a){"use strict";function b(a){var b=a.find(".dev-markable-container");b.removeClass("incorrectAnswer correctAnswer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("143",["400","3fe","3ff"],function(a){"use strict";function b(a){var b=d(a);e(b),c(a)}var c,d,e;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("401",["3e7"],function(a){"use strict";function b(a){var b=!0;return a.each(function(a,d){var e=$(d),f=c(e);f.length<1&&(b=!1)}),b}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("402",["3e7"],function(a){"use strict";function b(a){var b=c(a);return b.map(function(a,b){return b.textContent.toLowerCase()}).get().join("").replace(/\s+/g,"")}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("3e7",[],function(a){"use strict";function b(a){return a.find(".sentenceBuilder ul li")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("403",["3","3e7"],function(a){"use strict";function b(a){var b=d(a);return b.map(function(a,b){return c($(b))}).get()}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default}],execute:function(){}}}),$__System.register("404",["3","402","403"],function(a){"use strict";function b(a){var b=d(a),f=e(a),g=c(a)||"";return{elm:g,type:"choice",items:f,value:b}}var c,d,e;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.default}],execute:function(){}}}),$__System.register("405",["404"],function(a){"use strict";function b(a){var b=a.map(function(a,b){var d=$(b);return c(d)}).get();return b}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("37e",[],function(a){"use strict";function b(a,b){a.data("user-answer",b)}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("21a",[],function(a){"use strict";function b(a){return a.data("user-answer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("1d3",[],function(a){"use strict";function b(a){a.removeData("user-answer")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("141",["37e","21a","1d3"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("storeUserAnswer",b),a("getUserAnswer",c),a("clearUserAnswer",d)}}}),$__System.register("406",["141","405"],function(a){"use strict";function b(a){var b=d(a);c(a,b)}var c,d;return a("default",b),{setters:[function(a){c=a.storeUserAnswer},function(a){d=a.default}],execute:function(){}}}),$__System.register("311",["143","401","405","406","1c","1d","3e1","3ea","3e3","3eb","3fd"],function(a){var b,c,d,e,f,g,h,i,j,k,l,m;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){"use strict";m=function(){function a(b){var c=arguments.length<=1||void 0===arguments[1]?"sentenceBuilder":arguments[1];g(this,a);var d=this;h(d,b,c)}return f(a,[{key:"showAnswers",value:function(a,b){var c=this;e(c.$selector),i(c.$selector,a,b)}},{key:"showMarkedAnswers",value:function(a){var b=this;j(b.$selector,a)}},{key:"showUserAnswers",value:function(){var a=this;k(a.$selector)}},{key:"isComplete",value:function(){var a=this;return c(a.$activity)}},{key:"getUserAnswers",value:function(){var a=this;return d(a.$selector)}},{key:"clearMarkedAnswers",value:function(){var a=this;b(a.$selector)}},{key:"reset",value:function(){var a=this;l(a.$selector)}}]),a}(),a("default",m)}}}),$__System.register("407",["128","129","311","1d"],function(a){var b,c,d,e,f,g;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default}],execute:function(){"use strict";f="itemWordInsert",g=function(a){function d(a){e(this,d),b(Object.getPrototypeOf(d.prototype),"constructor",this).call(this,a,f)}return c(d,a),d}(d),a("default",g)}}}),$__System.register("408",["334","352","359","371","399","407","38c","3b1","3c1"],function(a){"use strict";function b(a,b){switch(b){case"rcf_itembased_dropdown":return new c(a);case"rcf_itembased_typein":return new d(a);case"rcf_itembased_typeingroup":return new e(a);case"rcf_itembased_radio":return new f(a);case"rcf_itembased_radio_item_select":return new i(a);case"rcf_itembased_selectabletext":return new g(a);case"rcf_itembased_complexdroppable_block":return new j(a);case"rcf_itembased_sentencebuilder":return new k(a);case"rcf_itembased_wordinsert":return new h(a);default:return null}}var c,d,e,f,g,h,i,j,k;return{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){a("create",b)}}}),$__System.register("409",["261","408","31b"],function(a){"use strict";function b(a,b){var f=e(a);if(!(f.length<1)){var g=[];try{f.forEach(function(b){var c=d.create(a,b);if(!c)throw new Error("Error creating itemBased interaction "+b);g.push(c)})}catch(a){c.alert("Error creating item based interactions ["+g+"] : "+a+" for activity "+b)}return g}}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a},function(a){e=a.getItemBasedInteractionsFromActivity}],execute:function(){a("create",b)}}}),$__System.register("40a",[],function(a){"use strict";return{setters:[],execute:function(){a("default",Math.seedrandom)}}}),$__System.register("40b",["13"],function(a){"use strict";function b(a){var b=a.find("[data-rcfinteraction]:not(.example)"),e=b.filter(function(a,b){var e=$(b),f=c(e,"data-rcfinteraction")||"",g=d.indexOf(f)>-1;return!g&&!e.hasClass("distractor")});return e}var c,d;return{setters:[function(a){c=a.getDataAttribute}],execute:function(){a("get",b),d=["videoElement","flashObject","audioElement","inlineAudioElement","unmarkedTextInput","flashcard","interactiveImage","carousel","simpleCarousel","splitBlock"]}}}),$__System.register("40c",["d"],function(a){"use strict";function b(a){var b=null;"function"==typeof c.fn.autosize&&(b=a.find("textarea:not(.reviewPopupText)"),b.length>0&&b.autosize())}var c;return{setters:[function(a){c=a.default}],execute:function(){a("setup",b)}}}),$__System.register("40d",["3","4","40e","d"],function(a){function b(a){var b=d();if("mobile"!==b){var g=a.find("[data-equaliseheight='y']");c.isEmpty(g)||g.each(function(){var a=f(this).children("div.block"),b=Math.max.apply(Math,e(a.map(function(){try{return parseInt(f(this).height())}catch(a){return 1}}).get()));a.css("min-height",b+"px")})}}var c,d,e,f;return{setters:[function(a){c=a},function(a){d=a.getApplicationDeviceMode},function(a){e=a.default},function(a){f=a.default}],execute:function(){"use strict";a("setup",b)}}}),$__System.register("4",["3"],function(a){"use strict";function b(){var a=f("deviceMode");return c(a)&&(a=d()?"mobile":e()?"mobile":"desktop",f("deviceMode",a)),a}var c,d,e,f;return{setters:[function(a){c=a.isEmpty,d=a.isMobileDevice,e=a.isTabletDevice,f=a.cookie}],execute:function(){a("getApplicationDeviceMode",b)}}}),$__System.register("40f",["4","d"],function(a){"use strict";function b(a){"mobile"==c()||"n"==a.attr("data-desktopdraggable")?a.find("[data-rcfinteraction='ordering']").each(function(){d(this).find(".horizontal.mobile-vertical").removeClass("horizontal").addClass("vertical"),d(this).find(".vertical.mobile-horizontal").removeClass("vertical").addClass("horizontal")}):a.find(".mobile-vertical,.mobile-horizontal").removeClass("mobile-vertical mobile-horizontal")}var c,d;return{setters:[function(a){c=a.getApplicationDeviceMode},function(a){d=a.default}],execute:function(){a("setup",b)}}}),$__System.register("410",[],function(a){"use strict";function b(a){a.find("div.rubric > *:not(.clear):last").addClass("lastChild"),a.find("> div:not(.clear)").last().addClass("lastChild"),a.find("div.main > div:not(.clear)").last().addClass("lastChild"),a.find("div.backgroundArea > div:last-child").addClass("lastChild"),a.find("div.interactiveText > *:not(.clear):last-child").addClass("lastChild"),a.find("div.blockSet > div.block:last-child").addClass("lastChild"),a.find("div.block > *:not(.clear):last-child").addClass("lastChild"),a.find("div.infoBlock > *:not(.clear):last-child"),a.find("div.locating_popup > span:last-child").addClass("lastChild"),a.find("td > p:last-child").addClass("lastChild"),a.find("th > p:last-child").addClass("lastChild"),a.find(".hintBlock p:last-child").addClass("lastChild")}return{setters:[],execute:function(){a("setup",b)}}}),$__System.register("411",["3"],function(a){"use strict";function b(a){var b,d=a.closest("[data-languages]");c.isEmpty(d)||(b=a.attr("data-switchToLanguage"),d.find(".current").removeClass("current"),d.find('[data-lang="'+b+'"]').addClass("current"))}var c;return{setters:[function(a){c=a}],execute:function(){a("toggleElementLanguage",b)}}}),$__System.register("412",["411","d"],function(a){"use strict";function b(a){a.find("*[data-lang]").length>0&&a.on("click",".toggleLanguageButton",function(){c(d(this))})}var c,d;return{setters:[function(a){c=a.toggleElementLanguage},function(a){d=a.default}],execute:function(){a("setup",b)}}}),$__System.register("413",["d"],function(a){"use strict";function b(a){var b=a.find(".rcfRippleButton");b.each(function(){c(this).rcfRippleButton()})}var c;return{setters:[function(a){c=a.default}],execute:function(){a("setup",b)}}}),$__System.register("414",["3","17","135","261","319","409","410","412","413","415","1c","1d","40e","40a","40b","40c","40d","40f"],function(a){function b(a){return new v(a)}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return{setters:[function(a){c=a},function(a){d=a.create,e=a.close},function(a){f=a.create},function(a){g=a.default},function(a){h=a.create},function(a){i=a.create},function(a){j=a.setup},function(a){k=a.setup},function(a){l=a.setup},function(a){m=a.isItemBased},function(a){n=a.default},function(a){o=a.default},function(a){p=a.default},function(a){q=a.default},function(a){r=a.get},function(a){s=a.setup},function(a){t=a.setup},function(a){u=a.setup}],execute:function(){"use strict";a("create",b),v=function(){function a(b){if(o(this,a),c.isEmpty(b))throw"Empty / Invalid activity div passed to Activity View constructor";this.$activity=b,this.id=b[0].id,this.activityMode="default",q(this.id);try{this.$jPlayer=d(b),this.unmarkedInteractions=f(b,this.id),this.markedInteractions=h(b,this.id),this.interactionArray=[].concat(p(this.markedInteractions),p(this.unmarkedInteractions||[])),this.$answerableObjects=r(b),m(b)&&(this.itemBasedInteractions=i(b,this.id)),s(b),t(b),u(b),j(b),k(b),l(b)}catch(a){g.alert("Error setting up activity ["+this.id+"]\n\n"+a)}}return n(a,[{key:"close",value:function(){if(this.interactionArray)for(var a=0,b=this.interactionArray.length;a<b;a++)"function"==typeof this.interactionArray[a].close&&this.interactionArray[a].close();this.unmarkedInteractions=null,this.markedInteractions=null,this.$answerableObjects=null,this.interactionArray=null,e(this.$jPlayer),this.$jPlayer=null}}]),a}()}}}),$__System.register("b",["d"],function(a){"use strict";function b(){f.on.apply(f,arguments)}function c(){f.off.apply(f,arguments)}function d(){f.trigger.apply(f,arguments)}var e,f;return{setters:[function(a){e=a.default}],execute:function(){f=e({}),a("channel",f),a("subscribe",b),a("unsubscribe",c),a("publish",d)}}}),$__System.register("416",["417","418"],function(a){"use strict";function b(a,b,e,f){if(void 0===e&&(e=!1),!d(a,b))return!1;var g=c(a);g.forEach(function(a){"function"==typeof a.showAnswers&&a.showAnswers(b,e,f)})}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.validateJsonAnswers}],execute:function(){a("showAnswers",b)}}}),$__System.register("419",["1c","1d"],function(a){function b(){return new e}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";a("create",b),e=function(){function a(){d(this,a),this.answerIndex=null,this.subAnswerIndex=null}return c(a,[{key:"isIndexWithinBounds",value:function(a){return(this.answerIndex||0)<a.length}},{key:"setIndexToFirstAnswer",value:function(){this.answerIndex=0,this.subAnswerIndex=0}},{key:"setIndexToNoAnswer",value:function(){this.answerIndex=null}}]),a}()}}}),$__System.register("41a",["d"],function(a){"use strict";function b(a){var b=a.$answerableObjects;return a.$activity.find(".rcfCarousel:not(.simple)").length>0&&(b=b.filter(function(){return c(this).closest(".owl-item.active").length>0})),b}var c;return{setters:[function(a){c=a.default}],execute:function(){a("getAnswerableDomElements",b)}}});$__System.register("41b",["3"],function(a){"use strict";function b(a,b){var e=c(a);if(!d(e))for(var f=b.answers,g=0;g<f.length;g++)if(f[g].elm===e)return f[g]}var c,d;return{setters:[function(a){c=a.getRcfId,d=a.isEmpty}],execute:function(){a("getJsonForAnswerDomElement",b)}}});$__System.register("41c",["3"],function(a){"use strict";function b(a){return a.hasClass("radioTable")?f(a):a.hasClass("hybrid")?g(a):a.hasClass("checkboxTable")?h(a):a.hasClass("dropDown")?i(a):a.hasClass("radioList")?j(a):a.hasClass("checkboxList")?k(a):a.hasClass("itemSelectList")?l(a):null}function c(a){var b=[];for(var c in a.value){var d=a.value[c];b=b.concat(d.value)}return b}function d(a){return m(a)}function e(a,b){return a.filter(function(a,c){var d=$(c),e=n(d);return $.inArray(e,b)>-1})}function f(a){return a.find("table.radioTable .tableAnswerRow:not(.example)")}function g(a){return a.find(".wordBox li.dragItem:not(.distractor)")}function h(a){return a.find("table.checkboxTable tr.tableAnswerRow[data-rcfid]:not(.distractor)")}function i(a){return a.find(".categoriseDropDown:not(.example)")}function j(a){return a.find(".radioListCategoryItem:not(.example)")}function k(a){return a.find(".checkboxListCategoryItem:not(.distractor)")}function l(a){return a.find(".itemSelectListItem:not(.example)")}var m,n;return{setters:[function(a){m=a.distinctArray,n=a.getRcfId}],execute:function(){a("getCategoriseAnswerElements",b),a("getAllAnswerIDsForCategoriseAnswers",c),a("getUniqueAnswerIds",d),a("filterOutUnusedAnswers",e)}}}),$__System.register("41d",["3","41e","41c"],function(a){"use strict";function b(a,b,i){var j=null;if(j=e(b)){var k=f(i),l=g(k),m=h(j,l);if(m){var n=c($(m.get(a.subAnswerIndex)));d(a,m.length,b,i,n)}}}var c,d,e,f,g,h;return{setters:[function(a){c=a.getRcfId},function(a){d=a.updateMarkedSubItem},function(a){e=a.getCategoriseAnswerElements,f=a.getAllAnswerIDsForCategoriseAnswers,g=a.getUniqueAnswerIds,h=a.filterOutUnusedAnswers}],execute:function(){a("categorise",b)}}}),$__System.register("41f",["3","d","41e"],function(a){"use strict";function b(a,b,f){var g=d([]),h=b.hasClass("type_selectableCat")||b.hasClass("type_selectableCatWords"),i=b.hasClass("type_selectableWords"),j=b.hasClass("type_selectable");if(h?g=d(d.map(f.value,function(a){return b.find('[data-rcfid="'+a.elm+'"]')})):i?g=b.find(".selectable[data-catindex]:not(.example,.distractor)"):j&&(g=d(d.map(f.value,function(a){return b.find('[data-rcfid="'+a+'"]:not(.distractor)')}))),g){var k=d(g.get(a.subAnswerIndex||0)),l=c(k)||"";e(a,g.length,b,f,l)}}var c,d,e;return{setters:[function(a){c=a.getRcfId},function(a){d=a.default},function(a){e=a.updateMarkedSubItem}],execute:function(){a("interactiveText",b)}}}),$__System.register("420",["41e"],function(a){"use strict";function b(a,b,d){var e=b.find(".crosswordClueContainer li[data-wordid]:not(.example)"),f=$(e.get(a.subAnswerIndex)).attr("data-wordid");c(a,e.length,b,d,f)}var c;return{setters:[function(a){c=a.updateMarkedSubItem}],execute:function(){a("crossword",b)}}}),$__System.register("421",["41e"],function(a){"use strict";function b(a,b,d){var e=b.find(".vcLine:not(.example)"),f=$(e.get(a.subAnswerIndex)).attr("data-rcf-wordid");c(a,e.length,b,d,f)}var c;return{setters:[function(a){c=a.updateMarkedSubItem}],execute:function(){a("verticalCrossword",b)}}}),$__System.register("422",["41e"],function(a){"use strict";function b(a,b,d){var e=function(a,b){return(b.value.find(function(b){return Array.isArray(b.value)?b.value[0]===a:b.value===a})||{elm:null}).elm},f=b.find(".matchItem:not(.distractor, .example)"),g=$(f.get(a.subAnswerIndex)).attr("data-rcfid"),h=e(g,d);c(a,f.length,b,d,h)}var c;return{setters:[function(a){c=a.updateMarkedSubItem}],execute:function(){a("matching",b)}}}),$__System.register("22a",[],function(a){"use strict";function b(a){return a[0].getAttribute("class")||""}function c(a,c){return new RegExp("(\\s|^)"+c+"(\\s|$)").test(b(a))}function d(a,d){!c(a,d)&&a[0].setAttribute("class",(b(a)&&b(a)+" ")+d)}function e(a,d){var e=b(a).replace(new RegExp("(\\s|^)"+d+"(\\s|$)","g"),"$2");c(a,d)&&a[0].setAttribute("class",e)}function f(a,b){(c(a,b)?e:d)(a,b)}return{setters:[],execute:function(){a("getClass",b),a("hasClass",c),a("addClass",d),a("removeClass",e),a("toggleClass",f)}}}),$__System.register("72",["3"],function(a){"use strict";function b(a,b){if(!e(a))return a.data(b)}function c(a,b,c){e(a)||a.data(b,c)}function d(a,b){e(a)||a.removeData(b)}var e;return{setters:[function(a){e=a.isEmpty}],execute:function(){a("getDataFromElement",b),a("setDataOnElement",c),a("removeDataFromElements",d)}}}),$__System.register("225",["3","13","72","22a"],function(a){"use strict";function b(a){var b=(o(a,"data-svgElements")||"").trim().split(" ");return b}function c(a,b){return a.filter(".listenAndColour[data-rcfid="+b+"]")}function d(a){return a.find(".listenAndColourPalette li.colourPaletteItem:not(.distractor,.eraser)")}function e(a,b){return a.find("li[data-colourvalue="+b+"]")}function f(a){return a.find(".listenAndColourPalette li.colourPaletteItem:not(.eraser)")}function g(a){return a.find(".listenAndColourPalette")}function h(a){var b=g(a),c=b.find(".selected");return o(c,"data-colourvalue")||""}function i(a){return p.getDataFromElement(a,"svgAnswerObjects")}function j(a){return a.find("svg")}function k(a){var c=f(a),d=b(a),e=j(a);c.removeClass("selected"),d.forEach(function(a){e.find("#"+a).attr("class","clickableElement")})}function l(a){var b=f(a),c=j(a);b.filter("[data-svgExampleElements]").each(function(a,b){var d=$(b),e=m(d),f=o(d,"data-colourvalue");e.forEach(function(a){var b=c.find("#"+a);q.addClass(b," example "+f+" ")})})}function m(a){var b=o(a,"data-svgExampleElements");return n(b)?[]:b.trim().split(" ")}var n,o,p,q;return{setters:[function(a){n=a.isEmpty},function(a){o=a.getDataAttribute},function(a){p=a},function(a){q=a}],execute:function(){a("getClickableSvgElementIdsFromListenAndColour",b),a("getListenAndColourFromSelectorById",c),a("getNonDistractorPaletteColoursFromListenAndColour",d),a("getPaletteColourByColourValue",e),a("getPaletteColoursFromListenAndColour",f),a("getPaletteFromListenAndColour",g),a("getSelectedPaletteColourFromListenAndColour",h),a("getSvgAnswerObjectsFromListenAndColour",i),a("getSvgElementFromListenAndColour",j),a("resetListenAndColourInteraction",k),a("setupExampleElements",l)}}}),$__System.register("423",["3","225","41e"],function(a){"use strict";function b(a,b,g){var h=e.getNonDistractorPaletteColoursFromListenAndColour(b);if(!d.isEmpty(h)){var i=c(g),j=i[a.subAnswerIndex];f(a,i.length,b,g,j)}}function c(a){return a.value.map(function(a){return a.elm})}var d,e,f;return{setters:[function(a){d=a},function(a){e=a},function(a){f=a.updateMarkedSubItem}],execute:function(){a("listenAndColour",b)}}}),$__System.register("41e",[],function(a){"use strict";function b(a,b,c,d,e){a.subAnswerIndex=a.subAnswerIndex||0,c.trigger("rcf.single.answer",[d,e]),a.subAnswerIndex++,a.subAnswerIndex>b-1&&(a.subAnswerIndex=0,a.answerIndex++)}return{setters:[],execute:function(){a("updateMarkedSubItem",b)}}}),$__System.register("424",["41e","d"],function(a){"use strict";function b(a,b,e,f){!d.isArray(e.value)||"list"!=e.type&&"composite"!=e.type&&"answerKey"!=e.type?(b.trigger("rcf.single.answer",e),a.answerIndex>f-1?a.answerIndex=null:a.answerIndex++):c(a,e.value.length,b,e,a.subAnswerIndex)}var c,d;return{setters:[function(a){c=a.updateMarkedSubItem},function(a){d=a.default}],execute:function(){a("standard",b)}}}),$__System.register("425",["420","421","422","423","424","41d","41f"],function(a){"use strict";function b(a,b,j,k){var l=b.attr("data-rcfinteraction");switch(l){case"categorise":h(a,b,j);break;case"interactiveText":i(a,b,j);break;case"crossword":c(a,b,j);break;case"verticalCrossword":d(a,b,j);break;case"matching":e(a,b,j);break;case"listenAndColour":f(a,b,j);break;default:g(a,b,j,k)}}var c,d,e,f,g,h,i;return{setters:[function(a){c=a.crossword},function(a){d=a.verticalCrossword},function(a){e=a.matching},function(a){f=a.listenAndColour},function(a){g=a.standard},function(a){h=a.categorise},function(a){i=a.interactiveText}],execute:function(){a("showNextAnswerForInteraction",b)}}}),$__System.register("426",["418","425","427","41a","41b"],function(a){"use strict";function b(a,b,j){if(!c(a,j))return!1;null===b.answerIndex&&(e(a,b,!0),b.setIndexToFirstAnswer());var k=f(a),l=!1;do{if(!b.isIndexWithinBounds(k))return e(a,b,!0),b.setIndexToNoAnswer(),i;var m=$(k[b.answerIndex]);if(0===m.length)return e(a,b,!0),b.setIndexToNoAnswer(),h;var n=g(m,j);Array.isArray(n.value)&&0===n.value.length?(b.subAnswerIndex=0,b.answerIndex++):(d(b,m,n,k.length),l=!0)}while(!l);return b.isIndexWithinBounds(j.answers)?i:h}var c,d,e,f,g,h,i;return{setters:[function(a){c=a.validateJsonAnswers},function(a){d=a.showNextAnswerForInteraction},function(a){e=a.resetInteractions},function(a){f=a.getAnswerableDomElements},function(a){g=a.getJsonForAnswerDomElement}],execute:function(){a("showNextAnswer",b),h=!1,i=!0}}}),$__System.register("427",["417"],function(a){"use strict";function b(a,b){var d=c(a);a.$activity.trigger("rcf.stop.audio",[!0]);try{d.forEach(function(a){"function"==typeof a.reset&&a.reset(b)})}catch(a){throw"Error trying to reset answers : "+a}}var c;return{setters:[function(a){c=a.default}],execute:function(){a("resetInteractions",b)}}}),$__System.register("428",[],function(a){"use strict";function b(a,b){var c=null!==a.$answerableObjects&&a.$answerableObjects.length>0;if(!c)return!1;var d=b.answerIndex||0;return d<a.$answerableObjects.length}return{setters:[],execute:function(){a("hasMoreAnswers",b)}}}),$__System.register("429",["417","418"],function(a){"use strict";function b(a,b,e){d(a,b),a.$activity.addClass("marking");var f=c(a);try{f.forEach(function(a){"function"==typeof a.showMarkedAnswers&&a.showMarkedAnswers(b,e)})}catch(a){throw"Error when trying to mark the answers : "+a}}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.validateJsonMarkedAnswers}],execute:function(){a("showMarkedAnswers",b)}}}),$__System.register("42a",["417"],function(a){"use strict";function b(a,b){var d=c(a);a.$activity.removeClass("marking");try{d.forEach(function(a){"function"==typeof a.clearMarkedAnswers&&a.clearMarkedAnswers(b)})}catch(a){throw"Error trying to hide marked answers : "+a}}var c;return{setters:[function(a){c=a.default}],execute:function(){a("hideMarkedAnswers",b)}}}),$__System.register("42b",["417"],function(a){"use strict";function b(a,b){var d=c(a);try{d.forEach(function(a){"function"==typeof a.showUserAnswers&&a.showUserAnswers(b)})}catch(a){throw"Error trying to show users answers : "+a}}var c;return{setters:[function(a){c=a.default}],execute:function(){a("showUserAnswers",b)}}}),$__System.register("42c",["417"],function(a){"use strict";function b(a,b){var d=c(a),e=d.some(function(a){return"function"==typeof a.isComplete&&!a.isComplete(b)});return!e}var c;return{setters:[function(a){c=a.default}],execute:function(){a("isComplete",b)}}}),$__System.register("42d",["417","d"],function(a){"use strict";function b(a,b){var e={},f=c(a);e.id=a.id,e.answers=[];try{f.forEach(function(a){if("function"==typeof a.getUserAnswers){var c=a.getUserAnswers(b);"object"==typeof c&&d.merge(e.answers,c)}})}catch(a){throw"Error trying to get the users answers : "+a}return e}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("getUserAnswers",b)}}}),$__System.register("46",["4c"],function(a){"use strict";function b(a){var b=c(a);a.parent().css("position","relative"),b.addClass("show")}var c;return{setters:[function(a){c=a.getOverlayMask}],execute:function(){a("showOverlayMask",b)}}}),$__System.register("23",["46","42e"],function(a){"use strict";function b(a){return d()?void a.addClass("disabled"):void c(a)}var c,d;return{setters:[function(a){c=a.showOverlayMask},function(a){d=a.supportsPointerEvents}],execute:function(){a("disable",b)}}}),$__System.register("e",[],function(a){"use strict";return{setters:[],execute:function(){a("default",window.Modernizr)}}}),$__System.register("42e",["e"],function(a){"use strict";function b(){return c.testProp("pointerEvents")}var c;return{setters:[function(a){c=a.default}],execute:function(){a("supportsPointerEvents",b)}}}),$__System.register("4c",["d"],function(a){"use strict";function b(a){var b=c(".rcfInteractiveMask");return 0===b.length&&(b=c("<div class='rcfInteractiveMask'></div>").appendTo(a.parent())),b}var c;return{setters:[function(a){c=a.default}],execute:function(){a("getOverlayMask",b)}}}),$__System.register("49",["4c"],function(a){"use strict";function b(a){a.parent().css("position","static");var b=c();b.removeClass("show")}var c;return{setters:[function(a){c=a.getOverlayMask}],execute:function(){a("hideOverlayMask",b)}}}),$__System.register("20",["49","42e"],function(a){"use strict";function b(a){return d()?void a.removeClass("disabled"):void c()}var c,d;return{setters:[function(a){c=a.hideOverlayMask},function(a){d=a.supportsPointerEvents}],execute:function(){a("enable",b)}}}),$__System.register("418",["3"],function(a){"use strict";function b(a,b){if(d.isEmpty(a))throw"Empty activity passed to RCF [validateJsonAnswers]";if(d.isEmpty(b))throw"Empty answers object passed to RCF [validateJsonAnswers]";if(b.id!=a.id)throw"Invalid JSON answers provided for RCF [validateJsonAnswers] - provided for activity ["+a.id+"]\n\nAnswers provided were for ["+b.id+"]";var c=d.isEmpty(b.answers);return!c}function c(a,b){if(d.isEmpty(a))throw"Empty activity passed to RCF [validateJsonMarkedAnswers]";if(d.isEmpty(b))throw"Empty answers object passed to RCF [validateJsonMarkedAnswers]";if(d.isEmpty(b.activity_id))throw"Empty activity_id passed to RCF [validateJsonMarkedAnswers]";if(b.activity_id!=a.id)throw"Invalid Marked JSON Answers provided for activity ["+a.id+"]\n\nAnswers provided were for activity ["+b.activity_id+"]";if(d.isEmpty(b.answers))throw"No answers provided to the RCF"}var d;return{setters:[function(a){d=a}],execute:function(){a("validateJsonAnswers",b),a("validateJsonMarkedAnswers",c)}}}),$__System.register("42f",["6","417","418"],function(a){"use strict";function b(a,b){e(a,b);var f=d(a);try{f.forEach(function(a){"function"==typeof a.provideFeedback&&a.provideFeedback(b)})}catch(a){var g=c.getRcfOptions();throw g.feedbackOptions&&g.feedbackOptions.onFeedbackComplete&&g.feedbackOptions.onFeedbackComplete(),"Error when calling [provideFeedback] on interactions\n"+a}}var c,d,e;return{setters:[function(a){c=a},function(a){d=a.default},function(a){e=a.validateJsonMarkedAnswers}],execute:function(){a("provideFeedback",b)}}}),$__System.register("31a",["3"],function(a){"use strict";function b(a){var b=a.attr("data-interactions")||"",d=a.attr("data-mobileinteractions")||"",e=a.attr("data-desktopinteractions")||"",f=(b+" "+d+" "+e).trim().replace("  "," ");return c.distinctArray(f.trim().split(" "))}var c;return{setters:[function(a){c=a}],execute:function(){a("getInteractionNamesFromActivityAttributes",b)}}}),$__System.register("430",["31a"],function(a){"use strict";function b(a){for(var b=c(a),d=[RCF.InteractionName.PELMANISM,RCF.InteractionName.MOVING_TARGETS,RCF.InteractionName.COMPOSITE_SCENE,RCF.InteractionName.COLOURING],e=!1,f=0;f<d.length;f++)if($.inArray(d[f],b)>-1){e=!0;break}return e}var c;return{setters:[function(a){c=a.getInteractionNamesFromActivityAttributes}],execute:function(){a("hasActivityCompleteUi",b)}}}),$__System.register("431",["d"],function(a){"use strict";function b(a){return c.contains(document.body,a[0]);
}var c;return{setters:[function(a){c=a.default}],execute:function(){a("isAttachedToDom",b)}}}),$__System.register("432",["d"],function(a){"use strict";function b(a){function b(a){var b;if("function"==typeof a.getTeacherFeedback)b=a.getTeacherFeedback();else{if("function"!=typeof a.getUserAnswers)return;b=a.getUserAnswers()}c.merge(e.answers,b)}function d(a){var b;return a.answers.forEach(function(a){a.value.teacher&&(a.value.teacher.score||0===a.value.teacher.score)&&(b=(b||0)+Number(a.value.teacher.score))}),b}var e={id:a.id,answers:[],score:0};try{a.interactionArray.forEach(b)}catch(a){throw"Error trying to get the users answers : "+a}var f=d(e);return(f||0===f)&&(e.score=f,e.teacherScore=f),e}var c;return{setters:[function(a){c=a.default}],execute:function(){a("getTeacherFeedback",b)}}}),$__System.register("433",["13"],function(a){"use strict";function b(a){if(a)return"y"===(c.getDataAttribute(a,"data-isAnswerKey")||"")}var c;return{setters:[function(a){c=a}],execute:function(){a("isAnswerKeyActivity",b)}}}),$__System.register("434",["13"],function(a){"use strict";function b(a){if(a)return"y"===(c.getDataAttribute(a,"data-isTeacherTip")||"")}var c;return{setters:[function(a){c=a}],execute:function(){a("isTeacherTipActivity",b)}}}),$__System.register("435",["13","436"],function(a){"use strict";function b(a,b){var e=d(a,b);return parseInt(c(e,"data-itemPointsAvailable"))||0}var c,d;return a("default",b),{setters:[function(a){c=a.getDataAttribute},function(a){d=a.getItemBasedQuestionById}],execute:function(){}}}),$__System.register("437",[],function(a){"use strict";function b(a){return a.activityMode}return{setters:[],execute:function(){a("getActivityMode",b)}}}),$__System.register("438",["136","439"],function(a){function b(a){var b=d();if(c(b).indexOf(a)===-1)throw new Error("Invalid activity mode specified ["+a+"]")}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.getValidModes}],execute:function(){"use strict";a("validateActivityMode",b)}}}),$__System.registerDynamic("3c6",["3d0","3d2","43a"],!0,function(a,b,c){var d=(this||self,a("3d0")),e=a("3d2"),f=a("43a");c.exports=function(a,b){var c=(e.Object||{})[a]||Object[a],g={};g[a]=b(c),d(d.S+d.F*f(function(){c(1)}),"Object",g)}}),$__System.registerDynamic("43b",["43c","3c6"],!0,function(a,b,c){var d=(this||self,a("43c"));a("3c6")("keys",function(a){return function(b){return a(d(b))}})}),$__System.registerDynamic("43d",["43b","3d2"],!0,function(a,b,c){this||self;a("43b"),c.exports=a("3d2").Object.keys}),$__System.registerDynamic("136",["43d"],!0,function(a,b,c){this||self;c.exports={default:a("43d"),__esModule:!0}}),$__System.register("439",[],function(a){"use strict";function b(){return c}var c;return{setters:[],execute:function(){a("getValidModes",b),c={default:{className:""},leaveTeacherFeedback:{className:"leaveTeacherFeedback"},reviewTeacherFeedback:{className:"reviewTeacherFeedback"}}}}}),$__System.register("43e",["136","439"],function(a){function b(a){var b=a.$activity,e=d(),f=c(e).map(function(a){return e[a].className}).join(" ").trim();b.removeClass(f)}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.getValidModes}],execute:function(){"use strict";a("removeModeClasses",b)}}}),$__System.register("43f",["417"],function(a){"use strict";function b(a,b,d){var e=c(a);try{e.forEach(function(a){"function"==typeof a.setInteractionMode&&a.setInteractionMode(b,d)})}catch(a){throw new Error("Error trying to set interaction mode : "+a)}}var c;return{setters:[function(a){c=a.default}],execute:function(){a("setInteractionsMode",b)}}}),$__System.register("440",["13"],function(a){"use strict";function b(a){return c.getDataAttribute(a,"data-pointsAvailable")}var c;return{setters:[function(a){c=a}],execute:function(){a("getPointsAvailable",b)}}}),$__System.register("441",["13"],function(a){"use strict";function b(a){return c.getDataAttribute(a,"data-teacherPointsAvailable")}var c;return{setters:[function(a){c=a}],execute:function(){a("getTeacherPointsAvailable",b)}}}),$__System.register("442",["438","439","440","441","43e","43f"],function(a){"use strict";function b(a,b,i){var j=d(),k=i&&i.score?i.score:0,l=Number(e(a.$activity))+Number(f(a.$activity)),m=parseInt(Number(k)/Number(l)*100);c(b);var n=j[b].className;g(a,j),a.$activity.addClass(n),a.activityMode=b,h(a,b,i),a.$activity.find(".overallScore .scoreResult").text(k),a.$activity.find(".overallScore .scorePercentage").text(" ("+m+"%)")}var c,d,e,f,g,h;return{setters:[function(a){c=a.validateActivityMode},function(a){d=a.getValidModes},function(a){e=a.getPointsAvailable},function(a){f=a.getTeacherPointsAvailable},function(a){g=a.removeModeClasses},function(a){h=a.setInteractionsMode}],execute:function(){a("setActivityMode",b)}}}),$__System.register("443",["3"],function(a){"use strict";function b(a){var b=e(a),h=f(a);g(h)||h.addClass("dev-paused"),c(b),d(a)}function c(a){a.jPlayer("pauseOthers"),a.jPlayer("pause")}function d(a){var b=a.find(".inlinePlayer.playing");b.removeClass("playing")}function e(a){return a.find(".activityJPlayer")}function f(a){var b=a.find(".jp-state-playing");if(!g(b)){if(b.hasClass("videoContainer"))return b.find(".videoPlayer");var c=b.closest(".audioContainer").find(".audioPlayer");return c}}var g;return{setters:[function(a){g=a.isEmpty}],execute:function(){a("pauseMediaPlayers",b)}}}),$__System.register("444",["417","443"],function(a){"use strict";function b(a){var b=c(a);d(a.$activity),b.forEach(function(a){"function"==typeof a.pause&&a.pause()})}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.pauseMediaPlayers}],execute:function(){a("pause",b)}}}),$__System.register("417",["415"],function(a){"use strict";function b(a){var b=a.interactionArray;return c(a.$activity)&&(b=b.concat(a.itemBasedInteractions)),b}var c;return a("default",b),{setters:[function(a){c=a.isItemBased}],execute:function(){}}}),$__System.register("445",["3"],function(a){"use strict";function b(a){var b=c(a);d(b)||(b.removeClass("dev-paused"),b.jPlayer("play"))}function c(a){return a.find(".dev-paused")}var d;return{setters:[function(a){d=a.isEmpty}],execute:function(){a("resumeMediaPlayers",b)}}}),$__System.register("446",["417","445"],function(a){"use strict";function b(a){var b=c(a);d(a.$activity),b.forEach(function(a){"function"==typeof a.resume&&a.resume()})}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.resumeMediaPlayers}],execute:function(){a("resume",b)}}}),$__System.register("447",["3","436"],function(a){"use strict";function b(a){var b=d(a);return c(b)}var c,d;return a("default",b),{setters:[function(a){c=a.getRcfId},function(a){d=a.getActiveItemBasedQuestionInActivity}],execute:function(){}}}),$__System.register("415",["13"],function(a){"use strict";function b(a){if(a)return"y"===c.getDataAttribute(a,"data-isitembased")}var c;return{setters:[function(a){c=a}],execute:function(){a("isItemBased",b)}}}),$__System.register("448",["6"],function(a){"use strict";function b(){return c.getRcfOptions().itemMode||""}var c;return{setters:[function(a){c=a}],execute:function(){a("getItemPlayMode",b)}}}),$__System.register("436",["3"],function(a){"use strict";function b(a,b){return a.find(".itemBasedQuestion[data-rcfid='"+b+"']")}function c(a){return a.find(".itemBasedQuestion")}function d(a){return a.find(".itemBasedQuestion.active")}function e(a,b){return a.find(".itemBasedQuestion[data-itemSetType='"+b+"']")}function f(a){var b=d(a);b.removeClass("active")}function g(a,c){var d=b(a,c);f(a),d.addClass("active")}function h(a,c){var d=b(a,c),e=i(d),f=j(e);if(a.trigger("rcf.stop.audio",[!0]),!k(f)){if(f.hasClass("large")||f.hasClass("inlinePlayerContainer"))return void f.find(".audioPlayButton").click();var g=f.attr("data-audiolink");f.trigger("rcf.play.audio",[g])}}function i(a){return a.find(".prompt")}function j(a){var b=a.find("*[data-audiolink]").first();return k(b)?b=a.find(".audio.large").first():b}var k;return{setters:[function(a){k=a.isEmpty}],execute:function(){a("getItemBasedQuestionById",b),a("getAllItemBasedQuestionsInActivity",c),a("getItemBasedQuestionsByItemSetType",e),a("getActiveItemBasedQuestionInActivity",d),a("setAllItemBasedQuestionsToInactive",f),a("setItemBasedQuestionActive",g),a("playItemAudioFromPrompt",h)}}}),$__System.register("449",["3","436"],function(a){"use strict";function b(a,b){if(!c.isEmpty(a)){var e=d.getItemBasedQuestionById(a,b);if(c.isEmpty(e))throw new Error("Cannot find item based question with id ["+b+"] defined in the activity / items");d.setItemBasedQuestionActive(a,b),d.playItemAudioFromPrompt(a,b)}}var c,d;return{setters:[function(a){c=a},function(a){d=a}],execute:function(){a("playItem",b)}}}),$__System.register("44a",[],function(a){"use strict";function b(a){a.addClass("showFeedback")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("44b",[],function(a){"use strict";function b(a){a.removeClass("showFeedback")}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("44c",["20","23","415","416","419","426","427","428","429","430","431","432","433","434","435","437","440","441","442","444","446","447","448","449","1c","1d","b","42a","42b","42c","42d","42f","44d","44e","44a","44b"],function(a){function b(a){return new N(a)}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N;return{setters:[function(a){c=a.enable},function(a){d=a.disable},function(a){e=a.isItemBased},function(a){f=a.showAnswers},function(a){g=a.create},function(a){h=a.showNextAnswer},function(a){i=a.resetInteractions},function(a){j=a.hasMoreAnswers},function(a){k=a.showMarkedAnswers},function(a){l=a.hasActivityCompleteUi},function(a){m=a.isAttachedToDom},function(a){n=a.getTeacherFeedback},function(a){o=a.isAnswerKeyActivity},function(a){p=a.isTeacherTipActivity},function(a){q=a.default},function(a){r=a.getActivityMode},function(a){s=a.getPointsAvailable},function(a){t=a.getTeacherPointsAvailable},function(a){u=a.setActivityMode},function(a){v=a.pause},function(a){w=a.resume},function(a){x=a.default},function(a){y=a.getItemPlayMode},function(a){z=a.playItem},function(a){A=a.default},function(a){B=a.default},function(a){C=a},function(a){D=a.hideMarkedAnswers},function(a){E=a.showUserAnswers},function(a){F=a.isComplete},function(a){G=a.getUserAnswers},function(a){H=a.provideFeedback},function(a){I=a.getGradableType},function(a){J=a.setStoryPlayingMode,K=a.getStoryPlayingMode},function(a){L=a.default},function(a){M=a.default}],execute:function(){"use strict";a("create",b),N=function(){function a(b){B(this,a);var c=this;this.activity=b,this.answerState=g(),C.subscribe("rcf.new.carousel.page",function(){c.answerState.setIndexToNoAnswer()})}return A(a,[{key:"showAnswers",value:function(a,b,c){void 0===b&&(b=!1),f(this.activity,a,b,c)}},{key:"showNextAnswer",value:function(a){return h(this.activity,this.answerState,a)}},{key:"hasMoreAnswers",value:function(){return j(this.activity,this.answerState)}},{key:"showMarkedAnswers",value:function(a,b){k(this.activity,a,b)}},{key:"hideMarkedAnswers",value:function(a){D(this.activity,a)}},{key:"showUserAnswers",value:function(a){E(this.activity,a)}},{key:"isComplete",value:function(a){return F(this.activity,a)}},{key:"getUserAnswers",value:function(a){return G(this.activity,a)}},{key:"resetAnswers",value:function(a){this.answerState.setIndexToNoAnswer(),i(this.activity,a)}},{key:"closeView",value:function(){this.activity.close(),this.answerState.setIndexToNoAnswer(),C.unsubscribe("rcf.new.carousel.page")}},{key:"disable",value:function(){d(this.activity.$activity)}},{key:"enable",value:function(){c(this.activity.$activity)}},{key:"provideFeedback",value:function(a){H(this.activity,a)}},{key:"hasActivityCompleteUI",value:function(){return l(this.activity.$activity)}},{key:"isAttachedToDom",value:function(){return m(this.activity.$activity)}},{key:"getTeacherFeedback",value:function(){return n(this.activity)}},{key:"isAnswerKeyActivity",value:function(){return o(this.activity.$activity)}},{key:"isTeacherTipActivity",value:function(){return p(this.activity.$activity)}},{key:"getGradableType",value:function(){return I(this.activity.$activity)}},{key:"getPointsAvailable",value:function(){return s(this.activity.$activity)}},{key:"getItemPointsAvailable",value:function(a){return q(this.activity.$activity,a)}},{key:"getTeacherPointsAvailable",value:function(){return t(this.activity.$activity)}},{key:"getActivityMode",value:function(){return r(this.activity)}},{key:"setActivityMode",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1];u(this.activity,a,b)}},{key:"pause",value:function(){v(this.activity)}},{key:"resume",value:function(){w(this.activity)}},{key:"isItemBasedActivity",value:function(){return e(this.activity.$activity)}},{key:"getItemPlayMode",value:function(){if(!e(this.activity.$activity))throw new Error("The current activity is not item based");return y()}},{key:"getActiveItemId",value:function(){if(!e(this.activity.$activity))throw new Error("The current activity is not item based");return x(this.activity.$activity)}},{key:"playItem",value:function(a){if(!e(this.activity.$activity))throw new Error("The current activity is not item based");z(this.activity.$activity,a)}},{key:"setStoryPlayingMode",value:function(a){J(a,this.activity.$activity)}},{key:"getStoryPlayingMode",value:function(){return K()}},{key:"showFeedback",value:function(){L(this.activity.$activity)}},{key:"hideFeedback",value:function(){M(this.activity.$activity)}}]),a}()}}}),$__System.register("44f",["414","44c"],function(a){"use strict";function b(a){var b=c(a);return d(b)}var c,d;return{setters:[function(a){c=a.create},function(a){d=a.create}],execute:function(){a("create",b)}}}),$__System.register("450",[],function(a){"use strict";function b(){$("html").addClass("keyboardOpen")}return{setters:[],execute:function(){a("default",b)}}}),$__System.register("451",[],function(a){"use strict";function b(){$("html").removeClass("keyboardOpen")}return{setters:[],execute:function(){a("default",b)}}}),$__System.register("452",["450","451"],function(a){"use strict";function b(a){var b=a.find("input[type=text], textArea");b.on("focus",c),b.on("blur",d)}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("default",b)}}}),$__System.register("453",["3","4","6","9","452","a","b","c","f","d","44f"],function(a){"use strict";function b(a,b){if(c(a))throw"Invalid ActivityContainer passed to RCF.Application";var p=a.find("*[data-rcfxmlid]:first");if(0===p.length)throw"No RCF Content found inside supplied Activity Container";var q=g.getRcfOptions();n.extend(q,b),g.setRcfOptions(q,p),h();var r=f();"desktop"==r?(a.removeClass("mobile"),n(".mobile").remove(),p.removeAttr("data-mobileinteractions")):"mobile"==r&&(a.removeClass("desktop"),n(".desktop").remove(),p.removeAttr("data-desktopinteractions")),a.addClass(r),"mobile"===r&&i(a),l(),m(a),a.addClass(d()?"isIE":"");for(var s="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=!1,u=0;u<s.length&&!(t=void 0!==a[0].style[s[u]]);u++);t||a.addClass("no-csstransforms3d"),j.setCurrentView(o.create(p)),k.subscribe("show.correct.answers",function(a,b){window.console&&console.log("show.correct.answers is deprecated and will be removed - please use 'set.answers' instead."),j.setAnswers(b)}),k.subscribe("try.again",function(a,b){j.tryAgain(b)}),k.subscribe("set.answers",function(a,b){j.setAnswers(b)}),k.subscribe("show.user.answers",function(){j.showUserAnswers()}),k.subscribe("show.marked.answers",function(a,b){j.showMarkedAnswers(b)}),k.subscribe("hide.marked.answers",function(){j.hideMarkedAnswers()}),k.subscribe("reset.answers",function(){j.resetAnswers()}),k.subscribe("get.user.answers",function(){k.publish("deliver.user.answers",j.getCurrentView().getUserAnswers())}),k.subscribe("update.categories.size",function(){a.find(".categorise").each(function(a,b){var c=n(b),d=c.find(".category .dropTarget");if(d.length>0){var f=c.find(".categories h3");d.css("height","auto");var g=e(d),h=e(f);d.css("height",g+"px"),f.css("min-height",h+"px")}})}),k.subscribe("show.next.answer",function(a,b){j.showNextAnswer(b)}),k.publish("update.categories.size")}var c,d,e,f,g,h,i,j,k,l,m,n,o;return{setters:[function(a){c=a.isEmpty,d=a.isIE,e=a.getLargestHeightFromSelector},function(a){f=a.getApplicationDeviceMode},function(a){g=a},function(a){h=a.cleanUp},function(a){i=a.default},function(a){j=a},function(a){k=a},function(a){l=a.default},function(a){m=a.default},function(a){n=a.default},function(a){o=a}],execute:function(){a("updateContent",b)}}}),$__System.register("44e",["6","205"],function(a){function b(a,b){var c=d();c=f(c,{storyPlayingMode:a}),e(c,b)}function c(){var a=d(),b="comprehension";return a.storyPlayingMode||b}var d,e,f;return{setters:[function(a){d=a.getRcfOptions,e=a.setRcfOptions},function(a){f=a.default}],execute:function(){"use strict";a("setStoryPlayingMode",b),a("getStoryPlayingMode",c)}}}),$__System.register("a",["5","44e"],function(a){"use strict";function b(){return N}function c(a){N=a}function d(a){if(N)return N.showNextAnswer(a)}function e(){return!!N&&N.hasMoreAnswers()}function f(a,b){N&&a&&N.showAnswers(a,!1,b)}function g(a){N&&a&&N.showAnswers(a,!0)}function h(a){N&&N.showUserAnswers(a)}function i(a,b){N&&N.showMarkedAnswers(a,b)}function j(a){N&&N.hideMarkedAnswers(a)}function k(){N&&N.resetAnswers()}function l(a){if(N)return N.getUserAnswers(a)}function m(){if(N)return N.getTeacherFeedback()}function n(a){if(N)return N.isComplete(a)}function o(a){return L.log("isActivityComplete has been deprecated, please call hasActivityBeenAttempted instead"),n(a)}function p(){N&&N.disable()}function q(){N&&N.enable()}function r(a){N&&N.provideFeedback(a)}function s(){if(N)return N.hasActivityCompleteUI()}function t(){if(N)return N.isAnswerKeyActivity()}function u(){if(N)return N.isTeacherTipActivity()}function v(){if(N)return N.isItemBasedActivity()}function w(){if(N)return N.getItemPlayMode()}function x(){if(N)return N.getActiveItemId()}function y(a){N&&N.playItem(a)}function z(){if(N)return N.getGradableType()}function A(){if(N)return N.getPointsAvailable()}function B(a){return N?N.getItemPointsAvailable(a):0}function C(){if(N)return N.getTeacherPointsAvailable()}function D(){if(N)return N.getActivityMode()}function E(a,b){N&&N.setActivityMode(a,b)}function F(){N&&N.pause()}function G(){N&&N.resume()}function H(a){N&&N.setStoryPlayingMode(a)}function I(){return M.getStoryPlayingMode()}function J(){N&&N.showFeedback()}function K(){N&&N.hideFeedback()}var L,M,N;return{setters:[function(a){L=a.default},function(a){M=a}],execute:function(){a("getCurrentView",b),a("setCurrentView",c),a("showNextAnswer",d),a("hasMoreAnswers",e),a("setAnswers",f),a("tryAgain",g),a("showUserAnswers",h),a("showMarkedAnswers",i),a("hideMarkedAnswers",j),a("resetAnswers",k),a("getUserAnswers",l),a("hasActivityBeenAttempted",n),a("isActivityComplete",o),a("disableActivity",p),a("enableActivity",q),a("provideFeedback",r),a("hasActivityCompleteUI",s),a("getGradableType",z),a("getPointsAvailable",A),a("getItemPointsAvailable",B),a("getTeacherPointsAvailable",C),a("isAnswerKeyActivity",t),a("isTeacherTipActivity",u),a("isItemBasedActivity",v),a("getItemPlayMode",w),a("getActiveItemId",x),a("playItem",y),a("getActivityMode",D),a("setActivityMode",E),a("getTeacherFeedback",m),a("pauseActivity",F),a("resumeActivity",G),a("setStoryPlayingMode",H),a("getStoryPlayingMode",I),a("showFeedback",J),a("hideFeedback",K),N=null}}}),$__System.register("454",["455"],function(a){"use strict";function b(a){return"string"==typeof a&&""!==a}var c;return{setters:[function(a){c=a.default}],execute:function(){a("default",function(a){switch(a.type){case"simple":case"choice":return b(a.value);case"list":case"sequence":case"complexordering":return Array.isArray(a.value)&&a.value.length>0;case"composite":return Array.isArray(a.value)!==!1&&c({answers:a.value})>0;case"openGradable_recording":return void 0!==a.value.user&&(b(a.value.user.audioBase64)||b(a.value.user.audioUrl));case"openGradable_writing":return void 0!==a.value.user&&b(a.value.user.value);default:return!1}})}}}),$__System.register("455",["454"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a){return a.answers.reduce(function(a,c){return a+Number(b(c))},0)})}}}),$__System.register("456",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(){return 1})}}}),$__System.register("457",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(){return 1})}}}),$__System.register("458",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(){return 1})}}}),$__System.register("459",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(){return 1})}}}),$__System.register("45a",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){var b=a.markType;return"item"===b&&Array.isArray(a.value)?a.value.length:1})}}}),$__System.register("45b",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){var b=a.markType;return"item"===b?a.value.length:1})}}}),$__System.register("45c",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(){return 1})}}}),$__System.register("45d",["45e"],function(a){"use strict";var b;return{setters:[function(a){b=a.default}],execute:function(){a("default",function(a){return"item"===a.markType?b(a.value):1})}}}),$__System.register("45e",["456","457","458","459","45a","45b","45c","45d"],function(a){"use strict";function b(a){var b=0;return b=a.reduce(function(a,b){switch(b.type){case"openGradable_writing":return a+e(b);case"openGradable_recording":return a+f(b);case"simple":return a+c(b);case"choice":return a+d(b);case"list":return a+g(b);case"sequence":return a+h(b);case"complexordering":return a+i(b);case"composite":return a+j(b);default:return 0}},0)}var c,d,e,f,g,h,i,j;return a("default",b),{setters:[function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.default},function(a){j=a.default}],execute:function(){}}}),$__System.register("45f",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.value&&a.value.user&&a.value.user.value&&a.value.user.value.length>0?1:0})}}}),$__System.register("460",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return a.value&&a.value.user&&(a.value.user.audioBase64||a.value.user.audioUrl)?1:0})}}}),$__System.register("461",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){var b=a.value||"";return b.length>0?1:0})}}}),$__System.register("462",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){return Array.isArray(a.value)?a.value.length:1})}}}),$__System.register("463",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){var b=a.markType;return"item"===b?a.value.length:1})}}}),$__System.register("464",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(){return 1})}}}),$__System.register("465",[],function(a){"use strict";return{setters:[],execute:function(){a("default",function(a){var b=a.markType,c=!0,d=0;return a.value.forEach(function(a){a.value.length>0?d+=Array.isArray(a.value)?a.value.length:1:c=!1}),"list"===b&&c?1:"list"!==b||c?d:0})}}}),$__System.register("466",["460","461","462","463","464","465","45f"],function(a){"use strict";var b,c,d,e,f,g,h;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default}],execute:function(){a("default",function(a){var i=0;return i=a.answers.reduce(function(a,i){switch(i.type){case"openGradable_writing":return a+h(i);case"openGradable_recording":return a+b(i);case"simple":return a+c(i);case"list":return a+d(i);case"sequence":return a+e(i);case"complexordering":return a+f(i);case"composite":return a+g(i);default:return 0}},0)})}}}),$__System.register("467",["466","45e"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default},function(a){c=a.default}],execute:function(){a("default",function(a,d){var e=c(a.answers),f=b(d);return{numberOfAttemptedAnswers:f,numberOfPossibleAnswers:e}})}}}),$__System.registerDynamic("468",["3c8"],!0,function(a,b,c){var d=(this||self,a("3c8"));c.exports=function(a,b,c){return d.setDesc(a,b,c)}}),$__System.registerDynamic("469",["468"],!0,function(a,b,c){this||self;c.exports={default:a("468"),__esModule:!0}}),$__System.registerDynamic("1c",["469"],!0,function(a,b,c){"use strict";var d=(this||self,a("469").default);b.default=function(){function a(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),d(a,e.key,e)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),b.__esModule=!0}),$__System.registerDynamic("1d",[],!0,function(a,b,c){"use strict";this||self;b.default=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")},b.__esModule=!0}),$__System.register("46a",["1c","1d"],function(a){function b(a){return new e(a)}var c,d,e;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){"use strict";a("create",b),e=function(){function a(b){d(this,a),this.json=b}return c(a,[{key:"getAnswerObject",value:function(a){var b=this.json;return b.answers.filter(function(b){return b.elm===a})[0]||null}}]),a}()}}}),$__System.register("5",[],function(a){"use strict";return{setters:[],execute:function(){a("default",{log:function(a){console&&console.log(a)}})}}}),$__System.register("46b",["46c"],function(a){"use strict";function b(a,b){var d=a.value,e=c(d,b.value,b.caseSensitive||null,b.ignorePunctuation);return[e?1:0]}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.registerDynamic("46d",["46e","3c4"],!0,function(a,b,c){var d=(this||self,a("46e")),e=a("3c4");c.exports=function(a){return function(b,c){var f,g,h=String(e(b)),i=d(c),j=h.length;return i<0||i>=j?a?"":void 0:(f=h.charCodeAt(i),f<55296||f>56319||i+1===j||(g=h.charCodeAt(i+1))<56320||g>57343?a?h.charAt(i):f:a?h.slice(i,i+2):(f-55296<<10)+(g-56320)+65536)}}}),$__System.registerDynamic("46f",[],!0,function(a,b,c){this||self;c.exports=!0}),$__System.registerDynamic("470",["471"],!0,function(a,b,c){this||self;c.exports=a("471")}),$__System.registerDynamic("472",[],!0,function(a,b,c){this||self;c.exports=function(a,b){return{enumerable:!(1&a),configurable:!(2&a),writable:!(4&a),value:b}}}),$__System.registerDynamic("473",["43a"],!0,function(a,b,c){this||self;c.exports=!a("43a")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})}),$__System.registerDynamic("471",["3c8","472","473"],!0,function(a,b,c){var d=(this||self,a("3c8")),e=a("472");c.exports=a("473")?function(a,b,c){return d.setDesc(a,b,e(1,c))}:function(a,b,c){return a[b]=c,a}}),$__System.registerDynamic("474",["3c8","472","475","471","476"],!0,function(a,b,c){"use strict";var d=(this||self,a("3c8")),e=a("472"),f=a("475"),g={};a("471")(g,a("476")("iterator"),function(){return this}),c.exports=function(a,b,c){a.prototype=d.create(g,{next:e(1,c)}),f(a,b+" Iterator")}}),$__System.registerDynamic("477",[],!0,function(a,b,c){var d=(this||self,{}.hasOwnProperty);c.exports=function(a,b){return d.call(a,b)}}),$__System.registerDynamic("475",["3c8","477","476"],!0,function(a,b,c){var d=(this||self,a("3c8").setDesc),e=a("477"),f=a("476")("toStringTag");c.exports=function(a,b,c){a&&!e(a=c?a:a.prototype,f)&&d(a,f,{configurable:!0,value:b})}}),$__System.registerDynamic("478",["46f","3d0","470","471","477","479","474","475","3c8","476"],!0,function(a,b,c){"use strict";var d=(this||self,a("46f")),e=a("3d0"),f=a("470"),g=a("471"),h=a("477"),i=a("479"),j=a("474"),k=a("475"),l=a("3c8").getProto,m=a("476")("iterator"),n=!([].keys&&"next"in[].keys()),o="@@iterator",p="keys",q="values",r=function(){return this};c.exports=function(a,b,c,s,t,u,v){j(c,b,s);var w,x,y=function(a){if(!n&&a in C)return C[a];switch(a){case p:return function(){return new c(this,a)};case q:return function(){return new c(this,a)}}return function(){return new c(this,a)}},z=b+" Iterator",A=t==q,B=!1,C=a.prototype,D=C[m]||C[o]||t&&C[t],E=D||y(t);if(D){var F=l(E.call(new a));k(F,z,!0),!d&&h(C,o)&&g(F,m,r),A&&D.name!==q&&(B=!0,E=function(){return D.call(this)})}if(d&&!v||!n&&!B&&C[m]||g(C,m,E),i[b]=E,i[z]=r,t)if(w={values:A?E:y(q),keys:u?E:y(p),entries:A?y("entries"):E},v)for(x in w)x in C||f(C,x,w[x]);else e(e.P+e.F*(n||B),b,w);return w}}),$__System.registerDynamic("47a",["46d","478"],!0,function(a,b,c){"use strict";var d=(this||self,a("46d")(!0));a("478")(String,"String",function(a){this._t=String(a),this._i=0},function(){var a,b=this._t,c=this._i;return c>=b.length?{value:void 0,done:!0}:(a=d(b,c),this._i+=a.length,{value:a,done:!1})})}),$__System.registerDynamic("3cc",[],!0,function(a,b,c){this||self;c.exports=function(a){return"object"==typeof a?null!==a:"function"==typeof a}}),$__System.registerDynamic("3cd",["3cc"],!0,function(a,b,c){var d=(this||self,a("3cc"));c.exports=function(a){if(!d(a))throw TypeError(a+" is not an object!");return a}}),$__System.registerDynamic("47b",["3cd"],!0,function(a,b,c){var d=(this||self,a("3cd"));c.exports=function(a,b,c,e){try{return e?b(d(c)[0],c[1]):b(c)}catch(b){var f=a.return;throw void 0!==f&&d(f.call(a)),b}}}),$__System.registerDynamic("47c",["479","476"],!0,function(a,b,c){var d=(this||self,a("479")),e=a("476")("iterator"),f=Array.prototype;c.exports=function(a){return void 0!==a&&(d.Array===a||f[e]===a)}}),$__System.registerDynamic("46e",[],!0,function(a,b,c){var d=(this||self,Math.ceil),e=Math.floor;c.exports=function(a){return isNaN(a=+a)?0:(a>0?e:d)(a)}}),$__System.registerDynamic("47d",["46e"],!0,function(a,b,c){var d=(this||self,a("46e")),e=Math.min;c.exports=function(a){return a>0?e(d(a),9007199254740991):0}}),$__System.registerDynamic("47e",["47f","476"],!0,function(a,b,c){var d=(this||self,a("47f")),e=a("476")("toStringTag"),f="Arguments"==d(function(){return arguments}());c.exports=function(a){var b,c,g;return void 0===a?"Undefined":null===a?"Null":"string"==typeof(c=(b=Object(a))[e])?c:f?d(b):"Object"==(g=d(b))&&"function"==typeof b.callee?"Arguments":g}}),$__System.registerDynamic("479",[],!0,function(a,b,c){this||self;c.exports={}}),$__System.registerDynamic("480",["47e","476","479","3d2"],!0,function(a,b,c){var d=(this||self,a("47e")),e=a("476")("iterator"),f=a("479");c.exports=a("3d2").getIteratorMethod=function(a){if(void 0!=a)return a[e]||a["@@iterator"]||f[d(a)]}}),$__System.registerDynamic("481",["482"],!0,function(a,b,c){var d=this||self,d=a("482"),e="__core-js_shared__",f=d[e]||(d[e]={});c.exports=function(a){return f[a]||(f[a]={})}}),$__System.registerDynamic("483",[],!0,function(a,b,c){var d=(this||self,0),e=Math.random();c.exports=function(a){return"Symbol(".concat(void 0===a?"":a,")_",(++d+e).toString(36))}}),$__System.registerDynamic("476",["481","483","482"],!0,function(a,b,c){var d=(this||self,a("481")("wks")),e=a("483"),f=a("482").Symbol;c.exports=function(a){return d[a]||(d[a]=f&&f[a]||(f||e)("Symbol."+a))}}),$__System.registerDynamic("484",["476"],!0,function(a,b,c){var d=(this||self,a("476")("iterator")),e=!1;try{var f=[7][d]();f.return=function(){e=!0},Array.from(f,function(){throw 2})}catch(a){}c.exports=function(a,b){if(!b&&!e)return!1;var c=!1;try{var f=[7],g=f[d]();g.next=function(){return{done:c=!0}},f[d]=function(){return g},a(f)}catch(a){}return c}}),$__System.registerDynamic("485",["3ce","3d0","43c","47b","47c","47d","480","484"],!0,function(a,b,c){"use strict";var d=(this||self,a("3ce")),e=a("3d0"),f=a("43c"),g=a("47b"),h=a("47c"),i=a("47d"),j=a("480");
e(e.S+e.F*!a("484")(function(a){Array.from(a)}),"Array",{from:function(a){var b,c,e,k,l=f(a),m="function"==typeof this?this:Array,n=arguments,o=n.length,p=o>1?n[1]:void 0,q=void 0!==p,r=0,s=j(l);if(q&&(p=d(p,o>2?n[2]:void 0,2)),void 0==s||m==Array&&h(s))for(b=i(l.length),c=new m(b);b>r;r++)c[r]=q?p(l[r],r):l[r];else for(k=s.call(l),c=new m;!(e=k.next()).done;r++)c[r]=q?g(k,p,[e.value,r],!0):e.value;return c.length=r,c}})}),$__System.registerDynamic("486",["47a","485","3d2"],!0,function(a,b,c){this||self;a("47a"),a("485"),c.exports=a("3d2").Array.from}),$__System.registerDynamic("487",["486"],!0,function(a,b,c){this||self;c.exports={default:a("486"),__esModule:!0}}),$__System.registerDynamic("40e",["487"],!0,function(a,b,c){"use strict";var d=(this||self,a("487").default);b.default=function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return d(a)},b.__esModule=!0}),$__System.register("488",["261","3a3"],function(a){"use strict";function b(){return c.innerWidth||(d.documentElement?d.documentElement.clientWidth:0)||(d.body?d.body.clientWidth:0)}var c,d;return{setters:[function(a){c=a.default},function(a){d=a.default}],execute:function(){a("getWidth",b)}}}),$__System.register("28",[],function(a){"use strict";return{setters:[],execute:function(){a("default",navigator)}}}),$__System.register("489",["28"],function(a){"use strict";var b,c;return{setters:[function(a){b=a.default}],execute:function(){c={userAgent:b.userAgent},a("navigatorDetails",c)}}}),$__System.register("d",[],function(a){"use strict";return{setters:[],execute:function(){a("default",jQuery)}}}),$__System.register("3a3",[],function(a){"use strict";return{setters:[],execute:function(){a("default",document)}}}),$__System.register("261",[],function(a){"use strict";return{setters:[],execute:function(){a("default",window)}}}),$__System.registerDynamic("482",[],!0,function(a,b,c){var d=this||self,d=c.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=d)}),$__System.registerDynamic("48a",[],!0,function(a,b,c){this||self;c.exports=function(a){if("function"!=typeof a)throw TypeError(a+" is not a function!");return a}}),$__System.registerDynamic("3ce",["48a"],!0,function(a,b,c){var d=(this||self,a("48a"));c.exports=function(a,b,c){if(d(a),void 0===b)return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)}}return function(){return a.apply(b,arguments)}}}),$__System.registerDynamic("3d0",["482","3d2","3ce"],!0,function(a,b,c){var d=this||self,d=a("482"),e=a("3d2"),f=a("3ce"),g="prototype",h=function(a,b,c){var i,j,k,l=a&h.F,m=a&h.G,n=a&h.S,o=a&h.P,p=a&h.B,q=a&h.W,r=m?e:e[b]||(e[b]={}),s=m?d:n?d[b]:(d[b]||{})[g];m&&(c=b);for(i in c)j=!l&&s&&i in s,j&&i in r||(k=j?s[i]:c[i],r[i]=m&&"function"!=typeof s[i]?c[i]:p&&j?f(k,d):q&&s[i]==k?function(a){var b=function(b){return this instanceof a?new a(b):a(b)};return b[g]=a[g],b}(k):o&&"function"==typeof k?f(Function.call,k):k,o&&((r[g]||(r[g]={}))[i]=k))};h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,c.exports=h}),$__System.registerDynamic("3c8",[],!0,function(a,b,c){var d=(this||self,Object);c.exports={create:d.create,getProto:d.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:d.getOwnPropertyDescriptor,setDesc:d.defineProperty,setDescs:d.defineProperties,getKeys:d.keys,getNames:d.getOwnPropertyNames,getSymbols:d.getOwnPropertySymbols,each:[].forEach}}),$__System.registerDynamic("3c4",[],!0,function(a,b,c){this||self;c.exports=function(a){if(void 0==a)throw TypeError("Can't call method on  "+a);return a}}),$__System.registerDynamic("43c",["3c4"],!0,function(a,b,c){var d=(this||self,a("3c4"));c.exports=function(a){return Object(d(a))}}),$__System.registerDynamic("47f",[],!0,function(a,b,c){var d=(this||self,{}.toString);c.exports=function(a){return d.call(a).slice(8,-1)}}),$__System.registerDynamic("3c3",["47f"],!0,function(a,b,c){var d=(this||self,a("47f"));c.exports=Object("z").propertyIsEnumerable(0)?Object:function(a){return"String"==d(a)?a.split(""):Object(a)}}),$__System.registerDynamic("43a",[],!0,function(a,b,c){this||self;c.exports=function(a){try{return!!a()}catch(a){return!0}}}),$__System.registerDynamic("48b",["3c8","43c","3c3","43a"],!0,function(a,b,c){var d=(this||self,a("3c8")),e=a("43c"),f=a("3c3");c.exports=a("43a")(function(){var a=Object.assign,b={},c={},d=Symbol(),e="abcdefghijklmnopqrst";return b[d]=7,e.split("").forEach(function(a){c[a]=a}),7!=a({},b)[d]||Object.keys(a({},c)).join("")!=e})?function(a,b){for(var c=e(a),g=arguments,h=g.length,i=1,j=d.getKeys,k=d.getSymbols,l=d.isEnum;h>i;)for(var m,n=f(g[i++]),o=k?j(n).concat(k(n)):j(n),p=o.length,q=0;p>q;)l.call(n,m=o[q++])&&(c[m]=n[m]);return c}:Object.assign}),$__System.registerDynamic("48c",["3d0","48b"],!0,function(a,b,c){var d=(this||self,a("3d0"));d(d.S+d.F,"Object",{assign:a("48b")})}),$__System.registerDynamic("3d2",[],!0,function(a,b,c){var d=(this||self,c.exports={version:"1.2.6"});"number"==typeof __e&&(__e=d)}),$__System.registerDynamic("48d",["48c","3d2"],!0,function(a,b,c){this||self;a("48c"),c.exports=a("3d2").Object.assign}),$__System.registerDynamic("205",["48d"],!0,function(a,b,c){this||self;c.exports={default:a("48d"),__esModule:!0}}),$__System.register("44d",["13"],function(a){"use strict";function b(a){return c.getDataAttribute(a,"data-gradableType")}var c;return{setters:[function(a){c=a}],execute:function(){a("getGradableType",b)}}}),$__System.register("6",["205","44d"],function(a){function b(){return i}function c(a,b){i=a;var c=h.getGradableType(b);i.feedbackOptions="open-non-gradable"===c||"non-gradable"===c?void 0:$.extend(j.feedbackOptions,a.feedbackOptions),e(i.itemMode),f(i.storyPlayingMode),window.RCF.options=i}function d(a){j=a,i=g({},j),window.RCF.options=i}function e(a){switch(a){case null:case void 0:case"Review":case"playing":case"challenge":case"challenge2":return!0}throw new Error("Invalid item based mode passed into RCF ["+a+"]")}function f(a){var b="comprehension",c="reading";switch(a){case null:case void 0:case c:case b:return!0}throw new Error("Invalid reading mode passed into RCF ["+a+'] - valid modes are "reading", "comprehension"')}var g,h,i,j;return{setters:[function(a){g=a.default},function(a){h=a}],execute:function(){"use strict";a("getRcfOptions",b),a("setRcfOptions",c),a("setProjectOptions",d),i=void 0,j=void 0}}}),$__System.register("48e",["6","261","d","3a3"],function(a){"use strict";function b(a){var b=j.Deferred();return c(a)&&!d()?e():(setTimeout(function(){b.resolve()},0),b.promise())}function c(a){return j(a).find('div[data-rcfinteraction="movingTargets"]').length>0}function d(){return i.Phaser||!1}function e(){var a=j.Deferred(),b=f(),c=g(b,"phaser/phaser.min.js"),d=j('script[src="'+c+'"]'),e=void 0;return d.length>0?(setTimeout(function(){a.resolve()},0),a.promise()):(e=k.createElement("script"),e.src=c,e.addEventListener("load",function(){a.resolve(e)},!1),e.addEventListener("error",function(){a.reject("error loading script")}),k.body?k.body.appendChild(e):null,a.promise())}function f(){var a=h(),b=a.swfFallbackURL,c=a.vendorURL||"";return(!c||c.length<1)&&(c=b.replace("/swf","/vendor")),c}function g(a,b){var c=a.split("");return"/"===c.pop()?a+b:a+"/"+b}var h,i,j,k;return a("default",b),{setters:[function(a){h=a.getRcfOptions},function(a){i=a.default},function(a){j=a.default},function(a){k=a.default}],execute:function(){}}}),$__System.register("13",["3"],function(a){"use strict";function b(a,b){if(!e(a))return a.attr(b)}function c(a,b,c){e(a)||a.attr(b,c)}function d(a,b){e(a)||a.removeAttr(b)}var e;return{setters:[function(a){e=a.isEmpty}],execute:function(){a("getDataAttribute",b),a("setDataAttribute",c),a("removeDataAttributes",d)}}}),$__System.register("3",["13","261","488","489","40e","d","3a3","48e"],function(a){function b(a){return"boolean"!=typeof a&&("undefined"==typeof a||(null===(a||null)||a.length<1))}function c(){var a=N.userAgent;return!!a.match(/Android/i)}function d(){var a=N.userAgent,b=M.getWidth();return!!a.match(/iPad/i)||!!(b>=S&&(a.match(/Android/i)||a.match(/\bTouch\b/)))}function e(){var a=N.userAgent,b=M.getWidth();return!!a.match(/iPhone/i)||(!!a.match(/iPod/i)||!!(b<S&&(a.match(/Android/i)||a.match(/\bTouch\b/))))}function f(a,b){return a.indexOf(b,a.length-b.length)!==-1}function g(a,b){try{return a.indexOf(b)>-1}catch(a){return!1}}function h(a,b,c){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(b))||null===b||void 0===b)){if(c=P.extend({},c),null!==b&&void 0!==b||(c.expires=-1),"number"==typeof c.expires){var d=c.expires,e=c.expires=new Date;e.setDate(e.getDate()+d)}return b=String(b),Q.cookie=[encodeURIComponent(a),"=",c.raw?b:encodeURIComponent(b),c.expires?"; expires="+c.expires.toUTCString():"",c.path?"; path="+c.path:"",c.domain?"; domain="+c.domain:"",c.secure?"; secure":""].join("")}c=b||{};for(var f=c.raw?function(a){return a}:decodeURIComponent,g=Q.cookie.split("; "),h=0,i=void 0;i=g[h]&&g[h].split("=");h++)if(f(i[0])===a)return f(i[1]||"");return null}function i(a){var b=[];return P.each(a,function(a,c){P.inArray(c,b)==-1&&b.push(c)}),b}function j(a){return a.replace(T,"'").replace(U,'"')}function k(){var a=N.userAgent,b=a.indexOf("MSIE ");return!!(b>0||a.match(/Trident.*rv:11\./))}function l(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a}function m(a,b,c){var d=P(L).width()-30,e=b.width(),f=b.height(),g=a.pageX+e>d?e*-1:0,h="getBoundingClientRect"in c[0]?c[0].getBoundingClientRect().top:0,i=c.scrollParent();return i.length>0&&"getBoundingClientRect"in i[0]&&(h-=i[0].getBoundingClientRect().top),{left:g,bottom:f>=parseInt(h-1)?f*-1:c.height()+5}}function n(a,b,c){b.show();var d=parseInt(c.css("lineHeight")),e=parseInt(c.height()),f=parseInt(a.pageX),g=parseInt(c.offset().left),h=g+c.width(),i=h-g,j=f-g,k="left+"+j+" top",l="left bottom";if(e>d){var m=f<g+i/2;m?l="left bottom":(k="left bottom",l="left+"+j+" top")}return{my:k,at:l,of:P(c),collision:"fit flip",within:c.closest(".activity")}}function o(a){return a in(Q.body?Q.body.style:[])}function p(a){return K.getDataAttribute(a,"data-rcfid")}function q(a){return a.replace(/[<>]/g,function(a){var b={"<":"&lt;",">":"&gt;"};return b[a]})}function r(a){return a.closest(".activity")}function s(a){var b=u(Math.floor(a/3600)%24),c=u(Math.floor(a/60)%60),d=u(Math.floor(a)%60);return b+":"+c+":"+d}function t(a){return u(Math.floor(a/60))+":"+u(Math.floor(a)%60)}function u(a){return("0"+a).substr(-2)}function v(a){var b=a.trim();return b.replace(/\s+/g," ")}function w(a){return K.getDataAttribute(a,"data-markType")||"item"}function x(a){return a.replace(/[. `\\'[\](){}:,!.\-?'";\/&*@^#%+=~_|$]/g,"")}function y(a){return a.charAt(0).toUpperCase()+a.slice(1)}function z(a){for(var b="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=0;d<a;d++)b+=c.charAt(Math.floor(Math.random()*c.length));return b}function A(){var a=arguments.length<=0||void 0===arguments[0]?1:arguments[0],b=P.Deferred();return setTimeout(function(){b.resolve()},a),b.promise()}function B(a){return Math.max.apply(Math,O(a.map(function(a,b){return parseInt(P(b).height())||1}).get()))}function C(a){return Math.max.apply(Math,O(a.map(function(a,b){return parseInt(P(b).width())||1}).get()))}function D(a){a.stopImmediatePropagation(),a.preventDefault()}function E(a){return K.getDataAttribute(a,"data-audiolink")||""}function F(a){return a.replace(/(\.mp3|\.ogg|\.webma)/g,"")}function G(a){return a.replace(/(\.mp4|\.ogv|\.webm)/g,"")}function H(){return new Date-(new Date).setHours(0,0,0,0)}function I(a){var b=a.slice();return b.sort(function(){return Math.random()>=.5?-1:1}),b}function J(a){var b=parseFloat(a),c=a.match(/m?s/),d="";switch(c&&(d=c[0]),d){case"s":return 1e3*b;case"ms":return b;default:return b}}var K,L,M,N,O,P,Q,R,S,T,U;return{setters:[function(a){K=a},function(a){L=a.default},function(a){M=a},function(a){N=a.navigatorDetails},function(a){O=a.default},function(a){P=a.default},function(a){Q=a.default},function(a){R=a.default}],execute:function(){"use strict";a("isAndroid",c),a("isEmpty",b),a("isTabletDevice",d),a("isMobileDevice",e),a("endsWith",f),a("containsString",g),a("cookie",h),a("distinctArray",i),a("fixQuotables",j),a("isIE",k),a("shuffleArrayItems",l),a("getPopupPosition",m),a("getPopupPositionFromElement",n),a("loadDependencies",R),a("supportsCssProperty",o),a("getRcfId",p),a("escapeHtml",q),a("getActivityElementFromChild",r),a("trimExcessSpaces",v),a("getTimeAsMMSS",t),a("getTimeAsHHMMSS",s),a("getMarkTypeFromElement",w),a("removePunctuation",x),a("capitaliseString",y),a("getRandomString",z),a("dummyPromise",A),a("getLargestHeightFromSelector",B),a("getLargestWidthFromSelector",C),a("preventEventBubble",D),a("getAudioLinkFromElement",E),a("getBaseAudioName",F),a("getBaseVideoName",G),a("getMillisecondsSinceMidnight",H),a("shuffleArray",I),a("getCssMilliseconds",J),S=768,T=new RegExp("[`]","g"),U=new RegExp("[]","g")}}}),$__System.register("46c",["3"],function(a){"use strict";function b(a,b,e){var f=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];return f&&(a=d(a),b=d(b)),c(a,b,e)}function c(a,b,c){return c&&"n"==c?a.toLowerCase()==b.toLowerCase():a==b}var d;return{setters:[function(a){d=a.removePunctuation}],execute:function(){a("default",b)}}}),$__System.register("48f",["46c"],function(a){"use strict";function b(a,b){var d=a.value,e=b.value.some(function(a){return c(d,a,b.caseSensitive,b.ignorePunctuation)});return[e?1:0]}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("490",["491"],function(a){"use strict";function b(a,b){var d=b.markType||"item",e=[];switch(d){case"list":c(a.value,b.value)?e.push(1):e.push(0);break;case"item":b.value&&Array.isArray(b.value)&&b.value.length>0?b.value.forEach(function(b,c){var d=a.value[c];e.push(d===b?1:0)}):e=[0];break;default:e=[0]}return e}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("492",["493"],function(a){"use strict";function b(a,b){var d=b.markType||"item",e=a.value,f=b.value,g=!0,h=[];switch(d){case"item":Array.isArray(a.value)&&a.value.length>0?h=a.value.map(function(a){return c(a,b.value)?1:0}):h.push(c(a.value,b.value)?1:0);break;case"list":g=e.length==f.length&&e.every(function(a){return c(a,f)}),h.push(g?1:0);break;default:h=[0]}return h.length<1&&(h=[0]),h}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("491",[],function(a){"use strict";function b(a,c){if(!a)return!1;if(a.length!=c.length)return!1;for(var d=0;d<c.length;d++)if(c[d]instanceof Array&&a[d]instanceof Array){if(!b(c[d],a[d]))return!1}else if(c[d]!=a[d])return!1;return!0}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("494",["491"],function(a){"use strict";function b(a,b){var d=a.value,e=b.value.some(function(a){return c(d,a)});return[e?1:0]}var c;return a("default",b),{setters:[function(a){c=a.default}],execute:function(){}}}),$__System.register("493",[],function(a){"use strict";function b(a,b){var c=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(!c)return b.indexOf(a)>-1;var d=b.map(function(a){return a.toLowerCase()});return d.indexOf(a.toLowerCase())>-1}return a("default",b),{setters:[],execute:function(){}}}),$__System.register("495",["3","5","490","492","493","494","46a","46c","46b","48f"],function(a){"use strict";function b(a,b){var m="",n="",o=null,p=null,q=0,r="",s=i(a);b.activity_id=b.id;for(var t in b.answers){var u=b.answers[t];u.verification=[];var v=u.elm,w=0;if(!c(v)&&!c(u.type))if(m=u.value,o=s.getAnswerObject(v),null!==o){if(p=o.type,n=o.markType||"item","unmarked"!==n&&"nobody"!==o.markedBy)if("distractor"!==n)if(r=o.value,"simple"==p)u.verification=k(u,o),q+=u.verification.reduce(function(a,b){return a+b},0);else if("choice"==p)u.verification=l(u,o),q+=u.verification.reduce(function(a,b){return a+b},0);else if("sequence"==p)u.verification=e(u,o),q+=u.verification.reduce(function(a,b){return a+b},0);else if("list"==p)u.verification=f(u,o),q+=u.verification.reduce(function(a,b){return a+b},0);else if("complexordering"==p)u.verification=h(u,o),q+=u.verification.reduce(function(a,b){return a+b},0);else if("composite"==p){var x=null;if("list"==n){var y=!0;if(x=u.verification,Array.isArray(m))for(w=0;w<m.length;w++){var z=m[w],A=r[w];if(z.elm!=A.elm){y=!1;break}if("choice"==A.type){if(y=g(z.value,A.value,A.caseSensitive&&"n"==A.caseSensitive),!y)break}else if("simple"==A.type&&!j(z.value,A.value,A.caseSensitive)){y=!1;break}}else y=!1;x.push(y?1:0),y&&q++}else if("item"==n&&Array.isArray(m))for(w=0;w<m.length;w++){var B=m[w],C=B.elm,D=!1,E=0,F=null,G=B.verification=[];for(E=0;E<r.length;E++)if(F=r[E],F.elm===C){D=!0;break}if(D){if(B.elm==F.elm)if("list"==F.type){if("item"==F.markType)Array.isArray(B.value)&&!function(){var a=F.value;B.value.forEach(function(b){var c=g(b,a);G.push(c?1:0)}),G.length<1&&(G=[0]),q+=G.reduce(function(a,b){return a+b},0)}();else if("list"==F.markType){if(B.verification[0]=0,!Array.isArray(B.value))continue;if(B.value.length!=F.value.length)continue;var H=!0;B.value.forEach(function(a){g(a,F.value)||(H=!1)}),H&&(B.verification[0]=1,q++)}}else if("simple"==F.type){var I=B.value,J=F.value,K=j(I,J);G.push(K?1:0),q+=K?1:0}else if("choice"===F.type){var I=B.value,J=F.value,K=g(I,J);G.push(K?1:0),q+=K?1:0}}else G.push(0)}}else"complexordering"==p&&(u.verification=h(u,o),u.verification.length<1&&(u.verification=[0]),q+=u.verification.reduce(function(a,b){return a+b},0));else m.length>0&&(u.verification[0]=0)}else d.log("No answers object for this activity - most likely it is unmarked")}return b.score=q,b}var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a.isEmpty},function(a){d=a.default},function(a){e=a.default},function(a){f=a.default},function(a){g=a.default},function(a){h=a.default},function(a){i=a.create},function(a){j=a.default},function(a){k=a.default},function(a){l=a.default}],execute:function(){a("default",b)}}}),$__System.register("496",["455","467","495"],function(a){"use strict";var b,c,d;return{setters:[function(a){b=a.default},function(a){c=a.default},function(a){d=a.default}],execute:function(){a("getAttemptedAnswerCount",b),a("getAnswerDetails",c),a("getMarkedAnswers",d)}}}),$__System.register("497",["2","3","4","6","7","9","453","496","b","a"],function(a){"use strict";function b(){function a(a){var b=c.getRcfOptions(a);f.setProjectOptions(b),c.setDeviceMode(),c.detectPhoneGap(),c.detectRequiredCss()}function b(){return RCF.Version}window.RCF=window.RCF||{},RCF.Version={version:"2.1.64"},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Marked=RCF.Interactions.Marked||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.InteractionName=RCF.InteractionName||g(),RCF.channel=k.channel,RCF.subscribe=k.subscribe,RCF.unsubscribe=k.unsubscribe,RCF.publish=k.publish,RCF.Application={initialize:a,getDeviceMode:e,cleanUp:h,getVersion:b,updateContent:i,setAnswers:l.setAnswers,showUserAnswers:l.showUserAnswers,showMarkedAnswers:l.showMarkedAnswers,hideMarkedAnswers:l.hideMarkedAnswers,resetAnswers:l.resetAnswers,getUserAnswers:l.getUserAnswers,showNextAnswer:l.showNextAnswer,hasMoreAnswers:l.hasMoreAnswers,hasActivityBeenAttempted:l.hasActivityBeenAttempted,isActivityComplete:l.isActivityComplete,disableActivity:l.disableActivity,enableActivity:l.enableActivity,provideFeedback:l.provideFeedback,hasActivityCompleteUI:l.hasActivityCompleteUI,getGradableType:l.getGradableType,getPointsAvailable:l.getPointsAvailable,getItemPointsAvailable:l.getItemPointsAvailable,getTeacherPointsAvailable:l.getTeacherPointsAvailable,isAnswerKeyActivity:l.isAnswerKeyActivity,isTeacherTipActivity:l.isTeacherTipActivity,isItemBasedActivity:l.isItemBasedActivity,getItemPlayMode:l.getItemPlayMode,getActiveItemId:l.getActiveItemId,playItem:l.playItem,setActivityMode:l.setActivityMode,getActivityMode:l.getActivityMode,getTeacherFeedback:l.getTeacherFeedback,tryAgain:l.tryAgain,pauseActivity:l.pauseActivity,resumeActivity:l.resumeActivity,setStoryPlayingMode:l.setStoryPlayingMode,getStoryPlayingMode:l.getStoryPlayingMode,showFeedback:l.showFeedback,hideFeedback:l.hideFeedback},RCF.MarkingEngine=j,RCF.Utils={isEmpty:d.isEmpty,isTabletDevice:d.isTabletDevice,isMobileDevice:d.isMobileDevice,endsWith:d.endsWith,containsString:d.containsString,cookie:d.cookie,distinctArray:d.distinctArray,fixQuotables:d.fixQuotables,isIE:d.isIE,shuffleArrayItems:d.shuffleArrayItems,getPopupPosition:d.getPopupPosition,getPopupPositionFromElement:d.getPopupPositionFromElement,loadDependencies:d.loadDependencies}}var c,d,e,f,g,h,i,j,k,l;return{setters:[function(a){c=a},function(a){d=a},function(a){e=a.getApplicationDeviceMode},function(a){f=a},function(a){g=a.getRcfInteractionNames},function(a){h=a.cleanUp},function(a){i=a.updateContent},function(a){j=a},function(a){k=a},function(a){l=a}],execute:function(){a("init",b)}}}),$__System.registerDynamic("498",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){(function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if("object"==typeof a){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&b(e[d],c)===-1&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),d!==-1&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if("object"===c)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:this.EventEmitter=a}).call(this),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):a.eventie=f}(this),function(a,b){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("eventie")):a.imagesLoaded=b(a,a.EventEmitter,a.eventie)}(window,function(a,b,c){function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){return"[object Array]"===m.call(a)}function f(a){var b=[];if(e(a))b=a;else if("number"==typeof a.length)for(var c=0,d=a.length;c<d;c++)b.push(a[c]);else b.push(a);return b}function g(a,b,c){if(!(this instanceof g))return new g(a,b);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=f(a),this.options=d({},this.options),"function"==typeof b?c=b:d(this.options,b),c&&this.on("always",c),this.getImages(),j&&(this.jqDeferred=new j.Deferred);var e=this;setTimeout(function(){e.check()})}function h(a){this.img=a}function i(a){this.src=a,n[a]=this}var j=a.jQuery,k=a.console,l="undefined"!=typeof k,m=Object.prototype.toString;g.prototype=new b,g.prototype.options={},g.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);var d=c.nodeType;if(d&&(1===d||9===d||11===d))for(var e=c.querySelectorAll("img"),f=0,g=e.length;f<g;f++){var h=e[f];this.addImage(h)}}},g.prototype.addImage=function(a){var b=new h(a);this.images.push(b)},g.prototype.check=function(){function a(a,e){return b.options.debug&&l&&k.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;e<d;e++){var f=this.images[e];f.on("confirm",a),f.check()}},g.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})},g.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},j&&(j.fn.imagesLoaded=function(a,b){var c=new g(this,a,b);return c.jqDeferred.promise(j(this))}),h.prototype=new b,h.prototype.check=function(){var a=n[this.img.src]||new i(this.img.src);if(a.isConfirmed)return void this.confirm(a.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var b=this;a.on("confirm",function(a,c){return b.confirm(a.isLoaded,c),!0}),a.check()},h.prototype.confirm=function(a,b){this.isLoaded=a,this.emit("confirm",this,b)};var n={};return i.prototype=new b,i.prototype.check=function(){if(!this.isChecked){var a=new Image;c.bind(a,"load",this),c.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},i.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this),c.unbind(a.target,"error",this)},g})}(this),d()}),$__System.registerDynamic("499",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b,c){function d(a,b){return typeof a===b}function e(){var a,b,c,e,f,g,h;for(var i in t)if(t.hasOwnProperty(i)){if(a=[],b=t[i],b.name&&(a.push(b.name.toLowerCase()),b.options&&b.options.aliases&&b.options.aliases.length))for(c=0;c<b.options.aliases.length;c++)a.push(b.options.aliases[c].toLowerCase());for(e=d(b.fn,"function")?b.fn():b.fn,f=0;f<a.length;f++)g=a[f],h=g.split("."),1===h.length?v[h[0]]=e:(!v[h[0]]||v[h[0]]instanceof Boolean||(v[h[0]]=new Boolean(v[h[0]])),v[h[0]][h[1]]=e),s.push((e?"":"no-")+h.join("-"))}}function f(a){var b=x.className,c=v._config.classPrefix||"";if(y&&(b=b.baseVal),v._config.enableJSClass){var d=new RegExp("(^|\\s)"+c+"no-js(\\s|$)");b=b.replace(d,"$1"+c+"js$2")}v._config.enableClasses&&(b+=" "+c+a.join(" "+c),y?x.className.baseVal=b:x.className=b)}function g(){return"function"!=typeof b.createElement?b.createElement(arguments[0]):y?b.createElementNS.call(b,"http://www.w3.org/2000/svg",arguments[0]):b.createElement.apply(b,arguments)}function h(a,b){return!!~(""+a).indexOf(b)}function i(){var a=b.body;return a||(a=g(y?"svg":"body"),a.fake=!0),a}function j(a,c,d,e){var f,h,j,k,l="modernizr",m=g("div"),n=i();if(parseInt(d,10))for(;d--;)j=g("div"),j.id=e?e[d]:l+(d+1),m.appendChild(j);return f=g("style"),f.type="text/css",f.id="s"+l,(n.fake?n:m).appendChild(f),n.appendChild(m),f.styleSheet?f.styleSheet.cssText=a:f.appendChild(b.createTextNode(a)),m.id=l,n.fake&&(n.style.background="",n.style.overflow="hidden",k=x.style.overflow,x.style.overflow="hidden",x.appendChild(n)),h=c(m,a),n.fake?(n.parentNode.removeChild(n),x.style.overflow=k,x.offsetHeight):m.parentNode.removeChild(m),!!h}function k(a){return a.replace(/([a-z])-([a-z])/g,function(a,b,c){return b+c.toUpperCase()}).replace(/^-/,"")}function l(a,b){return function(){return a.apply(b,arguments)}}function m(a,b,c){var e;for(var f in a)if(a[f]in b)return c===!1?a[f]:(e=b[a[f]],d(e,"function")?l(e,c||b):e);return!1}function n(a){return a.replace(/([A-Z])/g,function(a,b){return"-"+b.toLowerCase()}).replace(/^ms-/,"-ms-")}function o(b,d){var e=b.length;if("CSS"in a&&"supports"in a.CSS){for(;e--;)if(a.CSS.supports(n(b[e]),d))return!0;return!1}if("CSSSupportsRule"in a){for(var f=[];e--;)f.push("("+n(b[e])+":"+d+")");return f=f.join(" or "),j("@supports ("+f+") { #modernizr { position: absolute; } }",function(a){return"absolute"==getComputedStyle(a,null).position})}return c}function p(a,b,e,f){function i(){l&&(delete K.style,delete K.modElem)}if(f=!d(f,"undefined")&&f,!d(e,"undefined")){var j=o(a,e);if(!d(j,"undefined"))return j}for(var l,m,n,p,q,r=["modernizr","tspan","samp"];!K.style&&r.length;)l=!0,K.modElem=g(r.shift()),K.style=K.modElem.style;for(n=a.length,m=0;n>m;m++)if(p=a[m],q=K.style[p],h(p,"-")&&(p=k(p)),K.style[p]!==c){if(f||d(e,"undefined"))return i(),"pfx"!=b||p;try{K.style[p]=e}catch(a){}if(K.style[p]!=q)return i(),"pfx"!=b||p}return i(),!1}function q(a,b,c,e,f){var g=a.charAt(0).toUpperCase()+a.slice(1),h=(a+" "+H.join(g+" ")+g).split(" ");return d(b,"string")||d(b,"undefined")?p(h,b,e,f):(h=(a+" "+A.join(g+" ")+g).split(" "),m(h,b,c))}function r(a,b,d){return q(a,c,c,b,d)}var s=[],t=[],u={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(a,b){var c=this;setTimeout(function(){b(c[a])},0)},addTest:function(a,b,c){t.push({name:a,fn:b,options:c})},addAsyncTest:function(a){t.push({name:null,fn:a})}},v=function(){};v.prototype=u,v=new v,v.addTest("svg",!!b.createElementNS&&!!b.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect);var w=u._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];u._prefixes=w;var x=b.documentElement,y="svg"===x.nodeName.toLowerCase();
y||!function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=t.elements;return"string"==typeof a?a.split(" "):a}function e(a,b){var c=t.elements;"string"!=typeof c&&(c=c.join(" ")),"string"!=typeof a&&(a=a.join(" ")),t.elements=c+" "+a,j(b)}function f(a){var b=s[a[q]];return b||(b={},r++,a[q]=r,s[r]=b),b}function g(a,c,d){if(c||(c=b),l)return c.createElement(a);d||(d=f(c));var e;return e=d.cache[a]?d.cache[a].cloneNode():p.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),!e.canHaveChildren||o.test(a)||e.tagUrn?e:d.frag.appendChild(e)}function h(a,c){if(a||(a=b),l)return a.createDocumentFragment();c=c||f(a);for(var e=c.frag.cloneNode(),g=0,h=d(),i=h.length;i>g;g++)e.createElement(h[g]);return e}function i(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return t.shivMethods?g(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/[\w\-:]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(t,b.frag)}function j(a){a||(a=b);var d=f(a);return!t.shivCSS||k||d.hasCSS||(d.hasCSS=!!c(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),l||i(a,d),a}var k,l,m="3.7.3",n=a.html5||{},o=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,q="_html5shiv",r=0,s={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",k="hidden"in a,l=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(a){k=!0,l=!0}}();var t={elements:n.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",version:m,shivCSS:n.shivCSS!==!1,supportsUnknownElements:l,shivMethods:n.shivMethods!==!1,type:"default",shivDocument:j,createElement:g,createDocumentFragment:h,addElements:e};a.html5=t,j(b),"object"==typeof module&&module.exports&&(module.exports=t)}("undefined"!=typeof a?a:this,b);var z="Moz O ms Webkit",A=u._config.usePrefixes?z.toLowerCase().split(" "):[];u._domPrefixes=A,v.addTest("csscalc",function(){var a="width:",b="calc(10px);",c=g("a");return c.style.cssText=a+w.join(b+a),!!c.style.length}),v.addTest("cssgradients",function(){for(var a,b="background-image:",c="gradient(linear,left top,right bottom,from(#9f9),to(white));",d="",e=0,f=w.length-1;f>e;e++)a=0===e?"to ":"",d+=b+w[e]+"linear-gradient("+a+"left top, #9f9, white);";v._config.usePrefixes&&(d+=b+"-webkit-"+c);var h=g("a"),i=h.style;return i.cssText=d,(""+i.backgroundImage).indexOf("gradient")>-1}),v.addTest("multiplebgs",function(){var a=g("a").style;return a.cssText="background:url(https://),url(https://),red url(https://)",/(url\s*\(.*?){3}/.test(a.background)}),v.addTest("opacity",function(){var a=g("a").style;return a.cssText=w.join("opacity:.55;"),/^0.55$/.test(a.opacity)}),v.addTest("rgba",function(){var a=g("a").style;return a.cssText="background-color:rgba(150,255,150,.5)",(""+a.backgroundColor).indexOf("rgba")>-1});var B=function(){function a(a,b){var e;return!!a&&(b&&"string"!=typeof b||(b=g(b||"div")),a="on"+a,e=a in b,!e&&d&&(b.setAttribute||(b=g("div")),b.setAttribute(a,""),e="function"==typeof b[a],b[a]!==c&&(b[a]=c),b.removeAttribute(a)),e)}var d=!("onblur"in b.documentElement);return a}();u.hasEvent=B,v.addTest("pointerevents",function(){var a=!1,b=A.length;for(a=v.hasEvent("pointerdown");b--&&!a;)B(A[b]+"pointerdown")&&(a=!0);return a}),v.addTest("hsla",function(){var a=g("a").style;return a.cssText="background-color:hsla(120,40%,100%,.5)",h(a.backgroundColor,"rgba")||h(a.backgroundColor,"hsla")});var C="CSS"in a&&"supports"in a.CSS,D="supportsCSS"in a;v.addTest("supports",C||D);var E=function(){var b=a.matchMedia||a.msMatchMedia;return b?function(a){var c=b(a);return c&&c.matches||!1}:function(b){var c=!1;return j("@media "+b+" { #modernizr { position: absolute; } }",function(b){c="absolute"==(a.getComputedStyle?a.getComputedStyle(b,null):b.currentStyle).position}),c}}();u.mq=E;var F=u.testStyles=j;v.addTest("touchevents",function(){var c;if("ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch)c=!0;else{var d=["@media (",w.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");F(d,function(a){c=9===a.offsetTop})}return c});var G=function(){var a=navigator.userAgent,b=a.match(/applewebkit\/([0-9]+)/gi)&&parseFloat(RegExp.$1),c=a.match(/w(eb)?osbrowser/gi),d=a.match(/windows phone/gi)&&a.match(/iemobile\/([0-9])+/gi)&&parseFloat(RegExp.$1)>=9,e=533>b&&a.match(/android/gi);return c||e||d}();G?v.addTest("fontface",!1):F('@font-face {font-family:"font";src:url("https://")}',function(a,c){var d=b.getElementById("smodernizr"),e=d.sheet||d.styleSheet,f=e?e.cssRules&&e.cssRules[0]?e.cssRules[0].cssText:e.cssText||"":"",g=/src/i.test(f)&&0===f.indexOf(c.split(" ")[0]);v.addTest("fontface",g)}),F('#modernizr{font:0/0 a}#modernizr:after{content:":)";visibility:hidden;font:7px/1 a}',function(a){v.addTest("generatedcontent",a.offsetHeight>=7)});var H=u._config.usePrefixes?z.split(" "):[];u._cssomPrefixes=H;var I=function(b){var d,e=w.length,f=a.CSSRule;if("undefined"==typeof f)return c;if(!b)return!1;if(b=b.replace(/^@/,""),d=b.replace(/-/g,"_").toUpperCase()+"_RULE",d in f)return"@"+b;for(var g=0;e>g;g++){var h=w[g],i=h.toUpperCase()+"_"+d;if(i in f)return"@-"+h.toLowerCase()+"-"+b}return!1};u.atRule=I;var J={elem:g("modernizr")};v._q.push(function(){delete J.elem});var K={style:J.elem.style};v._q.unshift(function(){delete K.style});var L=u.testProp=function(a,b,d){return p([a],c,b,d)};v.addTest("textshadow",L("textShadow","1px 1px")),u.testAllProps=q,u.testAllProps=r,v.addTest("cssanimations",r("animationName","a",!0)),v.addTest("appearance",r("appearance")),v.addTest("backgroundsize",r("backgroundSize","100%",!0)),v.addTest("borderimage",r("borderImage","url() 1",!0)),v.addTest("borderradius",r("borderRadius","0px",!0)),v.addTest("boxshadow",r("boxShadow","1px 1px",!0)),function(){v.addTest("csscolumns",function(){var a=!1,b=r("columnCount");try{(a=!!b)&&(a=new Boolean(a))}catch(a){}return a});for(var a,b,c=["Width","Span","Fill","Gap","Rule","RuleColor","RuleStyle","RuleWidth","BreakBefore","BreakAfter","BreakInside"],d=0;d<c.length;d++)a=c[d].toLowerCase(),b=r("column"+c[d]),("breakbefore"===a||"breakafter"===a||"breakinside"==a)&&(b=b||r(c[d])),v.addTest("csscolumns."+a,b)}(),v.addTest("flexbox",r("flexBasis","1px",!0)),v.addTest("flexboxlegacy",r("boxDirection","reverse",!0)),v.addTest("flexwrap",r("flexWrap","wrap",!0)),v.addTest("cssreflections",r("boxReflect","above",!0)),v.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&r("transform","scale(1)",!0)}),v.addTest("csstransforms3d",function(){var a=!!r("perspective","1px",!0),b=v._config.usePrefixes;if(a&&(!b||"webkitPerspective"in x.style)){var c,d="#modernizr{width:0;height:0}";v.supports?c="@supports (perspective: 1px)":(c="@media (transform-3d)",b&&(c+=",(-webkit-transform-3d)")),c+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",F(d+c,function(b){a=7===b.offsetWidth&&18===b.offsetHeight})}return a}),v.addTest("csstransitions",r("transition","all",!0));var M=u.prefixed=function(a,b,c){return 0===a.indexOf("@")?I(a):(-1!=a.indexOf("-")&&(a=k(a)),b?q(a,b,c):q(a,"pfx"))};v.addTest("getusermedia",!!M("getUserMedia",navigator)),e(),f(s),delete u.addTest,delete u.addAsyncTest;for(var N=0;N<v._q.length;N++)v._q[N]();a.Modernizr=v}(window,document)}(this),d()}),$__System.registerDynamic("49a",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=0,d=this.length;c<d;c++)c in this&&a.call(b,this[c],c,this)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a){var b=this.length,c=Number(arguments[1])||0;for(c=c<0?Math.ceil(c):Math.floor(c),c<0&&(c+=b);c<b;c++)if(c in this&&this[c]===a)return c;return-1}),Object.keys=Object.keys||function(a,b,c){c=[];for(b in a)c.hasOwnProperty.call(a,b)&&c.push(b);return c},null==String.prototype.trim&&(String.prototype.trim=function(){var a=this;return a=a.replace(/^\s+|\s+$/g,""),a.replace(/\s+/g," ")}),null==String.prototype.trimAll&&(String.prototype.trimAll=function(){var a=this.trim();return a.replace(/\s+/g," ")})}(this),d()}),$__System.registerDynamic("49b",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a){a.fn.retinaDisplay=function(){window.devicePixelRatio>=2&&this.each(function(b,c){var d=a(c);if(d.attr("src")){var e=new RegExp("(.+)(@2x\\.\\w{3,4})");if(!e.test(d.attr("src"))){var f=d.attr("src").replace(/(.+)(\.\w{3,4})$/,"$1@2x$2"),g=d.width();a.ajax({url:f,type:"HEAD",success:function(){d.attr("src",f),g>0&&d.width(g)}})}}})},a.fn.getCursorPosition=function(){var a=this.get(0);if(a){if("selectionStart"in a)return a.selectionStart;if(document.selection){a.focus();var b=document.selection.createRange(),c=document.selection.createRange().text.length;return b.moveStart("character",-a.value.length),b.text.length-c}}}}(jQuery)}(this),d()}),$__System.registerDynamic("49c",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){a.ui=a.ui||{},a.ui.version="1.12.1";var b=0,c=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(a){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h={},i=b.split(".")[0];b=b.split(".")[1];var j=i+"-"+b;return d||(d=c,c=a.Widget),a.isArray(d)&&(d=a.extend.apply(null,[{}].concat(d))),a.expr[":"][j.toLowerCase()]=function(b){return!!a.data(b,j)},a[i]=a[i]||{},e=a[i][b],f=a[i][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new f(a,b)},a.extend(f,e,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),g=new c,g.options=a.widget.extend({},g.options),a.each(d,function(b,d){return a.isFunction(d)?void(h[b]=function(){function a(){return c.prototype[b].apply(this,arguments)}function e(a){return c.prototype[b].apply(this,a)}return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(h[b]=d)}),f.prototype=a.widget.extend(g,{widgetEventPrefix:e?g.widgetEventPrefix||b:b},h,{constructor:f,namespace:i,widgetName:b,widgetFullName:j}),e?(a.each(e._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,f,c._proto)}),delete e._childConstructors):c._childConstructors.push(f),a.widget.bridge(b,f),f},a.widget.extend=function(b){for(var d,e,f=c.call(arguments,1),g=0,h=f.length;h>g;g++)for(d in f[g])e=f[g][d],f[g].hasOwnProperty(d)&&void 0!==e&&(b[d]=a.isPlainObject(e)?a.isPlainObject(b[d])?a.widget.extend({},b[d],e):a.widget.extend({},e):e);return b},a.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=c.call(arguments,1),i=this;return g?this.length||"instance"!==f?this.each(function(){var c,d=a.data(this,e);return"instance"===f?(i=d,!1):d?a.isFunction(d[f])&&"_"!==f.charAt(0)?(c=d[f].apply(d,h),c!==d&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):i=void 0:(h.length&&(f=a.widget.extend.apply(null,[f].concat(h))),this.each(function(){var b=a.data(this,e);b?(b.option(f||{}),b._init&&b._init()):a.data(this,e,new d(f,this))})),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=b++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),this.classesElementLookup={},d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){var b=this;this._destroy(),a.each(this.classesElementLookup,function(a,c){b._removeClass(c,a)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var d,e,f,g=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(g={},d=b.split("."),b=d.shift(),d.length){for(e=g[b]=a.widget.extend({},this.options[b]),f=0;d.length-1>f;f++)e[d[f]]=e[d[f]]||{},e=e[d[f]];if(b=d.pop(),1===arguments.length)return void 0===e[b]?null:e[b];e[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];g[b]=c}return this._setOptions(g),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return"classes"===a&&this._setOptionClasses(b),this.options[a]=b,"disabled"===a&&this._setOptionDisabled(b),this},_setOptionClasses:function(b){var c,d,e;for(c in b)e=this.classesElementLookup[c],b[c]!==this.options.classes[c]&&e&&e.length&&(d=a(e.get()),this._removeClass(e,c),d.addClass(this._classes({element:d,keys:c,classes:b,add:!0})))},_setOptionDisabled:function(a){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!a),a&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(b){function c(c,f){var g,h;for(h=0;c.length>h;h++)g=e.classesElementLookup[c[h]]||a(),g=a(b.add?a.unique(g.get().concat(b.element.get())):g.not(b.element).get()),e.classesElementLookup[c[h]]=g,d.push(c[h]),f&&b.classes[c[h]]&&d.push(b.classes[c[h]])}var d=[],e=this;return b=a.extend({element:this.element,classes:this.options.classes||{}},b),this._on(b.element,{remove:"_untrackClassesElement"}),b.keys&&c(b.keys.match(/\S+/g)||[],!0),b.extra&&c(b.extra.match(/\S+/g)||[]),d.join(" ")},_untrackClassesElement:function(b){var c=this;a.each(c.classesElementLookup,function(d,e){-1!==a.inArray(b.target,e)&&(c.classesElementLookup[d]=a(e.not(b.target).get()))})},_removeClass:function(a,b,c){return this._toggleClass(a,b,c,!1)},_addClass:function(a,b,c){return this._toggleClass(a,b,c,!0)},_toggleClass:function(a,b,c,d){d="boolean"==typeof d?d:c;var e="string"==typeof a||null===a,f={extra:e?b:c,keys:e?a:b,element:e?this.element:a,add:d};return f.element.toggleClass(this._classes(f),d),this},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.on(j,k,h):c.on(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.off(c).off(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){this._addClass(a(b.currentTarget),null,"ui-state-hover")},mouseleave:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){this._addClass(a(b.currentTarget),null,"ui-state-focus")},focusout:function(b){this._removeClass(a(b.currentTarget),null,"ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}}),a.widget,function(){function b(a,b,c){return[parseFloat(a[0])*(l.test(a[0])?b/100:1),parseFloat(a[1])*(l.test(a[1])?c/100:1)]}function c(b,c){return parseInt(a.css(b,c),10)||0}function d(b){var c=b[0];return 9===c.nodeType?{width:b.width(),height:b.height(),offset:{top:0,left:0}}:a.isWindow(c)?{width:b.width(),height:b.height(),offset:{top:b.scrollTop(),left:b.scrollLeft()}}:c.preventDefault?{width:0,height:0,offset:{top:c.pageY,left:c.pageX}}:{width:b.outerWidth(),height:b.outerHeight(),offset:b.offset()}}var e,f=Math.max,g=Math.abs,h=/left|center|right/,i=/top|center|bottom/,j=/[\+\-]\d+(\.[\d]+)?%?/,k=/^\w+/,l=/%$/,m=a.fn.position;a.position={scrollbarWidth:function(){if(void 0!==e)return e;var b,c,d=a("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),f=d.children()[0];return a("body").append(d),b=f.offsetWidth,d.css("overflow","scroll"),c=f.offsetWidth,b===c&&(c=d[0].clientWidth),d.remove(),e=b-c},getScrollInfo:function(b){var c=b.isWindow||b.isDocument?"":b.element.css("overflow-x"),d=b.isWindow||b.isDocument?"":b.element.css("overflow-y"),e="scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth,f="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:f?a.position.scrollbarWidth():0,height:e?a.position.scrollbarWidth():0}},getWithinInfo:function(b){var c=a(b||window),d=a.isWindow(c[0]),e=!!c[0]&&9===c[0].nodeType,f=!d&&!e;return{element:c,isWindow:d,isDocument:e,offset:f?a(b).offset():{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:c.outerWidth(),height:c.outerHeight()}}},a.fn.position=function(e){if(!e||!e.of)return m.apply(this,arguments);e=a.extend({},e);var l,n,o,p,q,r,s=a(e.of),t=a.position.getWithinInfo(e.within),u=a.position.getScrollInfo(t),v=(e.collision||"flip").split(" "),w={};return r=d(s),s[0].preventDefault&&(e.at="left top"),n=r.width,o=r.height,p=r.offset,q=a.extend({},p),a.each(["my","at"],function(){var a,b,c=(e[this]||"").split(" ");1===c.length&&(c=h.test(c[0])?c.concat(["center"]):i.test(c[0])?["center"].concat(c):["center","center"]),c[0]=h.test(c[0])?c[0]:"center",c[1]=i.test(c[1])?c[1]:"center",a=j.exec(c[0]),b=j.exec(c[1]),w[this]=[a?a[0]:0,b?b[0]:0],e[this]=[k.exec(c[0])[0],k.exec(c[1])[0]]}),1===v.length&&(v[1]=v[0]),"right"===e.at[0]?q.left+=n:"center"===e.at[0]&&(q.left+=n/2),"bottom"===e.at[1]?q.top+=o:"center"===e.at[1]&&(q.top+=o/2),l=b(w.at,n,o),q.left+=l[0],q.top+=l[1],this.each(function(){var d,h,i=a(this),j=i.outerWidth(),k=i.outerHeight(),m=c(this,"marginLeft"),r=c(this,"marginTop"),x=j+m+c(this,"marginRight")+u.width,y=k+r+c(this,"marginBottom")+u.height,z=a.extend({},q),A=b(w.my,i.outerWidth(),i.outerHeight());"right"===e.my[0]?z.left-=j:"center"===e.my[0]&&(z.left-=j/2),"bottom"===e.my[1]?z.top-=k:"center"===e.my[1]&&(z.top-=k/2),z.left+=A[0],z.top+=A[1],d={marginLeft:m,marginTop:r},a.each(["left","top"],function(b,c){a.ui.position[v[b]]&&a.ui.position[v[b]][c](z,{targetWidth:n,targetHeight:o,elemWidth:j,elemHeight:k,collisionPosition:d,collisionWidth:x,collisionHeight:y,offset:[l[0]+A[0],l[1]+A[1]],my:e.my,at:e.at,within:t,elem:i})}),e.using&&(h=function(a){var b=p.left-z.left,c=b+n-j,d=p.top-z.top,h=d+o-k,l={target:{element:s,left:p.left,top:p.top,width:n,height:o},element:{element:i,left:z.left,top:z.top,width:j,height:k},horizontal:0>c?"left":b>0?"right":"center",vertical:0>h?"top":d>0?"bottom":"middle"};j>n&&n>g(b+c)&&(l.horizontal="center"),k>o&&o>g(d+h)&&(l.vertical="middle"),l.important=f(g(b),g(c))>f(g(d),g(h))?"horizontal":"vertical",e.using.call(this,a,l)}),i.offset(a.extend(z,{using:h}))})},a.ui.position={fit:{left:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollLeft:d.offset.left,g=d.width,h=a.left-b.collisionPosition.marginLeft,i=e-h,j=h+b.collisionWidth-g-e;b.collisionWidth>g?i>0&&0>=j?(c=a.left+i+b.collisionWidth-g-e,a.left+=i-c):a.left=j>0&&0>=i?e:i>j?e+g-b.collisionWidth:e:i>0?a.left+=i:j>0?a.left-=j:a.left=f(a.left-h,a.left)},top:function(a,b){var c,d=b.within,e=d.isWindow?d.scrollTop:d.offset.top,g=b.within.height,h=a.top-b.collisionPosition.marginTop,i=e-h,j=h+b.collisionHeight-g-e;b.collisionHeight>g?i>0&&0>=j?(c=a.top+i+b.collisionHeight-g-e,a.top+=i-c):a.top=j>0&&0>=i?e:i>j?e+g-b.collisionHeight:e:i>0?a.top+=i:j>0?a.top-=j:a.top=f(a.top-h,a.top)}},flip:{left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,h=e.width,i=e.isWindow?e.scrollLeft:e.offset.left,j=a.left-b.collisionPosition.marginLeft,k=j-i,l=j+b.collisionWidth-h-i,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-h-f,(0>c||g(k)>c)&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-i,(d>0||l>g(d))&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,h=e.height,i=e.isWindow?e.scrollTop:e.offset.top,j=a.top-b.collisionPosition.marginTop,k=j-i,l=j+b.collisionHeight-h-i,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-h-f,(0>d||g(k)>d)&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-i,(c>0||l>g(c))&&(a.top+=n+o+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments),a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments),a.ui.position.fit.top.apply(this,arguments)}}}}(),a.ui.position,a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])}}),a.fn.extend({disableSelection:function(){var a="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(a+".ui-disableSelection",function(a){a.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),a.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):a(this[0].form)},a.ui.formResetMixin={_formResetHandler:function(){var b=a(this);setTimeout(function(){var c=b.data("ui-form-reset-instances");a.each(c,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var a=this.form.data("ui-form-reset-instances")||[];a.length||this.form.on("reset.ui-form-reset",this._formResetHandler),a.push(this),this.form.data("ui-form-reset-instances",a)}},_unbindFormResetHandler:function(){if(this.form.length){var b=this.form.data("ui-form-reset-instances");b.splice(a.inArray(this,b),1),b.length?this.form.data("ui-form-reset-instances",b):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}},a.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},a.ui.escapeSelector=function(){var a=/([!"#$%&'()*+,.\/:;<=>?@[\]^`{|}~])/g;return function(b){return b.replace(a,"\\$1")}}(),a.fn.labels=function(){var b,c,d,e,f;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(e=this.eq(0).parents("label"),d=this.attr("id"),d&&(b=this.eq(0).parents().last(),f=b.add(b.length?b.siblings():this.siblings()),c="label[for='"+a.ui.escapeSelector(d)+"']",e=e.add(f.find(c).addBack(c))),this.pushStack(e))},a.fn.scrollParent=function(b){var c=this.css("position"),d="absolute"===c,e=b?/(auto|scroll|hidden)/:/(auto|scroll)/,f=this.parents().filter(function(){var b=a(this);return(!d||"static"!==b.css("position"))&&e.test(b.css("overflow")+b.css("overflow-y")+b.css("overflow-x"))}).eq(0);return"fixed"!==c&&f.length?f:a(this[0].ownerDocument||document)},a.fn.extend({uniqueId:function(){var a=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++a)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&a(this).removeAttr("id")})}}),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());var d=!1;a(document).on("mouseup",function(){d=!1}),a.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.on("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).on("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!d){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var c=this,e=1===b.which,f=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return!(e&&!f&&this._mouseCapture(b))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){c.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return c._mouseMove(a)},this._mouseUpDelegate=function(a){return c._mouseUp(a)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),d=!0,!0))}},_mouseMove:function(b){if(this._mouseMoved){if(a.ui.ie&&(!document.documentMode||9>document.documentMode)&&!b.button)return this._mouseUp(b);if(!b.which)if(b.originalEvent.altKey||b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(b)}return(b.which||b.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,d=!1,b.preventDefault()},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),a.ui.plugin={add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c,d){var e,f=a.plugins[b];if(f&&(d||a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType))for(e=0;f.length>e;e++)a.options[f[e][0]]&&f[e][1].apply(a.element,c)}},a.ui.safeActiveElement=function(a){var b;try{b=a.activeElement}catch(c){b=a.body}return b||(b=a.body),b.nodeName||(b=a.body),b},a.ui.safeBlur=function(b){b&&"body"!==b.nodeName.toLowerCase()&&a(b).trigger("blur")},a.widget("ui.draggable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(a,b){this._super(a,b),"handle"===a&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(b){var c=this.options;return!(this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(b),!!this.handle&&(this._blurActiveElement(b),this._blockFrames(c.iframeFix===!0?"iframe":c.iframeFix),!0))},_blockFrames:function(b){this.iframeBlocks=this.document.find(b).map(function(){var b=a(this);return a("<div>").css("position","absolute").appendTo(b.parent()).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).offset(b.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(b){var c=a.ui.safeActiveElement(this.document[0]),d=a(b.target);d.closest(c).length||a.ui.safeBlur(c)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===a(this).css("position")}).length>0,this.positionAbs=this.element.offset(),
this._refreshOffsets(b),this.originalPosition=this.position=this._generatePosition(b,!1),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_refreshOffsets:function(a){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:a.pageX-this.offset.left,top:a.pageY-this.offset.top}},_mouseDrag:function(b,c){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b,!0),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp(new a.Event("mouseup",b)),!1;this.position=d.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1},_mouseUp:function(b){return this._unblockFrames(),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),this.handleElement.is(b.target)&&this.element.trigger("focus"),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new a.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!a(b.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper),e=d?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return e.parents("body").length||e.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d&&e[0]===this.element[0]&&this._setPositionRelative(),e[0]===this.element[0]||/(fixed|absolute)/.test(e.css("position"))||e.css("position","absolute"),e},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_isRootNode:function(a){return/(html|body)/i.test(a.tagName)||a===this.document[0]},_getParentOffset:function(){var b=this.offsetParent.offset(),c=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==c&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var a=this.element.position(),b=this._isRootNode(this.scrollParent[0]);return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+(b?0:this.scrollParent.scrollTop()),left:a.left-(parseInt(this.helper.css("left"),10)||0)+(b?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options,f=this.document[0];return this.relativeContainer=null,e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(f).width()-this.helperProportions.width-this.margins.left,(a(f).height()||f.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b=/(scroll|auto)/.test(c.css("overflow")),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=c))):void(this.containment=null)},_convertPositionTo:function(a,b){b||(b=this.position);var c="absolute"===a?1:-1,d=this._isRootNode(this.scrollParent[0]);return{top:b.top+this.offset.relative.top*c+this.offset.parent.top*c-("fixed"===this.cssPosition?-this.offset.scroll.top:d?0:this.offset.scroll.top)*c,left:b.left+this.offset.relative.left*c+this.offset.parent.left*c-("fixed"===this.cssPosition?-this.offset.scroll.left:d?0:this.offset.scroll.left)*c}},_generatePosition:function(a,b){var c,d,e,f,g=this.options,h=this._isRootNode(this.scrollParent[0]),i=a.pageX,j=a.pageY;return h&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),b&&(this.containment&&(this.relativeContainer?(d=this.relativeContainer.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,a.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),a.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),a.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),a.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f),"y"===g.axis&&(i=this.originalPageX),"x"===g.axis&&(j=this.originalPageY)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:h?0:this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:h?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d,this],!0),/^(drag|start|stop)/.test(b)&&(this.positionAbs=this._convertPositionTo("absolute"),d.offset=this.positionAbs),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c,d){var e=a.extend({},c,{item:d.element});d.sortables=[],a(d.options.connectToSortable).each(function(){var c=a(this).sortable("instance");c&&!c.options.disabled&&(d.sortables.push(c),c.refreshPositions(),c._trigger("activate",b,e))})},stop:function(b,c,d){var e=a.extend({},c,{item:d.element});d.cancelHelperRemoval=!1,a.each(d.sortables,function(){var a=this;a.isOver?(a.isOver=0,d.cancelHelperRemoval=!0,a.cancelHelperRemoval=!1,a._storedCSS={position:a.placeholder.css("position"),top:a.placeholder.css("top"),left:a.placeholder.css("left")},a._mouseStop(b),a.options.helper=a.options._helper):(a.cancelHelperRemoval=!0,a._trigger("deactivate",b,e))})},drag:function(b,c,d){a.each(d.sortables,function(){var e=!1,f=this;f.positionAbs=d.positionAbs,f.helperProportions=d.helperProportions,f.offset.click=d.offset.click,f._intersectsWith(f.containerCache)&&(e=!0,a.each(d.sortables,function(){return this.positionAbs=d.positionAbs,this.helperProportions=d.helperProportions,this.offset.click=d.offset.click,this!==f&&this._intersectsWith(this.containerCache)&&a.contains(f.element[0],this.element[0])&&(e=!1),e})),e?(f.isOver||(f.isOver=1,d._parent=c.helper.parent(),f.currentItem=c.helper.appendTo(f.element).data("ui-sortable-item",!0),f.options._helper=f.options.helper,f.options.helper=function(){return c.helper[0]},b.target=f.currentItem[0],f._mouseCapture(b,!0),f._mouseStart(b,!0,!0),f.offset.click.top=d.offset.click.top,f.offset.click.left=d.offset.click.left,f.offset.parent.left-=d.offset.parent.left-f.offset.parent.left,f.offset.parent.top-=d.offset.parent.top-f.offset.parent.top,d._trigger("toSortable",b),d.dropped=f.element,a.each(d.sortables,function(){this.refreshPositions()}),d.currentItem=d.element,f.fromOutside=d),f.currentItem&&(f._mouseDrag(b),c.position=f.position)):f.isOver&&(f.isOver=0,f.cancelHelperRemoval=!0,f.options._revert=f.options.revert,f.options.revert=!1,f._trigger("out",b,f._uiHash(f)),f._mouseStop(b,!0),f.options.revert=f.options._revert,f.options.helper=f.options._helper,f.placeholder&&f.placeholder.remove(),c.helper.appendTo(d._parent),d._refreshOffsets(b),c.position=d._generatePosition(b,!0),d._trigger("fromSortable",b),d.dropped=!1,a.each(d.sortables,function(){this.refreshPositions()}))})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c,d){var e=a("body"),f=d.options;e.css("cursor")&&(f._cursor=e.css("cursor")),e.css("cursor",f.cursor)},stop:function(b,c,d){var e=d.options;e._cursor&&a("body").css("cursor",e._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("opacity")&&(f._opacity=e.css("opacity")),e.css("opacity",f.opacity)},stop:function(b,c,d){var e=d.options;e._opacity&&a(c.helper).css("opacity",e._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(a,b,c){c.scrollParentNotHidden||(c.scrollParentNotHidden=c.helper.scrollParent(!1)),c.scrollParentNotHidden[0]!==c.document[0]&&"HTML"!==c.scrollParentNotHidden[0].tagName&&(c.overflowOffset=c.scrollParentNotHidden.offset())},drag:function(b,c,d){var e=d.options,f=!1,g=d.scrollParentNotHidden[0],h=d.document[0];g!==h&&"HTML"!==g.tagName?(e.axis&&"x"===e.axis||(d.overflowOffset.top+g.offsetHeight-b.pageY<e.scrollSensitivity?g.scrollTop=f=g.scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(g.scrollTop=f=g.scrollTop-e.scrollSpeed)),e.axis&&"y"===e.axis||(d.overflowOffset.left+g.offsetWidth-b.pageX<e.scrollSensitivity?g.scrollLeft=f=g.scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(g.scrollLeft=f=g.scrollLeft-e.scrollSpeed))):(e.axis&&"x"===e.axis||(b.pageY-a(h).scrollTop()<e.scrollSensitivity?f=a(h).scrollTop(a(h).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(h).scrollTop())<e.scrollSensitivity&&(f=a(h).scrollTop(a(h).scrollTop()+e.scrollSpeed))),e.axis&&"y"===e.axis||(b.pageX-a(h).scrollLeft()<e.scrollSensitivity?f=a(h).scrollLeft(a(h).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(h).scrollLeft())<e.scrollSensitivity&&(f=a(h).scrollLeft(a(h).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c,d){var e=d.options;d.snapElements=[],a(e.snap.constructor!==String?e.snap.items||":data(ui-draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!==d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c,d){var e,f,g,h,i,j,k,l,m,n,o=d.options,p=o.snapTolerance,q=c.offset.left,r=q+d.helperProportions.width,s=c.offset.top,t=s+d.helperProportions.height;for(m=d.snapElements.length-1;m>=0;m--)i=d.snapElements[m].left-d.margins.left,j=i+d.snapElements[m].width,k=d.snapElements[m].top-d.margins.top,l=k+d.snapElements[m].height,i-p>r||q>j+p||k-p>t||s>l+p||!a.contains(d.snapElements[m].item.ownerDocument,d.snapElements[m].item)?(d.snapElements[m].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=!1):("inner"!==o.snapMode&&(e=p>=Math.abs(k-t),f=p>=Math.abs(l-s),g=p>=Math.abs(i-r),h=p>=Math.abs(j-q),e&&(c.position.top=d._convertPositionTo("relative",{top:k-d.helperProportions.height,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i-d.helperProportions.width}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j}).left)),n=e||f||g||h,"outer"!==o.snapMode&&(e=p>=Math.abs(k-s),f=p>=Math.abs(l-t),g=p>=Math.abs(i-q),h=p>=Math.abs(j-r),e&&(c.position.top=d._convertPositionTo("relative",{top:k,left:0}).top),f&&(c.position.top=d._convertPositionTo("relative",{top:l-d.helperProportions.height,left:0}).top),g&&(c.position.left=d._convertPositionTo("relative",{top:0,left:i}).left),h&&(c.position.left=d._convertPositionTo("relative",{top:0,left:j-d.helperProportions.width}).left)),!d.snapElements[m].snapping&&(e||f||g||h||n)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[m].item})),d.snapElements[m].snapping=e||f||g||h||n)}}),a.ui.plugin.add("draggable","stack",{start:function(b,c,d){var e,f=d.options,g=a.makeArray(a(f.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});g.length&&(e=parseInt(a(g[0]).css("zIndex"),10)||0,a(g).each(function(b){a(this).css("zIndex",e+b)}),this.css("zIndex",e+g.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c,d){var e=a(c.helper),f=d.options;e.css("zIndex")&&(f._zIndex=e.css("zIndex")),e.css("zIndex",f.zIndex)},stop:function(b,c,d){var e=d.options;e._zIndex&&a(c.helper).css("zIndex",e._zIndex)}}),a.ui.draggable,a.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var b,c=this.options,d=c.accept;this.isover=!1,this.isout=!0,this.accept=a.isFunction(d)?d:function(a){return a.is(d)},this.proportions=function(){return arguments.length?void(b=arguments[0]):b?b:b={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(c.scope),c.addClasses&&this._addClass("ui-droppable")},_addToManager:function(b){a.ui.ddmanager.droppables[b]=a.ui.ddmanager.droppables[b]||[],a.ui.ddmanager.droppables[b].push(this)},_splice:function(a){for(var b=0;a.length>b;b++)a[b]===this&&a.splice(b,1)},_destroy:function(){var b=a.ui.ddmanager.droppables[this.options.scope];this._splice(b)},_setOption:function(b,c){if("accept"===b)this.accept=a.isFunction(c)?c:function(a){return a.is(c)};else if("scope"===b){var d=a.ui.ddmanager.droppables[this.options.scope];this._splice(d),this._addToManager(c)}this._super(b,c)},_activate:function(b){var c=a.ui.ddmanager.current;this._addActiveClass(),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this._removeActiveClass(),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._addHoverClass(),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!==this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this._removeHoverClass(),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current,f=!1;return!(!d||(d.currentItem||d.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var c=a(this).droppable("instance");return c.options.greedy&&!c.options.disabled&&c.options.scope===d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&e(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance,b)?(f=!0,!1):void 0}),!f&&(!!this.accept.call(this.element[0],d.currentItem||d.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",b,this.ui(d)),this.element)))},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var e=a.ui.intersect=function(){function a(a,b,c){return a>=b&&b+c>a}return function(b,c,d,e){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left+b.margins.left,g=(b.positionAbs||b.position.absolute).top+b.margins.top,h=f+b.helperProportions.width,i=g+b.helperProportions.height,j=c.offset.left,k=c.offset.top,l=j+c.proportions().width,m=k+c.proportions().height;switch(d){case"fit":return f>=j&&l>=h&&g>=k&&m>=i;case"intersect":return f+b.helperProportions.width/2>j&&l>h-b.helperProportions.width/2&&g+b.helperProportions.height/2>k&&m>i-b.helperProportions.height/2;case"pointer":return a(e.pageY,k,c.proportions().height)&&a(e.pageX,j,c.proportions().width);case"touch":return(g>=k&&m>=g||i>=k&&m>=i||k>g&&i>m)&&(f>=j&&l>=f||h>=j&&l>=h||j>f&&h>l);default:return!1}}}();a.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(b,c){var d,e,f=a.ui.ddmanager.droppables[b.options.scope]||[],g=c?c.type:null,h=(b.currentItem||b.element).find(":data(ui-droppable)").addBack();a:for(d=0;f.length>d;d++)if(!(f[d].options.disabled||b&&!f[d].accept.call(f[d].element[0],b.currentItem||b.element))){for(e=0;h.length>e;e++)if(h[e]===f[d].element[0]){f[d].proportions().height=0;continue a}f[d].visible="none"!==f[d].element.css("display"),f[d].visible&&("mousedown"===g&&f[d]._activate.call(f[d],c),f[d].offset=f[d].element.offset(),f[d].proportions({width:f[d].element[0].offsetWidth,height:f[d].element[0].offsetHeight}))}},drop:function(b,c){var d=!1;return a.each((a.ui.ddmanager.droppables[b.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e(b,this,this.options.tolerance,c)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,c)))}),d},dragStart:function(b,c){b.element.parentsUntil("body").on("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d,f,g,h=e(b,this,this.options.tolerance,c),i=!h&&this.isover?"isout":h&&!this.isover?"isover":null;i&&(this.options.greedy&&(f=this.options.scope,g=this.element.parents(":data(ui-droppable)").filter(function(){return a(this).droppable("instance").options.scope===f}),g.length&&(d=a(g[0]).droppable("instance"),d.greedyChild="isover"===i)),d&&"isover"===i&&(d.isover=!1,d.isout=!0,d._out.call(d,c)),this[i]=!0,this["isout"===i?"isover":"isout"]=!1,this["isover"===i?"_over":"_out"].call(this,c),d&&"isout"===i&&(d.isout=!1,d.isover=!0,d._over.call(d,c)))}})},dragStop:function(b,c){b.element.parentsUntil("body").off("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}},a.uiBackCompat!==!1&&a.widget("ui.droppable",a.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),a.ui.droppable,a.widget("ui.resizable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(a){return parseFloat(a)||0},_isNumber:function(a){return!isNaN(parseFloat(a))},_hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0||(b[d]=1,e=b[d]>0,b[d]=0,e)},_create:function(){var b,c=this.options,d=this;this._addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,b={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(b),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(b),this._proportionallyResize()),this._setupHandles(),c.autoHide&&a(this.element).on("mouseenter",function(){c.disabled||(d._removeClass("ui-resizable-autohide"),d._handles.show())}).on("mouseleave",function(){c.disabled||d.resizing||(d._addClass("ui-resizable-autohide"),d._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_setOption:function(a,b){switch(this._super(a,b),a){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var b,c,d,e,f,g=this.options,h=this;if(this.handles=g.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=a(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),d=this.handles.split(","),this.handles={},c=0;d.length>c;c++)b=a.trim(d[c]),e="ui-resizable-"+b,f=a("<div>"),this._addClass(f,"ui-resizable-handle "+e),f.css({zIndex:g.zIndex}),this.handles[b]=".ui-resizable-"+b,this.element.append(f);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String?this.handles[c]=this.element.children(this.handles[c]).first().show():(this.handles[c].jquery||this.handles[c].nodeType)&&(this.handles[c]=a(this.handles[c]),this._on(this.handles[c],{mousedown:h._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(d=a(this.handles[c],this.element),f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),this._handles=this._handles.add(this.handles[c])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){h.resizing||(this.className&&(f=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),h.axis=f&&f[1]?f[1]:"se")}),g.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var c,d,e,f=this.options,g=this.element;return this.resizing=!0,this._renderProxy(),c=this._num(this.helper.css("left")),d=this._num(this.helper.css("top")),f.containment&&(c+=a(f.containment).scrollLeft()||0,d+=a(f.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:c,top:d},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:g.width(),height:g.height()},this.originalSize=this._helper?{width:g.outerWidth(),height:g.outerHeight()}:{width:g.width(),height:g.height()},this.sizeDiff={width:g.outerWidth()-g.width(),height:g.outerHeight()-g.height()},this.originalPosition={left:c,top:d},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof f.aspectRatio?f.aspectRatio:this.originalSize.width/this.originalSize.height||1,e=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===e?this.axis+"-resize":e),this._addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d,e=this.originalMousePosition,f=this.axis,g=b.pageX-e.left||0,h=b.pageY-e.top||0,i=this._change[f];return this._updatePrevProperties(),!!i&&(c=i.apply(this,[b,g,h]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),d=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(d)||(this._updatePrevProperties(),this._trigger("resize",b,this.ui()),this._applyChanges()),!1)},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&this._hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseFloat(k.element.css("left"))+(k.position.left-k.originalPosition.left)||null,i=parseFloat(k.element.css("top"))+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var a={};return this.position.top!==this.prevPosition.top&&(a.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(a.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(a.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(a.height=this.size.height+"px"),this.helper.css(a),a},_updateVirtualBoundaries:function(a){var b,c,d,e,f,g=this.options;f={minWidth:this._isNumber(g.minWidth)?g.minWidth:0,maxWidth:this._isNumber(g.maxWidth)?g.maxWidth:1/0,minHeight:this._isNumber(g.minHeight)?g.minHeight:0,maxHeight:this._isNumber(g.maxHeight)?g.maxHeight:1/0},(this._aspectRatio||a)&&(b=f.minHeight*this.aspectRatio,d=f.minWidth/this.aspectRatio,c=f.maxHeight*this.aspectRatio,e=f.maxWidth/this.aspectRatio,b>f.minWidth&&(f.minWidth=b),d>f.minHeight&&(f.minHeight=d),f.maxWidth>c&&(f.maxWidth=c),f.maxHeight>e&&(f.maxHeight=e)),this._vBoundaries=f},_updateCache:function(a){this.offset=this.helper.offset(),this._isNumber(a.left)&&(this.position.left=a.left),this._isNumber(a.top)&&(this.position.top=a.top),this._isNumber(a.height)&&(this.size.height=a.height),this._isNumber(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,d=this.axis;return this._isNumber(a.height)?a.width=a.height*this.aspectRatio:this._isNumber(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===d&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===d&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,d=this._isNumber(a.width)&&b.maxWidth&&b.maxWidth<a.width,e=this._isNumber(a.height)&&b.maxHeight&&b.maxHeight<a.height,f=this._isNumber(a.width)&&b.minWidth&&b.minWidth>a.width,g=this._isNumber(a.height)&&b.minHeight&&b.minHeight>a.height,h=this.originalPosition.left+this.originalSize.width,i=this.originalPosition.top+this.originalSize.height,j=/sw|nw|w/.test(c),k=/nw|ne|n/.test(c);return f&&(a.width=b.minWidth),g&&(a.height=b.minHeight),d&&(a.width=b.maxWidth),e&&(a.height=b.maxHeight),f&&j&&(a.left=h-b.minWidth),d&&j&&(a.left=h-b.maxWidth),g&&k&&(a.top=i-b.minHeight),e&&k&&(a.top=i-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_getPaddingPlusBorderDimensions:function(a){for(var b=0,c=[],d=[a.css("borderTopWidth"),a.css("borderRightWidth"),a.css("borderBottomWidth"),a.css("borderLeftWidth")],e=[a.css("paddingTop"),a.css("paddingRight"),a.css("paddingBottom"),a.css("paddingLeft")];4>b;b++)c[b]=parseFloat(d[b])||0,
c[b]+=parseFloat(e[b])||0;return{height:c[0]+c[2],width:c[1]+c[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var a,b=0,c=this.helper||this.element;this._proportionallyResizeElements.length>b;b++)a=this._proportionallyResizeElements[b],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(a)),a.css({height:c.height()-this.outerDimensions.height||0,width:c.width()-this.outerDimensions.width||0})},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).resizable("instance"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&c._hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseFloat(c.element.css("left"))+(c.position.left-c.originalPosition.left)||null,k=parseFloat(c.element.css("top"))+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseFloat(c.element.css("width")),height:parseFloat(c.element.css("height")),top:parseFloat(c.element.css("top")),left:parseFloat(c.element.css("left"))};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,c,d,e,f,g,h,i=a(this).resizable("instance"),j=i.options,k=i.element,l=j.containment,m=l instanceof a?l.get(0):/parent/.test(l)?k.parent().get(0):l;m&&(i.containerElement=a(m),/document/.test(l)||l===document?(i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(m),c=[],a(["Top","Right","Left","Bottom"]).each(function(a,d){c[a]=i._num(b.css("padding"+d))}),i.containerOffset=b.offset(),i.containerPosition=b.position(),i.containerSize={height:b.innerHeight()-c[3],width:b.innerWidth()-c[1]},d=i.containerOffset,e=i.containerSize.height,f=i.containerSize.width,g=i._hasScroll(m,"left")?m.scrollWidth:f,h=i._hasScroll(m)?m.scrollHeight:e,i.parentData={element:m,left:d.left,top:d.top,width:g,height:h}))},resize:function(b){var c,d,e,f,g=a(this).resizable("instance"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement,n=!0;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio,n=!1),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio,n=!1),g.position.top=g._helper?i.top:0),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f?(g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top):(g.offset.left=g.element.offset().left,g.offset.top=g.element.offset().top),c=Math.abs(g.sizeDiff.width+(g._helper?g.offset.left-l.left:g.offset.left-i.left)),d=Math.abs(g.sizeDiff.height+(g._helper?g.offset.top-l.top:g.offset.top-i.top)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio,n=!1)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio,n=!1)),n||(g.position.left=g.prevPosition.left,g.position.top=g.prevPosition.top,g.size.width=g.prevSize.width,g.size.height=g.prevSize.height)},stop:function(){var b=a(this).resizable("instance"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).resizable("instance"),c=b.options;a(c.alsoResize).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseFloat(b.width()),height:parseFloat(b.height()),left:parseFloat(b.css("left")),top:parseFloat(b.css("top"))})})},resize:function(b,c){var d=a(this).resizable("instance"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0};a(e.alsoResize).each(function(){var b=a(this),d=a(this).data("ui-resizable-alsoresize"),e={},f=b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(f,function(a,b){var c=(d[b]||0)+(h[b]||0);c&&c>=0&&(e[b]=c||null)}),b.css(e)})},stop:function(){a(this).removeData("ui-resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).resizable("instance"),c=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:c.height,width:c.width,margin:0,left:0,top:0}),b._addClass(b.ghost,"ui-resizable-ghost"),a.uiBackCompat!==!1&&"string"==typeof b.options.ghost&&b.ghost.addClass(this.options.ghost),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).resizable("instance");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).resizable("instance");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b,c=a(this).resizable("instance"),d=c.options,e=c.size,f=c.originalSize,g=c.originalPosition,h=c.axis,i="number"==typeof d.grid?[d.grid,d.grid]:d.grid,j=i[0]||1,k=i[1]||1,l=Math.round((e.width-f.width)/j)*j,m=Math.round((e.height-f.height)/k)*k,n=f.width+l,o=f.height+m,p=d.maxWidth&&n>d.maxWidth,q=d.maxHeight&&o>d.maxHeight,r=d.minWidth&&d.minWidth>n,s=d.minHeight&&d.minHeight>o;d.grid=i,r&&(n+=j),s&&(o+=k),p&&(n-=j),q&&(o-=k),/^(se|s|e)$/.test(h)?(c.size.width=n,c.size.height=o):/^(ne)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.top=g.top-m):/^(sw)$/.test(h)?(c.size.width=n,c.size.height=o,c.position.left=g.left-l):((0>=o-k||0>=n-j)&&(b=c._getPaddingPlusBorderDimensions(this)),o-k>0?(c.size.height=o,c.position.top=g.top-m):(o=k-b.height,c.size.height=o,c.position.top=g.top+f.height-o),n-j>0?(c.size.width=n,c.position.left=g.left-l):(n=j-b.width,c.size.width=n,c.position.left=g.left+f.width-n))}}),a.ui.resizable,a.widget("ui.sortable",a.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(a,b,c){return a>=b&&b+c>a},_isFloating:function(a){return/left|right/.test(a.css("float"))||/inline|table-cell/.test(a.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(a,b){this._super(a,b),"handle"===a&&this._setHandleClassName()},_setHandleClassName:function(){var b=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),a.each(this.items,function(){b._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var a=this.items.length-1;a>=0;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(b,c){var d=null,e=!1,f=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(b),a(b.target).parents().each(function(){return a.data(this,f.widgetName+"-item")===f?(d=a(this),!1):void 0}),a.data(b.target,f.widgetName+"-item")===f&&(d=a(b.target)),!!d&&(!(this.options.handle&&!c&&(a(this.options.handle,d).find("*").addBack().each(function(){this===b.target&&(e=!0)}),!e))&&(this.currentItem=d,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(b,c,d){var e,f,g=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,g.cursorAt&&this._adjustOffsetFromHelper(g.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),g.containment&&this._setContainment(),g.cursor&&"auto"!==g.cursor&&(f=this.document.find("body"),this.storedCursor=f.css("cursor"),f.css("cursor",g.cursor),this.storedStylesheet=a("<style>*{ cursor: "+g.cursor+" !important; }</style>").appendTo(f)),g.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",g.opacity)),g.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",g.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("activate",b,this._uiHash(this));return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){var c,d,e,f,g=this.options,h=!1;for(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<g.scrollSensitivity?this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed:b.pageY-this.overflowOffset.top<g.scrollSensitivity&&(this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<g.scrollSensitivity?this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed:b.pageX-this.overflowOffset.left<g.scrollSensitivity&&(this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed)):(b.pageY-this.document.scrollTop()<g.scrollSensitivity?h=this.document.scrollTop(this.document.scrollTop()-g.scrollSpeed):this.window.height()-(b.pageY-this.document.scrollTop())<g.scrollSensitivity&&(h=this.document.scrollTop(this.document.scrollTop()+g.scrollSpeed)),b.pageX-this.document.scrollLeft()<g.scrollSensitivity?h=this.document.scrollLeft(this.document.scrollLeft()-g.scrollSpeed):this.window.width()-(b.pageX-this.document.scrollLeft())<g.scrollSensitivity&&(h=this.document.scrollLeft(this.document.scrollLeft()+g.scrollSpeed))),h!==!1&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),c=this.items.length-1;c>=0;c--)if(d=this.items[c],e=d.item[0],f=this._intersectsWithPointer(d),f&&d.instance===this.currentContainer&&e!==this.currentItem[0]&&this.placeholder[1===f?"next":"prev"]()[0]!==e&&!a.contains(this.placeholder[0],e)&&("semi-dynamic"!==this.options.type||!a.contains(this.element[0],e))){if(this.direction=1===f?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(d))break;this._rearrange(b,d),this._trigger("change",b,this._uiHash());break}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=this.placeholder.offset(),f=this.options.axis,g={};f&&"x"!==f||(g.left=e.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),f&&"y"!==f||(g.top=e.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,a(this.helper).animate(g,parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new a.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var b=this.containers.length-1;b>=0;b--)this.containers[b]._trigger("deactivate",null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[\-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l="x"===this.options.axis||d+j>h&&i>d+j,m="y"===this.options.axis||b+k>f&&g>b+k,n=l&&m;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?n:b+this.helperProportions.width/2>f&&g>c-this.helperProportions.width/2&&d+this.helperProportions.height/2>h&&i>e-this.helperProportions.height/2},_intersectsWithPointer:function(a){var b,c,d="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top,a.height),e="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left,a.width),f=d&&e;return!!f&&(b=this._getDragVerticalDirection(),c=this._getDragHorizontalDirection(),this.floating?"right"===c||"down"===b?2:1:b&&("down"===b?2:1))},_intersectsWithSides:function(a){var b=this._isOverAxis(this.positionAbs.top+this.offset.click.top,a.top+a.height/2,a.height),c=this._isOverAxis(this.positionAbs.left+this.offset.click.left,a.left+a.width/2,a.width),d=this._getDragVerticalDirection(),e=this._getDragHorizontalDirection();return this.floating&&e?"right"===e&&c||"left"===e&&!c:d&&("down"===d&&b||"up"===d&&!b)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!==a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!==a&&(a>0?"right":"left")},refresh:function(a){return this._refreshItems(a),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor===String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){function c(){h.push(this)}var d,e,f,g,h=[],i=[],j=this._connectWith();if(j&&b)for(d=j.length-1;d>=0;d--)for(f=a(j[d],this.document[0]),e=f.length-1;e>=0;e--)g=a.data(f[e],this.widgetFullName),g&&g!==this&&!g.options.disabled&&i.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g]);for(i.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),d=i.length-1;d>=0;d--)i[d][0].each(c);return a(h)},_removeCurrentsFromItems:function(){var b=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var c=0;b.length>c;c++)if(b[c]===a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[],this.containers=[this];var c,d,e,f,g,h,i,j,k=this.items,l=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],m=this._connectWith();if(m&&this.ready)for(c=m.length-1;c>=0;c--)for(e=a(m[c],this.document[0]),d=e.length-1;d>=0;d--)f=a.data(e[d],this.widgetFullName),f&&f!==this&&!f.options.disabled&&(l.push([a.isFunction(f.options.items)?f.options.items.call(f.element[0],b,{item:this.currentItem}):a(f.options.items,f.element),f]),this.containers.push(f));for(c=l.length-1;c>=0;c--)for(g=l[c][1],h=l[c][0],d=0,j=h.length;j>d;d++)i=a(h[d]),i.data(this.widgetName+"-item",g),k.push({item:i,instance:g,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var c,d,e,f;for(c=this.items.length-1;c>=0;c--)d=this.items[c],d.instance!==this.currentContainer&&this.currentContainer&&d.item[0]!==this.currentItem[0]||(e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item,b||(d.width=e.outerWidth(),d.height=e.outerHeight()),f=e.offset(),d.left=f.left,d.top=f.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;c>=0;c--)f=this.containers[c].element.offset(),this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c,d=b.options;d.placeholder&&d.placeholder.constructor!==String||(c=d.placeholder,d.placeholder={element:function(){var d=b.currentItem[0].nodeName.toLowerCase(),e=a("<"+d+">",b.document[0]);return b._addClass(e,"ui-sortable-placeholder",c||b.currentItem[0].className)._removeClass(e,"ui-sortable-helper"),"tbody"===d?b._createTrPlaceholder(b.currentItem.find("tr").eq(0),a("<tr>",b.document[0]).appendTo(e)):"tr"===d?b._createTrPlaceholder(b.currentItem,e):"img"===d&&e.attr("src",b.currentItem.attr("src")),c||e.css("visibility","hidden"),e},update:function(a,e){(!c||d.forcePlaceholderSize)&&(e.height()||e.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),e.width()||e.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10)))}}),b.placeholder=a(d.placeholder.element.call(b.element,b.currentItem)),b.currentItem.after(b.placeholder),d.placeholder.update(b,b.placeholder)},_createTrPlaceholder:function(b,c){var d=this;b.children().each(function(){a("<td>&#160;</td>",d.document[0]).attr("colspan",a(this).attr("colspan")||1).appendTo(c)})},_contactContainers:function(b){var c,d,e,f,g,h,i,j,k,l,m=null,n=null;for(c=this.containers.length-1;c>=0;c--)if(!a.contains(this.currentItem[0],this.containers[c].element[0]))if(this._intersectsWith(this.containers[c].containerCache)){if(m&&a.contains(this.containers[c].element[0],m.element[0]))continue;m=this.containers[c],n=c}else this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",b,this._uiHash(this)),this.containers[c].containerCache.over=0);if(m)if(1===this.containers.length)this.containers[n].containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1);else{for(e=1e4,f=null,k=m.floating||this._isFloating(this.currentItem),g=k?"left":"top",h=k?"width":"height",l=k?"pageX":"pageY",d=this.items.length-1;d>=0;d--)a.contains(this.containers[n].element[0],this.items[d].item[0])&&this.items[d].item[0]!==this.currentItem[0]&&(i=this.items[d].item.offset()[g],j=!1,b[l]-i>this.items[d][h]/2&&(j=!0),e>Math.abs(b[l]-i)&&(e=Math.abs(b[l]-i),f=this.items[d],this.direction=j?"up":"down"));if(!f&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[n])return void(this.currentContainer.containerCache.over||(this.containers[n]._trigger("over",b,this._uiHash()),this.currentContainer.containerCache.over=1));f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[n].element,!0),this._trigger("change",b,this._uiHash()),this.containers[n]._trigger("change",b,this._uiHash(this)),this.currentContainer=this.containers[n],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[n]._trigger("over",b,this._uiHash(this)),this.containers[n].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"===c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!==c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(!d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;"parent"===e.containment&&(e.containment=this.helper[0].parentNode),("document"===e.containment||"window"===e.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===e.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===e.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||(b=a(e.containment)[0],c=a(e.containment).offset(),d="hidden"!==a(b).css("overflow"),this.containment=[c.left+(parseInt(a(b).css("borderLeftWidth"),10)||0)+(parseInt(a(b).css("paddingLeft"),10)||0)-this.margins.left,c.top+(parseInt(a(b).css("borderTopWidth"),10)||0)+(parseInt(a(b).css("paddingTop"),10)||0)-this.margins.top,c.left+(d?Math.max(b.scrollWidth,b.offsetWidth):b.offsetWidth)-(parseInt(a(b).css("borderLeftWidth"),10)||0)-(parseInt(a(b).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,c.top+(d?Math.max(b.scrollHeight,b.offsetHeight):b.offsetHeight)-(parseInt(a(b).css("borderTopWidth"),10)||0)-(parseInt(a(b).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():f?0:e.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*d}},_generatePosition:function(b){var c,d,e=this.options,f=b.pageX,g=b.pageY,h="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(h[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),e.grid&&(c=this.originalPageY+Math.round((g-this.originalPageY)/e.grid[1])*e.grid[1],g=this.containment?c-this.offset.click.top>=this.containment[1]&&c-this.offset.click.top<=this.containment[3]?c:c-this.offset.click.top>=this.containment[1]?c-e.grid[1]:c+e.grid[1]:c,d=this.originalPageX+Math.round((f-this.originalPageX)/e.grid[0])*e.grid[0],f=this.containment?d-this.offset.click.left>=this.containment[0]&&d-this.offset.click.left<=this.containment[2]?d:d-this.offset.click.left>=this.containment[0]?d-e.grid[0]:d+e.grid[0]:d)),{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():i?0:h.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():i?0:h.scrollLeft())}},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this.counter;this._delay(function(){e===this.counter&&this.refreshPositions(!d)})},_clear:function(a,b){function c(a,b,c){return function(d){c._trigger(a,d,b._uiHash(b))}}this.reverting=!1;var d,e=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(d in this._storedCSS)("auto"===this._storedCSS[d]||"static"===this._storedCSS[d])&&(this._storedCSS[d]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!b&&e.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||b||e.push(function(a){this._trigger("update",a,this._uiHash())}),this!==this.currentContainer&&(b||(e.push(function(a){this._trigger("remove",a,this._uiHash())}),e.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),e.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)))),d=this.containers.length-1;d>=0;d--)b||e.push(c("deactivate",this,this.containers[d])),this.containers[d].containerCache.over&&(e.push(c("out",this,this.containers[d])),this.containers[d].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),
this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,b||this._trigger("beforeStop",a,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!b){for(d=0;e.length>d;d++)e[d].call(this,a);this._trigger("stop",a,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}}),a.widget("ui.menu",{version:"1.12.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-caret-1-e"},items:"> *",menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().attr({role:this.options.role,tabIndex:0}),this._addClass("ui-menu","ui-widget ui-widget-content"),this._on({"mousedown .ui-menu-item":function(a){a.preventDefault()},"click .ui-menu-item":function(b){var c=a(b.target),d=a(a.ui.safeActiveElement(this.document[0]));!this.mouseHandled&&c.not(".ui-state-disabled").length&&(this.select(b),b.isPropagationStopped()||(this.mouseHandled=!0),c.has(".ui-menu").length?this.expand(b):!this.element.is(":focus")&&d.closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){if(!this.previousFilter){var c=a(b.target).closest(".ui-menu-item"),d=a(b.currentTarget);c[0]===d[0]&&(this._removeClass(d.siblings().children(".ui-state-active"),null,"ui-state-active"),this.focus(b,d))}},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.find(this.options.items).eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){var c=!a.contains(this.element[0],a.ui.safeActiveElement(this.document[0]));c&&this.collapseAll(b)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(a){this._closeOnDocumentClick(a)&&this.collapseAll(a),this.mouseHandled=!1}})},_destroy:function(){var b=this.element.find(".ui-menu-item").removeAttr("role aria-disabled"),c=b.children(".ui-menu-item-wrapper").removeUniqueId().removeAttr("tabIndex role aria-haspopup");this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeAttr("role aria-labelledby aria-expanded aria-hidden aria-disabled tabIndex").removeUniqueId().show(),c.children().each(function(){var b=a(this);b.data("ui-menu-submenu-caret")&&b.remove()})},_keydown:function(b){var c,d,e,f,g=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:g=!1,d=this.previousFilter||"",f=!1,e=b.keyCode>=96&&105>=b.keyCode?""+(b.keyCode-96):String.fromCharCode(b.keyCode),clearTimeout(this.filterTimer),e===d?f=!0:e=d+e,c=this._filterMenuItems(e),c=f&&-1!==c.index(this.active.next())?this.active.nextAll(".ui-menu-item"):c,c.length||(e=String.fromCharCode(b.keyCode),c=this._filterMenuItems(e)),c.length?(this.focus(b,c),this.previousFilter=e,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter}g&&b.preventDefault()},_activate:function(a){this.active&&!this.active.is(".ui-state-disabled")&&(this.active.children("[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c,d,e,f,g=this,h=this.options.icons.submenu,i=this.element.find(this.options.menus);this._toggleClass("ui-menu-icons",null,!!this.element.find(".ui-icon").length),d=i.filter(":not(.ui-menu)").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var b=a(this),c=b.prev(),d=a("<span>").data("ui-menu-submenu-caret",!0);g._addClass(d,"ui-menu-icon","ui-icon "+h),c.attr("aria-haspopup","true").prepend(d),b.attr("aria-labelledby",c.attr("id"))}),this._addClass(d,"ui-menu","ui-widget ui-widget-content ui-front"),b=i.add(this.element),c=b.find(this.options.items),c.not(".ui-menu-item").each(function(){var b=a(this);g._isDivider(b)&&g._addClass(b,"ui-menu-divider","ui-widget-content")}),e=c.not(".ui-menu-item, .ui-menu-divider"),f=e.children().not(".ui-menu").uniqueId().attr({tabIndex:-1,role:this._itemRole()}),this._addClass(e,"ui-menu-item")._addClass(f,"ui-menu-item-wrapper"),c.filter(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(a,b){if("icons"===a){var c=this.element.find(".ui-menu-icon");this._removeClass(c,null,this.options.icons.submenu)._addClass(c,null,b.submenu)}this._super(a,b)},_setOptionDisabled:function(a){this._super(a),this.element.attr("aria-disabled",a+""),this._toggleClass(null,"ui-state-disabled",!!a)},focus:function(a,b){var c,d,e;this.blur(a,a&&"focus"===a.type),this._scrollIntoView(b),this.active=b.first(),d=this.active.children(".ui-menu-item-wrapper"),this._addClass(d,null,"ui-state-active"),this.options.role&&this.element.attr("aria-activedescendant",d.attr("id")),e=this.active.parent().closest(".ui-menu-item").children(".ui-menu-item-wrapper"),this._addClass(e,null,"ui-state-active"),a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),c=b.children(".ui-menu"),c.length&&a&&/^mouse/.test(a.type)&&this._startOpening(c),this.activeMenu=b.parent(),this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,d,e,f,g,h;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0,d=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,e=b.offset().top-this.activeMenu.offset().top-c-d,f=this.activeMenu.scrollTop(),g=this.activeMenu.height(),h=b.outerHeight(),0>e?this.activeMenu.scrollTop(f+e):e+h>g&&this.activeMenu.scrollTop(f+e-g+h))},blur:function(a,b){b||clearTimeout(this.timer),this.active&&(this._removeClass(this.active.children(".ui-menu-item-wrapper"),null,"ui-state-active"),this._trigger("blur",a,{item:this.active}),this.active=null)},_startOpening:function(a){clearTimeout(this.timer),"true"===a.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true"),b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer),this.timer=this._delay(function(){var d=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));d.length||(d=this.element),this._close(d),this.blur(b),this._removeClass(d.find(".ui-state-active"),null,"ui-state-active"),this.activeMenu=d},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element),a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false")},_closeOnDocumentClick:function(b){return!a(b.target).closest(".ui-menu").length},_isDivider:function(a){return!/[^\-\u2014\u2013\s]/.test(a.text())},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").find(this.options.items).first();b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var d;this.active&&(d="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+"All"](".ui-menu-item").eq(0)),d&&d.length&&this.active||(d=this.activeMenu.find(this.options.items)[b]()),this.focus(c,d)},nextPage:function(b){var c,d,e;return this.active?void(this.isLastItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return c=a(this),0>c.offset().top-d-e}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items)[this.active?"last":"first"]()))):void this.next(b)},previousPage:function(b){var c,d,e;return this.active?void(this.isFirstItem()||(this._hasScroll()?(d=this.active.offset().top,e=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return c=a(this),c.offset().top-d+e>0}),this.focus(b,c)):this.focus(b,this.activeMenu.find(this.options.items).first()))):void this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(b,!0),this._trigger("select",b,c)},_filterMenuItems:function(b){var c=b.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"),d=RegExp("^"+c,"i");return this.activeMenu.find(this.options.items).filter(".ui-menu-item").filter(function(){return d.test(a.trim(a(this).children(".ui-menu-item-wrapper").text()))})}}),a.widget("ui.selectmenu",[a.ui.formResetMixin,{version:"1.12.1",defaultElement:"<select>",options:{appendTo:null,classes:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"},disabled:null,icons:{button:"ui-icon-triangle-1-s"},position:{my:"left top",at:"left bottom",collision:"none"},width:!1,change:null,close:null,focus:null,open:null,select:null},_create:function(){var b=this.element.uniqueId().attr("id");this.ids={element:b,button:b+"-button",menu:b+"-menu"},this._drawButton(),this._drawMenu(),this._bindFormResetHandler(),this._rendered=!1,this.menuItems=a()},_drawButton:function(){var b,c=this,d=this._parseOption(this.element.find("option:selected"),this.element[0].selectedIndex);this.labels=this.element.labels().attr("for",this.ids.button),this._on(this.labels,{click:function(a){this.button.focus(),a.preventDefault()}}),this.element.hide(),this.button=a("<span>",{tabindex:this.options.disabled?-1:0,id:this.ids.button,role:"combobox","aria-expanded":"false","aria-autocomplete":"list","aria-owns":this.ids.menu,"aria-haspopup":"true",title:this.element.attr("title")}).insertAfter(this.element),this._addClass(this.button,"ui-selectmenu-button ui-selectmenu-button-closed","ui-button ui-widget"),b=a("<span>").appendTo(this.button),this._addClass(b,"ui-selectmenu-icon","ui-icon "+this.options.icons.button),this.buttonItem=this._renderButtonItem(d).appendTo(this.button),this.options.width!==!1&&this._resizeButton(),this._on(this.button,this._buttonEvents),this.button.one("focusin",function(){c._rendered||c._refreshMenu()})},_drawMenu:function(){var b=this;this.menu=a("<ul>",{"aria-hidden":"true","aria-labelledby":this.ids.button,id:this.ids.menu}),this.menuWrap=a("<div>").append(this.menu),this._addClass(this.menuWrap,"ui-selectmenu-menu","ui-front"),this.menuWrap.appendTo(this._appendTo()),this.menuInstance=this.menu.menu({classes:{"ui-menu":"ui-corner-bottom"},role:"listbox",select:function(a,c){a.preventDefault(),b._setSelection(),b._select(c.item.data("ui-selectmenu-item"),a)},focus:function(a,c){var d=c.item.data("ui-selectmenu-item");null!=b.focusIndex&&d.index!==b.focusIndex&&(b._trigger("focus",a,{item:d}),b.isOpen||b._select(d,a)),b.focusIndex=d.index,b.button.attr("aria-activedescendant",b.menuItems.eq(d.index).attr("id"))}}).menu("instance"),this.menuInstance._off(this.menu,"mouseleave"),this.menuInstance._closeOnDocumentClick=function(){return!1},this.menuInstance._isDivider=function(){return!1}},refresh:function(){this._refreshMenu(),this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(this._getSelectedItem().data("ui-selectmenu-item")||{})),null===this.options.width&&this._resizeButton()},_refreshMenu:function(){var a,b=this.element.find("option");this.menu.empty(),this._parseOptions(b),this._renderMenu(this.menu,this.items),this.menuInstance.refresh(),this.menuItems=this.menu.find("li").not(".ui-selectmenu-optgroup").find(".ui-menu-item-wrapper"),this._rendered=!0,b.length&&(a=this._getSelectedItem(),this.menuInstance.focus(null,a),this._setAria(a.data("ui-selectmenu-item")),this._setOption("disabled",this.element.prop("disabled")))},open:function(a){this.options.disabled||(this._rendered?(this._removeClass(this.menu.find(".ui-state-active"),null,"ui-state-active"),this.menuInstance.focus(null,this._getSelectedItem())):this._refreshMenu(),this.menuItems.length&&(this.isOpen=!0,this._toggleAttr(),this._resizeMenu(),this._position(),this._on(this.document,this._documentClick),this._trigger("open",a)))},_position:function(){this.menuWrap.position(a.extend({of:this.button},this.options.position))},close:function(a){this.isOpen&&(this.isOpen=!1,this._toggleAttr(),this.range=null,this._off(this.document),this._trigger("close",a))},widget:function(){return this.button},menuWidget:function(){return this.menu},_renderButtonItem:function(b){var c=a("<span>");return this._setText(c,b.label),this._addClass(c,"ui-selectmenu-text"),c},_renderMenu:function(b,c){var d=this,e="";a.each(c,function(c,f){var g;f.optgroup!==e&&(g=a("<li>",{text:f.optgroup}),d._addClass(g,"ui-selectmenu-optgroup","ui-menu-divider"+(f.element.parent("optgroup").prop("disabled")?" ui-state-disabled":"")),g.appendTo(b),e=f.optgroup),d._renderItemData(b,f)})},_renderItemData:function(a,b){return this._renderItem(a,b).data("ui-selectmenu-item",b)},_renderItem:function(b,c){var d=a("<li>"),e=a("<div>",{title:c.element.attr("title")});return c.disabled&&this._addClass(d,null,"ui-state-disabled"),this._setText(e,c.label),d.append(e).appendTo(b)},_setText:function(a,b){b?a.text(b):a.html("&#160;")},_move:function(a,b){var c,d,e=".ui-menu-item";this.isOpen?c=this.menuItems.eq(this.focusIndex).parent("li"):(c=this.menuItems.eq(this.element[0].selectedIndex).parent("li"),e+=":not(.ui-state-disabled)"),d="first"===a||"last"===a?c["first"===a?"prevAll":"nextAll"](e).eq(-1):c[a+"All"](e).eq(0),d.length&&this.menuInstance.focus(b,d)},_getSelectedItem:function(){return this.menuItems.eq(this.element[0].selectedIndex).parent("li")},_toggle:function(a){this[this.isOpen?"close":"open"](a)},_setSelection:function(){var a;this.range&&(window.getSelection?(a=window.getSelection(),a.removeAllRanges(),a.addRange(this.range)):this.range.select(),this.button.focus())},_documentClick:{mousedown:function(b){this.isOpen&&(a(b.target).closest(".ui-selectmenu-menu, #"+a.ui.escapeSelector(this.ids.button)).length||this.close(b))}},_buttonEvents:{mousedown:function(){var a;window.getSelection?(a=window.getSelection(),a.rangeCount&&(this.range=a.getRangeAt(0))):this.range=document.selection.createRange()},click:function(a){this._setSelection(),this._toggle(a)},keydown:function(b){var c=!0;switch(b.keyCode){case a.ui.keyCode.TAB:case a.ui.keyCode.ESCAPE:this.close(b),c=!1;break;case a.ui.keyCode.ENTER:this.isOpen&&this._selectFocusedItem(b);break;case a.ui.keyCode.UP:b.altKey?this._toggle(b):this._move("prev",b);break;case a.ui.keyCode.DOWN:b.altKey?this._toggle(b):this._move("next",b);break;case a.ui.keyCode.SPACE:this.isOpen?this._selectFocusedItem(b):this._toggle(b);break;case a.ui.keyCode.LEFT:this._move("prev",b);break;case a.ui.keyCode.RIGHT:this._move("next",b);break;case a.ui.keyCode.HOME:case a.ui.keyCode.PAGE_UP:this._move("first",b);break;case a.ui.keyCode.END:case a.ui.keyCode.PAGE_DOWN:this._move("last",b);break;default:this.menu.trigger(b),c=!1}c&&b.preventDefault()}},_selectFocusedItem:function(a){var b=this.menuItems.eq(this.focusIndex).parent("li");b.hasClass("ui-state-disabled")||this._select(b.data("ui-selectmenu-item"),a)},_select:function(a,b){var c=this.element[0].selectedIndex;this.element[0].selectedIndex=a.index,this.buttonItem.replaceWith(this.buttonItem=this._renderButtonItem(a)),this._setAria(a),this._trigger("select",b,{item:a}),a.index!==c&&this._trigger("change",b,{item:a}),this.close(b)},_setAria:function(a){var b=this.menuItems.eq(a.index).attr("id");this.button.attr({"aria-labelledby":b,"aria-activedescendant":b}),this.menu.attr("aria-activedescendant",b)},_setOption:function(a,b){if("icons"===a){var c=this.button.find("span.ui-icon");this._removeClass(c,null,this.options.icons.button)._addClass(c,null,b.button)}this._super(a,b),"appendTo"===a&&this.menuWrap.appendTo(this._appendTo()),"width"===a&&this._resizeButton()},_setOptionDisabled:function(a){this._super(a),this.menuInstance.option("disabled",a),this.button.attr("aria-disabled",a),this._toggleClass(this.button,null,"ui-state-disabled",a),this.element.prop("disabled",a),a?(this.button.attr("tabindex",-1),this.close()):this.button.attr("tabindex",0)},_appendTo:function(){var b=this.options.appendTo;return b&&(b=b.jquery||b.nodeType?a(b):this.document.find(b).eq(0)),b&&b[0]||(b=this.element.closest(".ui-front, dialog")),b.length||(b=this.document[0].body),b},_toggleAttr:function(){this.button.attr("aria-expanded",this.isOpen),this._removeClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"closed":"open"))._addClass(this.button,"ui-selectmenu-button-"+(this.isOpen?"open":"closed"))._toggleClass(this.menuWrap,"ui-selectmenu-open",null,this.isOpen),this.menu.attr("aria-hidden",!this.isOpen)},_resizeButton:function(){var a=this.options.width;return a===!1?void this.button.css("width",""):(null===a&&(a=this.element.show().outerWidth(),this.element.hide()),void this.button.outerWidth(a))},_resizeMenu:function(){this.menu.outerWidth(Math.max(this.button.outerWidth(),this.menu.width("").outerWidth()+1))},_getCreateOptions:function(){var a=this._super();return a.disabled=this.element.prop("disabled"),a},_parseOptions:function(b){var c=this,d=[];b.each(function(b,e){d.push(c._parseOption(a(e),b))}),this.items=d},_parseOption:function(a,b){var c=a.parent("optgroup");return{element:a,index:b,value:a.val(),label:a.text(),optgroup:c.attr("label")||"",disabled:c.prop("disabled")||a.prop("disabled")}},_destroy:function(){this._unbindFormResetHandler(),this.menuWrap.remove(),this.button.remove(),this.element.show(),this.element.removeUniqueId(),this.labels.attr("for",this.ids.element)}}]);var f="ui-effects-",g="ui-effects-style",h="ui-effects-animated",i=a;a.effects={effect:{}},function(a,b){function c(a,b,c){var d=l[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:a>d.max?d.max:a)}function d(c){var d=j(),e=d._rgba=[];return c=c.toLowerCase(),o(i,function(a,f){var g,h=f.re.exec(c),i=h&&f.parse(h),j=f.space||"rgba";return i?(g=d[j](i),d[k[j].cache]=g[k[j].cache],e=d._rgba=g._rgba,!1):b}),e.length?("0,0,0,0"===e.join()&&a.extend(e,f.transparent),d):f[c]}function e(a,b,c){return c=(c+1)%1,1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var f,g="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",h=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],j=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},l={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},m=j.support={},n=a("<p>")[0],o=a.each;n.style.cssText="background-color:rgba(1,1,1,.5)",m.rgba=n.style.backgroundColor.indexOf("rgba")>-1,o(k,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),j.fn=a.extend(j.prototype,{parse:function(e,g,h,i){if(e===b)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=a(e).css(g),g=b);var l=this,m=a.type(e),n=this._rgba=[];return g!==b&&(e=[e,g,h,i],m="array"),"string"===m?this.parse(d(e)||f._default):"array"===m?(o(k.rgba.props,function(a,b){n[b.idx]=c(e[b.idx],b)}),this):"object"===m?(e instanceof j?o(k,function(a,b){e[b.cache]&&(l[b.cache]=e[b.cache].slice())}):o(k,function(b,d){var f=d.cache;o(d.props,function(a,b){if(!l[f]&&d.to){if("alpha"===a||null==e[a])return;l[f]=d.to(l._rgba)}l[f][b.idx]=c(e[a],b,!0)}),l[f]&&0>a.inArray(null,l[f].slice(0,3))&&(l[f][3]=1,d.from&&(l._rgba=d.from(l[f])))}),this):b},is:function(a){var c=j(a),d=!0,e=this;return o(k,function(a,f){var g,h=c[f.cache];return h&&(g=e[f.cache]||f.to&&f.to(e._rgba)||[],o(f.props,function(a,c){return null!=h[c.idx]?d=h[c.idx]===g[c.idx]:b})),d}),d},_space:function(){var a=[],b=this;return o(k,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var d=j(a),e=d._space(),f=k[e],g=0===this.alpha()?j("transparent"):this,h=g[f.cache]||f.to(g._rgba),i=h.slice();return d=d[f.cache],o(f.props,function(a,e){var f=e.idx,g=h[f],j=d[f],k=l[e.type]||{};null!==j&&(null===g?i[f]=j:(k.mod&&(j-g>k.mod/2?g+=k.mod:g-j>k.mod/2&&(g-=k.mod)),i[f]=c((j-g)*b+g,e)))}),this[e](i)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=j(b)._rgba;return j(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),j.fn.parse.prototype=j.fn,k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b,c,d=a[0]/255,e=a[1]/255,f=a[2]/255,g=a[3],h=Math.max(d,e,f),i=Math.min(d,e,f),j=h-i,k=h+i,l=.5*k;return b=i===h?0:d===h?60*(e-f)/j+360:e===h?60*(f-d)/j+120:60*(d-e)/j+240,c=0===j?0:.5>=l?j/k:j/(2-k),[Math.round(b)%360,c,l,null==g?1:g]},k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],f=a[3],g=.5>=d?d*(1+c):d+c-d*c,h=2*d-g;return[Math.round(255*e(h,g,b+1/3)),Math.round(255*e(h,g,b)),Math.round(255*e(h,g,b-1/3)),f]},o(k,function(d,e){var f=e.props,g=e.cache,i=e.to,k=e.from;j.fn[d]=function(d){if(i&&!this[g]&&(this[g]=i(this._rgba)),d===b)return this[g].slice();var e,h=a.type(d),l="array"===h||"object"===h?d:arguments,m=this[g].slice();return o(f,function(a,b){var d=l["object"===h?a:b.idx];null==d&&(d=m[b.idx]),m[b.idx]=c(d,b)}),k?(e=j(k(m)),e[g]=m,e):j(m)},o(f,function(b,c){j.fn[b]||(j.fn[b]=function(e){var f,g=a.type(e),i="alpha"===b?this._hsla?"hsla":"rgba":d,j=this[i](),k=j[c.idx];return"undefined"===g?k:("function"===g&&(e=e.call(this,k),g=a.type(e)),null==e&&c.empty?this:("string"===g&&(f=h.exec(e),f&&(e=k+parseFloat(f[2])*("+"===f[1]?1:-1))),j[c.idx]=e,this[i](j)))})})}),j.hook=function(b){var c=b.split(" ");o(c,function(b,c){a.cssHooks[c]={set:function(b,e){var f,g,h="";if("transparent"!==e&&("string"!==a.type(e)||(f=d(e)))){if(e=j(f||e),!m.rgba&&1!==e._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(a){}e=e.blend(h&&"transparent"!==h?h:"_default")}e=e.toRgbaString()}try{b.style[c]=e}catch(a){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=j(b.elem,c),b.end=j(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},j.hook(g),a.cssHooks.borderColor={expand:function(a){var b={};return o(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},f=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(i),function(){function b(b){var c,d,e=b.ownerDocument.defaultView?b.ownerDocument.defaultView.getComputedStyle(b,null):b.currentStyle,f={};if(e&&e.length&&e[0]&&e[e[0]])for(d=e.length;d--;)c=e[d],"string"==typeof e[c]&&(f[a.camelCase(c)]=e[c]);else for(c in e)"string"==typeof e[c]&&(f[c]=e[c]);return f}function c(b,c){var d,f,g={};for(d in c)f=c[d],b[d]!==f&&(e[d]||(a.fx.step[d]||!isNaN(parseFloat(f)))&&(g[d]=f));return g}var d=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=function(a){("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)&&(i.style(a.elem,c,a.end),a.setAttr=!0)}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a.effects.animateClass=function(e,f,g,h){var i=a.speed(f,g,h);return this.queue(function(){var f,g=a(this),h=g.attr("class")||"",j=i.children?g.find("*").addBack():g;j=j.map(function(){var c=a(this);return{el:c,start:b(this)}}),f=function(){a.each(d,function(a,b){e[b]&&g[b+"Class"](e[b])})},f(),j=j.map(function(){return this.end=b(this.el[0]),this.diff=c(this.start,this.end),this}),g.attr("class",h),j=j.map(function(){var b=this,c=a.Deferred(),d=a.extend({},i,{queue:!1,complete:function(){c.resolve(b)}});return this.el.animate(this.diff,d),c.promise()}),a.when.apply(a,j.get()).done(function(){f(),a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})}),i.complete.call(g[0])})})},a.fn.extend({addClass:function(b){return function(c,d,e,f){return d?a.effects.animateClass.call(this,{add:c},d,e,f):b.apply(this,arguments)}}(a.fn.addClass),removeClass:function(b){return function(c,d,e,f){return arguments.length>1?a.effects.animateClass.call(this,{remove:c},d,e,f):b.apply(this,arguments)}}(a.fn.removeClass),toggleClass:function(b){return function(c,d,e,f,g){return"boolean"==typeof d||void 0===d?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,g):b.apply(this,arguments):a.effects.animateClass.call(this,{toggle:c},d,e,f)}}(a.fn.toggleClass),switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,{add:c,remove:b},d,e,f)}})}(),function(){function b(b,c,d,e){return a.isPlainObject(b)&&(c=b,b=b.effect),b={effect:b},null==c&&(c={}),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c&&a.extend(b,c),d=d||c.duration,b.duration=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,b.complete=e||c.complete,b}function c(b){return!(b&&"number"!=typeof b&&!a.fx.speeds[b])||("string"==typeof b&&!a.effects.effect[b]||(!!a.isFunction(b)||"object"==typeof b&&!b.effect))}function d(a,b){var c=b.outerWidth(),d=b.outerHeight(),e=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,f=e.exec(a)||["",0,c,d,0];return{top:parseFloat(f[1])||0,right:"auto"===f[2]?c:parseFloat(f[2]),bottom:"auto"===f[3]?d:parseFloat(f[3]),left:parseFloat(f[4])||0}}a.expr&&a.expr.filters&&a.expr.filters.animated&&(a.expr.filters.animated=function(b){return function(c){return!!a(c).data(h)||b(c)}}(a.expr.filters.animated)),a.uiBackCompat!==!1&&a.extend(a.effects,{save:function(a,b){for(var c=0,d=b.length;d>c;c++)null!==b[c]&&a.data(f+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c,d=0,e=b.length;e>d;d++)null!==b[d]&&(c=a.data(f+b[d]),a.css(b[d],c))},setMode:function(a,b){return"toggle"===b&&(b=a.is(":hidden")?"show":"hide"),b},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),float:b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},f=document.activeElement;try{f.id}catch(a){f=document.body}return b.wrap(d),(b[0]===f||a.contains(b[0],f))&&a(f).trigger("focus"),d=b.parent(),"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),b.css(e),d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;return b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).trigger("focus")),b}}),a.extend(a.effects,{version:"1.12.1",define:function(b,c,d){return d||(d=c,c="effect"),a.effects.effect[b]=d,a.effects.effect[b].mode=c,d},scaledDimensions:function(a,b,c){if(0===b)return{height:0,width:0,outerHeight:0,outerWidth:0};var d="horizontal"!==c?(b||100)/100:1,e="vertical"!==c?(b||100)/100:1;return{height:a.height()*e,width:a.width()*d,outerHeight:a.outerHeight()*e,outerWidth:a.outerWidth()*d}},clipToBox:function(a){return{width:a.clip.right-a.clip.left,height:a.clip.bottom-a.clip.top,left:a.clip.left,top:a.clip.top}},unshift:function(a,b,c){var d=a.queue();b>1&&d.splice.apply(d,[1,0].concat(d.splice(b,c))),a.dequeue()},saveStyle:function(a){a.data(g,a[0].style.cssText)},restoreStyle:function(a){a[0].style.cssText=a.data(g)||"",a.removeData(g)},mode:function(a,b){var c=a.is(":hidden");return"toggle"===b&&(b=c?"show":"hide"),(c?"hide"===b:"show"===b)&&(b="none"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createPlaceholder:function(b){var c,d=b.css("position"),e=b.position();return b.css({marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()),/^(static|relative)/.test(d)&&(d="absolute",c=a("<"+b[0].nodeName+">").insertAfter(b).css({display:/^(inline|ruby)/.test(b.css("display"))?"inline-block":"block",
visibility:"hidden",marginTop:b.css("marginTop"),marginBottom:b.css("marginBottom"),marginLeft:b.css("marginLeft"),marginRight:b.css("marginRight"),float:b.css("float")}).outerWidth(b.outerWidth()).outerHeight(b.outerHeight()).addClass("ui-effects-placeholder"),b.data(f+"placeholder",c)),b.css({position:d,left:e.left,top:e.top}),c},removePlaceholder:function(a){var b=f+"placeholder",c=a.data(b);c&&(c.remove(),a.removeData(b))},cleanUp:function(b){a.effects.restoreStyle(b),a.effects.removePlaceholder(b)},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(){function c(b){function c(){i.removeData(h),a.effects.cleanUp(i),"hide"===d.mode&&i.hide(),g()}function g(){a.isFunction(j)&&j.call(i[0]),a.isFunction(b)&&b()}var i=a(this);d.mode=l.shift(),a.uiBackCompat===!1||f?"none"===d.mode?(i[k](),g()):e.call(i[0],d,c):(i.is(":hidden")?"hide"===k:"show"===k)?(i[k](),g()):e.call(i[0],d,g)}var d=b.apply(this,arguments),e=a.effects.effect[d.effect],f=e.mode,g=d.queue,i=g||"fx",j=d.complete,k=d.mode,l=[],m=function(b){var c=a(this),d=a.effects.mode(c,k)||f;c.data(h,!0),l.push(d),f&&("show"===d||d===f&&"hide"===d)&&c.show(),f&&"none"===d||a.effects.saveStyle(c),a.isFunction(b)&&b()};return a.fx.off||!e?k?this[k](d.duration,j):this.each(function(){j&&j.call(this)}):g===!1?this.each(m).each(c):this.queue(i,m).queue(i,c)},show:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}}(a.fn.show),hide:function(a){return function(d){if(c(d))return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}}(a.fn.hide),toggle:function(a){return function(d){if(c(d)||"boolean"==typeof d)return a.apply(this,arguments);var e=b.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}}(a.fn.toggle),cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d},cssClip:function(a){return a?this.css("clip","rect("+a.top+"px "+a.right+"px "+a.bottom+"px "+a.left+"px)"):d(this.css("clip"),this)},transfer:function(b,c){var d=a(this),e=a(b.to),f="fixed"===e.css("position"),g=a("body"),h=f?g.scrollTop():0,i=f?g.scrollLeft():0,j=e.offset(),k={top:j.top-h,left:j.left-i,height:e.innerHeight(),width:e.innerWidth()},l=d.offset(),m=a("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(b.className).css({top:l.top-h,left:l.left-i,height:d.innerHeight(),width:d.innerWidth(),position:f?"fixed":"absolute"}).animate(k,b.duration,b.easing,function(){m.remove(),a.isFunction(c)&&c()})}}),a.fx.step.clip=function(b){b.clipInit||(b.start=a(b.elem).cssClip(),"string"==typeof b.end&&(b.end=d(b.end,b.elem)),b.clipInit=!0),a(b.elem).cssClip({top:b.pos*(b.end.top-b.start.top)+b.start.top,right:b.pos*(b.end.right-b.start.right)+b.start.right,bottom:b.pos*(b.end.bottom-b.start.bottom)+b.start.bottom,left:b.pos*(b.end.left-b.start.left)+b.start.left})}}(),function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,c){b[c]=function(b){return Math.pow(b,a+2)}}),a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;((b=Math.pow(2,--c))-1)/11>a;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),a.each(b,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})}(),a.effects,a.effects.define("fade","toggle",function(b,c){var d="show"===b.mode;a(this).css("opacity",d?0:1).animate({opacity:d?1:0},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}),a.effects.define("highlight","show",function(b,c){var d=a(this),e={backgroundColor:d.css("backgroundColor")};"hide"===b.mode&&(e.opacity=0),a.effects.saveStyle(d),d.css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(e,{queue:!1,duration:b.duration,easing:b.easing,complete:c})})})}(this),d()}),$__System.registerDynamic("3c0",["49c"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit,f=d._mouseDestroy;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),e.call(b)},d._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),f.call(b)}}}(jQuery)}(this),d()}),$__System.registerDynamic("49d",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a){var b,c={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},d='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',e=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent"],f=a(d).data("autosize",!0)[0];f.style.lineHeight="99px","99px"===a(f).css("lineHeight")&&e.push("lineHeight"),f.style.lineHeight="",a.fn.autosize=function(d){return this.length?(d=a.extend({},c,d||{}),f.parentNode!==document.body&&a(document.body).append(f),this.each(function(){function c(){var b,c=!!window.getComputedStyle&&window.getComputedStyle(m,null);c?(b=m.getBoundingClientRect().width,0!==b&&"number"==typeof b||(b=parseInt(c.width,10)),a.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(a,d){b-=parseInt(c[d],10)})):b=n.width(),f.style.width=Math.max(b,0)+"px"}function g(){var g={};if(b=m,f.className=d.className,f.id=d.id,j=parseInt(n.css("maxHeight"),10),a.each(e,function(a,b){g[b]=n.css(b)}),a(f).css(g).attr("wrap",n.attr("wrap")),c(),window.chrome){var h=m.style.width;m.style.width="0px";m.offsetWidth;m.style.width=h}}function h(){var a,e;b!==m?g():c(),!m.value&&d.placeholder?f.value=(n.attr("placeholder")||"")+d.append:f.value=m.value+d.append,f.style.overflowY=m.style.overflowY,e=parseInt(m.style.height,10),f.scrollTop=0,f.scrollTop=9e4,a=f.scrollTop,j&&a>j?(m.style.overflowY="scroll",a=j):(m.style.overflowY="hidden",a<k&&(a=k)),a+=o,e!==a&&(m.style.height=a+"px",p&&d.callback.call(m,m))}function i(){clearTimeout(l),l=setTimeout(function(){var a=n.width();a!==r&&(r=a,h())},parseInt(d.resizeDelay,10))}var j,k,l,m=this,n=a(m),o=0,p=a.isFunction(d.callback),q={height:m.style.height,overflow:m.style.overflow,overflowY:m.style.overflowY,wordWrap:m.style.wordWrap,resize:m.style.resize},r=n.width(),s=n.css("resize");n.data("autosize")||(n.data("autosize",!0),"border-box"!==n.css("box-sizing")&&"border-box"!==n.css("-moz-box-sizing")&&"border-box"!==n.css("-webkit-box-sizing")||(o=n.outerHeight()-n.height()),k=Math.max(parseInt(n.css("minHeight"),10)-o||0,n.height()),n.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===s?n.css("resize","none"):"both"===s&&n.css("resize","horizontal"),"onpropertychange"in m?"oninput"in m?n.on("input.autosize keyup.autosize",h):n.on("propertychange.autosize",function(){"value"===event.propertyName&&h()}):n.on("input.autosize",h),d.resizeDelay!==!1&&a(window).on("resize.autosize",i),n.on("autosize.resize",h),n.on("autosize.resizeIncludeStyle",function(){b=null,h()}),n.on("autosize.destroy",function(){b=null,clearTimeout(l),a(window).off("resize",i),n.off("autosize").off(".autosize").css(q).removeData("autosize")}),h())})):this}}(window.jQuery||window.$)}(this),d()}),$__System.registerDynamic("49e",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b("object"==typeof exports?require("jquery"):a.jQuery?a.jQuery:a.Zepto)}(this,function(a,b){a.fn.jPlayer=function(c){var d="jPlayer",e="string"==typeof c,f=Array.prototype.slice.call(arguments,1),g=this;return c=!e&&f.length?a.extend.apply(null,[!0,c].concat(f)):c,e&&"_"===c.charAt(0)?g:(e?this.each(function(){var e=a(this).data(d),h=e&&a.isFunction(e[c])?e[c].apply(e,f):e;if(h!==e&&h!==b)return g=h,!1}):this.each(function(){var b=a(this).data(d);b?b.option(c||{}):a(this).data(d,new a.jPlayer(c,this))}),g)},a.jPlayer=function(b,c){if(arguments.length){this.element=a(c),this.options=a.extend(!0,{},this.options,b);var d=this;this.element.bind("remove.jPlayer",function(){d.destroy()}),this._init()}},"function"!=typeof a.fn.stop&&(a.fn.stop=function(){}),a.jPlayer.emulateMethods="load play pause",a.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate",a.jPlayer.emulateOptions="muted volume",a.jPlayer.reservedEvent="ready flashreset resize repeat error warning",a.jPlayer.event={},a.each(["ready","setmedia","flashreset","resize","repeat","click","error","warning","loadstart","progress","suspend","abort","emptied","stalled","play","pause","loadedmetadata","loadeddata","waiting","playing","canplay","canplaythrough","seeking","seeked","timeupdate","ended","ratechange","durationchange","volumechange"],function(){a.jPlayer.event[this]="jPlayer_"+this}),a.jPlayer.htmlEvent=["loadstart","abort","emptied","stalled","loadedmetadata","canplay","canplaythrough"],a.jPlayer.pause=function(){a.jPlayer.prototype.destroyRemoved(),a.each(a.jPlayer.prototype.instances,function(a,b){b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})},a.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var c=function(){this.init()};c.prototype={init:function(){this.options={timeFormat:a.jPlayer.timeFormat}},time:function(a){a=a&&"number"==typeof a?a:0;var b=new Date(1e3*a),c=b.getUTCHours(),d=this.options.timeFormat.showHour?b.getUTCMinutes():b.getUTCMinutes()+60*c,e=this.options.timeFormat.showMin?b.getUTCSeconds():b.getUTCSeconds()+60*d,f=this.options.timeFormat.padHour&&c<10?"0"+c:c,g=this.options.timeFormat.padMin&&d<10?"0"+d:d,h=this.options.timeFormat.padSec&&e<10?"0"+e:e,i="";return i+=this.options.timeFormat.showHour?f+this.options.timeFormat.sepHour:"",i+=this.options.timeFormat.showMin?g+this.options.timeFormat.sepMin:"",i+=this.options.timeFormat.showSec?h+this.options.timeFormat.sepSec:""}};var d=new c;a.jPlayer.convertTime=function(a){return d.time(a)},a.jPlayer.uaBrowser=function(a){var b=a.toLowerCase(),c=/(webkit)[ \/]([\w.]+)/,d=/(opera)(?:.*version)?[ \/]([\w.]+)/,e=/(msie) ([\w.]+)/,f=/(mozilla)(?:.*? rv:([\w.]+))?/,g=c.exec(b)||d.exec(b)||e.exec(b)||b.indexOf("compatible")<0&&f.exec(b)||[];return{browser:g[1]||"",version:g[2]||"0"}},a.jPlayer.uaPlatform=function(a){var b=a.toLowerCase(),c=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/,d=/(ipad|playbook)/,e=/(android)/,f=/(mobile)/,g=c.exec(b)||[],h=d.exec(b)||!f.exec(b)&&e.exec(b)||[];return g[1]&&(g[1]=g[1].replace(/\s/g,"_")),{platform:g[1]||"",tablet:h[1]||""}},a.jPlayer.browser={},a.jPlayer.platform={};var e=a.jPlayer.uaBrowser(navigator.userAgent);e.browser&&(a.jPlayer.browser[e.browser]=!0,a.jPlayer.browser.version=e.version);var f=a.jPlayer.uaPlatform(navigator.userAgent);f.platform&&(a.jPlayer.platform[f.platform]=!0,a.jPlayer.platform.mobile=!f.tablet,a.jPlayer.platform.tablet=!!f.tablet),a.jPlayer.getDocMode=function(){var b;return a.jPlayer.browser.msie&&(document.documentMode?b=document.documentMode:(b=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(b=7))),b},a.jPlayer.browser.documentMode=a.jPlayer.getDocMode(),a.jPlayer.nativeFeatures={init:function(){var a,b,c,d=document,e=d.createElement("video"),f={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},g=["w3c","moz","webkit","webkitVideo","ms"];for(this.fullscreen=a={support:{w3c:!!d[f.w3c[0]],moz:!!d[f.moz[0]],webkit:"function"==typeof d[f.webkit[3]],webkitVideo:"function"==typeof e[f.webkitVideo[2]],ms:"function"==typeof e[f.ms[2]]},used:{}},b=0,c=g.length;b<c;b++){var h=g[b];if(a.support[h]){a.spec=h,a.used[h]=!0;break}}if(a.spec){var i=f[a.spec];a.api={fullscreenEnabled:!0,fullscreenElement:function(a){return a=a?a:d,a[i[1]]},requestFullscreen:function(a){return a[i[2]]()},exitFullscreen:function(a){return a=a?a:d,a[i[3]]()}},a.event={fullscreenchange:i[4],fullscreenerror:i[5]}}else a.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},a.event={}}},a.jPlayer.nativeFeatures.init(),a.jPlayer.focus=null,a.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var g=function(b){var c,d=a.jPlayer.focus;d&&(a.each(a.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(a,d){if(b.target.nodeName.toUpperCase()===d.toUpperCase())return c=!0,!1}),c||a.each(d.options.keyBindings,function(c,e){if(e&&a.isFunction(e.fn)&&("number"==typeof e.key&&b.which===e.key||"string"==typeof e.key&&b.key===e.key))return b.preventDefault(),e.fn(d),!1}))};a.jPlayer.keys=function(b){var c="keydown.jPlayer";a(document.documentElement).unbind(c),b&&a(document.documentElement).bind(c,g)},a.jPlayer.keys(!0),a.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,hold:1e3},loop:!1,repeat:function(b){b.jPlayer.options.loop?a(this).unbind(".jPlayerRepeat").bind(a.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){a(this).jPlayer("play")}):a(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:70,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:77,fn:function(a){a._muted(!a.options.muted)}},volumeUp:{key:190,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:188,fn:function(a){a.volume(a.options.volume-.1)}},loop:{key:76,fn:function(a){a._loop(!a.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"100%",height:"100%",cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var c=this;if(this.element.empty(),this.status=a.extend({},this.status),this.internal=a.extend({},this.internal),this.options.timeFormat=a.extend({},a.jPlayer.timeFormat,this.options.timeFormat),this.internal.cmdsIgnored=a.jPlayer.platform.ipad||a.jPlayer.platform.iphone||a.jPlayer.platform.ipod,this.internal.domNode=this.element.get(0),this.options.keyEnabled&&!a.jPlayer.focus&&(a.jPlayer.focus=this),this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN},a.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto"),this.formats=[],this.solutions=[],this.require={},this.htmlElement={},this.html={},this.html.audio={},this.html.video={},this.aurora={},this.aurora.formats=[],this.aurora.properties=[],this.flash={},this.css={},this.css.cs={},this.css.jq={},this.ancestorJq=[],this.options.volume=this._limitValue(this.options.volume,0,1),a.each(this.options.supplied.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.format[e]){var f=!1;a.each(c.formats,function(a,b){if(e===b)return f=!0,!1}),f||c.formats.push(e)}}),a.each(this.options.solution.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.solution[e]){var f=!1;a.each(c.solutions,function(a,b){if(e===b)return f=!0,!1}),f||c.solutions.push(e)}}),a.each(this.options.auroraFormats.toLowerCase().split(","),function(b,d){var e=d.replace(/^\s+|\s+$/g,"");if(c.format[e]){var f=!1;a.each(c.aurora.formats,function(a,b){if(e===b)return f=!0,!1}),f||c.aurora.formats.push(e)}}),this.internal.instance="jp_"+this.count,this.instances[this.internal.instance]=this.element,this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count),this.internal.self=a.extend({},{id:this.element.attr("id"),jq:this.element}),this.internal.audio=a.extend({},{id:this.options.idPrefix+"_audio_"+this.count,jq:b}),this.internal.video=a.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:b}),this.internal.flash=a.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:b,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")}),this.internal.poster=a.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:b}),a.each(a.jPlayer.event,function(a,d){c.options[a]!==b&&(c.element.bind(d+".jPlayer",c.options[a]),c.options[a]=b)}),this.require.audio=!1,this.require.video=!1,a.each(this.formats,function(a,b){c.require[c.format[b].media]=!0}),this.require.video?this.options=a.extend(!0,{},this.optionsVideo,this.options):this.options=a.extend(!0,{},this.optionsAudio,this.options),this._setSize(),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this.status.noVolume=this._uaBlocklist(this.options.noVolume),a.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners(),this._restrictNativeVideoControls(),this.htmlElement.poster=document.createElement("img"),this.htmlElement.poster.id=this.internal.poster.id,this.htmlElement.poster.onload=function(){c.status.video&&!c.status.waitForPlay||c.internal.poster.jq.show()},this.element.append(this.htmlElement.poster),this.internal.poster.jq=a("#"+this.internal.poster.id),this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),this.internal.poster.jq.hide(),this.internal.poster.jq.bind("click.jPlayer",function(){c._trigger(a.jPlayer.event.click)}),this.html.audio.available=!1,this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio)),this.html.video.available=!1,this.require.video&&(this.htmlElement.video=document.createElement("video"),this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video)),this.flash.available=this._checkForFlash(10.1),this.html.canPlay={},this.aurora.canPlay={},this.flash.canPlay={},a.each(this.formats,function(b,d){c.html.canPlay[d]=c.html[c.format[d].media].available&&""!==c.htmlElement[c.format[d].media].canPlayType(c.format[d].codec),c.aurora.canPlay[d]=a.inArray(d,c.aurora.formats)>-1,c.flash.canPlay[d]=c.format[d].flashCanPlay&&c.flash.available}),this.html.desired=!1,this.aurora.desired=!1,this.flash.desired=!1,a.each(this.solutions,function(b,d){if(0===b)c[d].desired=!0;else{var e=!1,f=!1;a.each(c.formats,function(a,b){c[c.solutions[0]].canPlay[b]&&("video"===c.format[b].media?f=!0:e=!0)}),c[d].desired=c.require.audio&&!e||c.require.video&&!f}}),this.html.support={},this.aurora.support={},this.flash.support={},a.each(this.formats,function(a,b){c.html.support[b]=c.html.canPlay[b]&&c.html.desired,c.aurora.support[b]=c.aurora.canPlay[b]&&c.aurora.desired,c.flash.support[b]=c.flash.canPlay[b]&&c.flash.desired}),this.html.used=!1,this.aurora.used=!1,this.flash.used=!1,a.each(this.solutions,function(b,d){a.each(c.formats,function(a,b){if(c[d].support[b])return c[d].used=!0,!1})}),this._resetActive(),this._resetGate(),this._cssSelectorAncestor(this.options.cssSelectorAncestor),this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:a.jPlayer.error.NO_SOLUTION,context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SOLUTION,hint:a.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show()),this.flash.used){var d,e="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(a.jPlayer.browser.msie&&(Number(a.jPlayer.browser.version)<9||a.jPlayer.browser.documentMode<9)){var f='<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>',g=['<param name="movie" value="'+this.internal.flash.swf+'" />','<param name="FlashVars" value="'+e+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];d=document.createElement(f);for(var h=0;h<g.length;h++)d.appendChild(document.createElement(g[h]))}else{var i=function(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)};d=document.createElement("object"),d.setAttribute("id",this.internal.flash.id),d.setAttribute("name",this.internal.flash.id),d.setAttribute("data",this.internal.flash.swf),d.setAttribute("type","application/x-shockwave-flash"),d.setAttribute("width","1"),d.setAttribute("height","1"),d.setAttribute("tabindex","-1"),i(d,"flashvars",e),i(d,"allowscriptaccess","always"),i(d,"bgcolor",this.options.backgroundColor),i(d,"wmode",this.options.wmode)}this.element.append(d),this.internal.flash.jq=a(d)}this.html.used&&!this.flash.used?this.status.playbackRateEnabled=this._testPlaybackRate("audio"):this.status.playbackRateEnabled=!1,this._updatePlaybackRate(),this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=a("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),this.element.append(this.htmlElement.video),this.internal.video.jq=a("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(){c._trigger(a.jPlayer.event.click)}))),this.aurora.used,this.options.emulateHtml&&this._emulateHtmlBridge(),!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){c.internal.ready=!0,c.version.flash="n/a",c._trigger(a.jPlayer.event.repeat),c._trigger(a.jPlayer.event.ready)},100),this._updateNativeVideoControls(),this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),a.jPlayer.prototype.count++},destroy:function(){this.clearMedia(),this._removeUiClass(),this.css.jq.currentTime.length&&this.css.jq.currentTime.text(""),this.css.jq.duration.length&&this.css.jq.duration.text(""),a.each(this.css.jq,function(a,b){b.length&&b.unbind(".jPlayer")}),this.internal.poster.jq.unbind(".jPlayer"),this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer"),this._fullscreenRemoveEventListeners(),this===a.jPlayer.focus&&(a.jPlayer.focus=null),this.options.emulateHtml&&this._destroyHtmlBridge(),this.element.removeData("jPlayer"),this.element.unbind(".jPlayer"),this.element.empty(),delete this.instances[this.internal.instance]},destroyRemoved:function(){var b=this;a.each(this.instances,function(a,c){b.element!==c&&(c.data("jPlayer")||(c.jPlayer("destroy"),delete b.instances[a]))})},enable:function(){},disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(a){return!1}},_testPlaybackRate:function(a){var b,c=.5;a="string"==typeof a?a:"audio",b=document.createElement(a);try{return"playbackRate"in b&&(b.playbackRate=c,b.playbackRate===c)}catch(a){return!1}},_uaBlocklist:function(b){var c=navigator.userAgent.toLowerCase(),d=!1;return a.each(b,function(a,b){if(b&&b.test(c))return d=!0,!1}),d},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",height:"0px"})))},_addHtmlEventListeners:function(b,c){var d=this;b.preload=this.options.preload,b.muted=this.options.muted,b.volume=this.options.volume,this.status.playbackRateEnabled&&(b.defaultPlaybackRate=this.options.defaultPlaybackRate,b.playbackRate=this.options.playbackRate),b.addEventListener("progress",function(){c.gate&&(d.internal.cmdsIgnored&&this.readyState>0&&(d.internal.cmdsIgnored=!1),d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.progress))},!1),b.addEventListener("loadeddata",function(){c.gate&&(d.androidFix.setMedia=!1,d.androidFix.play&&(d.androidFix.play=!1,d.play(d.androidFix.time)),d.androidFix.pause&&(d.androidFix.pause=!1,d.pause(d.androidFix.time)),d._trigger(a.jPlayer.event.loadeddata))},!1),b.addEventListener("timeupdate",function(){c.gate&&(d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.timeupdate))},!1),b.addEventListener("durationchange",function(){c.gate&&(d._getHtmlStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.durationchange))},!1),b.addEventListener("play",function(){c.gate&&(d._updateButtons(!0),d._html_checkWaitForPlay(),d._trigger(a.jPlayer.event.play))},!1),b.addEventListener("playing",function(){c.gate&&(d._updateButtons(!0),d._seeked(),d._trigger(a.jPlayer.event.playing))},!1),b.addEventListener("pause",function(){c.gate&&(d._updateButtons(!1),d._trigger(a.jPlayer.event.pause))},!1),b.addEventListener("waiting",function(){c.gate&&(d._seeking(),d._trigger(a.jPlayer.event.waiting))},!1),b.addEventListener("seeking",function(){c.gate&&(d._seeking(),d._trigger(a.jPlayer.event.seeking))},!1),b.addEventListener("seeked",function(){c.gate&&(d._seeked(),d._trigger(a.jPlayer.event.seeked))},!1),b.addEventListener("volumechange",function(){c.gate&&(d.options.volume=b.volume,d.options.muted=b.muted,d._updateMute(),d._updateVolume(),d._trigger(a.jPlayer.event.volumechange))},!1),b.addEventListener("ratechange",function(){c.gate&&(d.options.defaultPlaybackRate=b.defaultPlaybackRate,d.options.playbackRate=b.playbackRate,d._updatePlaybackRate(),d._trigger(a.jPlayer.event.ratechange))},!1),b.addEventListener("suspend",function(){c.gate&&(d._seeked(),d._trigger(a.jPlayer.event.suspend))},!1),b.addEventListener("ended",function(){c.gate&&(a.jPlayer.browser.webkit||(d.htmlElement.media.currentTime=0),d.htmlElement.media.pause(),d._updateButtons(!1),d._getHtmlStatus(b,!0),d._updateInterface(),d._trigger(a.jPlayer.event.ended));
},!1),b.addEventListener("error",function(){c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(clearTimeout(d.internal.htmlDlyCmdId),d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:a.jPlayer.error.URL,context:d.status.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL})))},!1),a.each(a.jPlayer.htmlEvent,function(e,f){b.addEventListener(this,function(){c.gate&&d._trigger(a.jPlayer.event[f])},!1)})},_addAuroraEventListeners:function(b,c){var d=this;b.volume=100*this.options.volume,b.on("progress",function(){c.gate&&(d.internal.cmdsIgnored&&this.readyState>0&&(d.internal.cmdsIgnored=!1),d._getAuroraStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.progress),b.duration>0&&d._trigger(a.jPlayer.event.timeupdate))},!1),b.on("ready",function(){c.gate&&d._trigger(a.jPlayer.event.loadeddata)},!1),b.on("duration",function(){c.gate&&(d._getAuroraStatus(b),d._updateInterface(),d._trigger(a.jPlayer.event.durationchange))},!1),b.on("end",function(){c.gate&&(d._updateButtons(!1),d._getAuroraStatus(b,!0),d._updateInterface(),d._trigger(a.jPlayer.event.ended))},!1),b.on("error",function(){c.gate&&(d._updateButtons(!1),d._seeked(),d.status.srcSet&&(d.status.waitForLoad=!0,d.status.waitForPlay=!0,d.status.video&&!d.status.nativeVideoControls&&d.internal.video.jq.css({width:"0px",height:"0px"}),d._validString(d.status.media.poster)&&!d.status.nativeVideoControls&&d.internal.poster.jq.show(),d.css.jq.videoPlay.length&&d.css.jq.videoPlay.show(),d._error({type:a.jPlayer.error.URL,context:d.status.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(a,b){var c=0,d=0,e=0,f=0;isFinite(a.duration)&&(this.status.duration=a.duration),c=a.currentTime,d=this.status.duration>0?100*c/this.status.duration:0,"object"==typeof a.seekable&&a.seekable.length>0?(e=this.status.duration>0?100*a.seekable.end(a.seekable.length-1)/this.status.duration:100,f=this.status.duration>0?100*a.currentTime/a.seekable.end(a.seekable.length-1):0):(e=100,f=d),b&&(c=0,f=0,d=0),this.status.seekPercent=e,this.status.currentPercentRelative=f,this.status.currentPercentAbsolute=d,this.status.currentTime=c,this.status.remaining=this.status.duration-this.status.currentTime,this.status.videoWidth=a.videoWidth,this.status.videoHeight=a.videoHeight,this.status.readyState=a.readyState,this.status.networkState=a.networkState,this.status.playbackRate=a.playbackRate,this.status.ended=a.ended},_getAuroraStatus:function(a,b){var c=0,d=0,e=0,f=0;this.status.duration=a.duration/1e3,c=a.currentTime/1e3,d=this.status.duration>0?100*c/this.status.duration:0,a.buffered>0?(e=this.status.duration>0?a.buffered*this.status.duration/this.status.duration:100,f=this.status.duration>0?c/(a.buffered*this.status.duration):0):(e=100,f=d),b&&(c=0,f=0,d=0),this.status.seekPercent=e,this.status.currentPercentRelative=f,this.status.currentPercentAbsolute=d,this.status.currentTime=c,this.status.remaining=this.status.duration-this.status.currentTime,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_resetStatus:function(){this.status=a.extend({},this.status,a.jPlayer.prototype.status)},_trigger:function(b,c,d){var e=a.Event(b);e.jPlayer={},e.jPlayer.version=a.extend({},this.version),e.jPlayer.options=a.extend(!0,{},this.options),e.jPlayer.status=a.extend(!0,{},this.status),e.jPlayer.html=a.extend(!0,{},this.html),e.jPlayer.aurora=a.extend(!0,{},this.aurora),e.jPlayer.flash=a.extend(!0,{},this.flash),c&&(e.jPlayer.error=a.extend({},c)),d&&(e.jPlayer.warning=a.extend({},d)),this.element.trigger(e)},jPlayerFlashEvent:function(b,c){if(b===a.jPlayer.event.ready)if(this.internal.ready){if(this.flash.gate){if(this.status.srcSet){var d=this.status.currentTime,e=this.status.paused;this.setMedia(this.status.media),this.volumeWorker(this.options.volume),d>0&&(e?this.pause(d):this.play(d))}this._trigger(a.jPlayer.event.flashreset)}}else this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=c.version,this.version.needFlash!==this.version.flash&&this._error({type:a.jPlayer.error.VERSION,context:this.version.flash,message:a.jPlayer.errorMsg.VERSION+this.version.flash,hint:a.jPlayer.errorHint.VERSION}),this._trigger(a.jPlayer.event.repeat),this._trigger(b);if(this.flash.gate)switch(b){case a.jPlayer.event.progress:this._getFlashStatus(c),this._updateInterface(),this._trigger(b);break;case a.jPlayer.event.timeupdate:this._getFlashStatus(c),this._updateInterface(),this._trigger(b);break;case a.jPlayer.event.play:this._seeked(),this._updateButtons(!0),this._trigger(b);break;case a.jPlayer.event.pause:this._updateButtons(!1),this._trigger(b);break;case a.jPlayer.event.ended:this._updateButtons(!1),this._trigger(b);break;case a.jPlayer.event.click:this._trigger(b);break;case a.jPlayer.event.error:this.status.waitForLoad=!0,this.status.waitForPlay=!0,this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"}),this._validString(this.status.media.poster)&&this.internal.poster.jq.show(),this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show(),this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media),this._updateButtons(!1),this._error({type:a.jPlayer.error.URL,context:c.src,message:a.jPlayer.errorMsg.URL,hint:a.jPlayer.errorHint.URL});break;case a.jPlayer.event.seeking:this._seeking(),this._trigger(b);break;case a.jPlayer.event.seeked:this._seeked(),this._trigger(b);break;case a.jPlayer.event.ready:break;default:this._trigger(b)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent,this.status.currentPercentRelative=a.currentPercentRelative,this.status.currentPercentAbsolute=a.currentPercentAbsolute,this.status.currentTime=a.currentTime,this.status.duration=a.duration,this.status.remaining=a.duration-a.currentTime,this.status.videoWidth=a.videoWidth,this.status.videoHeight=a.videoHeight,this.status.readyState=4,this.status.networkState=0,this.status.playbackRate=1,this.status.ended=!1},_updateButtons:function(a){a===b?a=!this.status.paused:this.status.paused=!a,a?this.addStateClass("playing"):this.removeStateClass("playing"),!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen"),this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped"),this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide())),this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide())),this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%"),this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var a="";this.css.jq.currentTime.length&&(a=this._convertTime(this.status.currentTime),a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));var b="",c=this.status.duration,d=this.status.remaining;this.css.jq.duration.length&&("string"==typeof this.status.media.duration?b=this.status.media.duration:("number"==typeof this.status.media.duration&&(c=this.status.media.duration,d=c-this.status.currentTime),b=this.options.remainingDuration?(d>0?"-":"")+this._convertTime(d):this._convertTime(c)),b!==this.css.jq.duration.text()&&this.css.jq.duration.text(b))},_convertTime:c.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.addClass("jp-seeking-bg"),this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg"),this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1,this.html.video.gate=!1,this.aurora.gate=!1,this.flash.gate=!1},_resetActive:function(){this.html.active=!1,this.aurora.active=!1,this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},_qualifyURL:function(a){var b=document.createElement("div");return b.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>',b.firstChild.href},_absoluteMediaUrls:function(b){var c=this;return a.each(b,function(a,d){d&&c.format[a]&&"data:"!==d.substr(0,5)&&(b[a]=c._qualifyURL(d))}),b},addStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[a])},removeStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[a])},setMedia:function(b){var c=this,d=!1,e=this.status.media.poster!==b.poster;this._resetMedia(),this._resetGate(),this._resetActive(),this.androidFix.setMedia=!1,this.androidFix.play=!1,this.androidFix.pause=!1,b=this._absoluteMediaUrls(b),a.each(this.formats,function(e,f){var g="video"===c.format[f].media;if(a.each(c.solutions,function(e,h){if(c[h].support[f]&&c._validString(b[f])){var i="html"===h,j="aurora"===h;return g?(i?(c.html.video.gate=!0,c._html_setVideo(b),c.html.active=!0):(c.flash.gate=!0,c._flash_setVideo(b),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c.status.video=!0):(i?(c.html.audio.gate=!0,c._html_setAudio(b),c.html.active=!0,a.jPlayer.platform.android&&(c.androidFix.setMedia=!0)):j?(c.aurora.gate=!0,c._aurora_setAudio(b),c.aurora.active=!0):(c.flash.gate=!0,c._flash_setAudio(b),c.flash.active=!0),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.hide(),c.status.video=!1),d=!0,!1}}),d)return!1}),d?(this.status.nativeVideoControls&&this.html.video.gate||this._validString(b.poster)&&(e?this.htmlElement.poster.src=b.poster:this.internal.poster.jq.show()),"string"==typeof b.title&&(this.css.jq.title.length&&this.css.jq.title.html(b.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",b.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",b.title)),this.status.srcSet=!0,this.status.media=a.extend({},b),this._updateButtons(!1),this._updateInterface(),this._trigger(a.jPlayer.event.setmedia)):this._error({type:a.jPlayer.error.NO_SUPPORT,context:"{supplied:'"+this.options.supplied+"'}",message:a.jPlayer.errorMsg.NO_SUPPORT,hint:a.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus(),this._updateButtons(!1),this._updateInterface(),this._seeked(),this.internal.poster.jq.hide(),clearTimeout(this.internal.htmlDlyCmdId),this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia(),this.html.active?this._html_clearMedia():this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia(),this._resetGate(),this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(a.jPlayer.focus=this)},play:function(a){var b="object"==typeof a;b&&this.options.useStateClassSkin&&!this.status.paused?this.pause(a):(a="number"==typeof a?a:NaN,this.status.srcSet?(this.focus(),this.html.active?this._html_play(a):this.aurora.active?this._aurora_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(a){a="number"==typeof a?a:NaN,this.status.srcSet?this.html.active?this._html_pause(a):this.aurora.active?this._aurora_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(b,c){var d=this,e="function"==typeof c,f=Array.prototype.slice.call(arguments);"string"==typeof b&&(e&&f.splice(1,1),a.jPlayer.prototype.destroyRemoved(),a.each(this.instances,function(){d.element!==this&&(e&&!c.call(this.data("jPlayer"),d)||this.jPlayer.apply(this,f))}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,0,100),this.status.srcSet?this.html.active?this._html_playHead(a):this.aurora.active?this._aurora_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a),this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(b){this.options.muted=b,this.html.used&&this._html_setProperty("muted",b),this.aurora.used&&this._aurora_mute(b),this.flash.used&&this._flash_mute(b),this.html.video.gate||this.html.audio.gate||(this._updateMute(b),this._updateVolume(this.options.volume),this._trigger(a.jPlayer.event.volumechange))},mute:function(a){var c="object"==typeof a;c&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(a=a===b||!!a,this._muted(a))},unmute:function(a){a=a===b||!!a,this._muted(!a)},_updateMute:function(a){a===b&&(a=this.options.muted),a?this.addStateClass("muted"):this.removeStateClass("muted"),this.css.jq.mute.length&&this.css.jq.unmute.length&&(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a),this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(b){b=this._limitValue(b,0,1),this.options.volume=b,this.html.used&&this._html_setProperty("volume",b),this.aurora.used&&this._aurora_volume(b),this.flash.used&&this._flash_volume(b),this.html.video.gate||this.html.audio.gate||(this._updateVolume(b),this._trigger(a.jPlayer.event.volumechange))},volumeBar:function(b){if(this.css.jq.volumeBar.length){var c=a(b.currentTarget),d=c.offset(),e=b.pageX-d.left,f=c.width(),g=c.height()-b.pageY+d.top,h=c.height();this.options.verticalVolume?this.volume(g/h):this.volume(e/f)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===b&&(a=this.options.volume),a=this.options.muted?0:a,this.status.noVolume?(this.addStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1),this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(b){var c=this;this.options.cssSelectorAncestor=b,this._removeUiClass(),this.ancestorJq=b?a(b):[],b&&1!==this.ancestorJq.length&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT}),this._addUiClass(),a.each(this.options.cssSelector,function(a,b){c._cssSelector(a,b)}),this._updateInterface(),this._updateButtons(),this._updateAutohide(),this._updateVolume(),this._updateMute()},_cssSelector:function(b,c){var d=this;if("string"==typeof c)if(a.jPlayer.prototype.options.cssSelector[b]){if(this.css.jq[b]&&this.css.jq[b].length&&this.css.jq[b].unbind(".jPlayer"),this.options.cssSelector[b]=c,this.css.cs[b]=this.options.cssSelectorAncestor+" "+c,c?this.css.jq[b]=a(this.css.cs[b]):this.css.jq[b]=[],this.css.jq[b].length&&this[b]){var e=function(c){c.preventDefault(),d[b](c),d.options.autoBlur?a(this).blur():a(this).focus()};this.css.jq[b].bind("click.jPlayer",e)}c&&1!==this.css.jq[b].length&&this._warning({type:a.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[b],message:a.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[b].length+" found for "+b+" method.",hint:a.jPlayer.warningHint.CSS_SELECTOR_COUNT})}else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_METHOD,context:b,message:a.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:a.jPlayer.warningHint.CSS_SELECTOR_METHOD});else this._warning({type:a.jPlayer.warning.CSS_SELECTOR_STRING,context:c,message:a.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:a.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&(this.options.captureDuration&&a.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(b){if(this.css.jq.seekBar.length){var c=a(b.currentTarget),d=c.offset(),e=b.pageX-d.left,f=c.width(),g=100*e/f;this.playHead(g)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(b){if(this.css.jq.playbackRateBar.length){var c,d,e=a(b.currentTarget),f=e.offset(),g=b.pageX-f.left,h=e.width(),i=e.height()-b.pageY+f.top,j=e.height();c=this.options.verticalPlaybackRate?i/j:g/h,d=c*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate,this.playbackRate(d)}},_updatePlaybackRate:function(){var a=this.options.playbackRate,b=(a-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*b+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(a){var b="object"==typeof a;b&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(b){this.options.loop!==b&&(this.options.loop=b,this._updateButtons(),this._trigger(a.jPlayer.event.repeat))},option:function(c,d){var e=c;if(0===arguments.length)return a.extend(!0,{},this.options);if("string"==typeof c){var f=c.split(".");if(d===b){for(var g=a.extend(!0,{},this.options),h=0;h<f.length;h++){if(g[f[h]]===b)return this._warning({type:a.jPlayer.warning.OPTION_KEY,context:c,message:a.jPlayer.warningMsg.OPTION_KEY,hint:a.jPlayer.warningHint.OPTION_KEY}),b;g=g[f[h]]}return g}e={};for(var i=e,j=0;j<f.length;j++)j<f.length-1?(i[f[j]]={},i=i[f[j]]):i[f[j]]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(b,c){var d=this;switch(b){case"volume":this.volume(c);break;case"muted":this._muted(c);break;case"globalVolume":this.options[b]=c;break;case"cssSelectorAncestor":this._cssSelectorAncestor(c);break;case"cssSelector":a.each(c,function(a,b){d._cssSelector(a,b)});break;case"playbackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("playbackRate",c),this._updatePlaybackRate();break;case"defaultPlaybackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate,this.options.maxPlaybackRate),this.html.used&&this._html_setProperty("defaultPlaybackRate",c),this._updatePlaybackRate();break;case"minPlaybackRate":this.options[b]=c=this._limitValue(c,.1,this.options.maxPlaybackRate-.1),this._updatePlaybackRate();break;case"maxPlaybackRate":this.options[b]=c=this._limitValue(c,this.options.minPlaybackRate+.1,16),this._updatePlaybackRate();break;case"fullScreen":if(this.options[b]!==c){var e=a.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;(!e||e&&!this.status.waitForPlay)&&(e||(this.options[b]=c),c?this._requestFullscreen():this._exitFullscreen(),e||this._setOption("fullWindow",c))}break;case"fullWindow":this.options[b]!==c&&(this._removeUiClass(),this.options[b]=c,this._refreshSize());break;case"size":this.options.fullWindow||this.options[b].cssClass===c.cssClass||this._removeUiClass(),this.options[b]=a.extend({},this.options[b],c),this._refreshSize();break;case"sizeFull":this.options.fullWindow&&this.options[b].cssClass!==c.cssClass&&this._removeUiClass(),this.options[b]=a.extend({},this.options[b],c),this._refreshSize();break;case"autohide":this.options[b]=a.extend({},this.options[b],c),this._updateAutohide();break;case"loop":this._loop(c);break;case"remainingDuration":this.options[b]=c,this._updateInterface();break;case"toggleDuration":this.options[b]=c;break;case"nativeVideoControls":this.options[b]=a.extend({},this.options[b],c),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this._restrictNativeVideoControls(),this._updateNativeVideoControls();break;case"noFullWindow":this.options[b]=a.extend({},this.options[b],c),this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls),this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow),this._restrictNativeVideoControls(),this._updateButtons();break;case"noVolume":this.options[b]=a.extend({},this.options[b],c),this.status.noVolume=this._uaBlocklist(this.options.noVolume),this._updateVolume(),this._updateMute();break;case"emulateHtml":this.options[b]!==c&&(this.options[b]=c,c?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case"timeFormat":this.options[b]=a.extend({},this.options[b],c);break;case"keyEnabled":this.options[b]=c,c||this!==a.jPlayer.focus||(a.jPlayer.focus=null);break;case"keyBindings":this.options[b]=a.extend(!0,{},this.options[b],c);break;case"audioFullScreen":this.options[b]=c;break;case"autoBlur":this.options[b]=c}return this},_refreshSize:function(){this._setSize(),this._addUiClass(),this._updateSize(),this._updateButtons(),this._updateAutohide(),this._trigger(a.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass),this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height}),!this.status.waitForPlay&&this.html.active&&this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,b="mousemove.jPlayer",c=".jPlayerAutohide",d=b+c,e=function(b){var c,d,e=!1;"undefined"!=typeof a.internal.mouse?(c=a.internal.mouse.x-b.pageX,d=a.internal.mouse.y-b.pageY,e=Math.floor(c)>0||Math.floor(d)>0):e=!0,a.internal.mouse={x:b.pageX,y:b.pageY},e&&a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId),a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(c),this.css.jq.gui.unbind(c),this.status.nativeVideoControls?this.css.jq.gui.hide():this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind(d,e),this.css.jq.gui.bind(d,e),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(a){var b="object"==typeof a;b&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},_fullscreenAddEventListeners:function(){var b=this,c=a.jPlayer.nativeFeatures.fullscreen;c.api.fullscreenEnabled&&c.event.fullscreenchange&&("function"!=typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){b._fullscreenchange()}),document.addEventListener(c.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var b=a.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(b.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!a.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var b=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],c=a.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(b=this.htmlElement.video),c.api.fullscreenEnabled&&c.api.requestFullscreen(b)},_exitFullscreen:function(){var b,c=a.jPlayer.nativeFeatures.fullscreen;c.used.webkitVideo&&(b=this.htmlElement.video),c.api.fullscreenEnabled&&c.api.exitFullscreen(b)},_html_initMedia:function(b){var c=a(this.htmlElement.media).empty();a.each(b.track||[],function(a,b){var d=document.createElement("track");d.setAttribute("kind",b.kind?b.kind:""),d.setAttribute("src",b.src?b.src:""),d.setAttribute("srclang",b.srclang?b.srclang:""),d.setAttribute("label",b.label?b.label:""),b.def&&d.setAttribute("default",b.def),c.append(d)}),this.htmlElement.media.src=this.status.src,"none"!==this.options.preload&&this._html_load(),this._trigger(a.jPlayer.event.timeupdate)},_html_setFormat:function(b){var c=this;a.each(this.formats,function(a,d){if(c.html.support[d]&&b[d])return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1})},_html_setAudio:function(a){this._html_setFormat(a),this.htmlElement.media=this.htmlElement.audio,this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a),this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?a.poster:""),this.htmlElement.media=this.htmlElement.video,this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.htmlElement.media.load()),clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this,c=this.htmlElement.media;if(this.androidFix.pause=!1,this._html_load(),this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))try{c.play().then(function(){}).catch(function(){})}catch(a){}else{this.internal.cmdsIgnored&&c.play();try{if(c.seekable&&!("object"==typeof c.seekable&&c.seekable.length>0))throw 1;c.currentTime=a,c.play()}catch(c){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},250))}}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this,c=this.htmlElement.media;if(this.androidFix.play=!1,a>0?this._html_load():clearTimeout(this.internal.htmlDlyCmdId),c.pause(),this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(c.seekable&&!("object"==typeof c.seekable&&c.seekable.length>0))throw 1;c.currentTime=a}catch(c){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},250))}a>0&&this._html_checkWaitForPlay()},_html_playHead:function(a){var b=this,c=this.htmlElement.media;this._html_load();try{if("object"==typeof c.seekable&&c.seekable.length>0)c.currentTime=a*c.seekable.end(c.seekable.length-1)/100;else{if(!(c.duration>0)||isNaN(c.duration))throw"e";c.currentTime=a*c.duration/100}}catch(c){return void(this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},250))}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,b){this.html.audio.available&&(this.htmlElement.audio[a]=b),this.html.video.available&&(this.htmlElement.video[a]=b)},_aurora_setAudio:function(b){var c=this;a.each(this.formats,function(a,d){if(c.aurora.support[d]&&b[d])return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1}),this.aurora.player=new AV.Player.fromURL(this.status.src),this._addAuroraEventListeners(this.aurora.player,this.aurora),"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(b){this.status.waitForLoad||isNaN(b)||this.aurora.player.seek(b),this.aurora.player.playing||this.aurora.player.play(),this.status.waitForLoad=!1,this._aurora_checkWaitForPlay(),this._updateButtons(!0),this._trigger(a.jPlayer.event.play)},_aurora_pause:function(b){isNaN(b)||this.aurora.player.seek(1e3*b),this.aurora.player.pause(),b>0&&this._aurora_checkWaitForPlay(),this._updateButtons(!1),this._trigger(a.jPlayer.event.pause)},_aurora_playHead:function(a){this.aurora.player.duration>0&&this.aurora.player.seek(a*this.aurora.player.duration/100),this.status.waitForLoad||this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(a){this.aurora.player.volume=100*a},_aurora_mute:function(a){a?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume,this.aurora.properties.muted=a},_flash_setAudio:function(b){var c=this;try{a.each(this.formats,function(a,d){if(c.flash.support[d]&&b[d]){switch(d){case"m4a":case"fla":c._getMovie().fl_setAudio_m4a(b[d]);break;case"mp3":c._getMovie().fl_setAudio_mp3(b[d]);break;case"rtmpa":c._getMovie().fl_setAudio_rtmp(b[d])}return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(a){this._flashError(a)}},_flash_setVideo:function(b){var c=this;try{a.each(this.formats,function(a,d){if(c.flash.support[d]&&b[d]){switch(d){case"m4v":case"flv":c._getMovie().fl_setVideo_m4v(b[d]);break;case"rtmpv":c._getMovie().fl_setVideo_rtmp(b[d])}return c.status.src=b[d],c.status.format[d]=!0,c.status.formatType=d,!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(a){this._flashError(a)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"}),this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia();
}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(a){this._flashError(a)}this.status.waitForLoad=!1,this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(a){this._flashError(a)}a>0&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(a){this._flashError(a)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(a){this._flashError(a)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(a){this._flashError(a)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a,b=0;if(window.ActiveXObject)try{if(a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var c=a.GetVariable("$version");c&&(c=c.split(" ")[1].split(","),b=parseInt(c[0],10)+"."+parseInt(c[1],10))}}catch(a){}else navigator.plugins&&navigator.mimeTypes.length>0&&(a=navigator.plugins["Shockwave Flash"],a&&(b=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1")));return 1*b},_checkForFlash:function(a){var b=!1;return this._getFlashPluginVersion()>=a&&(b=!0),b},_validString:function(a){return a&&"string"==typeof a},_limitValue:function(a,b,c){return a<b?b:a>c?c:a},_urlNotSetError:function(b){this._error({type:a.jPlayer.error.URL_NOT_SET,context:b,message:a.jPlayer.errorMsg.URL_NOT_SET,hint:a.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(b){var c;c=this.internal.ready?"FLASH_DISABLED":"FLASH",this._error({type:a.jPlayer.error[c],context:this.internal.flash.swf,message:a.jPlayer.errorMsg[c]+b.message,hint:a.jPlayer.errorHint[c]}),this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(b){this._trigger(a.jPlayer.event.error,b),this.options.errorAlerts&&this._alert("Error!"+(b.message?"\n"+b.message:"")+(b.hint?"\n"+b.hint:"")+"\nContext: "+b.context)},_warning:function(c){this._trigger(a.jPlayer.event.warning,b,c),this.options.warningAlerts&&this._alert("Warning!"+(c.message?"\n"+c.message:"")+(c.hint?"\n"+c.hint:"")+"\nContext: "+c.context)},_alert:function(a){var b="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(b):alert(b)},_emulateHtmlBridge:function(){var b=this;a.each(a.jPlayer.emulateMethods.split(/\s+/g),function(a,c){b.internal.domNode[c]=function(a){b[c](a)}}),a.each(a.jPlayer.event,function(c,d){var e=!0;a.each(a.jPlayer.reservedEvent.split(/\s+/g),function(a,b){if(b===c)return e=!1,!1}),e&&b.element.bind(d+".jPlayer.jPlayerHtml",function(){b._emulateHtmlUpdate();var a=document.createEvent("Event");a.initEvent(c,!1,!0),b.internal.domNode.dispatchEvent(a)})})},_emulateHtmlUpdate:function(){var b=this;a.each(a.jPlayer.emulateStatus.split(/\s+/g),function(a,c){b.internal.domNode[c]=b.status[c]}),a.each(a.jPlayer.emulateOptions.split(/\s+/g),function(a,c){b.internal.domNode[c]=b.options[c]})},_destroyHtmlBridge:function(){var b=this;this.element.unbind(".jPlayerHtml");var c=a.jPlayer.emulateMethods+" "+a.jPlayer.emulateStatus+" "+a.jPlayer.emulateOptions;a.each(c.split(/\s+/g),function(a,c){delete b.internal.domNode[c]})}},a.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"},a.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+a.jPlayer.prototype.version.script+" needs Jplayer.swf version "+a.jPlayer.prototype.version.needFlash+" but found "},a.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."},a.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"},a.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."},a.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}})}(this),d()}),$__System.registerDynamic("49f",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a){var b,c,d,e,f,g,h,i="Close",j="BeforeClose",k="AfterClose",l="BeforeAppend",m="MarkupParse",n="Open",o="Change",p="mfp",q="."+p,r="mfp-ready",s="mfp-removing",t="mfp-prevent-close",u=function(){},v=!!window.jQuery,w=a(window),x=function(a,c){b.ev.on(p+a+q,c)},y=function(b,c,d,e){var f=document.createElement("div");return f.className="mfp-"+b,d&&(f.innerHTML=d),e?c&&c.appendChild(f):(f=a(f),c&&f.appendTo(c)),f},z=function(c,d){b.ev.triggerHandler(p+c,d),b.st.callbacks&&(c=c.charAt(0).toLowerCase()+c.slice(1),b.st.callbacks[c]&&b.st.callbacks[c].apply(b,a.isArray(d)?d:[d]))},A=function(c){return c===h&&b.currTemplate.closeBtn||(b.currTemplate.closeBtn=a(b.st.closeMarkup.replace("%title%",b.st.tClose)),h=c),b.currTemplate.closeBtn},B=function(){a.magnificPopup.instance||(b=new u,b.init(),a.magnificPopup.instance=b)},C=function(){var a=document.createElement("p").style,b=["ms","O","Moz","Webkit"];if(void 0!==a.transition)return!0;for(;b.length;)if(b.pop()+"Transition"in a)return!0;return!1};u.prototype={constructor:u,init:function(){var c=navigator.appVersion;b.isIE7=c.indexOf("MSIE 7.")!==-1,b.isIE8=c.indexOf("MSIE 8.")!==-1,b.isLowIE=b.isIE7||b.isIE8,b.isAndroid=/android/gi.test(c),b.isIOS=/iphone|ipad|ipod/gi.test(c),b.supportsTransition=C(),b.probablyMobile=b.isAndroid||b.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),e=a(document),b.popupsCache={}},open:function(c){d||(d=a(document.body));var f;if(c.isObj===!1){b.items=c.items.toArray(),b.index=0;var h,i=c.items;for(f=0;f<i.length;f++)if(h=i[f],h.parsed&&(h=h.el[0]),h===c.el[0]){b.index=f;break}}else b.items=a.isArray(c.items)?c.items:[c.items],b.index=c.index||0;if(b.isOpen)return void b.updateItemHTML();b.types=[],g="",c.mainEl&&c.mainEl.length?b.ev=c.mainEl.eq(0):b.ev=e,c.key?(b.popupsCache[c.key]||(b.popupsCache[c.key]={}),b.currTemplate=b.popupsCache[c.key]):b.currTemplate={},b.st=a.extend(!0,{},a.magnificPopup.defaults,c),b.fixedContentPos="auto"===b.st.fixedContentPos?!b.probablyMobile:b.st.fixedContentPos,b.st.modal&&(b.st.closeOnContentClick=!1,b.st.closeOnBgClick=!1,b.st.showCloseBtn=!1,b.st.enableEscapeKey=!1),b.bgOverlay||(b.bgOverlay=y("bg").on("click"+q,function(){b.close()}),b.wrap=y("wrap").attr("tabindex",-1).on("click"+q,function(a){b._checkIfClose(a.target)&&b.close()}),b.container=y("container",b.wrap)),b.contentContainer=y("content"),b.st.preloader&&(b.preloader=y("preloader",b.container,b.st.tLoading));var j=a.magnificPopup.modules;for(f=0;f<j.length;f++){var k=j[f];k=k.charAt(0).toUpperCase()+k.slice(1),b["init"+k].call(b)}z("BeforeOpen"),b.st.showCloseBtn&&(b.st.closeBtnInside?(x(m,function(a,b,c,d){c.close_replaceWith=A(d.type)}),g+=" mfp-close-btn-in"):b.wrap.append(A())),b.st.alignTop&&(g+=" mfp-align-top"),b.fixedContentPos?b.wrap.css({overflow:b.st.overflowY,overflowX:"hidden",overflowY:b.st.overflowY}):b.wrap.css({top:w.scrollTop(),position:"absolute"}),(b.st.fixedBgPos===!1||"auto"===b.st.fixedBgPos&&!b.fixedContentPos)&&b.bgOverlay.css({height:e.height(),position:"absolute"}),b.st.enableEscapeKey&&e.on("keyup"+q,function(a){27===a.keyCode&&b.close()}),w.on("resize"+q,function(){b.updateSize()}),b.st.closeOnContentClick||(g+=" mfp-auto-cursor"),g&&b.wrap.addClass(g);var l=b.wH=w.height(),o={};if(b.fixedContentPos&&b._hasScrollBar(l)){var p=b._getScrollbarSize();p&&(o.marginRight=p)}b.fixedContentPos&&(b.isIE7?a("body, html").css("overflow","hidden"):o.overflow="hidden");var s=b.st.mainClass;return b.isIE7&&(s+=" mfp-ie7"),s&&b._addClassToMFP(s),b.updateItemHTML(),z("BuildControls"),a("html").css(o),b.bgOverlay.add(b.wrap).prependTo(b.st.prependTo||d),b._lastFocusedEl=document.activeElement,setTimeout(function(){b.content?(b._addClassToMFP(r),b._setFocus()):b.bgOverlay.addClass(r),e.on("focusin"+q,b._onFocusIn)},16),b.isOpen=!0,b.updateSize(l),z(n),c},close:function(){b.isOpen&&(z(j),b.isOpen=!1,b.st.removalDelay&&!b.isLowIE&&b.supportsTransition?(b._addClassToMFP(s),setTimeout(function(){b._close()},b.st.removalDelay)):b._close())},_close:function(){z(i);var c=s+" "+r+" ";if(b.bgOverlay.detach(),b.wrap.detach(),b.container.empty(),b.st.mainClass&&(c+=b.st.mainClass+" "),b._removeClassFromMFP(c),b.fixedContentPos){var d={marginRight:""};b.isIE7?a("body, html").css("overflow",""):d.overflow="",a("html").css(d)}e.off("keyup"+q+" focusin"+q),b.ev.off(q),b.wrap.attr("class","mfp-wrap").removeAttr("style"),b.bgOverlay.attr("class","mfp-bg"),b.container.attr("class","mfp-container"),!b.st.showCloseBtn||b.st.closeBtnInside&&b.currTemplate[b.currItem.type]!==!0||b.currTemplate.closeBtn&&b.currTemplate.closeBtn.detach(),b._lastFocusedEl&&a(b._lastFocusedEl).focus(),b.currItem=null,b.content=null,b.currTemplate=null,b.prevHeight=0,z(k)},updateSize:function(a){if(b.isIOS){var c=document.documentElement.clientWidth/window.innerWidth,d=window.innerHeight*c;b.wrap.css("height",d),b.wH=d}else b.wH=a||w.height();b.fixedContentPos||b.wrap.css("height",b.wH),z("Resize")},updateItemHTML:function(){var c=b.items[b.index];b.contentContainer.detach(),b.content&&b.content.detach(),c.parsed||(c=b.parseEl(b.index));var d=c.type;if(z("BeforeChange",[b.currItem?b.currItem.type:"",d]),b.currItem=c,!b.currTemplate[d]){var e=!!b.st[d]&&b.st[d].markup;z("FirstMarkupParse",e),e?b.currTemplate[d]=a(e):b.currTemplate[d]=!0}f&&f!==c.type&&b.container.removeClass("mfp-"+f+"-holder");var g=b["get"+d.charAt(0).toUpperCase()+d.slice(1)](c,b.currTemplate[d]);b.appendContent(g,d),c.preloaded=!0,z(o,c),f=c.type,b.container.prepend(b.contentContainer),z("AfterChange")},appendContent:function(a,c){b.content=a,a?b.st.showCloseBtn&&b.st.closeBtnInside&&b.currTemplate[c]===!0?b.content.find(".mfp-close").length||b.content.append(A()):b.content=a:b.content="",z(l),b.container.addClass("mfp-"+c+"-holder"),b.contentContainer.append(b.content)},parseEl:function(c){var d,e=b.items[c];if(e.tagName?e={el:a(e)}:(d=e.type,e={data:e,src:e.src}),e.el){for(var f=b.types,g=0;g<f.length;g++)if(e.el.hasClass("mfp-"+f[g])){d=f[g];break}e.src=e.el.attr("data-mfp-src"),e.src||(e.src=e.el.attr("href"))}return e.type=d||b.st.type||"inline",e.index=c,e.parsed=!0,b.items[c]=e,z("ElementParse",e),b.items[c]},addGroup:function(a,c){var d=function(d){d.mfpEl=this,b._openClick(d,a,c)};c||(c={});var e="click.magnificPopup";c.mainEl=a,c.items?(c.isObj=!0,a.off(e).on(e,d)):(c.isObj=!1,c.delegate?a.off(e).on(e,c.delegate,d):(c.items=a,a.off(e).on(e,d)))},_openClick:function(c,d,e){var f=void 0!==e.midClick?e.midClick:a.magnificPopup.defaults.midClick;if(f||2!==c.which&&!c.ctrlKey&&!c.metaKey){var g=void 0!==e.disableOn?e.disableOn:a.magnificPopup.defaults.disableOn;if(g)if(a.isFunction(g)){if(!g.call(b))return!0}else if(w.width()<g)return!0;c.type&&(c.preventDefault(),b.isOpen&&c.stopPropagation()),e.el=a(c.mfpEl),e.delegate&&(e.items=d.find(e.delegate)),b.open(e)}},updateStatus:function(a,d){if(b.preloader){c!==a&&b.container.removeClass("mfp-s-"+c),d||"loading"!==a||(d=b.st.tLoading);var e={status:a,text:d};z("UpdateStatus",e),a=e.status,d=e.text,b.preloader.html(d),b.preloader.find("a").on("click",function(a){a.stopImmediatePropagation()}),b.container.addClass("mfp-s-"+a),c=a}},_checkIfClose:function(c){if(!a(c).hasClass(t)){var d=b.st.closeOnContentClick,e=b.st.closeOnBgClick;if(d&&e)return!0;if(!b.content||a(c).hasClass("mfp-close")||b.preloader&&c===b.preloader[0])return!0;if(c===b.content[0]||a.contains(b.content[0],c)){if(d)return!0}else if(e&&a.contains(document,c))return!0;return!1}},_addClassToMFP:function(a){b.bgOverlay.addClass(a),b.wrap.addClass(a)},_removeClassFromMFP:function(a){this.bgOverlay.removeClass(a),b.wrap.removeClass(a)},_hasScrollBar:function(a){return(b.isIE7?e.height():document.body.scrollHeight)>(a||w.height())},_setFocus:function(){(b.st.focus?b.content.find(b.st.focus).eq(0):b.wrap).focus()},_onFocusIn:function(c){if(c.target!==b.wrap[0]&&!a.contains(b.wrap[0],c.target))return b._setFocus(),!1},_parseMarkup:function(b,c,d){var e;d.data&&(c=a.extend(d.data,c)),z(m,[b,c,d]),a.each(c,function(a,c){if(void 0===c||c===!1)return!0;if(e=a.split("_"),e.length>1){var d=b.find(q+"-"+e[0]);if(d.length>0){var f=e[1];"replaceWith"===f?d[0]!==c[0]&&d.replaceWith(c):"img"===f?d.is("img")?d.attr("src",c):d.replaceWith('<img src="'+c+'" class="'+d.attr("class")+'" />'):d.attr(e[1],c)}}else b.find(q+"-"+a).html(c)})},_getScrollbarSize:function(){if(void 0===b.scrollbarSize){var a=document.createElement("div");a.id="mfp-sbm",a.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(a),b.scrollbarSize=a.offsetWidth-a.clientWidth,document.body.removeChild(a)}return b.scrollbarSize}},a.magnificPopup={instance:null,proto:u.prototype,modules:[],open:function(b,c){return B(),b=b?a.extend(!0,{},b):{},b.isObj=!0,b.index=c||0,this.instance.open(b)},close:function(){return a.magnificPopup.instance&&a.magnificPopup.instance.close()},registerModule:function(b,c){c.options&&(a.magnificPopup.defaults[b]=c.options),a.extend(this.proto,c.proto),this.modules.push(b)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&times;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},a.fn.magnificPopup=function(c){B();var d=a(this);if("string"==typeof c)if("open"===c){var e,f=v?d.data("magnificPopup"):d[0].magnificPopup,g=parseInt(arguments[1],10)||0;f.items?e=f.items[g]:(e=d,f.delegate&&(e=e.find(f.delegate)),e=e.eq(g)),b._openClick({mfpEl:e},d,f)}else b.isOpen&&b[c].apply(b,Array.prototype.slice.call(arguments,1));else c=a.extend(!0,{},c),v?d.data("magnificPopup",c):d[0].magnificPopup=c,b.addGroup(d,c);return d};var D,E,F,G="inline",H=function(){F&&(E.after(F.addClass(D)).detach(),F=null)};a.magnificPopup.registerModule(G,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){b.types.push(G),x(i+"."+G,function(){H()})},getInline:function(c,d){if(H(),c.src){var e=b.st.inline,f=a(c.src);if(f.length){var g=f[0].parentNode;g&&g.tagName&&(E||(D=e.hiddenClass,E=y(D),D="mfp-"+D),F=f.after(E).detach().removeClass(D)),b.updateStatus("ready")}else b.updateStatus("error",e.tNotFound),f=a("<div>");return c.inlineElement=f,f}return b.updateStatus("ready"),b._parseMarkup(d,{},c),d}}});var I,J=function(c){if(c.data&&void 0!==c.data.title)return c.data.title;var d=b.st.image.titleSrc;if(d){if(a.isFunction(d))return d.call(b,c);if(c.el)return c.el.attr(d)||""}return""};a.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var a=b.st.image,c=".image";b.types.push("image"),x(n+c,function(){"image"===b.currItem.type&&a.cursor&&d.addClass(a.cursor)}),x(i+c,function(){a.cursor&&d.removeClass(a.cursor),w.off("resize"+q)}),x("Resize"+c,b.resizeImage),b.isLowIE&&x("AfterChange",b.resizeImage)},resizeImage:function(){var a=b.currItem;if(a&&a.img&&b.st.image.verticalFit){var c=0;b.isLowIE&&(c=parseInt(a.img.css("padding-top"),10)+parseInt(a.img.css("padding-bottom"),10)),a.img.css("max-height",b.wH-c)}},_onImageHasSize:function(a){a.img&&(a.hasSize=!0,I&&clearInterval(I),a.isCheckingImgSize=!1,z("ImageHasSize",a),a.imgHidden&&(b.content&&b.content.removeClass("mfp-loading"),a.imgHidden=!1))},findImageSize:function(a){var c=0,d=a.img[0],e=function(f){I&&clearInterval(I),I=setInterval(function(){return d.naturalWidth>0?void b._onImageHasSize(a):(c>200&&clearInterval(I),c++,void(3===c?e(10):40===c?e(50):100===c&&e(500)))},f)};e(1)},getImage:function(c,d){var e=0,f=function(){c&&(c.img[0].complete?(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("ready")),c.hasSize=!0,c.loaded=!0,z("ImageLoadComplete")):(e++,e<200?setTimeout(f,100):g()))},g=function(){c&&(c.img.off(".mfploader"),c===b.currItem&&(b._onImageHasSize(c),b.updateStatus("error",h.tError.replace("%url%",c.src))),c.hasSize=!0,c.loaded=!0,c.loadError=!0)},h=b.st.image,i=d.find(".mfp-img");if(i.length){var j=document.createElement("img");j.className="mfp-img",c.img=a(j).on("load.mfploader",f).on("error.mfploader",g),j.src=c.src,i.is("img")&&(c.img=c.img.clone()),j=c.img[0],j.naturalWidth>0?c.hasSize=!0:j.width||(c.hasSize=!1)}return b._parseMarkup(d,{title:J(c),img_replaceWith:c.img},c),b.resizeImage(),c.hasSize?(I&&clearInterval(I),c.loadError?(d.addClass("mfp-loading"),b.updateStatus("error",h.tError.replace("%url%",c.src))):(d.removeClass("mfp-loading"),b.updateStatus("ready")),d):(b.updateStatus("loading"),c.loading=!0,c.hasSize||(c.imgHidden=!0,d.addClass("mfp-loading"),b.findImageSize(c)),d)}}});var K,L=function(){return void 0===K&&(K=void 0!==document.createElement("p").style.MozTransform),K};a.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(a){return a.is("img")?a:a.find("img")}},proto:{initZoom:function(){var a,c=b.st.zoom,d=".zoom";if(c.enabled&&b.supportsTransition){var e,f,g=c.duration,h=function(a){var b=a.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),d="all "+c.duration/1e3+"s "+c.easing,e={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},f="transition";return e["-webkit-"+f]=e["-moz-"+f]=e["-o-"+f]=e[f]=d,b.css(e),b},k=function(){b.content.css("visibility","visible")};x("BuildControls"+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.content.css("visibility","hidden"),a=b._getItemToZoom(),!a)return void k();f=h(a),f.css(b._getOffset()),b.wrap.append(f),e=setTimeout(function(){f.css(b._getOffset(!0)),e=setTimeout(function(){k(),setTimeout(function(){f.remove(),a=f=null,z("ZoomAnimationEnded")},16)},g)},16)}}),x(j+d,function(){if(b._allowZoom()){if(clearTimeout(e),b.st.removalDelay=g,!a){if(a=b._getItemToZoom(),!a)return;f=h(a)}f.css(b._getOffset(!0)),b.wrap.append(f),b.content.css("visibility","hidden"),setTimeout(function(){f.css(b._getOffset())},16)}}),x(i+d,function(){b._allowZoom()&&(k(),f&&f.remove(),a=null)})}},_allowZoom:function(){return"image"===b.currItem.type},_getItemToZoom:function(){return!!b.currItem.hasSize&&b.currItem.img},_getOffset:function(c){var d;d=c?b.currItem.img:b.st.zoom.opener(b.currItem.el||b.currItem);var e=d.offset(),f=parseInt(d.css("padding-top"),10),g=parseInt(d.css("padding-bottom"),10);e.top-=a(window).scrollTop()-f;var h={width:d.width(),height:(v?d.innerHeight():d[0].offsetHeight)-g-f};return L()?h["-moz-transform"]=h.transform="translate("+e.left+"px,"+e.top+"px)":(h.left=e.left,h.top=e.top),h}}}),B()}(window.jQuery||window.Zepto)}(this),d()}),$__System.registerDynamic("4a0",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){var b=a.swfobject,b=function(){function a(){if(!S){try{var a=L.getElementsByTagName("body")[0].appendChild(r("span"));a.parentNode.removeChild(a)}catch(a){return}S=!0;for(var b=O.length,c=0;c<b;c++)O[c]()}}function c(a){S?a():O[O.length]=a}function d(a){if(typeof K.addEventListener!=D)K.addEventListener("load",a,!1);else if(typeof L.addEventListener!=D)L.addEventListener("load",a,!1);else if(typeof K.attachEvent!=D)s(K,"onload",a);else if("function"==typeof K.onload){var b=K.onload;K.onload=function(){b(),a()}}else K.onload=a}function e(){N?f():g()}function f(){var a=L.getElementsByTagName("body")[0],b=r(E);b.setAttribute("type",H);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=D){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),V.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(d<10)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,g()}()}else g()}function g(){var a=P.length;if(a>0)for(var b=0;b<a;b++){var c=P[b].id,d=P[b].callbackFn,e={success:!1,id:c};if(V.pv[0]>0){var f=q(c);if(f)if(!t(P[b].swfVersion)||V.wk&&V.wk<312)if(P[b].expressInstall&&i()){var g={};g.data=P[b].expressInstall,g.width=f.getAttribute("width")||"0",g.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(g.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(g.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;o<n;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));j(g,l,c,d)}else k(f),d&&d(e);else v(c,!0),d&&(e.success=!0,e.ref=h(c),d(e))}else if(v(c,!0),d){var p=h(c);p&&typeof p.SetVariable!=D&&(e.success=!0,e.ref=p),d(e)}}}function h(a){var b=null,c=q(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=D)b=c;else{var d=c.getElementsByTagName(E)[0];d&&(b=d)}return b}function i(){return!T&&t("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function j(a,b,c,d){T=!0,z=d||null,A={success:!1,id:c};var e=q(c);if(e){"OBJECT"==e.nodeName?(x=l(e),y=null):(x=e,y=c),a.id=I,(typeof a.width==D||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==D||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),L.title=L.title.slice(0,47)+" - Flash Player Installation";var f=V.ie&&V.win?"ActiveX":"PlugIn",g="MMredirectURL="+K.location.toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+L.title;if(typeof b.flashvars!=D?b.flashvars+="&"+g:b.flashvars=g,V.ie&&V.win&&4!=e.readyState){var h=r("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}m(a,b,c)}}function k(a){if(V.ie&&V.win&&4!=a.readyState){var b=r("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(l(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(l(a),a)}function l(a){var b=r("div");if(V.win&&V.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(E)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;f<e;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function m(a,b,c){var d,e=q(c);if(V.wk&&V.wk<312)return d;if(e)if(typeof a.id==D&&(a.id=c),V.ie&&V.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",Q[Q.length]=a.id,d=q(a.id)}else{var j=r(E);j.setAttribute("type",H);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&n(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function n(a,b,c){var d=r("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function o(a){var b=q(a);b&&"OBJECT"==b.nodeName&&(V.ie&&V.win?(b.style.display="none",function(){4==b.readyState?p(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function p(a){var b=q(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function q(a){var b=null;try{b=L.getElementById(a)}catch(a){}return b}function r(a){return L.createElement(a)}function s(a,b,c){a.attachEvent(b,c),R[R.length]=[a,b,c]}function t(a){var b=V.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]}function u(a,b,c,d){if(!V.ie||!V.mac){var e=L.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(B=null,C=null),!B||C!=f){var g=r("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),B=e.appendChild(g),V.ie&&V.win&&typeof L.styleSheets!=D&&L.styleSheets.length>0&&(B=L.styleSheets[L.styleSheets.length-1]),C=f}V.ie&&V.win?B&&typeof B.addRule==E&&B.addRule(a,b):B&&typeof L.createTextNode!=D&&B.appendChild(L.createTextNode(a+" {"+b+"}"))}}}function v(a,b){if(U){var c=b?"visible":"hidden";S&&q(a)?q(a).style.visibility=c:u("#"+a,"visibility:"+c)}}function w(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=D?encodeURIComponent(a):a}var x,y,z,A,B,C,D="undefined",E="object",F="Shockwave Flash",G="ShockwaveFlash.ShockwaveFlash",H="application/x-shockwave-flash",I="SWFObjectExprInst",J="onreadystatechange",K=window,L=document,M=navigator,N=!1,O=[e],P=[],Q=[],R=[],S=!1,T=!1,U=!0,V=function(){var a=typeof L.getElementById!=D&&typeof L.getElementsByTagName!=D&&typeof L.createElement!=D,b=M.userAgent.toLowerCase(),c=M.platform.toLowerCase(),d=c?/win/.test(c):/win/.test(b),e=c?/mac/.test(c):/mac/.test(b),f=!!/webkit/.test(b)&&parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),g=!1,h=[0,0,0],i=null;if(typeof M.plugins!=D&&typeof M.plugins[F]==E)i=M.plugins[F].description,!i||typeof M.mimeTypes!=D&&M.mimeTypes[H]&&!M.mimeTypes[H].enabledPlugin||(N=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof K.ActiveXObject!=D)try{var j=new ActiveXObject(G);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(a){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();(function(){V.w3&&((typeof L.readyState!=D&&"complete"==L.readyState||typeof L.readyState==D&&(L.getElementsByTagName("body")[0]||L.body))&&a(),S||(typeof L.addEventListener!=D&&L.addEventListener("DOMContentLoaded",a,!1),V.ie&&V.win&&(L.attachEvent(J,function(){"complete"==L.readyState&&(L.detachEvent(J,arguments.callee),a())}),K==top&&!function(){if(!S){try{L.documentElement.doScroll("left")}catch(a){return void setTimeout(arguments.callee,0)}a()}}()),V.wk&&!function(){if(!S)return/loaded|complete/.test(L.readyState)?void a():void setTimeout(arguments.callee,0)}(),d(a)))})(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var a=R.length,c=0;c<a;c++)R[c][0].detachEvent(R[c][1],R[c][2]);for(var d=Q.length,e=0;e<d;e++)o(Q[e]);for(var f in V)V[f]=null;V=null;for(var g in b)b[g]=null;b=null})}();return{registerObject:function(a,b,c,d){if(V.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,P[P.length]=e,v(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){if(V.w3)return h(a)},embedSWF:function(a,b,d,e,f,g,h,k,l,n){var o={success:!1,id:b};V.w3&&!(V.wk&&V.wk<312)&&a&&b&&d&&e&&f?(v(b,!1),c(function(){d+="",e+="";var c={};if(l&&typeof l===E)for(var p in l)c[p]=l[p];c.data=a,c.width=d,c.height=e;var q={};if(k&&typeof k===E)for(var r in k)q[r]=k[r];if(h&&typeof h===E)for(var s in h)typeof q.flashvars!=D?q.flashvars+="&"+s+"="+h[s]:q.flashvars=s+"="+h[s];if(t(f)){var u=m(c,q,b);c.id==b&&v(b,!0),o.success=!0,o.ref=u}else{if(g&&i())return c.data=g,void j(c,q,b,n);v(b,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){U=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:t,createSWF:function(a,b,c){return V.w3?m(a,b,c):void 0},showExpressInstall:function(a,b,c,d){V.w3&&i()&&j(a,b,c,d)},removeSWF:function(a){V.w3&&o(a)},createCSS:function(a,b,c,d){V.w3&&u(a,b,c,d)},addDomLoadEvent:c,addLoadEvent:d,getQueryParamValue:function(a){var b=L.location.search||L.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return w(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return w(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(T){var a=q(I);a&&x&&(a.parentNode.replaceChild(x,a),y&&(v(y,!0),V.ie&&V.win&&(x.style.display="block")),z&&z(A)),T=!1}}}}();a.swfobject=b}(this),d()}),$__System.registerDynamic("4a1",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a){var b=function(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),d=a[b];a[b]=a[c],a[c]=d}return a};a.fn.mmRandomize=function(c,d){var e=a(this).closest(".activity"),f="";return e.length>0&&(f=e.attr("id")+(e.attr("data-seed")||"")+(d||"")),Math.seedrandom(f),this.each(function(){var d=a(this),e=d.find(c),f=e.filter("[data-rank]");if(f.length<1){a(e).attr("data-origindex",function(a){return a});for(var g=e.length>1;g;){e=b(e);for(var h=0;h<e.length;h++){var i=a(e[h]);if(i.attr("data-origindex")==h)break;g=!1;break}}d.empty();for(var j=0;j<e.length;j++)d.append(a(e[j]).attr("data-sortindex",j))}else{var k=e,l=[],m=k.filter("[data-rank]");if(m.length!=k.length){m.each(function(){l.push(parseInt(a(this).attr("data-rank"),10))}),l.sort(function(a,b){return a-b}),b(k);var n=1,o=l.shift();k.each(function(){var b=a(this),c=b.attr("data-rank")||-1;if(c<0){for(var d=!1;!d;)n===o?(n++,o=l.shift(),d=!1):d=!0;c=n,n++,b.attr("data-addedrank","y")}b.attr("data-rank",c)})}k.each(function(){var b=a(this);b.attr("data-sortIndex",b.attr("data-rank"))}),k.sort(function(b,c){return parseInt(a(b).attr("data-rank"))-parseInt(a(c).attr("data-rank"))}),d.empty(),d.append(k)}})},a.fn.mmRandomizeRanks=function(c){var d=a(this).closest(".activity"),e="";return d.length>0&&(e=d.attr("id")+(d.attr("data-seed")||"")),Math.seedrandom(e),this.each(function(){var d=a(this),e=d.find(c),f=e.filter("[data-rank]"),g=[];
if(f.length!==e.length){b(e),f.each(function(){g.push(parseInt(a(this).attr("data-rank")))}),g.sort(function(a,b){return a-b});var h=1,i=g.shift();e.each(function(){var b=a(this),c=b.attr("data-rank")||-1;if(c<0){for(var d=!1;!d;)h===i?(h++,i=g.shift()):d=!0;c=h,h++}b.attr("data-rank",c)})}})}}(jQuery)}(this),d()}),$__System.registerDynamic("4a2",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a){function b(a){return a&&a.toLowerCase?a.toLowerCase():a}function c(a,b){for(var c=0,e=a.length;c<e;c++)if(a[c]==b)return!d;return d}var d=!1,e=null,f=parseFloat,g=Math.min,h=/(-?\d+\.?\d*)$/g,i=[],j=[];a.tinysort={id:"TinySort",version:"1.4.29",copyright:"Copyright (c) 2008-2012 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licensed:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},plugin:function(a,b){i.push(a),j.push(b)},defaults:{order:"asc",attr:e,data:e,useVal:d,place:"start",returns:d,cases:d,forceStrings:d,sortFunction:e}},a.fn.extend({tinysort:function(k,l){k&&"string"!=typeof k&&(l=k,k=e);var m,n=a.extend({},a.tinysort.defaults,l),o=this,p=a(this).length,q={},r=!(!k||""==k),s=!(n.attr===e||""==n.attr),t=n.data!==e,u=r&&":"==k[0],v=u?o.filter(k):o,w=n.sortFunction,x="asc"==n.order?1:-1,y=[];a.each(i,function(a,b){b.call(b,n)}),w||(w="rand"==n.order?function(){return Math.random()<.5?1:-1}:function(c,e){var g=d,i=n.cases?c.s:b(c.s),k=n.cases?e.s:b(e.s);if(!n.forceStrings){var l=i&&i.match(h),m=k&&k.match(h);if(l&&m){var o=i.substr(0,i.length-l[0].length),p=k.substr(0,k.length-m[0].length);o==p&&(g=!d,i=f(l[0]),k=f(m[0]))}}var q=x*(i<k?-1:i>k?1:0);return a.each(j,function(a,b){q=b.call(b,g,i,k,q)}),q}),o.each(function(b,c){var d=a(c),e=r?u?v.filter(c):d.find(k):d,f=t?""+e.data(n.data):s?e.attr(n.attr):n.useVal?e.val():e.text(),g=d.parent();q[g]||(q[g]={s:[],n:[]}),e.length>0?q[g].s.push({s:f,e:d,n:b}):q[g].n.push({e:d,n:b})});for(m in q)q[m].s.sort(w);for(m in q){var z,A=q[m],B=[],C=p,D=[0,0];switch(n.place){case"first":a.each(A.s,function(a,b){C=g(C,b.n)});break;case"org":a.each(A.s,function(a,b){B.push(b.n)});break;case"end":C=A.n.length;break;default:C=0}for(z=0;z<p;z++){var E=c(B,z)?!d:z>=C&&z<C+A.s.length,F=(E?A.s:A.n)[D[E?0:1]].e;F.parent().append(F),!E&&n.returns||y.push(F.get(0)),D[E?0:1]++}}return o.length=0,Array.prototype.push.apply(o,y),o}}),a.fn.TinySort=a.fn.Tinysort=a.fn.tsort=a.fn.tinysort}(jQuery)}(this),d()}),$__System.registerDynamic("26d",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(){"undefined"==typeof Math.sgn&&(Math.sgn=function(a){return 0==a?0:a>0?1:-1});var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=64,c=Math.pow(2,-b-1),d=function(b,c){for(var d=[],e=f(b,c),h=c.length-1,i=2*h-1,j=g(e,i,d,0),k=a.subtract(b,c[0]),m=a.square(k),n=0,o=0;j>o;o++){k=a.subtract(b,l(c,h,d[o],null,null));var p=a.square(k);m>p&&(m=p,n=d[o])}return k=a.subtract(b,c[h]),p=a.square(k),m>p&&(m=p,n=1),{location:n,distance:m}},e=function(a,b){var c=d(a,b);return{point:l(b,b.length-1,c.location,null,null),location:c.location}},f=function(b,c){for(var d=c.length-1,e=2*d-1,f=[],g=[],h=[],i=[],k=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],l=0;d>=l;l++)f[l]=a.subtract(c[l],b);for(var l=0;d-1>=l;l++)g[l]=a.subtract(c[l+1],c[l]),g[l]=a.scale(g[l],3);for(var m=0;d-1>=m;m++)for(var n=0;d>=n;n++)h[m]||(h[m]=[]),h[m][n]=a.dotProduct(g[m],f[n]);for(l=0;e>=l;l++)i[l]||(i[l]=[]),i[l].y=0,i[l].x=parseFloat(l)/e;for(var o=d,p=d-1,q=0;o+p>=q;q++){var r=Math.max(0,q-p),s=Math.min(q,o);for(l=r;s>=l;l++)j=q-l,i[l+j].y+=h[j][l]*k[j][l]}return i},g=function(a,c,d,e){var f,j,m=[],n=[],o=[],p=[];switch(h(a,c)){case 0:return 0;case 1:if(e>=b)return d[0]=(a[0].x+a[c].x)/2,1;if(i(a,c))return d[0]=k(a,c),1}l(a,c,.5,m,n),f=g(m,c,o,e+1),j=g(n,c,p,e+1);for(var q=0;f>q;q++)d[q]=o[q];for(var q=0;j>q;q++)d[q+f]=p[q];return f+j},h=function(a,b){var c,d,e=0;c=d=Math.sgn(a[0].y);for(var f=1;b>=f;f++)c=Math.sgn(a[f].y),c!=d&&e++,d=c;return e},i=function(a,b){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;i=a[0].y-a[b].y,j=a[b].x-a[0].x,k=a[0].x*a[b].y-a[b].x*a[0].y;for(var t=max_distance_below=0,u=1;b>u;u++){var v=i*a[u].x+j*a[u].y+k;v>t?t=v:max_distance_below>v&&(max_distance_below=v)}return n=0,o=1,p=0,q=i,r=j,s=k-t,l=n*r-q*o,m=1/l,e=(o*s-r*p)*m,q=i,r=j,s=k-max_distance_below,l=n*r-q*o,m=1/l,f=(o*s-r*p)*m,g=Math.min(e,f),h=Math.max(e,f),d=h-g,c>d?1:0},k=function(a,b){var c=1,d=0,e=a[b].x-a[0].x,f=a[b].y-a[0].y,g=a[0].x-0,h=a[0].y-0,i=e*d-f*c,j=1/i,k=(e*h-f*g)*j;return 0+c*k},l=function(a,b,c,d,e){for(var f=[[]],g=0;b>=g;g++)f[0][g]=a[g];for(var h=1;b>=h;h++)for(var g=0;b-h>=g;g++)f[h]||(f[h]=[]),f[h][g]||(f[h][g]={}),f[h][g].x=(1-c)*f[h-1][g].x+c*f[h-1][g+1].x,f[h][g].y=(1-c)*f[h-1][g].y+c*f[h-1][g+1].y;if(null!=d)for(g=0;b>=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b>=g;g++)e[g]=f[b-g][g];return f[b][0]},m={},n=function(a){var b=m[a];if(!b){b=[];var c=function(){return function(b){return Math.pow(b,a)}},d=function(){return function(b){return Math.pow(1-b,a)}},e=function(a){return function(){return a}},f=function(){return function(a){return a}},g=function(){return function(a){return 1-a}},h=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};b.push(new c);for(var i=1;a>i;i++){for(var j=[new e(a)],k=0;a-i>k;k++)j.push(new f);for(var k=0;i>k;k++)j.push(new g);b.push(new h(j))}b.push(new d),m[a]=b}return b},o=function(a,b){for(var c=n(a.length-1),d=0,e=0,f=0;f<a.length;f++)d+=a[f].x*c[f](b),e+=a[f].y*c[f](b);return{x:d,y:e}},p=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},q=function(a){return a[0].x==a[1].x&&a[0].y==a[1].y},r=function(a,b,c){if(q(a))return{point:a[0],location:b};for(var d=o(a,b),e=0,f=b,g=c>0?1:-1,h=null;e<Math.abs(c);)f+=.005*g,h=o(a,f),e+=p(h,d),d=h;return{point:h,location:f}},s=function(a){if(q(a))return 0;for(var b=o(a,0),c=0,d=0,e=1,f=null;1>d;)d+=.005*e,f=o(a,d),c+=p(f,b),b=f;return c},t=function(a,b,c){return r(a,b,c).point},u=function(a,b,c){return r(a,b,c).location},v=function(a,b){var c=o(a,b),d=o(a.slice(0,a.length-1),b),e=d.y-c.y,f=d.x-c.x;return 0==e?1/0:Math.atan(e/f)},w=function(a,b,c){var d=r(a,b,c);return d.location>1&&(d.location=1),d.location<0&&(d.location=0),v(a,d.location)},x=function(a,b,c,d){d=null==d?0:d;var e=r(a,b,d),f=v(a,e.location),g=Math.atan(-1/f),h=c/2*Math.sin(g),i=c/2*Math.cos(g);return[{x:e.point.x+i,y:e.point.y+h},{x:e.point.x-i,y:e.point.y-h}]};window.jsBezier={distanceFromCurve:d,gradientAtPoint:v,gradientAtPointAlongCurveFrom:w,nearestPointOnCurve:e,pointOnCurve:o,pointAlongCurveFrom:t,perpendicularToCurveAt:x,locationAlongCurveFrom:u,getLength:s}}(),function(){"use strict";var a=this.Biltong={},b=function(a){return"[object Array]"===Object.prototype.toString.call(a)},c=function(a,c,d){return a=b(a)?a:[a.x,a.y],c=b(c)?c:[c.x,c.y],d(a,c)},d=a.gradient=function(a,b){return c(a,b,function(a,b){return b[0]==a[0]?b[1]>a[1]?1/0:-1/0:b[1]==a[1]?b[0]>a[0]?0:-0:(b[1]-a[1])/(b[0]-a[0])})},e=(a.normal=function(a,b){return-1/d(a,b)},a.lineLength=function(a,b){return c(a,b,function(a,b){return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))})},a.quadrant=function(a,b){return c(a,b,function(a,b){return b[0]>a[0]?b[1]>a[1]?2:1:b[0]==a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4})}),f=(a.theta=function(a,b){return c(a,b,function(a,b){var c=d(a,b),f=Math.atan(c),g=e(a,b);return(4==g||3==g)&&(f+=Math.PI),0>f&&(f+=2*Math.PI),f})},a.intersects=function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,i=b.y,j=b.y+b.h;return g>=c&&d>=g&&i>=e&&f>=i||h>=c&&d>=h&&i>=e&&f>=i||g>=c&&d>=g&&j>=e&&f>=j||h>=c&&d>=g&&j>=e&&f>=j||c>=g&&h>=c&&e>=i&&j>=e||d>=g&&h>=d&&e>=i&&j>=e||c>=g&&h>=c&&f>=i&&j>=f||d>=g&&h>=c&&f>=i&&j>=f},a.encloses=function(a,b,c){var d=a.x,e=a.x+a.w,f=a.y,g=a.y+a.h,h=b.x,i=b.x+b.w,j=b.y,k=b.y+b.h,l=function(a,b,d,e){return c?b>=a&&d>=e:b>a&&d>e};return l(d,h,e,i)&&l(f,j,g,k)},[null,[1,-1],[1,1],[-1,1],[-1,-1]]),g=[null,[-1,-1],[-1,1],[1,1],[1,-1]];a.pointOnLine=function(a,b,c){var h=d(a,b),i=e(a,b),j=c>0?f[i]:g[i],k=Math.atan(h),l=Math.abs(c*Math.sin(k))*j[1],m=Math.abs(c*Math.cos(k))*j[0];return{x:a.x+m,y:a.y+l}},a.perpendicularLineTo=function(a,b,c){var e=d(a,b),f=Math.atan(-1/e),g=c/2*Math.sin(f),h=c/2*Math.cos(f);return[{x:b.x+h,y:b.y+g},{x:b.x-h,y:b.y-g}]}}.call(this),function(){"use strict";var a={android:navigator.userAgent.toLowerCase().indexOf("android")>-1},b=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},c=function(a){return"string"==typeof a?document.getElementById(a):a},d=function(a){return a.srcElement||a.target},e=function(a,b){for(var c=0,d=a.length;d>c&&a[c]!=b;c++);c<a.length&&a.splice(c,1)},f=1,g=function(a,b,c){var d=f++;return a.__ta=a.__ta||{},a.__ta[b]=a.__ta[b]||{},a.__ta[b][d]=c,c.__tauid=d,d},h=function(a,b,c){if(a.__ta&&a.__ta[b]&&delete a.__ta[b][c.__tauid],c.__taExtra){for(var d=0;d<c.__taExtra.length;d++)D(a,c.__taExtra[d][0],c.__taExtra[d][1]);c.__taExtra.length=0}c.__taUnstore&&c.__taUnstore()},i=function(a,c,e,f){if(null==a)return e;var g=a.split(","),h=function(a){h.__tauid=e.__tauid;for(var f=d(a),i=0;i<g.length;i++)b(f,g[i],c)&&e.apply(f,arguments)};return j(e,f,h),h},j=function(a,b,c){a.__taExtra=a.__taExtra||[],a.__taExtra.push([b,c])},k=function(a,b,c,d){q&&s[b]?C(a,s[b],i(d,a,c,s[b]),c):C(a,b,i(d,a,c,b),c)},l=function(a,b,c,f){if(null==a.__taSmartClicks){var g=function(b){a.__tad=w(b)},h=function(b){a.__tau=w(b)},i=function(b){if(a.__tad&&a.__tau&&a.__tad[0]===a.__tau[0]&&a.__tad[1]===a.__tau[1])for(var c=0;c<a.__taSmartClicks.length;c++)a.__taSmartClicks[c].apply(d(b),[b])};k(a,"mousedown",g,f),k(a,"mouseup",h,f),k(a,"click",i,f),a.__taSmartClicks=[]}a.__taSmartClicks.push(c),c.__taUnstore=function(){e(a.__taSmartClicks,c)}},m={tap:{touches:1,taps:1},dbltap:{touches:1,taps:2},contextmenu:{touches:2,taps:1}},n=function(a,c){return function(f,g,h,i){if("contextmenu"==g&&r)k(f,g,h,i);else{if(null==f.__taTapHandler){var j=f.__taTapHandler={tap:[],dbltap:[],contextmenu:[],down:!1,taps:0,downSelectors:[]},l=function(d){for(var e=d.srcElement||d.target,g=0;g<j.downSelectors.length;g++)if(null==j.downSelectors[g]||b(e,j.downSelectors[g],f)){j.down=!0,setTimeout(o,a),setTimeout(p,c);break}},n=function(a){if(j.down){var c=a.srcElement||a.target;j.taps++;var e=B(a);for(var g in m){var h=m[g];if(h.touches===e&&(1===h.taps||h.taps===j.taps))for(var i=0;i<j[g].length;i++)(null==j[g][i][1]||b(c,j[g][i][1],f))&&j[g][i][0].apply(d(a),[a])}}},o=function(){j.down=!1},p=function(){j.taps=0};k(f,"mousedown",l),k(f,"mouseup",n)}f.__taTapHandler.downSelectors.push(i),f.__taTapHandler[g].push([h,i]),h.__taUnstore=function(){e(f.__taTapHandler[g],h)}}}},o=function(a,b,c,d){for(var e in c.__tamee[a])c.__tamee[a][e].apply(d,[b])},p=function(){var a=[];return function(c,e,f,h){if(!c.__tamee){c.__tamee={over:!1,mouseenter:[],mouseexit:[]};var j=function(e){var f=d(e);(null==h&&f==c&&!c.__tamee.over||b(f,h,c)&&(null==f.__tamee||!f.__tamee.over))&&(o("mouseenter",e,c,f),f.__tamee=f.__tamee||{},f.__tamee.over=!0,a.push(f))},k=function(e){for(var f=d(e),g=0;g<a.length;g++)f!=a[g]||b(e.relatedTarget||e.toElement,"*",f)||(f.__tamee.over=!1,a.splice(g,1),o("mouseexit",e,c,f))};C(c,"mouseover",i(h,c,j,"mouseover"),j),C(c,"mouseout",i(h,c,k,"mouseout"),k)}f.__taUnstore=function(){delete c.__tamee[e][f.__tauid]},g(c,e,f),c.__tamee[e][f.__tauid]=f}},q="ontouchstart"in document.documentElement,r="onmousedown"in document.documentElement,s={mousedown:"touchstart",mouseup:"touchend",mousemove:"touchmove"},t=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),u=t>-1&&9>t,v=function(a,b){if(null==a)return[0,0];var c=A(a),d=z(c,0);return[d[b+"X"],d[b+"Y"]]},w=function(a){return null==a?[0,0]:u?[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop]:v(a,"page")},x=function(a){return v(a,"screen")},y=function(a){return v(a,"client")},z=function(a,b){return a.item?a.item(b):a[b]},A=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},B=function(a){return A(a).length},C=function(a,b,c,d){if(g(a,b,c),d.__tauid=c.__tauid,a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent){var e=b+c.__tauid;a["e"+e]=c,a[e]=function(){a["e"+e]&&a["e"+e](window.event)},a.attachEvent("on"+b,a[e])}},D=function(a,b,d){null!=d&&E(a,function(){var a=c(this);if(h(a,b,d),null!=d.__tauid)if(a.removeEventListener)a.removeEventListener(b,d,!1);else if(this.detachEvent){var e=b+d.__tauid;a[e]&&a.detachEvent("on"+b,a[e]),a[e]=null,a["e"+e]=null}})},E=function(a,b){if(null!=a){a="string"!=typeof a&&null==a.tagName&&null!=a.length?a:"string"==typeof a?document.querySelectorAll(a):[a];for(var c=0;c<a.length;c++)b.apply(a[c])}};this.Mottle=function(b){b=b||{};var d=b.clickThreshold||150,e=b.dblClickThreshold||350,f=new p,g=new n(d,e),h=b.smartClicks,i=function(a,b,d,e){null!=d&&E(a,function(){var a=c(this);h&&"click"===b?l(a,b,d,e):"tap"===b||"dbltap"===b||"contextmenu"===b?g(a,b,d,e):"mouseenter"===b||"mouseexit"==b?f(a,b,d,e):k(a,b,d,e)})};this.remove=function(a){return E(a,function(){var a=c(this);if(a.__ta)for(var b in a.__ta)for(var d in a.__ta[b])D(a,b,a.__ta[b][d]);a.parentNode&&a.parentNode.removeChild(a)}),this},this.on=function(){var a=arguments[0],b=4==arguments.length?arguments[2]:null,c=arguments[1],d=arguments[arguments.length-1];return i(a,c,d,b),this},this.off=function(a,b,c){return D(a,b,c),this},this.trigger=function(b,d,e,f){var g=q&&s[d]?s[d]:d,h=w(e),i=x(e),j=y(e);return E(b,function(){var b,k=c(this);e=e||{screenX:i[0],screenY:i[1],clientX:j[0],clientY:j[1]};var l=function(a){f&&(a.payload=f)},m={TouchEvent:function(a){var b=document.createTouch(window,k,0,h[0],h[1],i[0],i[1],j[0],j[1],0,0,0,0);a.initTouchEvent(g,!0,!0,window,0,i[0],i[1],j[0],j[1],!1,!1,!1,!1,document.createTouchList(b))},MouseEvents:function(b){if(b.initMouseEvent(g,!0,!0,window,0,i[0],i[1],j[0],j[1],!1,!1,!1,!1,1,k),a.android){var c=document.createTouch(window,k,0,h[0],h[1],i[0],i[1],j[0],j[1],0,0,0,0);b.touches=b.targetTouches=b.changedTouches=document.createTouchList(c)}}};if(document.createEvent){var n=q&&s[d]&&!a.android,o=n?"TouchEvent":"MouseEvents";b=document.createEvent(o),m[o](b),l(b),k.dispatchEvent(b)}else document.createEventObject&&(b=document.createEventObject(),b.eventType=b.eventName=g,b.screenX=i[0],b.screenY=i[1],b.clientX=j[0],b.clientY=j[1],l(b),k.fireEvent("on"+g,b))}),this}},Mottle.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&&a.preventDefault&&a.preventDefault()},Mottle.pageLocation=w}.call(this),function(){var a=function(a){return"[object Array]"===Object.prototype.toString.call(a)},b=function(a){return"[object Number]"===Object.prototype.toString.call(a)},c=function(a){return"string"==typeof a},d=function(a){return"boolean"==typeof a},e=function(a){return null==a},f=function(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)},g=function(a){return"[object Date]"===Object.prototype.toString.call(a)},h=function(a){return"[object Function]"===Object.prototype.toString.call(a)},i=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},j=this,k=j.jsPlumbUtil={isArray:a,isString:c,isBoolean:d,isNull:e,isObject:f,isDate:g,isFunction:h,isEmpty:i,isNumber:b,clone:function(b){if(c(b))return""+b;if(d(b))return!!b;if(g(b))return new Date(b.getTime());if(h(b))return b;if(a(b)){for(var e=[],i=0;i<b.length;i++)e.push(this.clone(b[i]));return e}if(f(b)){var j={};for(var k in b)j[k]=this.clone(b[k]);return j}return b},merge:function(b,e,g){var h,i,j={};for(g=g||[],i=0;i<g.length;i++)j[g[i]]=!0;var k=this.clone(b);for(i in e)if(null==k[i])k[i]=e[i];else if(c(e[i])||d(e[i]))j[i]?(h=[],h.push.apply(h,a(k[i])?k[i]:[k[i]]),h.push.apply(h,a(e[i])?e[i]:[e[i]]),k[i]=h):k[i]=e[i];else if(a(e[i]))h=[],a(k[i])&&h.push.apply(h,k[i]),h.push.apply(h,e[i]),k[i]=h;else if(f(e[i])){f(k[i])||(k[i]={});for(var l in e[i])k[i][l]=e[i][l]}return k},replace:function(a,b,c){if(null!=a){var d=a,e=d;return b.replace(/([^\.])+/g,function(a,b,d,f){var g=a.match(/([^\[0-9]+){1}(\[)([0-9+])/),h=d+a.length>=f.length,i=function(){return e[g[1]]||function(){return e[g[1]]=[],e[g[1]]}()};if(h)g?i()[g[3]]=c:e[a]=c;else if(g){var j=i();e=j[g[3]]||function(){return j[g[3]]={},j[g[3]]}()}else e=e[a]||function(){return e[a]={},e[a]}()}),a}},functionChain:function(a,b,c){for(var d=0;d<c.length;d++){var e=c[d][0][c[d][1]].apply(c[d][0],c[d][2]);if(e===b)return e}return a},populate:function(b,d){var e=function(a){var b=a.match(/(\${.*?})/g);if(null!=b)for(var c=0;c<b.length;c++){var e=d[b[c].substring(2,b[c].length-1)]||"";null!=e&&(a=a.replace(b[c],e))}return a},g=function(b){if(null!=b){if(c(b))return e(b);if(a(b)){for(var d=[],h=0;h<b.length;h++)d.push(g(b[h]));return d}if(f(b)){var i={};for(var j in b)i[j]=g(b[j]);return i}return b}};return g(b)},convertStyle:function(a,b){if("transparent"===a)return a;var c=a,d=function(a){return 1==a.length?"0"+a:a},e=function(a){return d(Number(a).toString(16))},f=/(rgb[a]?\()(.*)(\))/;if(a.match(f)){var g=a.match(f)[2].split(",");c="#"+e(g[0])+e(g[1])+e(g[2]),b||4!=g.length||(c+=e(g[3]))}return c},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},indexOf:function(a,b){return a.indexOf?a.indexOf(b):k.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=k.findWithFunction(a,b);return c>-1&&a.splice(c,1),-1!=c},remove:function(a,b){var c=k.indexOf(a,b);return c>-1&&a.splice(c,1),-1!=c},addWithFunction:function(a,b,c){-1==k.findWithFunction(a,c)&&a.push(b)},addToList:function(a,b,c,d){var e=a[b];return null==e&&(e=[],a[b]=e),e[d?"unshift":"push"](c),e},extend:function(b,c){var d;for(c=a(c)?c:[c],d=0;d<c.length;d++)for(var e in c[d].prototype)c[d].prototype.hasOwnProperty(e)&&(b.prototype[e]=c[d].prototype[e]);var f=function(a,b){return function(){for(d=0;d<c.length;d++)c[d].prototype[a]&&c[d].prototype[a].apply(this,arguments);return b.apply(this,arguments)}},g=function(a){for(var c in a)b.prototype[c]=f(c,a[c])};if(arguments.length>2)for(d=2;d<arguments.length;d++)g(arguments[d]);return b},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})},logEnabled:!0,log:function(){if(k.logEnabled&&"undefined"!=typeof console)try{var a=arguments[arguments.length-1];console.log(a)}catch(a){}},wrap:function(a,b,c){return a=a||function(){},b=b||function(){},function(){var d=null;try{d=b.apply(this,arguments)}catch(a){k.log("jsPlumb function failed : "+a)}if(null==c||d!==c)try{d=a.apply(this,arguments)}catch(a){k.log("wrapped function failed : "+a)}return d}}};k.EventGenerator=function(){var a={},b=!1,c={ready:!0};this.bind=function(b,c,d){return k.addToList(a,b,c,d),this},this.fire=function(d,e,f){if(!b&&a[d]){var g=a[d].length,h=0,i=!1,j=null;if(!this.shouldFireEvent||this.shouldFireEvent(d,e,f))for(;!i&&g>h&&j!==!1;){if(c[d])a[d][h].apply(this,[e,f]);else try{j=a[d][h].apply(this,[e,f])}catch(a){k.log("jsPlumb: fire failed for event "+d+" : "+a)}h++,(null==a||null==a[d])&&(i=!0)}}return this},this.unbind=function(b){return b?delete a[b]:a={},this},this.getListener=function(b){return a[b]},this.setSuspendEvents=function(a){b=a},this.isSuspendEvents=function(){return b},this.cleanupListeners=function(){for(var b in a)a[b]=null}},k.EventGenerator.prototype={cleanup:function(){this.cleanupListeners()}},Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e})}.call(this),function(){"use strict";var a=this,b=a.jsPlumbUtil;b.ieVersion=/MSIE\s([\d.]+)/.test(navigator.userAgent)?new Number(RegExp.$1):-1,b.oldIE=b.ieVersion>-1&&b.ieVersion<9,b.matchesSelector=function(a,b,c){c=c||a.parentNode;for(var d=c.querySelectorAll(b),e=0;e<d.length;e++)if(d[e]===a)return!0;return!1},b.consume=function(a,b){a.stopPropagation?a.stopPropagation():a.returnValue=!1,!b&&a.preventDefault&&a.preventDefault()},b.sizeElement=function(a,b,c,d,e){a&&(a.style.height=e+"px",a.height=e,a.style.width=d+"px",a.width=d,a.style.left=b+"px",a.style.top=c+"px")}}.call(this),function(){var a=this,b=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),c=function(){if(void 0===c.vml){var a=document.body.appendChild(document.createElement("div"));a.innerHTML='<v:shape id="vml_flag1" adj="1" />';var b=a.firstChild;null!=b&&null!=b.style?(b.style.behavior="url(#default#VML)",c.vml=!b||"object"==typeof b.adj):c.vml=!1,a.parentNode.removeChild(a)}return c.vml},d=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=navigator.userAgent,c=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=c.exec(b)&&(a=parseFloat(RegExp.$1))}return a}(),e=d>-1&&9>d,f=function(a,b){if(null==a)return[0,0];var c=k(a),d=j(c,0);return[d[b+"X"],d[b+"Y"]]},g=function(a){return null==a?[0,0]:e?[a.clientX+document.documentElement.scrollLeft,a.clientY+document.documentElement.scrollTop]:f(a,"page")},h=function(a){return f(a,"screen")},i=function(a){return f(a,"client")},j=function(a,b){return a.item?a.item(b):a[b]},k=function(a){return a.touches&&a.touches.length>0?a.touches:a.changedTouches&&a.changedTouches.length>0?a.changedTouches:a.targetTouches&&a.targetTouches.length>0?a.targetTouches:[a]},l=function(a){var b={},c=[],d={},e={},f={};this.register=function(g){var h=a.getId(g),i=jsPlumbAdapter.getOffset(g,a);b[h]||(b[h]=g,c.push(g),d[h]={});var j=function(b){if(b)for(var c=0;c<b.childNodes.length;c++)if(3!=b.childNodes[c].nodeType&&8!=b.childNodes[c].nodeType){var g=jsPlumb.getElementObject(b.childNodes[c]),k=a.getId(b.childNodes[c],null,!0);if(k&&e[k]&&e[k]>0){var l=jsPlumbAdapter.getOffset(g,a);d[h][k]={id:k,offset:{left:l.left-i.left,top:l.top-i.top}},f[k]=h}j(b.childNodes[c])}};j(g)},this.updateOffsets=function(b){if(null!=b){var c=jsPlumb.getDOMElement(b),e=a.getId(c),g=d[e],h=jsPlumbAdapter.getOffset(c,a);if(g)for(var i in g){var j=jsPlumb.getElementObject(i),k=jsPlumbAdapter.getOffset(j,a);d[e][i]={id:i,offset:{left:k.left-h.left,top:k.top-h.top}},f[i]=e}}},this.endpointAdded=function(c,g){g=g||a.getId(c);var h=document.body,i=c.parentNode;for(e[g]=e[g]?e[g]+1:1;null!=i&&i!=h;){var j=a.getId(i,null,!0);if(j&&b[j]){var k=jsPlumbAdapter.getOffset(i,a);if(null==d[j][g]){var l=jsPlumbAdapter.getOffset(c,a);d[j][g]={id:g,offset:{left:l.left-k.left,top:l.top-k.top}},f[g]=j}break}i=i.parentNode}},this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,e[a.elementId]<=0))for(var b in d)d[b]&&(delete d[b][a.elementId],delete f[a.elementId])},this.changeId=function(a,b){d[b]=d[a],d[a]={},f[b]=f[a],f[a]=null},this.getElementsForDraggable=function(a){return d[a]},this.elementRemoved=function(a){var b=f[a];b&&(delete d[b][a],delete f[a])},this.reset=function(){b={},c=[],d={},e={}},this.dragEnded=function(b){var c=a.getId(b),d=f[c];d&&this.updateOffsets(d)},this.setParent=function(b,c,e,g){var h=f[c];if(h){d[g]||(d[g]={}),d[g][c]=d[h][c],delete d[h][c];var i=jsPlumbAdapter.getOffset(e,a),j=jsPlumbAdapter.getOffset(b,a);d[g][c].offset={left:j.left-i.left,top:j.top-i.top},f[c]=g}},this.getDragAncestor=function(b){var c=jsPlumb.getDOMElement(b),d=a.getId(c),e=f[d];return e?jsPlumb.getDOMElement(e):null}};window.console||(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}});var m=function(a){return null==a?null:a.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},n=function(a,b){b=m(b),"undefined"!=typeof a.className.baseVal?a.className.baseVal=b:a.className=b},o=function(a){return"undefined"==typeof a.className.baseVal?a.className:a.className.baseVal},p=function(a,b,c){b=null==b?[]:jsPlumbUtil.isArray(b)?b:b.split(/\s+/),c=null==c?[]:jsPlumbUtil.isArray(c)?c:c.split(/\s+/);var d=o(a),e=d.split(/\s+/),f=function(a,b){for(var c=0;c<b.length;c++)if(a)-1==jsPlumbUtil.indexOf(e,b[c])&&e.push(b[c]);else{var d=jsPlumbUtil.indexOf(e,b[c]);-1!=d&&e.splice(d,1)}};f(!0,b),f(!1,c),n(a,e.join(" "))},q=function(a,b){if(null!=a)if("string"==typeof a)b(jsPlumb.getDOMElement(a));else if(null!=a.length)for(var c=0;c<a.length;c++)b(jsPlumb.getDOMElement(a[c]));else b(a)};window.jsPlumbAdapter={headless:!1,pageLocation:g,screenLocation:h,clientLocation:i,getAttribute:function(a,b){return a.getAttribute(b)},setAttribute:function(a,b,c){a.setAttribute(b,c)},appendToRoot:function(a){document.body.appendChild(a)},getRenderModes:function(){return["svg","vml"]},isRenderModeAvailable:function(a){return{svg:b,vml:c()}[a]},getDragManager:function(a){return new l(a)},setRenderMode:function(a){var b;if(a){a=a.toLowerCase();var c=this.isRenderModeAvailable("svg"),d=this.isRenderModeAvailable("vml");"svg"===a&&c?b="svg":d&&(b="vml")}return b},addClass:function(a,b){q(a,function(a){p(a,b)})},hasClass:function(a,b){return a=jsPlumb.getDOMElement(a),a.classList?a.classList.contains(b):-1!=o(a).indexOf(b)},removeClass:function(a,b){q(a,function(a){p(a,null,b)})},updateClasses:function(a,b,c){q(a,function(a){p(a,b,c)})},setClass:function(a,b){q(a,function(a){n(a,b)})},setPosition:function(a,b){a.style.left=b.left+"px",a.style.top=b.top+"px"},getPosition:function(a){var b=function(b){var c=a.style[b];return c?c.substring(0,c.length-2):0};return{left:b("left"),top:b("top")}},getOffset:function(a,b,c){a=jsPlumb.getDOMElement(a);for(var d=b.getContainer(),e=a.offsetLeft,f=a.offsetTop,g=c||null!=d&&a.offsetParent!=d?a.offsetParent:null;null!=g;)e+=g.offsetLeft,f+=g.offsetTop,g=c?g.offsetParent:g.offsetParent==d?null:g.offsetParent;return{left:e,top:f}},getPositionOnElement:function(a,b,c){var d="undefined"!=typeof b.getBoundingClientRect?b.getBoundingClientRect():{left:0,top:0,width:0,height:0},e=document.body,f=document.documentElement,g=(b.offsetParent,window.pageYOffset||f.scrollTop||e.scrollTop),h=window.pageXOffset||f.scrollLeft||e.scrollLeft,i=f.clientTop||e.clientTop||0,j=f.clientLeft||e.clientLeft||0,k=0,l=0,m=d.top+g-i+k*c,n=d.left+h-j+l*c,o=jsPlumbAdapter.pageLocation(a),p=d.width||b.offsetWidth*c,q=d.height||b.offsetHeight*c,r=(o[0]-n)/p,s=(o[1]-m)/q;return[r,s]},getAbsolutePosition:function(a){var b=function(b){var c=a.style[b];return c?parseFloat(c.substring(0,c.length-2)):void 0};return[b("left"),b("top")]},setAbsolutePosition:function(b,c,d,e){d?a.jsPlumb.animate(b,{left:"+="+(c[0]-d[0]),top:"+="+(c[1]-d[1])},e):(b.style.left=c[0]+"px",b.style.top=c[1]+"px")}}}.call(this),function(){"use strict";var a=jsPlumbUtil,b=function(a,b,c){return jsPlumbAdapter.getOffset(a,b,c)},c=function(){return""+(new Date).getTime()},d=function(a){if(a._jsPlumb.paintStyle&&a._jsPlumb.hoverPaintStyle){var b={};t.extend(b,a._jsPlumb.paintStyle),t.extend(b,a._jsPlumb.hoverPaintStyle),delete a._jsPlumb.hoverPaintStyle,b.gradient&&a._jsPlumb.paintStyle.fillStyle&&delete b.gradient,a._jsPlumb.hoverPaintStyle=b}},e=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","contextmenu"],f=function(a,b,c,d){var e=a.getAttachedElements();if(e)for(var f=0,g=e.length;g>f;f++)d&&d==e[f]||e[f].setHover(b,!0,c)},g=function(a){return null==a?null:a.split(" ")},h=function(b,c,d){if(b.getDefaultType){for(var e=b.getTypeDescriptor(),f=a.merge({},b.getDefaultType()),g=0,h=b._jsPlumb.types.length;h>g;g++)f=a.merge(f,b._jsPlumb.instance.getType(b._jsPlumb.types[g],e),["cssClass"]);c&&(f=a.populate(f,c)),b.applyType(f,d),d||b.repaint()}},i=window.jsPlumbUIComponent=function(b){jsPlumbUtil.EventGenerator.apply(this,arguments);var c=this,d=arguments,e=c.idPrefix,f=e+(new Date).getTime();if(this._jsPlumb={instance:b._jsPlumb,parameters:b.parameters||{},paintStyle:null,hoverPaintStyle:null,paintStyleInUse:null,hover:!1,beforeDetach:b.beforeDetach,beforeDrop:b.beforeDrop,overlayPlacements:[],hoverClass:b.hoverClass||b._jsPlumb.Defaults.HoverClass,types:[]},this.getId=function(){return f},b.events)for(var g in b.events)c.bind(g,b.events[g]);this.clone=function(){var a={};return this.constructor.apply(a,d),a}.bind(this),this.isDetachAllowed=function(b){var c=!0;if(this._jsPlumb.beforeDetach)try{c=this._jsPlumb.beforeDetach(b)}catch(b){a.log("jsPlumb: beforeDetach callback failed",b)}return c},this.isDropAllowed=function(b,c,d,e,f,g,h){var i=this._jsPlumb.instance.checkCondition("beforeDrop",{sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f,source:g,target:h});if(this._jsPlumb.beforeDrop)try{i=this._jsPlumb.beforeDrop({sourceId:b,targetId:c,scope:d,connection:e,dropEndpoint:f,source:g,target:h})}catch(b){a.log("jsPlumb: beforeDrop callback failed",b)}return i};var h=[];this.setListenerComponent=function(a){for(var b=0;b<h.length;b++)h[b][3]=a}},j=function(a,b){var c=a._jsPlumb.types[b],d=a._jsPlumb.instance.getType(c,a.getTypeDescriptor());null!=d&&d.cssClass&&a.canvas&&a._jsPlumb.instance.removeClass(a.canvas,d.cssClass)};jsPlumbUtil.extend(i,jsPlumbUtil.EventGenerator,{getParameter:function(a){return this._jsPlumb.parameters[a]},setParameter:function(a,b){this._jsPlumb.parameters[a]=b},getParameters:function(){return this._jsPlumb.parameters},setParameters:function(a){this._jsPlumb.parameters=a},addClass:function(a){jsPlumbAdapter.addClass(this.canvas,a)},removeClass:function(a){jsPlumbAdapter.removeClass(this.canvas,a)},updateClasses:function(a,b){jsPlumbAdapter.updateClasses(this.canvas,a,b)},setType:function(a,b,c){this.clearTypes(),this._jsPlumb.types=g(a)||[],h(this,b,c)},getType:function(){return this._jsPlumb.types},reapplyTypes:function(a,b){h(this,a,b)},hasType:function(a){return-1!=jsPlumbUtil.indexOf(this._jsPlumb.types,a)},addType:function(a,b,c){var d=g(a),e=!1;if(null!=d){for(var f=0,i=d.length;i>f;f++)this.hasType(d[f])||(this._jsPlumb.types.push(d[f]),e=!0);e&&h(this,b,c)}},removeType:function(b,c){var d=g(b),e=!1,f=function(b){var c=a.indexOf(this._jsPlumb.types,b);return-1!=c&&(j(this,c),this._jsPlumb.types.splice(c,1),!0)}.bind(this);if(null!=d){for(var i=0,k=d.length;k>i;i++)e=f(d[i])||e;e&&h(this,null,c)}},clearTypes:function(a){for(var b=this._jsPlumb.types.length,c=0;b>c;c++)j(this,0),this._jsPlumb.types.splice(0,1);h(this,{},a)},toggleType:function(a,b,c){var d=g(a);if(null!=d){for(var e=0,f=d.length;f>e;e++){var i=jsPlumbUtil.indexOf(this._jsPlumb.types,d[e]);-1!=i?(j(this,i),this._jsPlumb.types.splice(i,1)):this._jsPlumb.types.push(d[e])}h(this,b,c)}},applyType:function(a,b){if(this.setPaintStyle(a.paintStyle,b),this.setHoverPaintStyle(a.hoverPaintStyle,b),a.parameters)for(var c in a.parameters)this.setParameter(c,a.parameters[c])},setPaintStyle:function(a,b){this._jsPlumb.paintStyle=a,this._jsPlumb.paintStyleInUse=this._jsPlumb.paintStyle,d(this),b||this.repaint()},getPaintStyle:function(){return this._jsPlumb.paintStyle},setHoverPaintStyle:function(a,b){this._jsPlumb.hoverPaintStyle=a,d(this),b||this.repaint()},getHoverPaintStyle:function(){return this._jsPlumb.hoverPaintStyle},destroy:function(){this.cleanupListeners(),this.clone=null,this._jsPlumb=null},isHover:function(){return this._jsPlumb.hover},setHover:function(a,b,d){if(this._jsPlumb&&!this._jsPlumb.instance.currentlyDragging&&!this._jsPlumb.instance.isHoverSuspended()){if(this._jsPlumb.hover=a,null!=this.canvas){if(null!=this._jsPlumb.instance.hoverClass){var e=a?"addClass":"removeClass";
this._jsPlumb.instance[e](this.canvas,this._jsPlumb.instance.hoverClass)}null!=this._jsPlumb.hoverClass&&this._jsPlumb.instance[e](this.canvas,this._jsPlumb.hoverClass)}null!=this._jsPlumb.hoverPaintStyle&&(this._jsPlumb.paintStyleInUse=a?this._jsPlumb.hoverPaintStyle:this._jsPlumb.paintStyle,this._jsPlumb.instance.isSuspendDrawing()||(d=d||c(),this.repaint({timestamp:d,recalc:!1}))),this.getAttachedElements&&!b&&f(this,a,c(),this)}}});var k="__label",l=function(a,b){for(var c=-1,d=0,e=a._jsPlumb.overlays.length;e>d;d++)if(b===a._jsPlumb.overlays[d].id){c=d;break}return c},m=function(a,b){var c={cssClass:b.cssClass,labelStyle:a.labelStyle,id:k,component:a,_jsPlumb:a._jsPlumb.instance},d=t.extend(c,b);return new(t.Overlays[a._jsPlumb.instance.getRenderMode()].Label)(d)},n=function(b,c){var d=null;if(a.isArray(c)){var e=c[0],f=t.extend({component:b,_jsPlumb:b._jsPlumb.instance},c[1]);3==c.length&&t.extend(f,c[2]),d=new(t.Overlays[b._jsPlumb.instance.getRenderMode()][e])(f)}else d=c.constructor==String?new(t.Overlays[b._jsPlumb.instance.getRenderMode()][c])({component:b,_jsPlumb:b._jsPlumb.instance}):c;b._jsPlumb.overlays.push(d)},o=function(a,b){var c=a.defaultOverlayKeys||[],d=b.overlays,e=function(b){return a._jsPlumb.instance.Defaults[b]||t.Defaults[b]||[]};d||(d=[]);for(var f=0,g=c.length;g>f;f++)d.unshift.apply(d,e(c[f]));return d},p=window.OverlayCapableJsPlumbUIComponent=function(a){i.apply(this,arguments),this._jsPlumb.overlays=[];var b=o(this,a);if(b)for(var c=0,d=b.length;d>c;c++)n(this,b[c]);if(a.label){var e=a.labelLocation||this.defaultLabelLocation||.5,f=a.labelStyle||this._jsPlumb.instance.Defaults.LabelStyle;this._jsPlumb.overlays.push(m(this,{label:a.label,location:e,labelStyle:f}))}this.setListenerComponent=function(a){if(this._jsPlumb)for(var b=0;b<this._jsPlumb.overlays.length;b++)this._jsPlumb.overlays[b].setListenerComponent(a)}};jsPlumbUtil.extend(p,i,{applyType:function(a,b){if(this.removeAllOverlays(b),a.overlays)for(var c=0,d=a.overlays.length;d>c;c++)this.addOverlay(a.overlays[c],!0)},setHover:function(a){if(this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged())for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b][a?"addClass":"removeClass"](this._jsPlumb.instance.hoverClass)},addOverlay:function(a,b){n(this,a),b||this.repaint()},getOverlay:function(a){var b=l(this,a);return b>=0?this._jsPlumb.overlays[b]:null},getOverlays:function(){return this._jsPlumb.overlays},hideOverlay:function(a){var b=this.getOverlay(a);b&&b.hide()},hideOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].hide()},showOverlay:function(a){var b=this.getOverlay(a);b&&b.show()},showOverlays:function(){for(var a=0,b=this._jsPlumb.overlays.length;b>a;a++)this._jsPlumb.overlays[a].show()},removeAllOverlays:function(a){for(var b=0,c=this._jsPlumb.overlays.length;c>b;b++)this._jsPlumb.overlays[b].cleanup&&this._jsPlumb.overlays[b].cleanup();this._jsPlumb.overlays.splice(0,this._jsPlumb.overlays.length),this._jsPlumb.overlayPositions=null,a||this.repaint()},removeOverlay:function(a){var b=l(this,a);if(-1!=b){var c=this._jsPlumb.overlays[b];c.cleanup&&c.cleanup(),this._jsPlumb.overlays.splice(b,1),this._jsPlumb.overlayPositions&&delete this._jsPlumb.overlayPositions[a]}},removeOverlays:function(){for(var a=0,b=arguments.length;b>a;a++)this.removeOverlay(arguments[a])},moveParent:function(a){this.bgCanvas&&(this.bgCanvas.parentNode.removeChild(this.bgCanvas),a.appendChild(this.bgCanvas)),this.canvas.parentNode.removeChild(this.canvas),a.appendChild(this.canvas);for(var b=0;b<this._jsPlumb.overlays.length;b++)this._jsPlumb.overlays[b].isAppendedAtTopLevel&&(this._jsPlumb.overlays[b].canvas.parentNode.removeChild(this._jsPlumb.overlays[b].canvas),a.appendChild(this._jsPlumb.overlays[b].canvas))},getLabel:function(){var a=this.getOverlay(k);return null!=a?a.getLabel():null},getLabelOverlay:function(){return this.getOverlay(k)},setLabel:function(a){var b=this.getOverlay(k);if(b)a.constructor==String||a.constructor==Function?b.setLabel(a):(a.label&&b.setLabel(a.label),a.location&&b.setLocation(a.location));else{var c=a.constructor==String||a.constructor==Function?{label:a}:a;b=m(this,c),this._jsPlumb.overlays.push(b)}this._jsPlumb.instance.isSuspendDrawing()||this.repaint()},cleanup:function(){for(var a=0;a<this._jsPlumb.overlays.length;a++)this._jsPlumb.overlays[a].cleanup(),this._jsPlumb.overlays[a].destroy();this._jsPlumb.overlays.length=0,this._jsPlumb.overlayPositions=null},setVisible:function(a){this[a?"showOverlays":"hideOverlays"]()},setAbsoluteOverlayPosition:function(a,b){this._jsPlumb.overlayPositions=this._jsPlumb.overlayPositions||{},this._jsPlumb.overlayPositions[a.id]=b},getAbsoluteOverlayPosition:function(a){return this._jsPlumb.overlayPositions?this._jsPlumb.overlayPositions[a.id]:null}});var q=0,r=function(){var a=q+1;return q++,a},s=window.jsPlumbInstance=function(d){this.Defaults={Anchor:"Bottom",Anchors:[null,null],ConnectionsDetachable:!0,ConnectionOverlays:[],Connector:"Bezier",Container:null,DoNotThrowErrors:!1,DragOptions:{},DropOptions:{},Endpoint:"Dot",EndpointOverlays:[],Endpoints:[null,null],EndpointStyle:{fillStyle:"#456"},EndpointStyles:[null,null],EndpointHoverStyle:null,EndpointHoverStyles:[null,null],HoverPaintStyle:null,LabelStyle:{color:"black"},LogEnabled:!1,Overlays:[],MaxConnections:1,PaintStyle:{lineWidth:4,strokeStyle:"#456"},ReattachConnections:!1,RenderMode:"svg",Scope:"jsPlumb_DefaultScope"},d&&t.extend(this.Defaults,d),this.logEnabled=this.Defaults.LogEnabled,this._connectionTypes={},this._endpointTypes={},jsPlumbUtil.EventGenerator.apply(this);var f=this,g=r(),h=f.bind,j={},k=1,l=function(a){var b=f.getDOMElement(a);return{el:b,id:jsPlumbUtil.isString(a)&&null==b?a:X(b)}};this.getInstanceIndex=function(){return g},this.setZoom=function(a,b){return jsPlumbUtil.oldIE||(k=a,f.fire("zoom",k),b&&f.repaintEverything()),!jsPlumbUtil.oldIE},this.getZoom=function(){return k};for(var m in this.Defaults)j[m]=this.Defaults[m];var n;this.setContainer=function(a){a=this.getDOMElement(a),this.select().each(function(b){b.moveParent(a)}),this.selectEndpoints().each(function(b){b.moveParent(a)}),n=a;for(var b=function(a,b){var c=b.srcElement||b.target,d=(c&&c.parentNode?c.parentNode._jsPlumb:null)||(c?c._jsPlumb:null)||(c&&c.parentNode&&c.parentNode.parentNode?c.parentNode.parentNode._jsPlumb:null);d&&(d.fire(a,d,b),f.fire(a,d,b))},c=function(a){f.on(n,a,"._jsPlumb_connector, ._jsPlumb_connector > *",function(c){b(a,c)}),f.on(n,a,"._jsPlumb_endpoint, ._jsPlumb_endpoint > *, ._jsPlumb_endpoint svg *",function(c){b(a,c)}),f.on(n,a,"._jsPlumb_overlay, ._jsPlumb_overlay *",function(c){b(a,c)})},d=0;d<e.length;d++)c(e[d])},this.getContainer=function(){return n},this.bind=function(a,b){"ready"===a&&p?b():h.apply(f,[a,b])},f.importDefaults=function(a){for(var b in a)f.Defaults[b]=a[b];return a.Container&&f.setContainer(a.Container),f},f.restoreDefaults=function(){return f.Defaults=t.extend({},j),f};var o=null,p=!1,q=[],s={},u={},v={},w={},x={},y={},z=!1,A=[],B=!1,C=null,D=this.Defaults.Scope,E=null,F=1,G=function(){return""+F++},H=function(a,b){n?n.appendChild(a):b?this.getDOMElement(b).appendChild(a):this.appendToRoot(a)}.bind(this),I=function(a,b,d,e){if(!jsPlumbAdapter.headless&&!B){var g=X(a),h=f.dragManager.getElementsForDraggable(g);null==d&&(d=c());var i=ta({elId:g,offset:b,recalc:!1,timestamp:d});if(h)for(var j in h)ta({elId:h[j].id,offset:{left:i.o.left+h[j].offset.left,top:i.o.top+h[j].offset.top},recalc:!1,timestamp:d});if(f.anchorManager.redraw(g,b,d,null,e),h)for(var k in h)f.anchorManager.redraw(h[k].id,b,d,h[k].offset,e,!0)}},J=function(b,c){var d,e,g,h=null;if(a.isArray(b)){h=[];for(var i=0,j=b.length;j>i;i++)d=f.getElementObject(b[i]),g=f.getDOMElement(d),e=f.getAttribute(g,"id"),h.push(c.apply(f,[g,e]))}else d=f.getDOMElement(b),e=f.getId(d),h=c.apply(f,[d,e]);return h},K=function(a){return u[a]},L=function(b,c,d,e){if(!jsPlumbAdapter.headless){var g=null!=c&&c;if(g&&t.isDragSupported(b,f)&&!t.isAlreadyDraggable(b,f)){var h=d||f.Defaults.DragOptions;h=t.extend({},h);var i=t.dragEvents.drag,j=t.dragEvents.stop,k=t.dragEvents.start,l=f.getDOMElement(b),m=f.dragManager.getDragAncestor(l),n={left:0,top:0},o=n,p=!1;ra(e,b),h[k]=a.wrap(h[k],function(){return o=null!=m?jsPlumbAdapter.getOffset(m,f):n,f.setHoverSuspended(!0),f.select({source:b}).addClass(f.elementDraggingClass+" "+f.sourceElementDraggingClass,!0),f.select({target:b}).addClass(f.elementDraggingClass+" "+f.targetElementDraggingClass,!0),f.setConnectionBeingDragged(!0),h.canDrag?d.canDrag():void 0},!1),h[i]=a.wrap(h[i],function(){var a=f.getUIPosition(arguments,f.getZoom());a.left+=o.left,a.top+=o.top,I(b,a,null,!0),p&&f.addClass(b,"jsPlumb_dragged"),p=!0}),h[j]=a.wrap(h[j],function(){var a=f.getUIPosition(arguments,f.getZoom(),!0);I(b,a),p=!1,f.removeClass(b,"jsPlumb_dragged"),f.setHoverSuspended(!1),f.select({source:b}).removeClass(f.elementDraggingClass+" "+f.sourceElementDraggingClass,!0),f.select({target:b}).removeClass(f.elementDraggingClass+" "+f.targetElementDraggingClass,!0),f.setConnectionBeingDragged(!1),f.dragManager.dragEnded(b)});var q=X(b);y[q]=!0;var r=y[q];h.disabled=null!=r&&!r,f.initDraggable(b,h),f.dragManager.register(b)}}},M=function(a,b){for(var c=a.scope.split(/\s/),d=b.scope.split(/\s/),e=0;e<c.length;e++)for(var f=0;f<d.length;f++)if(d[f]==c[e])return!0;return!1},N=function(b,c){var d=t.extend({},b);if(c&&t.extend(d,c),d.source&&(d.source.endpoint?d.sourceEndpoint=d.source:d.source=f.getDOMElement(d.source)),d.target&&(d.target.endpoint?d.targetEndpoint=d.target:d.target=f.getDOMElement(d.target)),b.uuids&&(d.sourceEndpoint=K(b.uuids[0]),d.targetEndpoint=K(b.uuids[1])),d.sourceEndpoint&&d.sourceEndpoint.isFull())return void a.log(f,"could not add connection; source endpoint is full");if(d.targetEndpoint&&d.targetEndpoint.isFull())return void a.log(f,"could not add connection; target endpoint is full");if(!d.type&&d.sourceEndpoint&&(d.type=d.sourceEndpoint.connectionType),d.sourceEndpoint&&d.sourceEndpoint.connectorOverlays){d.overlays=d.overlays||[];for(var e=0,g=d.sourceEndpoint.connectorOverlays.length;g>e;e++)d.overlays.push(d.sourceEndpoint.connectorOverlays[e])}!d["pointer-events"]&&d.sourceEndpoint&&d.sourceEndpoint.connectorPointerEvents&&(d["pointer-events"]=d.sourceEndpoint.connectorPointerEvents);var h=function(a,b){var c=t.extend({},a);for(var d in b)b[d]&&(c[d]=b[d]);return c},i=function(a,b,c){return f.addEndpoint(a,h(b,{anchor:d.anchors?d.anchors[c]:d.anchor,endpoint:d.endpoints?d.endpoints[c]:d.endpoint,paintStyle:d.endpointStyles?d.endpointStyles[c]:d.endpointStyle,hoverPaintStyle:d.endpointHoverStyles?d.endpointHoverStyles[c]:d.endpointHoverStyle}))},j=function(a,b,c){if(d[a]&&!d[a].endpoint&&!d[a+"Endpoint"]&&!d.newConnection){var e=X(d[a]),f=c[e];if(f){if(!f.enabled)return!1;var g=null!=f.endpoint&&f.endpoint._jsPlumb?f.endpoint:i(d[a],f.def,b);if(f.uniqueEndpoint&&(f.endpoint=g),g.isFull())return!1;d[a+"Endpoint"]=g,g._doNotDeleteOnDetach=!1,g._deleteOnDetach=!0}}};return j("source",0,this.sourceEndpointDefinitions)!==!1&&j("target",1,this.targetEndpointDefinitions)!==!1?(d.sourceEndpoint&&d.targetEndpoint&&(M(d.sourceEndpoint,d.targetEndpoint)||(d=null)),d):void 0}.bind(f),O=function(a){var b=f.Defaults.ConnectionType||f.getDefaultConnectionType();a._jsPlumb=f,a.newConnection=O,a.newEndpoint=Q,a.endpointsByUUID=u,a.endpointsByElement=s,a.finaliseConnection=P;var c=new b(a);return c.id="con_"+G(),c.isDetachable()&&(c.endpoints[0].initDraggable(),c.endpoints[1].initDraggable()),c},P=f.finaliseConnection=function(a,b,c,d){if(b=b||{},a.suspendedEndpoint||q.push(a),a.endpoints[0].isTemporarySource=!1,(null==a.suspendedEndpoint||d)&&f.anchorManager.newConnection(a),I(a.source),!b.doNotFireConnectionEvent&&b.fireEvent!==!1){var e={connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]};f.fire("connection",e,c)}},Q=function(a,b){var c=f.Defaults.EndpointType||t.Endpoint,d=t.extend({},a);d._jsPlumb=f,d.newConnection=O,d.newEndpoint=Q,d.endpointsByUUID=u,d.endpointsByElement=s,d.fireDetachEvent=$,d.elementId=b||X(d.source);var e=new c(d);return e.id="ep_"+G(),ra(d.elementId,d.source),jsPlumbAdapter.headless||f.dragManager.endpointAdded(d.source,b),e},R=function(a,b,c){var d=s[a];if(d&&d.length)for(var e=0,f=d.length;f>e;e++){for(var g=0,h=d[e].connections.length;h>g;g++){var i=b(d[e].connections[g]);if(i)return}c&&c(d[e])}},S=function(a,b){return J(a,function(a,c){y[c]=b,this.isDragSupported(a)&&this.setElementDraggable(a,b)})},T=function(a,b,c){b="block"===b;var d=null;c&&(d=b?function(a){a.setVisible(!0,!0,!0)}:function(a){a.setVisible(!1,!0,!0)});var e=l(a);R(e.id,function(a){if(b&&c){var d=a.sourceId===e.id?1:0;a.endpoints[d].isVisible()&&a.setVisible(!0)}else a.setVisible(b)},d)},U=function(a){return J(a,function(a,b){var c=null!=y[b]&&y[b];return c=!c,y[b]=c,this.setDraggable(a,c),c}.bind(this))},V=function(a,b){var c=null;b&&(c=function(a){var b=a.isVisible();a.setVisible(!b)}),R(a,function(a){var b=a.isVisible();a.setVisible(!b)},c)},W=function(a){var b=w[a];return b?{o:b,s:A[a]}:ta({elId:a})},X=function(a,b,c){if(jsPlumbUtil.isString(a))return a;if(null==a)return null;var d=f.getAttribute(a,"id");return d&&"undefined"!==d||(2==arguments.length&&void 0!==arguments[1]?d=b:(1==arguments.length||3==arguments.length&&!arguments[2])&&(d="jsPlumb_"+g+"_"+G()),c||f.setAttribute(a,"id",d)),d};this.setConnectionBeingDragged=function(a){z=a},this.isConnectionBeingDragged=function(){return z},this.connectorClass="_jsPlumb_connector",this.hoverClass="_jsPlumb_hover",this.endpointClass="_jsPlumb_endpoint",this.endpointConnectedClass="_jsPlumb_endpoint_connected",this.endpointFullClass="_jsPlumb_endpoint_full",this.endpointDropAllowedClass="_jsPlumb_endpoint_drop_allowed",this.endpointDropForbiddenClass="_jsPlumb_endpoint_drop_forbidden",this.overlayClass="_jsPlumb_overlay",this.draggingClass="_jsPlumb_dragging",this.elementDraggingClass="_jsPlumb_element_dragging",this.sourceElementDraggingClass="_jsPlumb_source_element_dragging",this.targetElementDraggingClass="_jsPlumb_target_element_dragging",this.endpointAnchorClassPrefix="_jsPlumb_endpoint_anchor",this.hoverSourceClass="_jsPlumb_source_hover",this.hoverTargetClass="_jsPlumb_target_hover",this.dragSelectClass="_jsPlumb_drag_select",this.Anchors={},this.Connectors={svg:{},vml:{}},this.Endpoints={svg:{},vml:{}},this.Overlays={svg:{},vml:{}},this.ConnectorRenderers={},this.SVG="svg",this.VML="vml",this.addEndpoint=function(b,c,d){d=d||{};var e=t.extend({},d);t.extend(e,c),e.endpoint=e.endpoint||f.Defaults.Endpoint,e.paintStyle=e.paintStyle||f.Defaults.EndpointStyle;for(var g=[],h=a.isArray(b)||null!=b.length&&!a.isString(b)?b:[b],i=0,j=h.length;j>i;i++){e.source=f.getDOMElement(h[i]),pa(e.source);var k=X(e.source),l=Q(e,k),m=ra(k,e.source).info.o;a.addToList(s,k,l),B||l.paint({anchorLoc:l.anchor.compute({xy:[m.left,m.top],wh:A[k],element:l,timestamp:C}),timestamp:C}),g.push(l),l._doNotDeleteOnDetach=!0}return 1==g.length?g[0]:g},this.addEndpoints=function(b,c,d){for(var e=[],g=0,h=c.length;h>g;g++){var i=f.addEndpoint(b,c[g],d);a.isArray(i)?Array.prototype.push.apply(e,i):e.push(i)}return e},this.animate=function(b,c,d){d=d||{};var e=f.getElementObject(b),g=f.getDOMElement(b),h=X(g),i=t.animEvents.step,j=t.animEvents.complete;d[i]=a.wrap(d[i],function(){f.revalidate(h)}),d[j]=a.wrap(d[j],function(){f.revalidate(h)}),f.doAnimate(e,c,d)},this.checkCondition=function(b,c){var d=f.getListener(b),e=!0;if(d&&d.length>0)try{for(var g=0,h=d.length;h>g;g++)e=e&&d[g](c)}catch(c){a.log(f,"cannot check condition ["+b+"]"+c)}return e},this.connect=function(a,b){var c,d=N(a,b);if(d){if(null==d.source&&null==d.sourceEndpoint)return void jsPlumbUtil.log("Cannot establish connection - source does not exist");if(null==d.target&&null==d.targetEndpoint)return void jsPlumbUtil.log("Cannot establish connection - target does not exist");pa(d.source),c=O(d),P(c,d)}return c};var Y=[{el:"source",elId:"sourceId",epDefs:"sourceEndpointDefinitions"},{el:"target",elId:"targetId",epDefs:"targetEndpointDefinitions"}],Z=function(a,b,c,d){var e,f,g,h=Y[c],i=a[h.elId],j=(a[h.el],a.endpoints[c]),k={index:c,originalSourceId:0===c?i:a.sourceId,newSourceId:a.sourceId,originalTargetId:1==c?i:a.targetId,newTargetId:a.targetId,connection:a};if(b.constructor==t.Endpoint)e=b,e.addConnection(a);else if(f=X(b),g=this[h.epDefs][f],f===a[h.elId])e=null;else if(g){if(!g.enabled)return;e=null!=g.endpoint&&g.endpoint._jsPlumb?g.endpoint:this.addEndpoint(b,g.def),g.uniqueEndpoint&&(g.endpoint=e),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0,e.addConnection(a)}else e=a.makeEndpoint(0===c,b,f),e._doNotDeleteOnDetach=!1,e._deleteOnDetach=!0;return null!=e&&(j.detachFromConnection(a),a.endpoints[c]=e,a[h.el]=e.element,a[h.elId]=e.elementId,k[0===c?"newSourceId":"newTargetId"]=e.elementId,_(k),d||a.repaint()),k}.bind(this);this.setSource=function(a,b,c){var d=Z(a,b,0,c);this.anchorManager.sourceChanged(d.originalSourceId,d.newSourceId,a)},this.setTarget=function(a,b,c){var d=Z(a,b,1,c);this.anchorManager.updateOtherEndpoint(d.originalSourceId,d.originalTargetId,d.newTargetId,a)},this.deleteEndpoint=function(a,b){var c="string"==typeof a?u[a]:a;return c&&f.deleteObject({endpoint:c,dontUpdateHover:b}),f},this.deleteEveryEndpoint=function(){var a=f.setSuspendDrawing(!0);for(var b in s){var c=s[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)f.deleteEndpoint(c[d],!0)}return s={},v={},u={},f.anchorManager.reset(),f.dragManager.reset(),a||f.setSuspendDrawing(!1),f};var $=function(a,b,c){var d=f.Defaults.ConnectionType||f.getDefaultConnectionType(),e=a.constructor==d,g=e?{connection:a,source:a.source,target:a.target,sourceId:a.sourceId,targetId:a.targetId,sourceEndpoint:a.endpoints[0],targetEndpoint:a.endpoints[1]}:a;b&&f.fire("connectionDetached",g,c),f.anchorManager.connectionDetached(g)},_=f.fireMoveEvent=function(a,b){f.fire("connectionMoved",a,b)};this.unregisterEndpoint=function(a){a._jsPlumb.uuid&&(u[a._jsPlumb.uuid]=null),f.anchorManager.deleteEndpoint(a);for(var b in s){var c=s[b];if(c){for(var d=[],e=0,g=c.length;g>e;e++)c[e]!=a&&d.push(c[e]);s[b]=d}s[b].length<1&&delete s[b]}},this.detach=function(){if(0!==arguments.length){var a=f.Defaults.ConnectionType||f.getDefaultConnectionType(),b=arguments[0].constructor==a,c=2==arguments.length&&b?arguments[1]||{}:arguments[0],d=c.fireEvent!==!1,e=c.forceDetach,g=b?arguments[0]:c.connection;if(g)(e||jsPlumbUtil.functionChain(!0,!1,[[g.endpoints[0],"isDetachAllowed",[g]],[g.endpoints[1],"isDetachAllowed",[g]],[g,"isDetachAllowed",[g]],[f,"checkCondition",["beforeDetach",g]]]))&&g.endpoints[0].detach(g,!1,!0,d);else{var h=t.extend({},c);if(h.uuids)K(h.uuids[0]).detachFrom(K(h.uuids[1]),d);else if(h.sourceEndpoint&&h.targetEndpoint)h.sourceEndpoint.detachFrom(h.targetEndpoint);else{var i=X(f.getDOMElement(h.source)),j=X(f.getDOMElement(h.target));R(i,function(a){(a.sourceId==i&&a.targetId==j||a.targetId==i&&a.sourceId==j)&&f.checkCondition("beforeDetach",a)&&a.endpoints[0].detach(a,!1,!0,d)})}}}},this.detachAllConnections=function(a,b){b=b||{},a=f.getDOMElement(a);var c=X(a),d=s[c];if(d&&d.length)for(var e=0,g=d.length;g>e;e++)d[e].detachAll(b.fireEvent!==!1);return f},this.detachEveryConnection=function(a){return a=a||{},f.doWhileSuspended(function(){for(var b in s){var c=s[b];if(c&&c.length)for(var d=0,e=c.length;e>d;d++)c[d].detachAll(a.fireEvent!==!1)}q.length=0}),f},this.deleteObject=function(a){var b={endpoints:{},connections:{},endpointCount:0,connectionCount:0},c=a.fireEvent!==!1,d=a.deleteAttachedObjects!==!1,e=function(c){if(null!=c&&null==b.connections[c.id]&&(a.dontUpdateHover||null==c._jsPlumb||c.setHover(!1),b.connections[c.id]=c,b.connectionCount++,d))for(var e=0;e<c.endpoints.length;e++)c.endpoints[e]._deleteOnDetach&&g(c.endpoints[e])},g=function(c){if(null!=c&&null==b.endpoints[c.id]&&(a.dontUpdateHover||null==c._jsPlumb||c.setHover(!1),b.endpoints[c.id]=c,b.endpointCount++,d))for(var f=0;f<c.connections.length;f++){var g=c.connections[f];e(g)}};a.connection?e(a.connection):g(a.endpoint);for(var h in b.connections){var i=b.connections[h];i._jsPlumb&&(jsPlumbUtil.removeWithFunction(q,function(a){return i.id==a.id}),$(i,c,a.originalEvent),i.endpoints[0].detachFromConnection(i),i.endpoints[1].detachFromConnection(i),i.cleanup(),i.destroy())}for(var j in b.endpoints){var k=b.endpoints[j];k._jsPlumb&&(f.unregisterEndpoint(k),k.cleanup(),k.destroy())}return b},this.draggable=function(a,b){var c,d,e;if("object"==typeof a&&a.length)for(c=0,d=a.length;d>c;c++)e=l(a[c]),e.el&&L(e.el,!0,b,e.id);else e=l(a),e.el&&L(e.el,!0,b,e.id);return f};var aa=function(a,b,c,d){for(var e=0,f=a.length;f>e;e++)a[e][b].apply(a[e],c);return d(a)},ba=function(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push([a[e][b].apply(a[e],c),a[e]]);return d},ca=function(a,b,c){return function(){return aa(a,b,arguments,c)}},da=function(a,b){return function(){return ba(a,b,arguments)}},ea=function(a,b){var c=[];if(a)if("string"==typeof a){if("*"===a)return a;c.push(a)}else if(b)c=a;else if(a.length)for(var d=0,e=a.length;e>d;d++)c.push(l(a[d]).id);else c.push(l(a).id);return c},fa=function(a,b,c){return"*"===a||(a.length>0?-1!=jsPlumbUtil.indexOf(a,b):!c)};this.getConnections=function(a,b){a?a.constructor==String&&(a={scope:a}):a={};for(var c=a.scope||f.getDefaultScope(),d=ea(c,!0),e=ea(a.source),g=ea(a.target),h=!b&&d.length>1?{}:[],i=function(a,c){if(!b&&d.length>1){var e=h[a];null==e&&(e=h[a]=[]),e.push(c)}else h.push(c)},j=0,k=q.length;k>j;j++){var l=q[j];fa(d,l.scope)&&fa(e,l.sourceId)&&fa(g,l.targetId)&&i(l.scope,l)}return h};var ga=function(a,b){return function(c){for(var d=0,e=a.length;e>d;d++)c(a[d]);return b(a)}},ha=function(a){return function(b){return a[b]}},ia=function(a,b){var c,d,e={length:a.length,each:ga(a,b),get:ha(a)},f=["setHover","removeAllOverlays","setLabel","addClass","addOverlay","removeOverlay","removeOverlays","showOverlay","hideOverlay","showOverlays","hideOverlays","setPaintStyle","setHoverPaintStyle","setSuspendEvents","setParameter","setParameters","setVisible","repaint","addType","toggleType","removeType","removeClass","setType","bind","unbind"],g=["getLabel","getOverlay","isHover","getParameter","getParameters","getPaintStyle","getHoverPaintStyle","isVisible","hasType","getType","isSuspendEvents"];for(c=0,d=f.length;d>c;c++)e[f[c]]=ca(a,f[c],b);for(c=0,d=g.length;d>c;c++)e[g[c]]=da(a,g[c]);return e},ja=function(a){var b=ia(a,ja);return t.extend(b,{setDetachable:ca(a,"setDetachable",ja),setReattach:ca(a,"setReattach",ja),setConnector:ca(a,"setConnector",ja),detach:function(){for(var b=0,c=a.length;c>b;b++)f.detach(a[b])},isDetachable:da(a,"isDetachable"),isReattach:da(a,"isReattach")})},ka=function(a){var b=ia(a,ka);return t.extend(b,{setEnabled:ca(a,"setEnabled",ka),setAnchor:ca(a,"setAnchor",ka),isEnabled:da(a,"isEnabled"),detachAll:function(){for(var b=0,c=a.length;c>b;b++)a[b].detachAll()},remove:function(){for(var b=0,c=a.length;c>b;b++)f.deleteObject({endpoint:a[b]})}})};this.select=function(a){return a=a||{},a.scope=a.scope||"*",ja(a.connections||f.getConnections(a,!0))},this.selectEndpoints=function(a){a=a||{},a.scope=a.scope||"*";var b=!a.element&&!a.source&&!a.target,c=b?"*":ea(a.element),d=b?"*":ea(a.source),e=b?"*":ea(a.target),f=ea(a.scope,!0),g=[];for(var h in s){var i=fa(c,h,!0),j=fa(d,h,!0),k="*"!=d,l=fa(e,h,!0),m="*"!=e;if(i||j||l)a:for(var n=0,o=s[h].length;o>n;n++){var p=s[h][n];if(fa(f,p.scope,!0)){var q=k&&d.length>0&&!p.isSource,r=m&&e.length>0&&!p.isTarget;if(q||r)continue a;g.push(p)}}}return ka(g)},this.getAllConnections=function(){return q},this.getDefaultScope=function(){return D},this.getEndpoint=K,this.getEndpoints=function(a){return s[l(a).id]},this.getDefaultEndpointType=function(){return t.Endpoint},this.getDefaultConnectionType=function(){return t.Connection},this.getId=X,this.getOffset=function(a){return ta({elId:a}).o},this.appendElement=H;var la=!1;this.isHoverSuspended=function(){return la},this.setHoverSuspended=function(a){la=a};var ma=function(a){return function(){return jsPlumbAdapter.isRenderModeAvailable(a)}};this.isSVGAvailable=ma("svg"),this.isVMLAvailable=ma("vml"),this.hide=function(a,b){return T(a,"none",b),f},this.idstamp=G,this.connectorsInitialized=!1;var na=[],oa=["svg","vml"];this.registerConnectorType=function(a,b){na.push([a,b])};var pa=function(a){if(!n&&a){var b=f.getDOMElement(a);b.offsetParent&&f.setContainer(b.offsetParent)}},qa=function(){f.Defaults.Container&&f.setContainer(f.Defaults.Container)},ra=f.manage=function(a,b){return v[a]||(v[a]={el:b,endpoints:[],connections:[]},v[a].info=ta({elId:a,timestamp:C})),v[a]},sa=function(a){delete v[a]},ta=this.updateOffset=function(a){var c,d=a.timestamp,e=a.recalc,g=a.offset,h=a.elId;return B&&!d&&(d=C),!e&&d&&d===x[h]?{o:a.offset||w[h],s:A[h]}:(e||!g&&null==w[h]?(c=v[h]?v[h].el:null,null!=c&&(A[h]=f.getSize(c),w[h]=b(c,f),x[h]=d)):(w[h]=g||w[h],null==A[h]&&(c=v[h].el,null!=c&&(A[h]=f.getSize(c))),x[h]=d),w[h]&&!w[h].right&&(w[h].right=w[h].left+A[h][0],w[h].bottom=w[h].top+A[h][1],w[h].width=A[h][0],w[h].height=A[h][1],w[h].centerx=w[h].left+w[h].width/2,w[h].centery=w[h].top+w[h].height/2),{o:w[h],s:A[h]})};this.init=function(){var a=function(a,b,c){t.Connectors[a][b]=function(){c.apply(this,arguments),t.ConnectorRenderers[a].apply(this,arguments)},jsPlumbUtil.extend(t.Connectors[a][b],[c,t.ConnectorRenderers[a]])};if(!t.connectorsInitialized){for(var b=0;b<na.length;b++)for(var c=0;c<oa.length;c++)a(oa[c],na[b][1],na[b][0]);t.connectorsInitialized=!0}p||(qa(),f.anchorManager=new t.AnchorManager({jsPlumbInstance:f}),f.setRenderMode(f.Defaults.RenderMode),p=!0,f.fire("ready",f))}.bind(this),this.log=o,this.jsPlumbUIComponent=i,this.makeAnchor=function(){var b,c=function(a,b){if(t.Anchors[a])return new t.Anchors[a](b);if(!f.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown anchor type '"+a+"'"}};if(0===arguments.length)return null;var d=arguments[0],e=arguments[1],g=(arguments[2],null);if(d.compute&&d.getOrientation)return d;if("string"==typeof d)g=c(arguments[0],{elementId:e,jsPlumbInstance:f});else if(a.isArray(d))if(a.isArray(d[0])||a.isString(d[0]))2==d.length&&a.isObject(d[1])?a.isString(d[0])?(b=t.extend({elementId:e,jsPlumbInstance:f},d[1]),g=c(d[0],b)):(b=t.extend({elementId:e,jsPlumbInstance:f,anchors:d[0]},d[1]),g=new t.DynamicAnchor(b)):g=new t.DynamicAnchor({anchors:d,selector:null,elementId:e,jsPlumbInstance:f});else{var h={x:d[0],y:d[1],orientation:d.length>=4?[d[2],d[3]]:[0,0],offsets:d.length>=6?[d[4],d[5]]:[0,0],elementId:e,jsPlumbInstance:f,cssClass:7==d.length?d[6]:null};g=new t.Anchor(h),g.clone=function(){return new t.Anchor(h)}}return g.id||(g.id="anchor_"+G()),g},this.makeAnchors=function(b,c,d){for(var e=[],g=0,h=b.length;h>g;g++)"string"==typeof b[g]?e.push(t.Anchors[b[g]]({elementId:c,jsPlumbInstance:d})):a.isArray(b[g])&&e.push(f.makeAnchor(b[g],c,d));return e},this.makeDynamicAnchor=function(a,b){return new t.DynamicAnchor({anchors:a,selector:b,elementId:null,jsPlumbInstance:f})},this.targetEndpointDefinitions={};var ua=function(a,b,c){a.paintStyle=a.paintStyle||c.Defaults.EndpointStyles[b]||c.Defaults.EndpointStyle,a.hoverPaintStyle=a.hoverPaintStyle||c.Defaults.EndpointHoverStyles[b]||c.Defaults.EndpointHoverStyle,a.anchor=a.anchor||c.Defaults.Anchors[b]||c.Defaults.Anchor,a.endpoint=a.endpoint||c.Defaults.Endpoints[b]||c.Defaults.Endpoint};this.sourceEndpointDefinitions={};var va=function(a,b,c,d,e){for(var f=a.target||a.srcElement,g=!1,h=d.getSelector(b,c),i=0;i<h.length;i++)if(h[i]==f){g=!0;break}return e?!g:g};this.makeTarget=function(c,d,e){var g=t.extend({_jsPlumb:this},e);t.extend(g,d),ua(g,1,this);for(var h=g.scope||f.Defaults.Scope,j=(!(g.deleteEndpointsOnDetach===!1),g.maxConnections||-1),k=g.onMaxConnections,m=function(c){var d=l(c),e=d.id,m=new i(g),n=t.extend({},g.dropOptions||{});pa(e);var o={def:g,uniqueEndpoint:g.uniqueEndpoint,maxConnections:j,enabled:!0};d.el._jsPlumbTarget=o,this.targetEndpointDefinitions[e]=o;var p=g._jsPlumb.EndpointDropHandler({jsPlumb:f,enabled:function(){return d.el._jsPlumbTarget.enabled},isFull:function(a){var b=f.select({target:e}).length,c=d.el._jsPlumbTarget,g=c.maxConnections>0&&b>=c.maxConnections;return g&&k&&k({element:d.el,connection:jpc},a),g},element:d.el,elementId:e,isSource:!1,isTarget:!0,addClass:function(a){f.addClass(d.el,a)},removeClass:function(a){f.removeClass(d.el,a)},onDrop:function(a){var b=a.endpoints[0];b.anchor.locked=!1},isDropAllowed:function(){return m.isDropAllowed.apply(m,arguments)},getEndpoint:function(a){var c=f.getElementObject(d.el),e=d.el._jsPlumbTarget,h=e.endpoint;if((null==h||null==h._jsPlumb)&&(h=f.addEndpoint(c,g)),g.uniqueEndpoint&&(e.endpoint=h),h._doNotDeleteOnDetach=!1,h._deleteOnDetach=!0,a.isDetachable()&&h.initDraggable(),null!=h.anchor.positionFinder){var i=f.getUIPosition(arguments,this.getZoom()),j=b(c,this),k=f.getSize(c),l=h.anchor.positionFinder(i,j,k,h.anchor.constructorParams);h.anchor.x=l[0],h.anchor.y=l[1]}return h}}),q=t.dragEvents.drop;n.scope=n.scope||h,n[q]=a.wrap(n[q],p),g.allowLoopback===!1&&(n.canDrop=function(a){var b=a.getDragElement()._jsPlumbRelatedElement;return b!=d.el}),this.initDroppable(this.getElementObject(d.el),n,"internal")}.bind(this),n=c.length&&c.constructor!=String?c:[c],o=0,p=n.length;p>o;o++)m(n[o]);return this},this.unmakeTarget=function(a,b){var c=l(a);return t.destroyDroppable(c.el),b||delete this.targetEndpointDefinitions[c.id],this},this.makeSource=function(c,d,e){var g=t.extend({},e);t.extend(g,d),ua(g,0,this);for(var h=g.maxConnections||1,i=g.onMaxConnections,j=function(c){var d=c.id,e=this.getElementObject(c.el),j=this.getDOMElement(e),l=function(){return null==g.parent?null:"parent"===g.parent?c.el.parentNode:f.getDOMElement(g.parent)},m=null!=g.parent?this.getId(l()):d;pa(m),this.sourceEndpointDefinitions[m]={def:g,uniqueEndpoint:g.uniqueEndpoint,maxConnections:h,enabled:!0};var o=t.dragEvents.stop,p=t.dragEvents.drag,q=t.extend({},g.dragOptions||{}),r=q.drag,s=q.stop,u=null,v=!1;q.scope=q.scope||g.scope,q[p]=a.wrap(q[p],function(){r&&r.apply(this,arguments),v=!1}),q[o]=a.wrap(q[o],function(){if(s&&s.apply(this,arguments),this.currentlyDragging=!1,null!=u._jsPlumb){var a=g.anchor||this.Defaults.Anchor,c=u.anchor,e=u.connections[0],f=this.makeAnchor(a,d,this),h=u.element;if(null!=f.positionFinder){var i=b(h,this),j=this.getSize(h),k={left:i.left+c.x*j[0],top:i.top+c.y*j[1]},m=f.positionFinder(k,i,j,f.constructorParams);f.x=m[0],f.y=m[1]}if(u.setAnchor(f,!0),g.parent){var o=l();if(o){var p=g.container||n;u.setElement(o,p)}}u.repaint(),this.repaint(u.elementId),this.repaint(e.targetId)}}.bind(this));var w=function(a){var b=this.getOriginalEvent(a);if(3!==a.which&&2!==a.button){var c=this.sourceEndpointDefinitions[m];if(d=this.getId(this.getDOMElement(e)),c.enabled){if(g.filter){var n=jsPlumbUtil.isString(g.filter)?va(b,e,g.filter,this,g.filterExclude):g.filter(b,e);if(n===!1)return}var o=this.select({source:m}).length;if(c.maxConnections>=0&&c.uniqueEndpoint&&o>=c.maxConnections)return i&&i({element:e,maxConnections:h},a),!1;var p=jsPlumbAdapter.getPositionOnElement(b,j,k),r={};t.extend(r,g),r.isTemporarySource=!0,r.anchor=[p[0],p[1],0,0],r.dragOptions=q,u=this.addEndpoint(d,r),v=!0,u.endpointWillMoveTo=g.parent?l():null,c.uniqueEndpoint&&(c.endpoint?u.finalEndpoint=c.endpoint:c.endpoint=u),u._doNotDeleteOnDetach=!1,u._deleteOnDetach=!0;var s=function(){f.off(u.canvas,"mouseup",s),f.off(e,"mouseup",s),v&&(v=!1,f.deleteEndpoint(u))};f.on(u.canvas,"mouseup",s),f.on(e,"mouseup",s),f.trigger(u.canvas,"mousedown",a),jsPlumbUtil.consume(a)}}}.bind(this);this.on(e,"mousedown",w),this.sourceEndpointDefinitions[m].trigger=w,g.filter&&jsPlumbUtil.isString(g.filter)&&f.setDragFilter(e,g.filter)}.bind(this),m=c.length&&c.constructor!=String?c:[c],o=0,p=m.length;p>o;o++)j(l(m[o]));return this},this.unmakeSource=function(a,b){
var c=l(a),d=this.sourceEndpointDefinitions[c.id].trigger;return d&&f.off(c.el,"mousedown",d),b||delete this.sourceEndpointDefinitions[c.id],this},this.unmakeEverySource=function(){for(var a in this.sourceEndpointDefinitions)f.unmakeSource(a,!0);return this.sourceEndpointDefinitions={},this};var wa=function(a,b){b=jsPlumbUtil.isArray(b)?b:[b];for(var c=X(a),d=0;d<b.length;d++){var e=this[b[d]][c];if(e)return e.def.scope||this.Defaults.Scope}}.bind(this),xa=function(a,b,c){c=jsPlumbUtil.isArray(c)?c:[c];for(var d=X(a),e=0;e<c.length;e++){var f=this[c[e]][d];f&&(f.def.scope=b,null!=this.scopeChange&&this.scopeChange(a,d,s[d],b,c[e]))}}.bind(this);this.getScope=function(a){return wa(a,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.getSourceScope=function(a){return wa(a,"sourceEndpointDefinitions")},this.getTargetScope=function(a){return wa(a,"targetEndpointDefinitions")},this.setScope=function(a,b){xa(a,b,["sourceEndpointDefinitions","targetEndpointDefinitions"])},this.setSourceScope=function(a,b){xa(a,b,"sourceEndpointDefinitions")},this.setTargetScope=function(a,b){xa(a,b,"targetEndpointDefinitions")},this.unmakeEveryTarget=function(){for(var a in this.targetEndpointDefinitions)f.unmakeTarget(a,!0);return this.targetEndpointDefinitions={},this};var ya=function(b,c,d,e){var f="source"==b?this.sourceEndpointDefinitions:this.targetEndpointDefinitions;if(a.isString(c))f[c].enabled=e?!f[c].enabled:d;else if(c.length)for(var g=0,h=c.length;h>g;g++){var i=l(c[g]);f[i.id]&&(f[i.id].enabled=e?!f[i.id].enabled:d)}else{var j=l(c).id;f[j].enabled=e?!f[j].enabled:d}return this}.bind(this),za=function(b,c){return a.isString(b)||!b.length?c.apply(this,[b]):b.length?c.apply(this,[b[0]]):void 0}.bind(this);this.toggleSourceEnabled=function(a){return ya("source",a,null,!0),this.isSourceEnabled(a)},this.setSourceEnabled=function(a,b){return ya("source",a,b)},this.isSource=function(a){return za(a,function(a){return null!=this.sourceEndpointDefinitions[l(a).id]}.bind(this))},this.isSourceEnabled=function(a){return za(a,function(a){var b=this.sourceEndpointDefinitions[l(a).id];return b&&b.enabled===!0}.bind(this))},this.toggleTargetEnabled=function(a){return ya("target",a,null,!0),this.isTargetEnabled(a)},this.isTarget=function(a){return za(a,function(a){return null!=this.targetEndpointDefinitions[l(a).id]}.bind(this))},this.isTargetEnabled=function(a){return za(a,function(a){var b=this.targetEndpointDefinitions[l(a).id];return b&&b.enabled===!0}.bind(this))},this.setTargetEnabled=function(a,b){return ya("target",a,b)},this.ready=function(a){f.bind("ready",a)},this.repaint=function(a,b,c){if("object"==typeof a&&a.length)for(var d=0,e=a.length;e>d;d++)I(a[d],b,c);else I(a,b,c);return f},this.revalidate=function(a){var b=f.getId(a);return f.updateOffset({elId:b,recalc:!0}),f.repaint(a)},this.repaintEverything=function(a){var b,d=c();for(b in s)f.updateOffset({elId:b,recalc:!0,timestamp:d});for(b in s)I(b,null,d,a);return this},this.removeAllEndpoints=function(a,b){var c=function(a){var d,e,g=l(a),h=s[g.id];if(h)for(d=0,e=h.length;e>d;d++)f.deleteEndpoint(h[d]);if(delete s[g.id],b&&g.el&&3!=g.el.nodeType&&8!=g.el.nodeType)for(d=0,e=g.el.childNodes.length;e>d;d++)c(g.el.childNodes[d])};return c(a),this},this.remove=function(a,b){var c=l(a);return f.doWhileSuspended(function(){f.removeAllEndpoints(c.id,!0),f.dragManager.elementRemoved(c.id),delete f.floatingConnections[c.id],f.anchorManager.clearFor(c.id),f.anchorManager.removeFloatingConnection(c.id)},b===!1),sa(c.id),c.el&&(f.removeElement(c.el),c.el._jsPlumb=null),f},this.reset=function(){f.setSuspendEvents(!0),f.deleteEveryEndpoint(),f.unbind(),this.targetEndpointDefinitions={},this.sourceEndpointDefinitions={},q.length=0,f.setSuspendEvents(!1)};var Aa=function(a){a.canvas&&a.canvas.parentNode&&a.canvas.parentNode.removeChild(a.canvas),a.cleanup(),a.destroy()},Ba=function(a){Aa(a)};this.clear=function(){f.select().each(Ba),f.selectEndpoints().each(Ba),s={},u={}},this.setDefaultScope=function(a){return D=a,f},this.setDraggable=S,this.setId=function(a,b,c){var d;jsPlumbUtil.isString(a)?d=a:(a=this.getDOMElement(a),d=this.getId(a));var e=this.getConnections({source:d,scope:"*"},!0),f=this.getConnections({target:d,scope:"*"},!0);b=""+b,c?a=this.getDOMElement(b):(a=this.getDOMElement(d),this.setAttribute(a,"id",b)),s[b]=s[d]||[];for(var g=0,h=s[b].length;h>g;g++)s[b][g].setElementId(b),s[b][g].setReferenceElement(a);delete s[d],this.anchorManager.changeId(d,b),this.dragManager&&this.dragManager.changeId(d,b),v[b]=v[d],delete v[d];var i=function(c,d,e){for(var f=0,g=c.length;g>f;f++)c[f].endpoints[d].setElementId(b),c[f].endpoints[d].setReferenceElement(a),c[f][e+"Id"]=b,c[f][e]=a};i(e,0,"source"),i(f,1,"target"),this.repaint(b)},this.setDebugLog=function(a){o=a},this.setSuspendDrawing=function(a,b){var c=B;return B=a,C=a?(new Date).getTime():null,b&&this.repaintEverything(),c},this.isSuspendDrawing=function(){return B},this.getSuspendedAt=function(){return C},this.doWhileSuspended=function(b,c){var d=this.isSuspendDrawing();d||this.setSuspendDrawing(!0);try{b()}catch(b){a.log("Function run while suspended failed",b)}d||this.setSuspendDrawing(!1,!c)},this.getOffset=function(a){return w[a]},this.getCachedData=W,this.timestamp=c,this.setRenderMode=function(a){if(a!==t.SVG&&a!==t.VML)throw new TypeError("Render mode ["+a+"] not supported");return E=jsPlumbAdapter.setRenderMode(a)},this.getRenderMode=function(){return E},this.show=function(a,b){return T(a,"block",b),f},this.toggleVisible=V,this.toggleDraggable=U,this.addListener=this.bind,jsPlumbAdapter.headless||(f.dragManager=jsPlumbAdapter.getDragManager(f),f.recalculateOffsets=f.dragManager.updateOffsets)};jsPlumbUtil.extend(s,jsPlumbUtil.EventGenerator,{setAttribute:function(a,b,c){this.setAttribute(a,b,c)},getAttribute:function(a,b){return this.getAttribute(t.getDOMElement(a),b)},registerConnectionType:function(a,b){this._connectionTypes[a]=t.extend({},b)},registerConnectionTypes:function(a){for(var b in a)this._connectionTypes[b]=t.extend({},a[b])},registerEndpointType:function(a,b){this._endpointTypes[a]=t.extend({},b)},registerEndpointTypes:function(a){for(var b in a)this._endpointTypes[b]=t.extend({},a[b])},getType:function(a,b){return"connection"===b?this._connectionTypes[a]:this._endpointTypes[a]},setIdChanged:function(a,b){this.setId(a,b,!0)},setParent:function(a,b){var c=this.getElementObject(a),d=this.getDOMElement(c),e=this.getId(d),f=this.getElementObject(b),g=this.getDOMElement(f),h=this.getId(g);d.parentNode.removeChild(d),g.appendChild(d),this.dragManager.setParent(c,e,f,h)},getSize:function(a){return[a.offsetWidth,a.offsetHeight]},getWidth:function(a){return a.offsetWidth},getHeight:function(a){return a.offsetHeight},extend:function(a,b,c){var d;if(c)for(d=0;d<c.length;d++)a[c[d]]=b[c[d]];else for(d in b)a[d]=b[d];return a},floatingConnections:{},getFloatingAnchorIndex:function(a){return a.endpoints[0].isFloating()?0:1}},jsPlumbAdapter);var t=new s;"undefined"!=typeof window&&(window.jsPlumb=t),t.getInstance=function(a){var b=new s(a);return b.init(),b},"function"==typeof define&&(define("jsplumb",[],function(){return t}),define("jsplumbinstance",[],function(){return t.getInstance()})),"undefined"!=typeof exports&&(exports.jsPlumb=t)}(),function(){"use strict";var a=function(a,b){var c=!1;return{drag:function(){if(c)return c=!1,!0;var d=jsPlumb.getUIPosition(arguments,b.getZoom());a.element&&(jsPlumbAdapter.setPosition(a.element,d),b.repaint(a.element,d))},stopDrag:function(){c=!0}}},b=function(a,b){var c=document.createElement("div");c.style.position="absolute";var d=b.getContainer()||document.body;d.appendChild(c);var e=b.getId(c);b.manage(e,c),a.id=e,a.element=c},c=function(a,b,c,d,e,f,g,h){var i=new jsPlumb.FloatingAnchor({reference:b,referenceCanvas:d,jsPlumbInstance:f});return g({paintStyle:a,endpoint:c,anchor:i,source:e,scope:h})},d=["connectorStyle","connectorHoverStyle","connectorOverlays","connector","connectionType","connectorClass","connectorHoverClass"],e=function(a,b){var c=0;if(null!=b)for(var d=0;d<a.connections.length;d++)if(a.connections[d].sourceId==b||a.connections[d].targetId==b){c=d;break}return a.connections[c]},f=function(a,b){return jsPlumbUtil.findWithFunction(b.connections,function(b){return b.id==a.id})};jsPlumb.Endpoint=function(g){var h=g._jsPlumb,i=jsPlumb.getElementObject,j=jsPlumbUtil,k=g.newConnection,l=g.newEndpoint;g.finaliseConnection,g.fireMoveEvent,this.idPrefix="_jsplumb_e_",this.defaultLabelLocation=[.5,.5],this.defaultOverlayKeys=["Overlays","EndpointOverlays"],OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.getDefaultType=function(){return{parameters:{},scope:null,maxConnections:this._jsPlumb.instance.Defaults.MaxConnections,paintStyle:this._jsPlumb.instance.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,endpoint:this._jsPlumb.instance.Defaults.Endpoint||jsPlumb.Defaults.Endpoint,hoverPaintStyle:this._jsPlumb.instance.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,overlays:this._jsPlumb.instance.Defaults.EndpointOverlays||jsPlumb.Defaults.EndpointOverlays,connectorStyle:g.connectorStyle,connectorHoverStyle:g.connectorHoverStyle,connectorClass:g.connectorClass,connectorHoverClass:g.connectorHoverClass,connectorOverlays:g.connectorOverlays,connector:g.connector,connectorTooltip:g.connectorTooltip}},this._jsPlumb.enabled=!(g.enabled===!1),this._jsPlumb.visible=!0,this.element=jsPlumb.getDOMElement(g.source),this._jsPlumb.uuid=g.uuid,this._jsPlumb.floatingEndpoint=null;var m=null;this._jsPlumb.uuid&&(g.endpointsByUUID[this._jsPlumb.uuid]=this),this.elementId=g.elementId,this._jsPlumb.connectionCost=g.connectionCost,this._jsPlumb.connectionsDirected=g.connectionsDirected,this._jsPlumb.currentAnchorClass="",this._jsPlumb.events={};var n=function(){var a=this._jsPlumb.currentAnchorClass;this._jsPlumb.currentAnchorClass=this.anchor.getCssClass(),jsPlumbAdapter.updateClasses(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass,h.endpointAnchorClassPrefix+"_"+a),this.updateClasses(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass,h.endpointAnchorClassPrefix+"_"+a)}.bind(this);this.setAnchor=function(a,b){return this._jsPlumb.instance.continuousAnchorFactory.clear(this.elementId),this.anchor=this._jsPlumb.instance.makeAnchor(a,this.elementId,h),n(),this.anchor.bind("anchorChanged",function(a){this.fire("anchorChanged",{endpoint:this,anchor:a}),n()}.bind(this)),b||this._jsPlumb.instance.repaint(this.elementId),this};var o=g.anchor?g.anchor:g.anchors?g.anchors:h.Defaults.Anchor||"Top";this.setAnchor(o,!0);var p=function(a){if(this.connections.length>0)for(var b=0;b<this.connections.length;b++)this.connections[b].setHover(a,!1);else this.setHover(a)}.bind(this);this.bind("mouseover",function(){p(!0)}),this.bind("mouseout",function(){p(!1)}),g._transient||this._jsPlumb.instance.anchorManager.add(this,this.elementId),this.setEndpoint=function(a){null!=this.endpoint&&(this.endpoint.cleanup(),this.endpoint.destroy());var b=function(a,b){var c=h.getRenderMode();if(jsPlumb.Endpoints[c][a])return new jsPlumb.Endpoints[c][a](b);if(!h.Defaults.DoNotThrowErrors)throw{msg:"jsPlumb: unknown endpoint type '"+a+"'"}},c={_jsPlumb:this._jsPlumb.instance,cssClass:g.cssClass,container:g.container,tooltip:g.tooltip,connectorTooltip:g.connectorTooltip,endpoint:this};j.isString(a)?this.endpoint=b(a,c):j.isArray(a)?(c=j.merge(a[1],c),this.endpoint=b(a[0],c)):this.endpoint=a.clone(),this.endpoint.clone=function(){return j.isString(a)?b(a,c):j.isArray(a)?(c=j.merge(a[1],c),b(a[0],c)):void 0}.bind(this),this.type=this.endpoint.type},this.setEndpoint(g.endpoint||h.Defaults.Endpoint||jsPlumb.Defaults.Endpoint||"Dot"),this.setPaintStyle(g.endpointStyle||g.paintStyle||g.style||h.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle,!0),this.setHoverPaintStyle(g.endpointHoverStyle||g.hoverPaintStyle||h.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle(),jsPlumb.extend(this,g,d),this.isSource=g.isSource||!1,this.isTemporarySource=g.isTemporarySource||!1,this.isTarget=g.isTarget||!1,this._jsPlumb.maxConnections=g.maxConnections||h.Defaults.MaxConnections,this.canvas=this.endpoint.canvas,this.canvas._jsPlumb=this,this.addClass(h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),jsPlumbAdapter.addClass(this.element,h.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.connections=g.connections||[],this.connectorPointerEvents=g["connector-pointer-events"],this.scope=g.scope||h.getDefaultScope(),this.timestamp=null,this.reattachConnections=g.reattach||h.Defaults.ReattachConnections,this.connectionsDetachable=h.Defaults.ConnectionsDetachable,(g.connectionsDetachable===!1||g.detachable===!1)&&(this.connectionsDetachable=!1),this.dragAllowedWhenFull=g.dragAllowedWhenFull!==!1,g.onMaxConnections&&this.bind("maxConnections",g.onMaxConnections),this.addConnection=function(a){this.connections.push(a),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass)},this.detachFromConnection=function(a,b,c){b=null==b?f(a,this):b,b>=0&&(this.connections.splice(b,1),this[(this.connections.length>0?"add":"remove")+"Class"](h.endpointConnectedClass),this[(this.isFull()?"add":"remove")+"Class"](h.endpointFullClass)),!c&&this._deleteOnDetach&&0===this.connections.length&&h.deleteObject({endpoint:this,fireEvent:!1,deleteAttachedObjects:!1})},this.detach=function(a,b,c,d,e,g,i){var j=null==i?f(a,this):i,k=!1;return d=d!==!1,j>=0&&(c||a._forceDetach||a.isDetachable()&&a.isDetachAllowed(a)&&this.isDetachAllowed(a)&&h.checkCondition("beforeDetach",a))&&(h.deleteObject({connection:a,fireEvent:!b&&d,originalEvent:e,deleteAttachedObjects:!1}),k=!0),k},this.detachAll=function(a,b){for(;this.connections.length>0;)this.detach(this.connections[0],!1,!0,a!==!1,b,this,0);return this},this.detachFrom=function(a,b,c){for(var d=[],e=0;e<this.connections.length;e++)(this.connections[e].endpoints[1]==a||this.connections[e].endpoints[0]==a)&&d.push(this.connections[e]);for(var f=0;f<d.length;f++)this.detach(d[f],!1,!0,b,c);return this},this.getElement=function(){return this.element},this.setElement=function(a){var b=this._jsPlumb.instance.getId(a),c=this.elementId;return j.removeWithFunction(g.endpointsByElement[this.elementId],function(a){return a.id==this.id}.bind(this)),this.element=jsPlumb.getDOMElement(a),this.elementId=h.getId(this.element),h.anchorManager.rehomeEndpoint(this,c,this.element),h.dragManager.endpointAdded(this.element),j.addToList(g.endpointsByElement,b,this),this},this.makeInPlaceCopy=function(){var a=this.anchor.getCurrentLocation({element:this}),b=this.anchor.getOrientation(this),c=this.anchor.getCssClass(),d={bind:function(){},compute:function(){return[a[0],a[1]]},getCurrentLocation:function(){return[a[0],a[1]]},getOrientation:function(){return b},getCssClass:function(){return c}};return l({dropOptions:g.dropOptions,anchor:d,source:this.element,paintStyle:this.getPaintStyle(),endpoint:g.hideOnDrag?"Blank":this.endpoint,_transient:!0,scope:this.scope})},this.connectorSelector=function(){var a=this.connections[0];return this.isTarget&&a?a:this.connections.length<this._jsPlumb.maxConnections||-1==this._jsPlumb.maxConnections?null:a},this.setStyle=this.setPaintStyle,this.paint=function(a){a=a||{};var b=a.timestamp,c=!(a.recalc===!1);if(!b||this.timestamp!==b){var d=h.updateOffset({elId:this.elementId,timestamp:b}),f=a.offset?a.offset.o:d.o;if(null!=f){var g=a.anchorPoint,i=a.connectorPaintStyle;if(null==g){var j=a.dimensions||d.s,k={xy:[f.left,f.top],wh:j,element:this,timestamp:b};if(c&&this.anchor.isDynamic&&this.connections.length>0){var l=e(this,a.elementWithPrecedence),m=l.endpoints[0]==this?1:0,n=0===m?l.sourceId:l.targetId,o=h.getCachedData(n),p=o.o,q=o.s;k.txy=[p.left,p.top],k.twh=q,k.tElement=l.endpoints[m]}g=this.anchor.compute(k)}this.endpoint.compute(g,this.anchor.getOrientation(this),this._jsPlumb.paintStyleInUse,i||this.paintStyleInUse),this.endpoint.paint(this._jsPlumb.paintStyleInUse,this.anchor),this.timestamp=b;for(var r=0;r<this._jsPlumb.overlays.length;r++){var s=this._jsPlumb.overlays[r];s.isVisible()&&(this._jsPlumb.overlayPlacements[r]=s.draw(this.endpoint,this._jsPlumb.paintStyleInUse),s.paint(this._jsPlumb.overlayPlacements[r]))}}}},this.repaint=this.paint;var q=!1;this.initDraggable=function(){if(!q&&jsPlumb.isDragSupported(this.element)){var d={id:null,element:null},e=null,f=!1,n=null,o=a(d,h),p=g.dragOptions||{},r={},s=jsPlumb.dragEvents.start,t=jsPlumb.dragEvents.stop,u=jsPlumb.dragEvents.drag,v=function(){e=this.connectorSelector();var a=!0;if(this.isEnabled()||(a=!1),null!=e||this.isSource||this.isTemporarySource||(a=!1),this.isSource&&this.isFull()&&!this.dragAllowedWhenFull&&(a=!1),null==e||e.isDetachable()||(a=!1),a===!1)return h.stopDrag&&h.stopDrag(this.canvas),o.stopDrag(),!1;for(var p=0;p<this.connections.length;p++)this.connections[p].setHover(!1);this.addClass("endpointDrag"),h.setConnectionBeingDragged(!0),e&&!this.isFull()&&this.isSource&&(e=null),h.updateOffset({elId:this.elementId}),m=this.makeInPlaceCopy(),m.referenceEndpoint=this,m.paint(),b(d,h);var q=i(m.canvas),r=jsPlumbAdapter.getOffset(q,this._jsPlumb.instance),s=i(this.canvas);if(jsPlumbAdapter.setPosition(d.element,r),this.parentAnchor&&(this.anchor=h.makeAnchor(this.parentAnchor,this.elementId,h)),h.setAttribute(this.canvas,"dragId",d.id),h.setAttribute(this.canvas,"elId",this.elementId),this._jsPlumb.floatingEndpoint=c(this.getPaintStyle(),this.anchor,this.endpoint,this.canvas,d.element,h,l,this.scope),this.canvas.style.visibility="hidden",null==e)this.anchor.locked=!0,this.setHover(!1,!1),e=k({sourceEndpoint:this,targetEndpoint:this._jsPlumb.floatingEndpoint,source:this.endpointWillMoveTo||this.element,target:d.element,anchors:[this.anchor,this._jsPlumb.floatingEndpoint.anchor],paintStyle:g.connectorStyle,hoverPaintStyle:g.connectorHoverStyle,connector:g.connector,overlays:g.connectorOverlays,type:this.connectionType,cssClass:this.connectorClass,hoverClass:this.connectorHoverClass}),e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass),h.fire("connectionDrag",e);else{f=!0,e.setHover(!1);var t=e.endpoints[0].id==this.id?0:1;this.detachFromConnection(e,null,!0);var u=h.getDragScope(s);h.setAttribute(this.canvas,"originalScope",u);var v=h.getDropScope(s);h.setDragScope(s,v),h.fire("connectionDrag",e),0===t?(n=[e.source,e.sourceId,s,u],e.source=d.element,e.sourceId=d.id):(n=[e.target,e.targetId,s,u],e.target=d.element,e.targetId=d.id),e.endpoints[0===t?1:0].anchor.locked=!0,e.suspendedEndpoint=e.endpoints[t],e.suspendedElement=e.endpoints[t].getElement(),e.suspendedElementId=e.endpoints[t].elementId,e.suspendedElementType=0===t?"source":"target",e.suspendedEndpoint.setHover(!1),this._jsPlumb.floatingEndpoint.referenceEndpoint=e.suspendedEndpoint,e.endpoints[t]=this._jsPlumb.floatingEndpoint,e.addClass(h.draggingClass),this._jsPlumb.floatingEndpoint.addClass(h.draggingClass)}h.floatingConnections[d.id]=e,h.anchorManager.addFloatingConnection(d.id,e),j.addToList(g.endpointsByElement,d.id,this._jsPlumb.floatingEndpoint),h.currentlyDragging=!0}.bind(this),w=function(){if(h.setConnectionBeingDragged(!1),e&&null!=e.endpoints){var a=h.getDropEvent(arguments),b=h.getFloatingAnchorIndex(e);if(e.endpoints[0===b?1:0].anchor.locked=!1,e.removeClass(h.draggingClass),this._jsPlumb&&(e.deleteConnectionNow||e.endpoints[b]==this._jsPlumb.floatingEndpoint)&&f&&e.suspendedEndpoint){0===b?(e.source=n[0],e.sourceId=n[1]):(e.target=n[0],e.targetId=n[1]);var c=this._jsPlumb.floatingEndpoint;h.setDragScope(n[2],n[3]),e.endpoints[b]=e.suspendedEndpoint,e.isReattach()||e._forceReattach||e._forceDetach||!e.endpoints[0===b?1:0].detach(e,!1,!1,!0,a)?(e.setHover(!1),e._forceDetach=null,e._forceReattach=null,this._jsPlumb.floatingEndpoint.detachFromConnection(e),e.suspendedEndpoint.addConnection(e),h.repaint(n[1])):h.deleteObject({endpoint:c})}h.remove(d.element,!1),h.deleteObject({endpoint:m}),this.deleteAfterDragStop?h.deleteObject({endpoint:this}):this._jsPlumb&&(this._jsPlumb.floatingEndpoint=null,this.canvas.style.visibility="visible",this.anchor.locked=!1,this.paint({recalc:!1})),h.fire("connectionDragStop",e,a),h.currentlyDragging=!1,e=null}}.bind(this);p=jsPlumb.extend(r,p),p.scope=this.scope||p.scope,p[s]=j.wrap(p[s],v,!1),p[u]=j.wrap(p[u],o.drag),p[t]=j.wrap(p[t],w),p.canDrag=function(){return this.isSource||this.isTemporarySource||this.isTarget&&this.connections.length>0}.bind(this),h.initDraggable(this.canvas,p,"internal"),this.canvas._jsPlumbRelatedElement=this.element,q=!0}},(this.isSource||this.isTarget||this.isTemporarySource)&&this.initDraggable();var r=function(a,b,c,d){if((this.isTarget||b)&&jsPlumb.isDropSupported(this.element)){var e=g.dropOptions||h.Defaults.DropOptions||jsPlumb.Defaults.DropOptions;e=jsPlumb.extend({},e),e.scope=e.scope||this.scope;var f=jsPlumb.dragEvents.drop,i=jsPlumb.dragEvents.over,k=jsPlumb.dragEvents.out,l=this,m=h.EndpointDropHandler({getEndpoint:function(){return l},jsPlumb:h,enabled:function(){return null==d||d.isEnabled()},isFull:function(){return d.isFull()},element:this.element,elementId:this.elementId,isSource:this.isSource,isTarget:this.isTarget,addClass:function(a){l.addClass(a)},removeClass:function(a){l.removeClass(a)},isDropAllowed:function(){return l.isDropAllowed.apply(l,arguments)}});e[f]=j.wrap(e[f],m),e[i]=j.wrap(e[i],function(){var a=jsPlumb.getDragObject(arguments),b=h.getAttribute(jsPlumb.getDOMElement(a),"dragId"),c=h.floatingConnections[b];if(null!=c){var d=h.getFloatingAnchorIndex(c),e=this.isTarget&&0!==d||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id;if(e){var f=h.checkCondition("checkDropAllowed",{sourceEndpoint:c.endpoints[d],targetEndpoint:this,connection:c});this[(f?"add":"remove")+"Class"](h.endpointDropAllowedClass),this[(f?"remove":"add")+"Class"](h.endpointDropForbiddenClass),c.endpoints[d].anchor.over(this.anchor,this)}}}.bind(this)),e[k]=j.wrap(e[k],function(){var a=jsPlumb.getDragObject(arguments),b=null==a?null:h.getAttribute(jsPlumb.getDOMElement(a),"dragId"),c=b?h.floatingConnections[b]:null;if(null!=c){var d=h.getFloatingAnchorIndex(c),e=this.isTarget&&0!==d||c.suspendedEndpoint&&this.referenceEndpoint&&this.referenceEndpoint.id==c.suspendedEndpoint.id;e&&(this.removeClass(h.endpointDropAllowedClass),this.removeClass(h.endpointDropForbiddenClass),c.endpoints[d].anchor.out())}}.bind(this)),h.initDroppable(a,e,"internal",c)}}.bind(this);return this.anchor.isFloating||r(i(this.canvas),!0,!(g._transient||this.anchor.isFloating),this),g.type&&this.addType(g.type,g.data,h.isSuspendDrawing()),this},jsPlumbUtil.extend(jsPlumb.Endpoint,OverlayCapableJsPlumbUIComponent,{getTypeDescriptor:function(){return"endpoint"},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a,b,c){if(this._jsPlumb.visible=a,this.canvas&&(this.canvas.style.display=a?"block":"none"),this[a?"showOverlays":"hideOverlays"](),!b)for(var d=0;d<this.connections.length;d++)if(this.connections[d].setVisible(a),!c){var e=this===this.connections[d].endpoints[0]?1:0;1==this.connections[d].endpoints[e].connections.length&&this.connections[d].endpoints[e].setVisible(a,!0,!0)}},getAttachedElements:function(){return this.connections},applyType:function(a){this.setPaintStyle(a.endpointStyle||a.paintStyle),this.setHoverPaintStyle(a.endpointHoverStyle||a.hoverPaintStyle),null!=a.maxConnections&&(this._jsPlumb.maxConnections=a.maxConnections),a.scope&&(this.scope=a.scope),jsPlumb.extend(this,a,d),a.anchor&&(this.anchor=this._jsPlumb.instance.makeAnchor(a.anchor)),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass)},isEnabled:function(){return this._jsPlumb.enabled},setEnabled:function(a){this._jsPlumb.enabled=a},cleanup:function(){jsPlumbAdapter.removeClass(this.element,this._jsPlumb.instance.endpointAnchorClassPrefix+"_"+this._jsPlumb.currentAnchorClass),this.anchor=null,this.endpoint.cleanup(),this.endpoint.destroy(),this.endpoint=null;var a=jsPlumb.getElementObject(this.canvas);this._jsPlumb.instance.destroyDraggable(a,"internal"),this._jsPlumb.instance.destroyDroppable(a,"internal")},setHover:function(a){this.endpoint&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&this.endpoint.setHover(a)},isFull:function(){return!(this.isFloating()||this._jsPlumb.maxConnections<1||this.connections.length<this._jsPlumb.maxConnections)},isFloating:function(){return null!=this.anchor&&this.anchor.isFloating},isConnectedTo:function(a){var b=!1;if(a)for(var c=0;c<this.connections.length;c++)if(this.connections[c].endpoints[1]==a||this.connections[c].endpoints[0]==a){b=!0;break}return b},getConnectionCost:function(){return this._jsPlumb.connectionCost},setConnectionCost:function(a){this._jsPlumb.connectionCost=a},areConnectionsDirected:function(){return this._jsPlumb.connectionsDirected},setConnectionsDirected:function(a){this._jsPlumb.connectionsDirected=a},setElementId:function(a){this.elementId=a,this.anchor.elementId=a},setReferenceElement:function(a){this.element=jsPlumb.getDOMElement(a)},setDragAllowedWhenFull:function(a){this.dragAllowedWhenFull=a},equals:function(a){return this.anchor.equals(a.anchor)},getUuid:function(){return this._jsPlumb.uuid},computeAnchor:function(a){return this.anchor.compute(a)}}),jsPlumbInstance.prototype.EndpointDropHandler=function(a){return function(b){var c=a.jsPlumb;a.removeClass(c.endpointDropAllowedClass),a.removeClass(c.endpointDropForbiddenClass);var d=c.getDropEvent(arguments),e=c.getDOMElement(c.getDragObject(arguments)),f=c.getAttribute(e,"dragId"),g=(c.getAttribute(e,"elId"),c.getAttribute(e,"originalScope")),h=c.floatingConnections[f];if(null!=h){var i=a.getEndpoint(h);a.onDrop&&a.onDrop(h);var j=h.suspendedEndpoint&&(h.suspendedEndpoint.id==i.id||i.referenceEndpoint&&h.suspendedEndpoint.id==i.referenceEndpoint.id);if(j)return h._forceReattach=!0,void h.setHover(!1);var k=c.getFloatingAnchorIndex(h);if(g&&c.setDragScope(e,g),a.isFull(b)&&i.fire("maxConnections",{endpoint:this,connection:h,maxConnections:i._jsPlumb.maxConnections},d),!a.isFull()&&(0!==k||a.isSource)&&(1!=k||a.isTarget)&&a.enabled()){var l=!0;h.suspendedEndpoint&&h.suspendedEndpoint.id!=i.id&&(h.isDetachAllowed(h)&&h.endpoints[k].isDetachAllowed(h)&&h.suspendedEndpoint.isDetachAllowed(h)&&c.checkCondition("beforeDetach",h)||(l=!1)),0===k?(h.source=a.element,h.sourceId=a.elementId):(h.target=a.element,h.targetId=a.elementId);var m=function(){h.endpoints[k].detachFromConnection(h),h.suspendedEndpoint&&h.suspendedEndpoint.detachFromConnection(h),h.endpoints[k]=i,i.addConnection(h);var a=i.getParameters();for(var b in a)h.setParameter(b,a[b]);if(h.suspendedEndpoint){var e=h.suspendedEndpoint.elementId;c.fireMoveEvent({index:k,originalSourceId:0===k?e:h.sourceId,newSourceId:0===k?i.elementId:h.sourceId,originalTargetId:1==k?e:h.targetId,newTargetId:1==k?i.elementId:h.targetId,originalSourceEndpoint:0===k?h.suspendedEndpoint:h.endpoints[0],newSourceEndpoint:0===k?i:h.endpoints[0],originalTargetEndpoint:1==k?h.suspendedEndpoint:h.endpoints[1],newTargetEndpoint:1==k?i:h.endpoints[1],connection:h},d)}else a.draggable&&c.initDraggable(this.element,dragOptions,"internal",c);if(1==k?c.anchorManager.updateOtherEndpoint(h.sourceId,h.suspendedElementId,h.targetId,h):c.anchorManager.sourceChanged(h.suspendedEndpoint.elementId,h.sourceId,h),h.endpoints[0].finalEndpoint){var f=h.endpoints[0];f.detachFromConnection(h),h.endpoints[0]=h.endpoints[0].finalEndpoint,h.endpoints[0].addConnection(h)}c.finaliseConnection(h,null,d),h.setHover(!1)}.bind(this),n=function(){h.suspendedEndpoint&&(h.endpoints[k]=h.suspendedEndpoint,h.setHover(!1),h._forceDetach=!0,0===k?(h.source=h.suspendedEndpoint.element,h.sourceId=h.suspendedEndpoint.elementId):(h.target=h.suspendedEndpoint.element,h.targetId=h.suspendedEndpoint.elementId),h.suspendedEndpoint.addConnection(h),c.repaint(h.sourceId),h._forceDetach=!1)};l=l&&a.isDropAllowed(h.sourceId,h.targetId,h.scope,h,i),l?m():n()}c.currentlyDragging=!1}}}}(),function(){"use strict";var a=function(a,b,c,d,e){if(!a.Defaults.DoNotThrowErrors&&null==jsPlumb.Connectors[b][c])throw{msg:"jsPlumb: unknown connector type '"+c+"'"};return new jsPlumb.Connectors[b][c](d,e)},b=function(a,b,c){return a?c.makeAnchor(a,b,c):null};jsPlumb.Connection=function(a){var b=a.newEndpoint,c=jsPlumbUtil;this.connector=null,this.idPrefix="_jsplumb_c_",this.defaultLabelLocation=.5,this.defaultOverlayKeys=["Overlays","ConnectionOverlays"],this.previousConnection=a.previousConnection,this.source=jsPlumb.getDOMElement(a.source),this.target=jsPlumb.getDOMElement(a.target),a.sourceEndpoint&&(this.source=a.sourceEndpoint.endpointWillMoveTo||a.sourceEndpoint.getElement()),a.targetEndpoint&&(this.target=a.targetEndpoint.getElement()),OverlayCapableJsPlumbUIComponent.apply(this,arguments),this.sourceId=this._jsPlumb.instance.getId(this.source),this.targetId=this._jsPlumb.instance.getId(this.target),this.scope=a.scope,this.endpoints=[],this.endpointStyles=[];var d=this._jsPlumb.instance;d.manage(this.sourceId,this.source),d.manage(this.targetId,this.target),this._jsPlumb.visible=!0,this._jsPlumb.editable=a.editable===!0,this._jsPlumb.params={cssClass:a.cssClass,container:a.container,"pointer-events":a["pointer-events"],editorParams:a.editorParams},this._jsPlumb.lastPaintedAt=null,this.getDefaultType=function(){return{parameters:{},scope:null,detachable:this._jsPlumb.instance.Defaults.ConnectionsDetachable,rettach:this._jsPlumb.instance.Defaults.ReattachConnections,paintStyle:this._jsPlumb.instance.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,connector:this._jsPlumb.instance.Defaults.Connector||jsPlumb.Defaults.Connector,hoverPaintStyle:this._jsPlumb.instance.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,overlays:this._jsPlumb.instance.Defaults.ConnectorOverlays||jsPlumb.Defaults.ConnectorOverlays}},this.bind("mouseover",function(){this.setHover(!0)}.bind(this)),this.bind("mouseout",function(){this.setHover(!1)}.bind(this)),this.makeEndpoint=function(c,e,f,g){return f=f||this._jsPlumb.instance.getId(e),this.prepareEndpoint(d,b,this,g,c?0:1,a,e,f)};var e=this.makeEndpoint(!0,this.source,this.sourceId,a.sourceEndpoint),f=this.makeEndpoint(!1,this.target,this.targetId,a.targetEndpoint);e&&c.addToList(a.endpointsByElement,this.sourceId,e),f&&c.addToList(a.endpointsByElement,this.targetId,f),this.scope||(this.scope=this.endpoints[0].scope),null!=a.deleteEndpointsOnDetach?(this.endpoints[0]._deleteOnDetach=a.deleteEndpointsOnDetach,this.endpoints[1]._deleteOnDetach=a.deleteEndpointsOnDetach):(this.endpoints[0]._doNotDeleteOnDetach||(this.endpoints[0]._deleteOnDetach=!0),this.endpoints[1]._doNotDeleteOnDetach||(this.endpoints[1]._deleteOnDetach=!0)),this.setConnector(this.endpoints[0].connector||this.endpoints[1].connector||a.connector||d.Defaults.Connector||jsPlumb.Defaults.Connector,!0,!0),a.path&&this.connector.setPath(a.path),this.setPaintStyle(this.endpoints[0].connectorStyle||this.endpoints[1].connectorStyle||a.paintStyle||d.Defaults.PaintStyle||jsPlumb.Defaults.PaintStyle,!0),this.setHoverPaintStyle(this.endpoints[0].connectorHoverStyle||this.endpoints[1].connectorHoverStyle||a.hoverPaintStyle||d.Defaults.HoverPaintStyle||jsPlumb.Defaults.HoverPaintStyle,!0),this._jsPlumb.paintStyleInUse=this.getPaintStyle();var g=d.getSuspendedAt();if(!d.isSuspendDrawing()){var h=d.getCachedData(this.sourceId),i=h.o,j=h.s,k=d.getCachedData(this.targetId),l=k.o,m=k.s,n=g||d.timestamp(),o=this.endpoints[0].anchor.compute({xy:[i.left,i.top],wh:j,element:this.endpoints[0],elementId:this.endpoints[0].elementId,txy:[l.left,l.top],twh:m,tElement:this.endpoints[1],timestamp:n});this.endpoints[0].paint({anchorLoc:o,timestamp:n}),o=this.endpoints[1].anchor.compute({xy:[l.left,l.top],wh:m,element:this.endpoints[1],elementId:this.endpoints[1].elementId,
txy:[i.left,i.top],twh:j,tElement:this.endpoints[0],timestamp:n}),this.endpoints[1].paint({anchorLoc:o,timestamp:n})}this._jsPlumb.detachable=d.Defaults.ConnectionsDetachable,a.detachable===!1&&(this._jsPlumb.detachable=!1),this.endpoints[0].connectionsDetachable===!1&&(this._jsPlumb.detachable=!1),this.endpoints[1].connectionsDetachable===!1&&(this._jsPlumb.detachable=!1),this._jsPlumb.reattach=a.reattach||this.endpoints[0].reattachConnections||this.endpoints[1].reattachConnections||d.Defaults.ReattachConnections,this._jsPlumb.cost=a.cost||this.endpoints[0].getConnectionCost(),this._jsPlumb.directed=a.directed,null==a.directed&&(this._jsPlumb.directed=this.endpoints[0].areConnectionsDirected());var p=jsPlumb.extend({},this.endpoints[1].getParameters());jsPlumb.extend(p,this.endpoints[0].getParameters()),jsPlumb.extend(p,this.getParameters()),this.setParameters(p);var q=[a.type,this.endpoints[0].connectionType,this.endpoints[1].connectionType].join(" ");/[^\s]/.test(q)&&this.addType(q,a.data,!0)},jsPlumbUtil.extend(jsPlumb.Connection,OverlayCapableJsPlumbUIComponent,{applyType:function(a,b){null!=a.detachable&&this.setDetachable(a.detachable),null!=a.reattach&&this.setReattach(a.reattach),a.scope&&(this.scope=a.scope),this.setConnector(a.connector,b),null!=a.cssClass&&this.canvas&&this._jsPlumb.instance.addClass(this.canvas,a.cssClass),a.anchor?(this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(a.anchor),this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(a.anchor)):a.anchors&&(this.endpoints[0].anchor=this._jsPlumb.instance.makeAnchor(a.anchors[0]),this.endpoints[1].anchor=this._jsPlumb.instance.makeAnchor(a.anchors[1]))},getTypeDescriptor:function(){return"connection"},getAttachedElements:function(){return this.endpoints},addClass:function(a,b){b&&(this.endpoints[0].addClass(a),this.endpoints[1].addClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.addClass(a)),this.connector&&this.connector.addClass(a)},removeClass:function(a,b){b&&(this.endpoints[0].removeClass(a),this.endpoints[1].removeClass(a),this.suspendedEndpoint&&this.suspendedEndpoint.removeClass(a)),this.connector&&this.connector.removeClass(a)},isVisible:function(){return this._jsPlumb.visible},setVisible:function(a){this._jsPlumb.visible=a,this.connector&&this.connector.setVisible(a),this.repaint()},cleanup:function(){this.endpoints=null,this.source=null,this.target=null,null!=this.connector&&(this.connector.cleanup(),this.connector.destroy()),this.connector=null},isDetachable:function(){return this._jsPlumb.detachable===!0},setDetachable:function(a){this._jsPlumb.detachable=a===!0},isReattach:function(){return this._jsPlumb.reattach===!0},setReattach:function(a){this._jsPlumb.reattach=a===!0},setHover:function(a){this.connector&&this._jsPlumb&&!this._jsPlumb.instance.isConnectionBeingDragged()&&(this.connector.setHover(a),jsPlumbAdapter[a?"addClass":"removeClass"](this.source,this._jsPlumb.instance.hoverSourceClass),jsPlumbAdapter[a?"addClass":"removeClass"](this.target,this._jsPlumb.instance.hoverTargetClass))},getCost:function(){return this._jsPlumb.cost},setCost:function(a){this._jsPlumb.cost=a},isDirected:function(){return this._jsPlumb.directed===!0},getConnector:function(){return this.connector},setConnector:function(b,c,d){var e=jsPlumbUtil;null!=this.connector&&(this.connector.cleanup(),this.connector.destroy());var f={_jsPlumb:this._jsPlumb.instance,cssClass:this._jsPlumb.params.cssClass,container:this._jsPlumb.params.container,"pointer-events":this._jsPlumb.params["pointer-events"]},g=this._jsPlumb.instance.getRenderMode();e.isString(b)?this.connector=a(this._jsPlumb.instance,g,b,f,this):e.isArray(b)&&(this.connector=1==b.length?a(this._jsPlumb.instance,g,b[0],f,this):a(this._jsPlumb.instance,g,b[0],e.merge(b[1],f),this)),this.canvas=this.connector.canvas,this.bgCanvas=this.connector.bgCanvas,this.canvas&&(this.canvas._jsPlumb=this),this.bgCanvas&&(this.bgCanvas._jsPlumb=this),d||this.setListenerComponent(this.connector),c||this.repaint()},paint:function(a){if(!this._jsPlumb.instance.isSuspendDrawing()&&this._jsPlumb.visible){a=a||{};var b=a.timestamp,c=!1,d=c?this.sourceId:this.targetId,e=c?this.targetId:this.sourceId,f=c?0:1,g=c?1:0;if(null==b||b!=this._jsPlumb.lastPaintedAt){var h=this._jsPlumb.instance.getOffset(e),i=this._jsPlumb.instance.getOffset(d),j=this.endpoints[g],k=this.endpoints[f],l=j.anchor.getCurrentLocation({xy:[h.left,h.top],wh:[h.width,h.height],element:j,timestamp:b}),m=k.anchor.getCurrentLocation({xy:[i.left,i.top],wh:[i.width,i.height],element:k,timestamp:b});this.connector.resetBounds(),this.connector.compute({sourcePos:l,targetPos:m,sourceEndpoint:this.endpoints[g],targetEndpoint:this.endpoints[f],lineWidth:this._jsPlumb.paintStyleInUse.lineWidth,sourceInfo:h,targetInfo:i});for(var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},o=0;o<this._jsPlumb.overlays.length;o++){var p=this._jsPlumb.overlays[o];p.isVisible()&&(this._jsPlumb.overlayPlacements[o]=p.draw(this.connector,this._jsPlumb.paintStyleInUse,this.getAbsoluteOverlayPosition(p)),n.minX=Math.min(n.minX,this._jsPlumb.overlayPlacements[o].minX),n.maxX=Math.max(n.maxX,this._jsPlumb.overlayPlacements[o].maxX),n.minY=Math.min(n.minY,this._jsPlumb.overlayPlacements[o].minY),n.maxY=Math.max(n.maxY,this._jsPlumb.overlayPlacements[o].maxY))}var q=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||1)/2,r=parseFloat(this._jsPlumb.paintStyleInUse.lineWidth||0),s={xmin:Math.min(this.connector.bounds.minX-(q+r),n.minX),ymin:Math.min(this.connector.bounds.minY-(q+r),n.minY),xmax:Math.max(this.connector.bounds.maxX+(q+r),n.maxX),ymax:Math.max(this.connector.bounds.maxY+(q+r),n.maxY)};this.connector.paint(this._jsPlumb.paintStyleInUse,null,s);for(var t=0;t<this._jsPlumb.overlays.length;t++){var u=this._jsPlumb.overlays[t];u.isVisible()&&u.paint(this._jsPlumb.overlayPlacements[t],s)}}this._jsPlumb.lastPaintedAt=b}},repaint:function(a){a=a||{},this.paint({elId:this.sourceId,recalc:!(a.recalc===!1),timestamp:a.timestamp})},prepareEndpoint:function(a,c,d,e,f,g,h,i){var j;if(e)d.endpoints[f]=e,e.addConnection(d);else{g.endpoints||(g.endpoints=[null,null]);var k=g.endpoints[f]||g.endpoint||a.Defaults.Endpoints[f]||jsPlumb.Defaults.Endpoints[f]||a.Defaults.Endpoint||jsPlumb.Defaults.Endpoint;g.endpointStyles||(g.endpointStyles=[null,null]),g.endpointHoverStyles||(g.endpointHoverStyles=[null,null]);var l=g.endpointStyles[f]||g.endpointStyle||a.Defaults.EndpointStyles[f]||jsPlumb.Defaults.EndpointStyles[f]||a.Defaults.EndpointStyle||jsPlumb.Defaults.EndpointStyle;null==l.fillStyle&&null!=g.paintStyle&&(l.fillStyle=g.paintStyle.strokeStyle),null==l.outlineColor&&null!=g.paintStyle&&(l.outlineColor=g.paintStyle.outlineColor),null==l.outlineWidth&&null!=g.paintStyle&&(l.outlineWidth=g.paintStyle.outlineWidth);var m=g.endpointHoverStyles[f]||g.endpointHoverStyle||a.Defaults.EndpointHoverStyles[f]||jsPlumb.Defaults.EndpointHoverStyles[f]||a.Defaults.EndpointHoverStyle||jsPlumb.Defaults.EndpointHoverStyle;null!=g.hoverPaintStyle&&(null==m&&(m={}),null==m.fillStyle&&(m.fillStyle=g.hoverPaintStyle.strokeStyle));var n=g.anchors?g.anchors[f]:g.anchor?g.anchor:b(a.Defaults.Anchors[f],i,a)||b(jsPlumb.Defaults.Anchors[f],i,a)||b(a.Defaults.Anchor,i,a)||b(jsPlumb.Defaults.Anchor,i,a),o=g.uuids?g.uuids[f]:null;j=c({paintStyle:l,hoverPaintStyle:m,endpoint:k,connections:[d],uuid:o,anchor:n,source:h,scope:g.scope,reattach:g.reattach||a.Defaults.ReattachConnections,detachable:g.detachable||a.Defaults.ConnectionsDetachable}),d.endpoints[f]=j,g.drawEndpoints===!1&&j.setVisible(!1,!0,!0)}return j}})}(),function(){"use strict";jsPlumb.AnchorManager=function(a){var b={},c={},d={},e={},f={HORIZONTAL:"horizontal",VERTICAL:"vertical",DIAGONAL:"diagonal",IDENTITY:"identity"},g=["left","top","right","bottom"],h={},i=this,j={},k=a.jsPlumbInstance,l={},m=function(a,b,c,d,e,h){if(a===b)return{orientation:f.IDENTITY,a:["top","top"]};var i=Math.atan2(d.centery-c.centery,d.centerx-c.centerx),j=Math.atan2(c.centery-d.centery,c.centerx-d.centerx),k=[],l={};!function(a,b){for(var c=0;c<a.length;c++)l[a[c]]={left:[b[c].left,b[c].centery],right:[b[c].right,b[c].centery],top:[b[c].centerx,b[c].top],bottom:[b[c].centerx,b[c].bottom]}}(["source","target"],[c,d]);for(var m=0;m<g.length;m++)for(var n=0;n<g.length;n++)m!=n&&k.push({source:g[m],target:g[n],dist:Biltong.lineLength(l.source[g[m]],l.target[g[n]])});k.sort(function(a,b){return a.dist<b.dist?-1:a.dist>b.dist?1:0});for(var o=k[0].source,p=k[0].target,q=0;q<k.length&&(o=!e.isContinuous||e.isEdgeSupported(k[q].source)?k[q].source:null,p=!h.isContinuous||h.isEdgeSupported(k[q].target)?k[q].target:null,null==o||null==p);q++);return{a:[o,p],theta:i,theta2:j}},n=function(a,b,c,d,e,f,g){for(var h=[],i=b[e?0:1]/(d.length+1),j=0;j<d.length;j++){var k=(j+1)*i,l=f*b[e?1:0];g&&(k=b[e?0:1]-k);var m=e?k:l,n=c[0]+m,o=m/b[0],p=e?l:k,q=c[1]+p,r=p/b[1];h.push([n,q,o,r,d[j][1],d[j][2]])}return h},o=function(a){return function(b,c){var d=!0;return d=a?b[0][0]<c[0][0]:b[0][0]>c[0][0],d===!1?-1:1}},p=function(a,b){var c=a[0][0]<0?-Math.PI-a[0][0]:Math.PI-a[0][0],d=b[0][0]<0?-Math.PI-b[0][0]:Math.PI-b[0][0];return c>d?1:a[0][1]>b[0][1]?1:-1},q={top:function(a,b){return a[0]>b[0]?1:-1},right:o(!0),bottom:o(!0),left:p},r=function(a,b){return a.sort(b)},s=function(a,b){var d=k.getCachedData(a),f=d.s,g=d.o,h=function(b,d,f,g,h,i,j){if(g.length>0)for(var k=r(g,q[b]),l="right"===b||"top"===b,m=n(b,d,f,k,h,i,l),o=function(a,b){c[a.id]=[b[0],b[1],b[2],b[3]],e[a.id]=j},p=0;p<m.length;p++){var s=m[p][4],t=s.endpoints[0].elementId===a,u=s.endpoints[1].elementId===a;t?o(s.endpoints[0],m[p]):u&&o(s.endpoints[1],m[p])}};h("bottom",f,[g.left,g.top],b.bottom,!0,1,[0,1]),h("top",f,[g.left,g.top],b.top,!0,0,[0,-1]),h("left",f,[g.left,g.top],b.left,!1,0,[-1,0]),h("right",f,[g.left,g.top],b.right,!1,1,[1,0])};this.reset=function(){b={},h={},j={}},this.addFloatingConnection=function(a,b){l[a]=b},this.removeFloatingConnection=function(a){delete l[a]},this.newConnection=function(a){var b=a.sourceId,c=a.targetId,d=a.endpoints,e=!0,f=function(f,g,i,j,k){b==c&&i.isContinuous&&(a._jsPlumb.instance.removeElement(d[1].canvas),e=!1),jsPlumbUtil.addToList(h,j,[k,g,i.constructor==jsPlumb.DynamicAnchor])};f(0,d[0],d[0].anchor,c,a),e&&f(1,d[1],d[1].anchor,b,a)};var t=function(a){!function(a,b){if(a){var c=function(a){return a[4]==b};jsPlumbUtil.removeWithFunction(a.top,c),jsPlumbUtil.removeWithFunction(a.left,c),jsPlumbUtil.removeWithFunction(a.bottom,c),jsPlumbUtil.removeWithFunction(a.right,c)}}(j[a.elementId],a.id)};this.connectionDetached=function(a){var b=a.connection||a,c=a.sourceId,d=a.targetId,e=b.endpoints,f=function(a,b,c,d,e){null!=c&&c.constructor==jsPlumb.FloatingAnchor||jsPlumbUtil.removeWithFunction(h[d],function(a){return a[0].id==e.id})};f(1,e[1],e[1].anchor,c,b),f(0,e[0],e[0].anchor,d,b),t(b.endpoints[0]),t(b.endpoints[1]),i.redraw(b.sourceId),i.redraw(b.targetId)},this.add=function(a,c){jsPlumbUtil.addToList(b,c,a)},this.changeId=function(a,c){h[c]=h[a],b[c]=b[a],delete h[a],delete b[a]},this.getConnectionsFor=function(a){return h[a]||[]},this.getEndpointsFor=function(a){return b[a]||[]},this.deleteEndpoint=function(a){jsPlumbUtil.removeWithFunction(b[a.elementId],function(b){return b.id==a.id}),t(a)},this.clearFor=function(a){delete b[a],b[a]=[]};var u=function(b,c,d,e,f,g,h,i,j,k,l,m){var n,o=-1,p=-1,q=e.endpoints[h],r=q.id,s=[1,0][h],t=[[c,d],e,f,g,r],u=b[j],v=q._continuousAnchorEdge?b[q._continuousAnchorEdge]:null;if(v){var w=jsPlumbUtil.findWithFunction(v,function(a){return a[4]==r});if(-1!=w)for(v.splice(w,1),n=0;n<v.length;n++)jsPlumbUtil.addWithFunction(l,v[n][1],function(a){return a.id==v[n][1].id}),jsPlumbUtil.addWithFunction(m,v[n][1].endpoints[h],function(a){return a.id==v[n][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,v[n][1].endpoints[s],function(a){return a.id==v[n][1].endpoints[s].id})}for(n=0;n<u.length;n++)1==a.idx&&u[n][3]===g&&-1==p&&(p=n),jsPlumbUtil.addWithFunction(l,u[n][1],function(a){return a.id==u[n][1].id}),jsPlumbUtil.addWithFunction(m,u[n][1].endpoints[h],function(a){return a.id==u[n][1].endpoints[h].id}),jsPlumbUtil.addWithFunction(m,u[n][1].endpoints[s],function(a){return a.id==u[n][1].endpoints[s].id});if(-1!=o)u[o]=t;else{var x=i?-1!=p?p:0:u.length;u.splice(x,0,t)}q._continuousAnchorEdge=j};this.updateOtherEndpoint=function(a,b,c,d){var e=jsPlumbUtil.findWithFunction(h[a],function(a){return a[0].id===d.id}),f=jsPlumbUtil.findWithFunction(h[b],function(a){return a[0].id===d.id});-1!=e&&(h[a][e][0]=d,h[a][e][1]=d.endpoints[1],h[a][e][2]=d.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor),f>-1&&(h[b].splice(f,1),jsPlumbUtil.addToList(h,c,[d,d.endpoints[0],d.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor]))},this.sourceChanged=function(a,b,c){if(a!==b){jsPlumbUtil.removeWithFunction(h[a],function(a){return a[0].id===c.id});var d=jsPlumbUtil.findWithFunction(h[c.targetId],function(a){return a[0].id===c.id});d>-1&&(h[c.targetId][d][0]=c,h[c.targetId][d][1]=c.endpoints[0],h[c.targetId][d][2]=c.endpoints[0].anchor.constructor==jsPlumb.DynamicAnchor),jsPlumbUtil.addToList(h,b,[c,c.endpoints[1],c.endpoints[1].anchor.constructor==jsPlumb.DynamicAnchor])}},this.rehomeEndpoint=function(a,c,d){var e=b[c]||[],f=k.getId(d);if(f!==c){var g=jsPlumbUtil.indexOf(e,a);if(g>-1){var h=e.splice(g,1)[0];i.add(h,f)}}for(var j=0;j<a.connections.length;j++)a.connections[j].sourceId==c?(a.connections[j].sourceId=a.elementId,a.connections[j].source=a.element,i.sourceChanged(c,a.elementId,a.connections[j])):a.connections[j].targetId==c&&(a.connections[j].targetId=a.elementId,a.connections[j].target=a.element,i.updateOtherEndpoint(a.connections[j].sourceId,c,a.elementId,a.connections[j]))},this.redraw=function(a,c,d,e,f,g){if(!k.isSuspendDrawing()){var i=b[a]||[],n=h[a]||[],o=[],p=[],q=[];d=d||k.timestamp(),e=e||{left:0,top:0},c&&(c={left:c.left+e.left,top:c.top+e.top});for(var r=k.updateOffset({elId:a,offset:c,recalc:!1,timestamp:d}),t={},v=0;v<n.length;v++){var w=n[v][0],x=w.sourceId,y=w.targetId,z=w.endpoints[0].anchor.isContinuous,A=w.endpoints[1].anchor.isContinuous;if(z||A){var B=x+"_"+y,C=t[B],D=w.sourceId==a?1:0;z&&!j[x]&&(j[x]={top:[],right:[],bottom:[],left:[]}),A&&!j[y]&&(j[y]={top:[],right:[],bottom:[],left:[]}),a!=y&&k.updateOffset({elId:y,timestamp:d}),a!=x&&k.updateOffset({elId:x,timestamp:d});var E=k.getCachedData(y),F=k.getCachedData(x);y==x&&(z||A)?u(j[x],-Math.PI/2,0,w,!1,y,0,!1,"top",x,o,p):(C||(C=m(x,y,F.o,E.o,w.endpoints[0].anchor,w.endpoints[1].anchor),t[B]=C),z&&u(j[x],C.theta,0,w,!1,y,0,!1,C.a[0],x,o,p),A&&u(j[y],C.theta2,-1,w,!0,x,1,!0,C.a[1],y,o,p)),z&&jsPlumbUtil.addWithFunction(q,x,function(a){return a===x}),A&&jsPlumbUtil.addWithFunction(q,y,function(a){return a===y}),jsPlumbUtil.addWithFunction(o,w,function(a){return a.id==w.id}),(z&&0===D||A&&1===D)&&jsPlumbUtil.addWithFunction(p,w.endpoints[D],function(a){return a.id==w.endpoints[D].id})}}for(v=0;v<i.length;v++)0===i[v].connections.length&&i[v].anchor.isContinuous&&(j[a]||(j[a]={top:[],right:[],bottom:[],left:[]}),u(j[a],-Math.PI/2,0,{endpoints:[i[v],i[v]],paint:function(){}},!1,a,0,!1,i[v].anchor.getDefaultFace(),a,o,p),jsPlumbUtil.addWithFunction(q,a,function(b){return b===a}));for(v=0;v<q.length;v++)s(q[v],j[q[v]]);for(v=0;v<i.length;v++)i[v].paint({timestamp:d,offset:r,dimensions:r.s,recalc:g!==!0});for(v=0;v<p.length;v++){var G=k.getCachedData(p[v].elementId);p[v].paint({timestamp:d,offset:G,dimensions:G.s})}for(v=0;v<n.length;v++){var H=n[v][1];if(H.anchor.constructor==jsPlumb.DynamicAnchor){H.paint({elementWithPrecedence:a,timestamp:d}),jsPlumbUtil.addWithFunction(o,n[v][0],function(a){return a.id==n[v][0].id});for(var I=0;I<H.connections.length;I++)H.connections[I]!==n[v][0]&&jsPlumbUtil.addWithFunction(o,H.connections[I],function(a){return a.id==H.connections[I].id})}else H.anchor.constructor==jsPlumb.Anchor&&jsPlumbUtil.addWithFunction(o,n[v][0],function(a){return a.id==n[v][0].id})}var J=l[a];for(J&&J.paint({timestamp:d,recalc:!1,elId:a}),v=0;v<o.length;v++)o[v].paint({elId:a,timestamp:d,recalc:!1,clearEdits:f})}};var v=function(a){jsPlumbUtil.EventGenerator.apply(this),this.type="Continuous",this.isDynamic=!0,this.isContinuous=!0;for(var b=a.faces||["top","right","bottom","left"],f=!(a.clockwise===!1),g={},h={top:"bottom",right:"left",left:"right",bottom:"top"},i={top:"right",right:"bottom",left:"top",bottom:"left"},j={top:"left",right:"top",left:"bottom",bottom:"right"},k=f?i:j,l=f?j:i,m=a.cssClass||"",n=0;n<b.length;n++)g[b[n]]=!0;this.getDefaultFace=function(){return 0===b.length?"top":b[0]},this.verifyEdge=function(a){return g[a]?a:g[h[a]]?h[a]:g[k[a]]?k[a]:g[l[a]]?l[a]:a},this.isEdgeSupported=function(a){return g[a]===!0},this.compute=function(a){return d[a.element.id]||c[a.element.id]||[0,0]},this.getCurrentLocation=function(a){return d[a.element.id]||c[a.element.id]||[0,0]},this.getOrientation=function(a){return e[a.id]||[0,0]},this.clearUserDefinedLocation=function(){delete d[a.elementId]},this.setUserDefinedLocation=function(b){d[a.elementId]=b},this.getCssClass=function(){return m},this.setCssClass=function(a){m=a}};k.continuousAnchorFactory={get:function(a){return new v(a)},clear:function(a){delete d[a],delete c[a]}}},jsPlumb.Anchor=function(a){this.x=a.x||0,this.y=a.y||0,this.elementId=a.elementId,this.cssClass=a.cssClass||"",this.userDefinedLocation=null,this.orientation=a.orientation||[0,0],jsPlumbUtil.EventGenerator.apply(this),a.jsPlumbInstance,this.lastReturnValue=null,this.offsets=a.offsets||[0,0],this.timestamp=null,this.compute=function(a){var b=a.xy,c=a.wh,d=(a.element,a.timestamp);return a.clearUserDefinedLocation&&(this.userDefinedLocation=null),d&&d===self.timestamp?this.lastReturnValue:(this.lastReturnValue=null!=this.userDefinedLocation?this.userDefinedLocation:[b[0]+this.x*c[0]+this.offsets[0],b[1]+this.y*c[1]+this.offsets[1]],this.timestamp=d,this.lastReturnValue)},this.getCurrentLocation=function(a){return null==this.lastReturnValue||null!=a.timestamp&&this.timestamp!=a.timestamp?this.compute(a):this.lastReturnValue}},jsPlumbUtil.extend(jsPlumb.Anchor,jsPlumbUtil.EventGenerator,{equals:function(a){if(!a)return!1;var b=a.getOrientation(),c=this.getOrientation();return this.x==a.x&&this.y==a.y&&this.offsets[0]==a.offsets[0]&&this.offsets[1]==a.offsets[1]&&c[0]==b[0]&&c[1]==b[1]},getUserDefinedLocation:function(){return this.userDefinedLocation},setUserDefinedLocation:function(a){this.userDefinedLocation=a},clearUserDefinedLocation:function(){this.userDefinedLocation=null},getOrientation:function(){return this.orientation},getCssClass:function(){return this.cssClass}}),jsPlumb.FloatingAnchor=function(a){jsPlumb.Anchor.apply(this,arguments);var b=a.reference,c=(a.jsPlumbInstance,a.referenceCanvas),d=jsPlumb.getSize(c),e=0,f=0,g=null,h=null;this.orientation=null,this.x=0,this.y=0,this.isFloating=!0,this.compute=function(a){var b=a.xy,c=(a.element,[b[0]+d[0]/2,b[1]+d[1]/2]);return h=c,c},this.getOrientation=function(a){if(g)return g;var c=b.getOrientation(a);return[-1*Math.abs(c[0])*e,-1*Math.abs(c[1])*f]},this.over=function(a,b){g=a.getOrientation(b)},this.out=function(){g=null},this.getCurrentLocation=function(a){return null==h?this.compute(a):h}},jsPlumbUtil.extend(jsPlumb.FloatingAnchor,jsPlumb.Anchor);var a=function(a,b,c){return a.constructor==jsPlumb.Anchor?a:b.makeAnchor(a,c,b)};jsPlumb.DynamicAnchor=function(b){jsPlumb.Anchor.apply(this,arguments),this.isSelective=!0,this.isDynamic=!0,this.anchors=[],this.elementId=b.elementId,this.jsPlumbInstance=b.jsPlumbInstance;for(var c=0;c<b.anchors.length;c++)this.anchors[c]=a(b.anchors[c],this.jsPlumbInstance,this.elementId);this.addAnchor=function(b){this.anchors.push(a(b,this.jsPlumbInstance,this.elementId))},this.getAnchors=function(){return this.anchors},this.locked=!1;var d=this.anchors.length>0?this.anchors[0]:null,e=(this.anchors.length>0?0:-1,d),f=this,g=function(a,b,c,d,e){var f=d[0]+a.x*e[0],g=d[1]+a.y*e[1],h=d[0]+e[0]/2,i=d[1]+e[1]/2;return Math.sqrt(Math.pow(b-f,2)+Math.pow(c-g,2))+Math.sqrt(Math.pow(h-f,2)+Math.pow(i-g,2))},h=b.selector||function(a,b,c,d,e){for(var f=c[0]+d[0]/2,h=c[1]+d[1]/2,i=-1,j=1/0,k=0;k<e.length;k++){var l=g(e[k],f,h,a,b);j>l&&(i=k+0,j=l)}return e[i]};this.compute=function(a){var b=a.xy,c=a.wh,g=a.timestamp,i=a.txy,j=a.twh;this.timestamp=g;var k=f.getUserDefinedLocation();return null!=k?k:this.locked||null==i||null==j?d.compute(a):(a.timestamp=null,d=h(b,c,i,j,this.anchors),this.x=d.x,this.y=d.y,d!=e&&this.fire("anchorChanged",d),e=d,d.compute(a))},this.getCurrentLocation=function(a){return this.getUserDefinedLocation()||(null!=d?d.getCurrentLocation(a):null)},this.getOrientation=function(a){return null!=d?d.getOrientation(a):[0,0]},this.over=function(a,b){null!=d&&d.over(a,b)},this.out=function(){null!=d&&d.out()},this.getCssClass=function(){return d&&d.getCssClass()||""}},jsPlumbUtil.extend(jsPlumb.DynamicAnchor,jsPlumb.Anchor);var b=function(a,b,c,d,e,f){jsPlumb.Anchors[e]=function(g){var h=g.jsPlumbInstance.makeAnchor([a,b,c,d,0,0],g.elementId,g.jsPlumbInstance);return h.type=e,f&&f(h,g),h}};b(.5,0,0,-1,"TopCenter"),b(.5,1,0,1,"BottomCenter"),b(0,.5,-1,0,"LeftMiddle"),b(1,.5,1,0,"RightMiddle"),b(.5,0,0,-1,"Top"),b(.5,1,0,1,"Bottom"),b(0,.5,-1,0,"Left"),b(1,.5,1,0,"Right"),b(.5,.5,0,0,"Center"),b(1,0,0,-1,"TopRight"),b(1,1,0,1,"BottomRight"),b(0,0,0,-1,"TopLeft"),b(0,1,0,1,"BottomLeft"),jsPlumb.Defaults.DynamicAnchors=function(a){return a.jsPlumbInstance.makeAnchors(["TopCenter","RightMiddle","BottomCenter","LeftMiddle"],a.elementId,a.jsPlumbInstance)},jsPlumb.Anchors.AutoDefault=function(a){var b=a.jsPlumbInstance.makeDynamicAnchor(jsPlumb.Defaults.DynamicAnchors(a));return b.type="AutoDefault",b};var c=function(a,b){jsPlumb.Anchors[a]=function(c){var d=c.jsPlumbInstance.makeAnchor(["Continuous",{faces:b}],c.elementId,c.jsPlumbInstance);return d.type=a,d}};jsPlumb.Anchors.Continuous=function(a){return a.jsPlumbInstance.continuousAnchorFactory.get(a)},c("ContinuousLeft",["left"]),c("ContinuousTop",["top"]),c("ContinuousBottom",["bottom"]),c("ContinuousRight",["right"]),b(0,0,0,0,"Assign",function(a,b){var c=b.position||"Fixed";a.positionFinder=c.constructor==String?b.jsPlumbInstance.AnchorPositionFinders[c]:c,a.constructorParams=b}),jsPlumbInstance.prototype.AnchorPositionFinders={Fixed:function(a,b,c){return[(a.left-b.left)/c[0],(a.top-b.top)/c[1]]},Grid:function(a,b,c,d){var e=a.left-b.left,f=a.top-b.top,g=c[0]/d.grid[0],h=c[1]/d.grid[1],i=Math.floor(e/g),j=Math.floor(f/h);return[(i*g+g/2)/c[0],(j*h+h/2)/c[1]]}},jsPlumb.Anchors.Perimeter=function(a){a=a||{};var b=a.anchorCount||60,c=a.shape;if(!c)throw new Error("no shape supplied to Perimeter Anchor type");var d=function(){for(var a=.5,c=2*Math.PI/b,d=0,e=[],f=0;b>f;f++){var g=a+a*Math.sin(d),h=a+a*Math.cos(d);e.push([g,h,0,0]),d+=c}return e},e=function(a){for(var c=b/a.length,d=[],e=function(a,e,f,g,h){c=b*h;for(var i=(f-a)/c,j=(g-e)/c,k=0;c>k;k++)d.push([a+i*k,e+j*k,0,0])},f=0;f<a.length;f++)e.apply(null,a[f]);return d},f=function(a){for(var b=[],c=0;c<a.length;c++)b.push([a[c][0],a[c][1],a[c][2],a[c][3],1/a.length]);return e(b)},g=function(){return f([[0,0,1,0],[1,0,1,1],[1,1,0,1],[0,1,0,0]])},h={Circle:d,Ellipse:d,Diamond:function(){return f([[.5,0,1,.5],[1,.5,.5,1],[.5,1,0,.5],[0,.5,.5,0]])},Rectangle:g,Square:g,Triangle:function(){return f([[.5,0,1,1],[1,1,0,1],[0,1,.5,0]])},Path:function(a){for(var b=a.points,c=[],d=0,f=0;f<b.length-1;f++){var g=Math.sqrt(Math.pow(b[f][2]-b[f][0])+Math.pow(b[f][3]-b[f][1]));d+=g,c.push([b[f][0],b[f][1],b[f+1][0],b[f+1][1],g])}for(var h=0;h<c.length;h++)c[h][4]=c[h][4]/d;return e(c)}},i=function(a,b){for(var c=[],d=b/180*Math.PI,e=0;e<a.length;e++){var f=a[e][0]-.5,g=a[e][1]-.5;c.push([.5+(f*Math.cos(d)-g*Math.sin(d)),.5+(f*Math.sin(d)+g*Math.cos(d)),a[e][2],a[e][3]])}return c};if(!h[c])throw new Error("Shape ["+c+"] is unknown by Perimeter Anchor type");var j=h[c](a);a.rotation&&(j=i(j,a.rotation));var k=a.jsPlumbInstance.makeDynamicAnchor(j);return k.type="Perimeter",k}}(),function(){"use strict";jsPlumb.Segments={AbstractSegment:function(a){this.params=a,this.findClosestPointOnPath=function(){return{d:1/0,x:null,y:null,l:null}},this.getBounds=function(){return{minX:Math.min(a.x1,a.x2),minY:Math.min(a.y1,a.y2),maxX:Math.max(a.x1,a.x2),maxY:Math.max(a.y1,a.y2)}}},Straight:function(a){var b,c,d,e,f,g,h,i=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(){b=Math.sqrt(Math.pow(f-e,2)+Math.pow(h-g,2)),c=Biltong.gradient({x:e,y:g},{x:f,y:h}),d=-1/c});this.type="Straight",this.getLength=function(){return b},this.getGradient=function(){return c},this.getCoordinates=function(){return{x1:e,y1:g,x2:f,y2:h}},this.setCoordinates=function(a){e=a.x1,g=a.y1,f=a.x2,h=a.y2,i()},this.setCoordinates({x1:a.x1,y1:a.y1,x2:a.x2,y2:a.y2}),this.getBounds=function(){return{minX:Math.min(e,f),minY:Math.min(g,h),maxX:Math.max(e,f),maxY:Math.max(g,h)}},this.pointOnPath=function(a,c){if(0!==a||c){if(1!=a||c){var d=c?a>0?a:b+a:a*b;return Biltong.pointOnLine({x:e,y:g},{x:f,y:h},d)}return{x:f,y:h}}return{x:e,y:g}},this.gradientAtPoint=function(){return c},this.pointAlongPathFrom=function(a,b,c){var d=this.pointOnPath(a,c),i=0>=b?{x:e,y:g}:{x:f,y:h};return 0>=b&&Math.abs(b)>1&&(b*=-1),Biltong.pointOnLine(d,i,b)};var j=function(a,b,c){return c>=Math.min(a,b)&&c<=Math.max(a,b)},k=function(a,b,c){return Math.abs(c-a)<Math.abs(c-b)?a:b};this.findClosestPointOnPath=function(a,i){var l={d:1/0,x:null,y:null,l:null,x1:e,x2:f,y1:g,y2:h};if(0===c)l.y=g,l.x=j(e,f,a)?a:k(e,f,a);else if(1/0==c||c==-1/0)l.x=e,l.y=j(g,h,i)?i:k(g,h,i);else{var m=g-c*e,n=i-d*a,o=(n-m)/(c-d),p=c*o+m;l.x=j(e,f,o)?o:k(e,f,o),l.y=j(g,h,p)?p:k(g,h,p)}var q=Biltong.lineLength([l.x,l.y],[e,g]);return l.d=Biltong.lineLength([a,i],[l.x,l.y]),l.l=q/b,l}},Arc:function(a){var b=(jsPlumb.Segments.AbstractSegment.apply(this,arguments),function(b,c){return Biltong.theta([a.cx,a.cy],[b,c])}),c=function(a,b){if(a.anticlockwise){var c=a.startAngle<a.endAngle?a.startAngle+d:a.startAngle,e=Math.abs(c-a.endAngle);return c-e*b}var f=a.endAngle<a.startAngle?a.endAngle+d:a.endAngle,g=Math.abs(f-a.startAngle);return a.startAngle+g*b},d=2*Math.PI;this.radius=a.r,this.anticlockwise=a.ac,this.type="Arc",a.startAngle&&a.endAngle?(this.startAngle=a.startAngle,this.endAngle=a.endAngle,this.x1=a.cx+this.radius*Math.cos(a.startAngle),this.y1=a.cy+this.radius*Math.sin(a.startAngle),this.x2=a.cx+this.radius*Math.cos(a.endAngle),this.y2=a.cy+this.radius*Math.sin(a.endAngle)):(this.startAngle=b(a.x1,a.y1),this.endAngle=b(a.x2,a.y2),this.x1=a.x1,this.y1=a.y1,this.x2=a.x2,this.y2=a.y2),this.endAngle<0&&(this.endAngle+=d),this.startAngle<0&&(this.startAngle+=d),this.segment=Biltong.quadrant([this.x1,this.y1],[this.x2,this.y2]);var e=this.endAngle<this.startAngle?this.endAngle+d:this.endAngle;this.sweep=Math.abs(e-this.startAngle),this.anticlockwise&&(this.sweep=d-this.sweep);var f=2*Math.PI*this.radius,g=this.sweep/d,h=f*g;this.getLength=function(){return h},this.getBounds=function(){return{minX:a.cx-a.r,maxX:a.cx+a.r,minY:a.cy-a.r,maxY:a.cy+a.r}};var i=1e-10,j=function(a){var b=Math.floor(a),c=Math.ceil(a);return i>a-b?b:i>c-a?c:a};this.pointOnPath=function(b,d){if(0===b)return{x:this.x1,y:this.y1,theta:this.startAngle};if(1==b)return{x:this.x2,y:this.y2,theta:this.endAngle};d&&(b/=h);var e=c(this,b),f=a.cx+a.r*Math.cos(e),g=a.cy+a.r*Math.sin(e);return{x:j(f),y:j(g),theta:e}},this.gradientAtPoint=function(b,c){var d=this.pointOnPath(b,c),e=Biltong.normal([a.cx,a.cy],[d.x,d.y]);return this.anticlockwise||1/0!=e&&e!=-1/0||(e*=-1),e},this.pointAlongPathFrom=function(b,c,d){var e=this.pointOnPath(b,d),g=2*(c/f)*Math.PI,h=this.anticlockwise?-1:1,i=e.theta+h*g,j=a.cx+this.radius*Math.cos(i),k=a.cy+this.radius*Math.sin(i);return{x:j,y:k}}},Bezier:function(a){this.curve=[{x:a.x1,y:a.y1},{x:a.cp1x,y:a.cp1y},{x:a.cp2x,y:a.cp2y},{x:a.x2,y:a.y2}],jsPlumb.Segments.AbstractSegment.apply(this,arguments),this.bounds={minX:Math.min(a.x1,a.x2,a.cp1x,a.cp2x),minY:Math.min(a.y1,a.y2,a.cp1y,a.cp2y),maxX:Math.max(a.x1,a.x2,a.cp1x,a.cp2x),maxY:Math.max(a.y1,a.y2,a.cp1y,a.cp2y)},this.type="Bezier";var b=function(a,b,c){return c&&(b=jsBezier.locationAlongCurveFrom(a,b>0?0:1,b)),b};this.pointOnPath=function(a,c){return a=b(this.curve,a,c),jsBezier.pointOnCurve(this.curve,a)},this.gradientAtPoint=function(a,c){return a=b(this.curve,a,c),jsBezier.gradientAtPoint(this.curve,a)},this.pointAlongPathFrom=function(a,c,d){return a=b(this.curve,a,d),jsBezier.pointAlongCurveFrom(this.curve,a,c)},this.getLength=function(){return jsBezier.getLength(this.curve)},this.getBounds=function(){return this.bounds}}};var a=function(){this.resetBounds=function(){this.bounds={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}},this.resetBounds()};jsPlumb.Connectors.AbstractConnector=function(b){a.apply(this,arguments);var c=[],d=0,e=[],f=[],g=b.stub||0,h=jsPlumbUtil.isArray(g)?g[0]:g,i=jsPlumbUtil.isArray(g)?g[1]:g,j=b.gap||0,k=jsPlumbUtil.isArray(j)?j[0]:j,l=jsPlumbUtil.isArray(j)?j[1]:j,m=null,n=!1,o=null;this.getPath=function(){},this.setPath=function(){},this.findSegmentForPoint=function(a,b){for(var d={d:1/0,s:null,x:null,y:null,l:null},e=0;e<c.length;e++){var f=c[e].findClosestPointOnPath(a,b);f.d<d.d&&(d.d=f.d,d.l=f.l,d.x=f.x,d.y=f.y,d.s=c[e],d.x1=f.x1,d.x2=f.x2,d.y1=f.y1,d.y2=f.y2,d.index=e)}return d};var p=function(){for(var a=0,b=0;b<c.length;b++){var g=c[b].getLength();f[b]=g/d,e[b]=[a,a+=g/d]}},q=function(a,b){b&&(a=a>0?a/d:(d+a)/d);for(var g=e.length-1,h=1,i=0;i<e.length;i++)if(e[i][1]>=a){g=i,h=1==a?1:0===a?0:(a-e[i][0])/f[i];break}return{segment:c[g],proportion:h,index:g}},r=function(a,b,e){if(e.x1!=e.x2||e.y1!=e.y2){var f=new jsPlumb.Segments[b](e);c.push(f),d+=f.getLength(),a.updateBounds(f)}},s=function(){d=c.length=e.length=f.length=0};this.setSegments=function(a){m=[],d=0;for(var b=0;b<a.length;b++)m.push(a[b]),d+=a[b].getLength()};var t=function(a){this.lineWidth=a.lineWidth;var b=Biltong.quadrant(a.sourcePos,a.targetPos),c=a.targetPos[0]<a.sourcePos[0],d=a.targetPos[1]<a.sourcePos[1],e=a.lineWidth||1,f=a.sourceEndpoint.anchor.getOrientation(a.sourceEndpoint),g=a.targetEndpoint.anchor.getOrientation(a.targetEndpoint),j=c?a.targetPos[0]:a.sourcePos[0],m=d?a.targetPos[1]:a.sourcePos[1],n=Math.abs(a.targetPos[0]-a.sourcePos[0]),o=Math.abs(a.targetPos[1]-a.sourcePos[1]);if(0===f[0]&&0===f[1]||0===g[0]&&0===g[1]){var p=n>o?0:1,q=[1,0][p];f=[],g=[],f[p]=a.sourcePos[p]>a.targetPos[p]?-1:1,g[p]=a.sourcePos[p]>a.targetPos[p]?1:-1,f[q]=0,g[q]=0}var r=c?n+k*f[0]:k*f[0],s=d?o+k*f[1]:k*f[1],t=c?l*g[0]:n+l*g[0],u=d?l*g[1]:o+l*g[1],v=f[0]*g[0]+f[1]*g[1],w={sx:r,sy:s,tx:t,ty:u,lw:e,xSpan:Math.abs(t-r),ySpan:Math.abs(u-s),mx:(r+t)/2,my:(s+u)/2,so:f,to:g,x:j,y:m,w:n,h:o,segment:b,startStubX:r+f[0]*h,startStubY:s+f[1]*h,endStubX:t+g[0]*i,endStubY:u+g[1]*i,isXGreaterThanStubTimes2:Math.abs(r-t)>h+i,isYGreaterThanStubTimes2:Math.abs(s-u)>h+i,opposite:-1==v,perpendicular:0===v,orthogonal:1==v,sourceAxis:0===f[0]?"y":"x",points:[j,m,n,o,r,s,t,u]};return w.anchorOrientation=w.opposite?"opposite":w.orthogonal?"orthogonal":"perpendicular",w};return this.getSegments=function(){return c},this.updateBounds=function(a){var b=a.getBounds();this.bounds.minX=Math.min(this.bounds.minX,b.minX),this.bounds.maxX=Math.max(this.bounds.maxX,b.maxX),this.bounds.minY=Math.min(this.bounds.minY,b.minY),this.bounds.maxY=Math.max(this.bounds.maxY,b.maxY)},this.pointOnPath=function(a,b){var c=q(a,b);return c.segment&&c.segment.pointOnPath(c.proportion,!1)||[0,0]},this.gradientAtPoint=function(a,b){var c=q(a,b);return c.segment&&c.segment.gradientAtPoint(c.proportion,!1)||0},this.pointAlongPathFrom=function(a,b,c){var d=q(a,c);return d.segment&&d.segment.pointAlongPathFrom(d.proportion,b,!1)||[0,0]},this.compute=function(a){n||(o=t.call(this,a)),s(),this._compute(o,a),this.x=o.points[0],this.y=o.points[1],this.w=o.points[2],this.h=o.points[3],this.segment=o.segment,p()},{addSegment:r,prepareCompute:t,sourceStub:h,targetStub:i,maxStub:Math.max(h,i),sourceGap:k,targetGap:l,maxGap:Math.max(k,l)}},jsPlumbUtil.extend(jsPlumb.Connectors.AbstractConnector,a);
var b=jsPlumb.Connectors.Straight=function(){this.type="Straight";var a=jsPlumb.Connectors.AbstractConnector.apply(this,arguments);this._compute=function(b){a.addSegment(this,"Straight",{x1:b.sx,y1:b.sy,x2:b.startStubX,y2:b.startStubY}),a.addSegment(this,"Straight",{x1:b.startStubX,y1:b.startStubY,x2:b.endStubX,y2:b.endStubY}),a.addSegment(this,"Straight",{x1:b.endStubX,y1:b.endStubY,x2:b.tx,y2:b.ty})}};jsPlumbUtil.extend(jsPlumb.Connectors.Straight,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(b,"Straight"),jsPlumb.Endpoints.AbstractEndpoint=function(b){a.apply(this,arguments);var c=this.compute=function(){var a=this._compute.apply(this,arguments);return this.x=a[0],this.y=a[1],this.w=a[2],this.h=a[3],this.bounds.minX=this.x,this.bounds.minY=this.y,this.bounds.maxX=this.x+this.w,this.bounds.maxY=this.y+this.h,a};return{compute:c,cssClass:b.cssClass}},jsPlumbUtil.extend(jsPlumb.Endpoints.AbstractEndpoint,a),jsPlumb.Endpoints.Dot=function(a){this.type="Dot",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.radius=a.radius||10,this.defaultOffset=.5*this.radius,this.defaultInnerRadius=this.radius/3,this._compute=function(a,b,c){this.radius=c.radius||this.radius;var d=a[0]-this.radius,e=a[1]-this.radius,f=2*this.radius,g=2*this.radius;if(c.strokeStyle){var h=c.lineWidth||1;d-=h,e-=h,f+=2*h,g+=2*h}return[d,e,f,g,this.radius]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Dot,jsPlumb.Endpoints.AbstractEndpoint),jsPlumb.Endpoints.Rectangle=function(a){this.type="Rectangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},this.width=a.width||20,this.height=a.height||20,this._compute=function(a,b,c){var d=c.width||this.width,e=c.height||this.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}},jsPlumbUtil.extend(jsPlumb.Endpoints.Rectangle,jsPlumb.Endpoints.AbstractEndpoint);var c=function(){jsPlumb.jsPlumbUIComponent.apply(this,arguments),this._jsPlumb.displayElements=[]};jsPlumbUtil.extend(c,jsPlumb.jsPlumbUIComponent,{getDisplayElements:function(){return this._jsPlumb.displayElements},appendDisplayElement:function(a){this._jsPlumb.displayElements.push(a)}}),jsPlumb.Endpoints.Image=function(a){this.type="Image",c.apply(this,arguments),jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments);var b=a.onload,d=a.src||a.url,e=a.cssClass?" "+a.cssClass:"";this._jsPlumb.img=new Image,this._jsPlumb.ready=!1,this._jsPlumb.initialized=!1,this._jsPlumb.deleted=!1,this._jsPlumb.widthToUse=a.width,this._jsPlumb.heightToUse=a.height,this._jsPlumb.endpoint=a.endpoint,this._jsPlumb.img.onload=function(){null!=this._jsPlumb&&(this._jsPlumb.ready=!0,this._jsPlumb.widthToUse=this._jsPlumb.widthToUse||this._jsPlumb.img.width,this._jsPlumb.heightToUse=this._jsPlumb.heightToUse||this._jsPlumb.img.height,b&&b(this))}.bind(this),this._jsPlumb.endpoint.setImage=function(a,c){var d=a.constructor==String?a:a.src;b=c,this._jsPlumb.img.src=d,null!=this.canvas&&this.canvas.setAttribute("src",this._jsPlumb.img.src)}.bind(this),this._jsPlumb.endpoint.setImage(d,b),this._compute=function(a){return this.anchorPoint=a,this._jsPlumb.ready?[a[0]-this._jsPlumb.widthToUse/2,a[1]-this._jsPlumb.heightToUse/2,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse]:[0,0,0,0]},this.canvas=document.createElement("img"),this.canvas.style.margin=0,this.canvas.style.padding=0,this.canvas.style.outline=0,this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.instance.endpointClass+e,this._jsPlumb.widthToUse&&this.canvas.setAttribute("width",this._jsPlumb.widthToUse),this._jsPlumb.heightToUse&&this.canvas.setAttribute("height",this._jsPlumb.heightToUse),this._jsPlumb.instance.appendElement(this.canvas),this.actuallyPaint=function(){if(!this._jsPlumb.deleted){this._jsPlumb.initialized||(this.canvas.setAttribute("src",this._jsPlumb.img.src),this.appendDisplayElement(this.canvas),this._jsPlumb.initialized=!0);var a=this.anchorPoint[0]-this._jsPlumb.widthToUse/2,b=this.anchorPoint[1]-this._jsPlumb.heightToUse/2;jsPlumbUtil.sizeElement(this.canvas,a,b,this._jsPlumb.widthToUse,this._jsPlumb.heightToUse)}},this.paint=function(a,b){null!=this._jsPlumb&&(this._jsPlumb.ready?this.actuallyPaint(a,b):window.setTimeout(function(){this.paint(a,b)}.bind(this),200))}},jsPlumbUtil.extend(jsPlumb.Endpoints.Image,[c,jsPlumb.Endpoints.AbstractEndpoint],{cleanup:function(){this._jsPlumb.deleted=!0,this.canvas&&this.canvas.parentNode.removeChild(this.canvas),this.canvas=null}}),jsPlumb.Endpoints.Blank=function(a){jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),this.type="Blank",c.apply(this,arguments),this._compute=function(a){return[a[0],a[1],10,0]};var b=a.cssClass?" "+a.cssClass:"";this.canvas=document.createElement("div"),this.canvas.style.display="block",this.canvas.style.width="1px",this.canvas.style.height="1px",this.canvas.style.background="transparent",this.canvas.style.position="absolute",this.canvas.className=this._jsPlumb.instance.endpointClass+b,this._jsPlumb.instance.appendElement(this.canvas),this.paint=function(){jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h)}},jsPlumbUtil.extend(jsPlumb.Endpoints.Blank,[jsPlumb.Endpoints.AbstractEndpoint,c],{cleanup:function(){this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}}),jsPlumb.Endpoints.Triangle=function(a){this.type="Triangle",jsPlumb.Endpoints.AbstractEndpoint.apply(this,arguments),a=a||{},a.width=a.width||55,a.height=a.height||55,this.width=a.width,this.height=a.height,this._compute=function(a,b,c){var d=c.width||self.width,e=c.height||self.height,f=a[0]-d/2,g=a[1]-e/2;return[f,g,d,e]}};var d=jsPlumb.Overlays.AbstractOverlay=function(a){this.visible=!0,this.isAppendedAtTopLevel=!0,this.component=a.component,this.loc=null==a.location?.5:a.location,this.endpointLoc=null==a.endpointLocation?[.5,.5]:a.endpointLocation};d.prototype={cleanup:function(){this.component=null,this.canvas=null,this.endpointLoc=null},setVisible:function(a){this.visible=a,this.component.repaint()},isVisible:function(){return this.visible},hide:function(){this.setVisible(!1)},show:function(){this.setVisible(!0)},incrementLocation:function(a){this.loc+=a,this.component.repaint()},setLocation:function(a){this.loc=a,this.component.repaint()},getLocation:function(){return this.loc}},jsPlumb.Overlays.Arrow=function(a){this.type="Arrow",d.apply(this,arguments),this.isAppendedAtTopLevel=!1,a=a||{};var b=jsPlumbUtil,c=Biltong;this.length=a.length||20,this.width=a.width||20,this.id=a.id;var e=(a.direction||1)<0?-1:1,f=a.paintStyle||{lineWidth:1},g=a.foldback||.623;this.computeMaxSize=function(){return 1.5*self.width},this.draw=function(a,d){var h,i,j,k,l;if(a.pointAlongPathFrom){if(b.isString(this.loc)||this.loc>1||this.loc<0){var m=parseInt(this.loc,10),n=this.loc<0?1:0;h=a.pointAlongPathFrom(n,m,!1),i=a.pointAlongPathFrom(n,m-e*this.length/2,!1),j=c.pointOnLine(h,i,this.length)}else if(1==this.loc){if(h=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,-this.length),j=c.pointOnLine(h,i,this.length),-1==e){var o=j;j=h,h=o}}else if(0===this.loc){if(j=a.pointOnPath(this.loc),i=a.pointAlongPathFrom(this.loc,this.length),h=c.pointOnLine(j,i,this.length),-1==e){var p=j;j=h,h=p}}else h=a.pointAlongPathFrom(this.loc,e*this.length/2),i=a.pointOnPath(this.loc),j=c.pointOnLine(h,i,this.length);k=c.perpendicularLineTo(h,j,this.width),l=c.pointOnLine(h,j,g*this.length);var q={hxy:h,tail:k,cxy:l},r=f.strokeStyle||d.strokeStyle,s=f.fillStyle||d.strokeStyle,t=f.lineWidth||d.lineWidth;return{component:a,d:q,lineWidth:t,strokeStyle:r,fillStyle:s,minX:Math.min(h.x,k[0].x,k[1].x),maxX:Math.max(h.x,k[0].x,k[1].x),minY:Math.min(h.y,k[0].y,k[1].y),maxY:Math.max(h.y,k[0].y,k[1].y)}}return{component:a,minX:0,maxX:0,minY:0,maxY:0}}},jsPlumbUtil.extend(jsPlumb.Overlays.Arrow,d),jsPlumb.Overlays.PlainArrow=function(a){a=a||{};var b=jsPlumb.extend(a,{foldback:1});jsPlumb.Overlays.Arrow.call(this,b),this.type="PlainArrow"},jsPlumbUtil.extend(jsPlumb.Overlays.PlainArrow,jsPlumb.Overlays.Arrow),jsPlumb.Overlays.Diamond=function(a){a=a||{};var b=a.length||40,c=jsPlumb.extend(a,{length:b/2,foldback:2});jsPlumb.Overlays.Arrow.call(this,c),this.type="Diamond"},jsPlumbUtil.extend(jsPlumb.Overlays.Diamond,jsPlumb.Overlays.Arrow);var e=function(a,b){return(null==a._jsPlumb.cachedDimensions||b)&&(a._jsPlumb.cachedDimensions=a.getDimensions()),a._jsPlumb.cachedDimensions},f=function(a){jsPlumb.jsPlumbUIComponent.apply(this,arguments),d.apply(this,arguments);var b=this.fire;this.fire=function(){b.apply(this,arguments),this.component&&this.component.fire.apply(this.component,arguments)},this.id=a.id,this._jsPlumb.div=null,this._jsPlumb.initialised=!1,this._jsPlumb.component=a.component,this._jsPlumb.cachedDimensions=null,this._jsPlumb.create=a.create,this._jsPlumb.initiallyInvisible=a.visible===!1,this.getElement=function(){if(null==this._jsPlumb.div){var b=this._jsPlumb.div=jsPlumb.getDOMElement(this._jsPlumb.create(this._jsPlumb.component));b.style.position="absolute",b.className=this._jsPlumb.instance.overlayClass+" "+(this.cssClass?this.cssClass:a.cssClass?a.cssClass:""),this._jsPlumb.instance.appendElement(b),this._jsPlumb.instance.getId(b),this.canvas=b;var c="translate(-50%, -50%)";b.style.webkitTransform=c,b.style.mozTransform=c,b.style.msTransform=c,b.style.oTransform=c,b.style.transform=c,b._jsPlumb=this,a.visible===!1&&(b.style.display="none")}return this._jsPlumb.div},this.draw=function(a,b,c){var d=e(this);if(null!=d&&2==d.length){var f={x:0,y:0};if(c)f={x:c[0],y:c[1]};else if(a.pointOnPath){var g=this.loc,h=!1;(jsPlumbUtil.isString(this.loc)||this.loc<0||this.loc>1)&&(g=parseInt(this.loc,10),h=!0),f=a.pointOnPath(g,h)}else{var i=this.loc.constructor==Array?this.loc:this.endpointLoc;f={x:i[0]*a.w,y:i[1]*a.h}}var j=f.x-d[0]/2,k=f.y-d[1]/2;return{component:a,d:{minx:j,miny:k,td:d,cxy:f},minX:j,maxX:j+d[0],minY:k,maxY:k+d[1]}}return{minX:0,maxX:0,minY:0,maxY:0}}};jsPlumbUtil.extend(f,[jsPlumb.jsPlumbUIComponent,d],{getDimensions:function(){return jsPlumbUtil.oldIE?jsPlumb.getSize(this.getElement()):[1,1]},setVisible:function(a){this._jsPlumb.div.style.display=a?"block":"none",a&&this._jsPlumb.initiallyInvisible&&(e(this,!0),this.component.repaint(),this._jsPlumb.initiallyInvisible=!1)},clearCachedDimensions:function(){this._jsPlumb.cachedDimensions=null},cleanup:function(){null!=this._jsPlumb.div&&(this._jsPlumb.div._jsPlumb=null,this._jsPlumb.instance.removeElement(this._jsPlumb.div))},computeMaxSize:function(){var a=e(this);return Math.max(a[0],a[1])},paint:function(a){this._jsPlumb.initialised||(this.getElement(),a.component.appendDisplayElement(this._jsPlumb.div),this._jsPlumb.initialised=!0),this._jsPlumb.div.style.left=a.component.x+a.d.minx+"px",this._jsPlumb.div.style.top=a.component.y+a.d.miny+"px"}}),jsPlumb.Overlays.Custom=function(){this.type="Custom",f.apply(this,arguments)},jsPlumbUtil.extend(jsPlumb.Overlays.Custom,f),jsPlumb.Overlays.GuideLines=function(){var a=this;a.length=50,a.lineWidth=5,this.type="GuideLines",d.apply(this,arguments),jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.draw=function(b){var c=b.pointAlongPathFrom(a.loc,a.length/2),d=b.pointOnPath(a.loc),e=Biltong.pointOnLine(c,d,a.length),f=Biltong.perpendicularLineTo(c,e,40),g=Biltong.perpendicularLineTo(e,c,20);return{connector:b,head:c,tail:e,headLine:g,tailLine:f,minX:Math.min(c.x,e.x,g[0].x,g[1].x),minY:Math.min(c.y,e.y,g[0].y,g[1].y),maxX:Math.max(c.x,e.x,g[0].x,g[1].x),maxY:Math.max(c.y,e.y,g[0].y,g[1].y)}}},jsPlumb.Overlays.Label=function(a){this.labelStyle=a.labelStyle,this.cssClass=null!=this.labelStyle?this.labelStyle.cssClass:null;var b=jsPlumb.extend({create:function(){return document.createElement("div")}},a);if(jsPlumb.Overlays.Custom.call(this,b),this.type="Label",this.label=a.label||"",this.labelText=null,this.labelStyle){var c=this.getElement();if(this.labelStyle.font=this.labelStyle.font||"12px sans-serif",c.style.font=this.labelStyle.font,c.style.color=this.labelStyle.color||"black",this.labelStyle.fillStyle&&(c.style.background=this.labelStyle.fillStyle),this.labelStyle.borderWidth>0){var d=this.labelStyle.borderStyle?this.labelStyle.borderStyle:"black";c.style.border=this.labelStyle.borderWidth+"px solid "+d}this.labelStyle.padding&&(c.style.padding=this.labelStyle.padding)}},jsPlumbUtil.extend(jsPlumb.Overlays.Label,jsPlumb.Overlays.Custom,{cleanup:function(){this.div=null,this.label=null,this.labelText=null,this.cssClass=null,this.labelStyle=null},getLabel:function(){return this.label},setLabel:function(a){this.label=a,this.labelText=null,this.clearCachedDimensions(),this.update(),this.component.repaint()},getDimensions:function(){return this.update(),f.prototype.getDimensions.apply(this,arguments)},update:function(){if("function"==typeof this.label){var a=this.label(this);this.getElement().innerHTML=a.replace(/\r\n/g,"<br/>")}else null==this.labelText&&(this.labelText=this.label,this.getElement().innerHTML=this.labelText.replace(/\r\n/g,"<br/>"))}})}(),function(){"use strict";var a=function(a){var b=a._mottle;return b||(b=a._mottle=new Mottle),b};jsPlumb.extend(jsPlumbInstance.prototype,{getEventManager:function(){return a(this)},on:function(){this.getEventManager().on.apply(this,arguments)},off:function(){this.getEventManager().off.apply(this,arguments)}})}.call(this),function(){"use strict";var a=function(a){this.type="Flowchart",a=a||{},a.stub=null==a.stub?30:a.stub;var b,c=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),d=null==a.midpoint?.5:a.midpoint,e=[],f=(a.grid,a.alwaysRespectStubs),g=null,h=null,i=null,j=null!=a.cornerRadius?a.cornerRadius:0,k=function(a){return 0>a?-1:0===a?0:1},l=function(a,b,c,d){if(h!=b||i!=c){var e=null==h?d.sx:h,f=null==i?d.sy:i,g=e==b?"v":"h",j=k(b-e),l=k(c-f);h=b,i=c,a.push([e,f,b,c,g,j,l])}},m=function(a){return Math.sqrt(Math.pow(a[0]-a[2],2)+Math.pow(a[1]-a[3],2))},n=function(a){var b=[];return b.push.apply(b,a),b},o=function(a,b,d){for(var e,f,g=0;g<b.length-1;g++){if(e=e||n(b[g]),f=n(b[g+1]),j>0&&e[4]!=f[4]){var h=Math.min(j,m(e),m(f));e[2]-=e[5]*h,e[3]-=e[6]*h,f[0]+=f[5]*h,f[1]+=f[6]*h;var i=e[6]==f[5]&&1==f[5]||e[6]==f[5]&&0===f[5]&&e[5]!=f[6]||e[6]==f[5]&&-1==f[5],k=f[1]>e[3]?1:-1,l=f[0]>e[2]?1:-1,o=k==l,p=o&&i||!o&&!i?f[0]:e[2],q=o&&i||!o&&!i?e[3]:f[1];c.addSegment(a,"Straight",{x1:e[0],y1:e[1],x2:e[2],y2:e[3]}),c.addSegment(a,"Arc",{r:h,x1:e[2],y1:e[3],x2:f[0],y2:f[1],cx:p,cy:q,ac:i})}else{var r=e[2]==e[0]?0:e[2]>e[0]?d.lw/2:-(d.lw/2),s=e[3]==e[1]?0:e[3]>e[1]?d.lw/2:-(d.lw/2);c.addSegment(a,"Straight",{x1:e[0]-r,y1:e[1]-s,x2:e[2]+r,y2:e[3]+s})}e=f}null!=f&&c.addSegment(a,"Straight",{x1:f[0],y1:f[1],x2:f[2],y2:f[3]})};this.setSegments=function(a){g=a},this.isEditable=function(){return!0},this.getOriginalSegments=function(){return g||e},this._compute=function(a,j){if(j.clearEdits&&(g=null),null!=g)return void o(this,g,a);e=[],h=null,i=null,b=null;var k=a.startStubX+(a.endStubX-a.startStubX)*d,m=a.startStubY+(a.endStubY-a.startStubY)*d,n={x:[0,1],y:[1,0]},p=function(){return[a.startStubX,a.startStubY,a.endStubX,a.endStubY]},q={perpendicular:p,orthogonal:p,opposite:function(b){var c=a,d="x"==b?0:1,e={x:function(){return 1==c.so[d]&&(c.startStubX>c.endStubX&&c.tx>c.startStubX||c.sx>c.endStubX&&c.tx>c.sx)||-1==c.so[d]&&(c.startStubX<c.endStubX&&c.tx<c.startStubX||c.sx<c.endStubX&&c.tx<c.sx)},y:function(){return 1==c.so[d]&&(c.startStubY>c.endStubY&&c.ty>c.startStubY||c.sy>c.endStubY&&c.ty>c.sy)||-1==c.so[d]&&(c.startStubY<c.endStubY&&c.ty<c.startStubY||c.sy<c.endStubY&&c.ty<c.sy)}};return!f&&e[b]()?{x:[(a.sx+a.tx)/2,a.startStubY,(a.sx+a.tx)/2,a.endStubY],y:[a.startStubX,(a.sy+a.ty)/2,a.endStubX,(a.sy+a.ty)/2]}[b]:[a.startStubX,a.startStubY,a.endStubX,a.endStubY]}},r={perpendicular:function(b){var c=a,d={x:[[[1,2,3,4],null,[2,1,4,3]],null,[[4,3,2,1],null,[3,4,1,2]]],y:[[[3,2,1,4],null,[2,3,4,1]],null,[[4,1,2,3],null,[1,4,3,2]]]},e={x:[[c.startStubX,c.endStubX],null,[c.endStubX,c.startStubX]],y:[[c.startStubY,c.endStubY],null,[c.endStubY,c.startStubY]]},f={x:[[k,c.startStubY],[k,c.endStubY]],y:[[c.startStubX,m],[c.endStubX,m]]},g={x:[[c.endStubX,c.startStubY]],y:[[c.startStubX,c.endStubY]]},h={x:[[c.startStubX,c.endStubY],[c.endStubX,c.endStubY]],y:[[c.endStubX,c.startStubY],[c.endStubX,c.endStubY]]},i={x:[[c.startStubX,m],[c.endStubX,m],[c.endStubX,c.endStubY]],y:[[k,c.startStubY],[k,c.endStubY],[c.endStubX,c.endStubY]]},j={x:[c.startStubY,c.endStubY],y:[c.startStubX,c.endStubX]},l=n[b][0],o=n[b][1],p=c.so[l]+1,q=c.to[o]+1,r=-1==c.to[o]&&j[b][1]<j[b][0]||1==c.to[o]&&j[b][1]>j[b][0],s=e[b][p][0],t=e[b][p][1],u=d[b][p][q];return c.segment==u[3]||c.segment==u[2]&&r?f[b]:c.segment==u[2]&&s>t?g[b]:c.segment==u[2]&&t>=s||c.segment==u[1]&&!r?i[b]:c.segment==u[0]||c.segment==u[1]&&r?h[b]:void 0},orthogonal:function(b,c,d,e,f){var g=a,h={x:-1==g.so[0]?Math.min(c,e):Math.max(c,e),y:-1==g.so[1]?Math.min(c,e):Math.max(c,e)}[b];return{x:[[h,d],[h,f],[e,f]],y:[[d,h],[f,h],[f,e]]}[b]},opposite:function(b,d,e,f){var g=a,h={x:"y",y:"x"}[b],i={x:"height",y:"width"}[b],l=g["is"+b.toUpperCase()+"GreaterThanStubTimes2"];if(j.sourceEndpoint.elementId==j.targetEndpoint.elementId){var n=e+(1-j.sourceEndpoint.anchor[h])*j.sourceInfo[i]+c.maxStub;return{x:[[d,n],[f,n]],y:[[n,d],[n,f]]}[b]}return!l||1==g.so[t]&&d>f||-1==g.so[t]&&f>d?{x:[[d,m],[f,m]],y:[[k,d],[k,f]]}[b]:1==g.so[t]&&f>d||-1==g.so[t]&&d>f?{x:[[k,g.sy],[k,g.ty]],y:[[g.sx,m],[g.tx,m]]}[b]:void 0}},s=q[a.anchorOrientation](a.sourceAxis),t="x"==a.sourceAxis?0:1,u="x"==a.sourceAxis?1:0,v=s[t],w=s[u],x=s[t+2],y=s[u+2];l(e,s[0],s[1],a);var z=r[a.anchorOrientation](a.sourceAxis,v,w,x,y);if(z)for(var A=0;A<z.length;A++)l(e,z[A][0],z[A][1],a);l(e,s[2],s[3],a),l(e,a.tx,a.ty,a),o(this,e,a)},this.getPath=function(){for(var a=null,b=null,c=[],d=g||e,f=0;f<d.length;f++){var h=d[f],i=h[4],j="v"==i?3:2;null!=a&&b===i?a[j]=h[j]:(h[0]!=h[2]||h[1]!=h[3])&&(c.push({start:[h[0],h[1]],end:[h[2],h[3]]}),a=h,b=h[4])}return c},this.setPath=function(a){g=[];for(var b=0;b<a.length;b++){var c=a[b].start[0],d=a[b].start[1],e=a[b].end[0],f=a[b].end[1],h=c==e?"v":"h",i=k(e-c),j=k(f-d);g.push([c,d,e,f,h,i,j])}}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,"Flowchart")}(),function(){"use strict";var a=function(a,b,c,d){return c>=a&&b>=d?1:c>=a&&d>=b?2:a>=c&&d>=b?3:4},b=function(a,b,c,d,e,f,g,h,i){return i>=h?[a,b]:1===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:2===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]>=1&&e[2]<=0?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:3===c?d[3]>=1&&e[3]<=0?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+-1*f,b+-1*g]:4===c?d[3]<=0&&e[3]>=1?[a+(d[2]<.5?-1*f:f),b]:d[2]<=0&&e[2]>=1?[a,b+(d[3]<.5?-1*g:g)]:[a+1*f,b+-1*g]:void 0},c=function(c){c=c||{},this.type="StateMachine";var d=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),e=c.curviness||10,f=c.margin||5,g=c.proximityLimit||80,h=c.orientation&&"clockwise"===c.orientation,i=c.loopbackRadius||25,j=c.showLoopback!==!1;this._compute=function(c,k){var l=Math.abs(k.sourcePos[0]-k.targetPos[0]),m=Math.abs(k.sourcePos[1]-k.targetPos[1]);if(Math.min(k.sourcePos[0],k.targetPos[0]),Math.min(k.sourcePos[1],k.targetPos[1]),j&&k.sourceEndpoint.elementId===k.targetEndpoint.elementId){var n=k.sourcePos[0],o=(k.sourcePos[0],k.sourcePos[1]-f),p=(k.sourcePos[1]-f,n),q=o-i,r=2*i,s=2*i,t=p-i,u=q-i;c.points[0]=t,c.points[1]=u,c.points[2]=r,c.points[3]=s,d.addSegment(this,"Arc",{loopback:!0,x1:n-t+4,y1:o-u,startAngle:0,endAngle:2*Math.PI,r:i,ac:!h,x2:n-t-4,y2:o-u,cx:p-t,cy:q-u})}else{var v=k.sourcePos[0]<k.targetPos[0]?0:l,w=k.sourcePos[1]<k.targetPos[1]?0:m,x=k.sourcePos[0]<k.targetPos[0]?l:0,y=k.sourcePos[1]<k.targetPos[1]?m:0;0===k.sourcePos[2]&&(v-=f),1===k.sourcePos[2]&&(v+=f),0===k.sourcePos[3]&&(w-=f),1===k.sourcePos[3]&&(w+=f),0===k.targetPos[2]&&(x-=f),1===k.targetPos[2]&&(x+=f),0===k.targetPos[3]&&(y-=f),1===k.targetPos[3]&&(y+=f);var z=(v+x)/2,A=(w+y)/2,B=-1*z/A,C=Math.atan(B),D=(1/0==B||B==-1/0?0:Math.abs(e/2*Math.sin(C)),1/0==B||B==-1/0?0:Math.abs(e/2*Math.cos(C)),a(v,w,x,y)),E=Math.sqrt(Math.pow(x-v,2)+Math.pow(y-w,2)),F=b(z,A,D,k.sourcePos,k.targetPos,e,e,E,g);d.addSegment(this,"Bezier",{x1:x,y1:y,x2:v,y2:w,cp1x:F[0],cp1y:F[1],cp2x:F[0],cp2y:F[1]})}}};jsPlumb.registerConnectorType(c,"StateMachine")}(),function(){var a=function(a){a=a||{};var b=jsPlumb.Connectors.AbstractConnector.apply(this,arguments),c=(a.stub||50,a.curviness||150),d=10;this.type="Bezier",this.getCurviness=function(){return c},this._findControlPoint=function(a,b,e,f,g){var h=f.anchor.getOrientation(f),i=g.anchor.getOrientation(g),j=h[0]!=i[0]||h[1]==i[1],k=[];return j?(0===i[0]?k.push(e[0]<b[0]?a[0]+d:a[0]-d):k.push(a[0]+c*i[0]),0===i[1]?k.push(e[1]<b[1]?a[1]+d:a[1]-d):k.push(a[1]+c*h[1])):(0===h[0]?k.push(b[0]<e[0]?a[0]+d:a[0]-d):k.push(a[0]-c*h[0]),0===h[1]?k.push(b[1]<e[1]?a[1]+d:a[1]-d):k.push(a[1]+c*i[1])),k},this._compute=function(a,c){var d=c.sourcePos,e=c.targetPos,f=Math.abs(d[0]-e[0]),g=Math.abs(d[1]-e[1]),h=d[0]<e[0]?f:0,i=d[1]<e[1]?g:0,j=d[0]<e[0]?0:f,k=d[1]<e[1]?0:g,l=this._findControlPoint([h,i],d,e,c.sourceEndpoint,c.targetEndpoint,a.so,a.to),m=this._findControlPoint([j,k],e,d,c.targetEndpoint,c.sourceEndpoint,a.so,a.to);b.addSegment(this,"Bezier",{x1:h,y1:i,x2:j,y2:k,cp1x:l[0],cp1y:l[1],cp2x:m[0],cp2y:m[1]})}};jsPlumbUtil.extend(a,jsPlumb.Connectors.AbstractConnector),jsPlumb.registerConnectorType(a,"Bezier")}(),function(){"use strict";var a={joinstyle:"stroke-linejoin","stroke-linejoin":"stroke-linejoin","stroke-dashoffset":"stroke-dashoffset","stroke-linecap":"stroke-linecap"},b="stroke-dasharray",c="dashstyle",d="linearGradient",e="radialGradient",f="defs",g="fill",h="stop",i="stroke",j="stroke-width",k="style",l="none",m="jsplumb_gradient_",n="lineWidth",o={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml"},p=function(a,b){for(var c in b)a.setAttribute(c,""+b[c])},q=function(a,b){var c=document.createElementNS(o.svg,a);return b=b||{},b.version="1.1",b.xmlns=o.xhtml,p(c,b),c},r=function(a){return"position:absolute;left:"+a[0]+"px;top:"+a[1]+"px"},s=function(a){for(var b=0;b<a.childNodes.length;b++)(a.childNodes[b].tagName==f||a.childNodes[b].tagName==d||a.childNodes[b].tagName==e)&&a.removeChild(a.childNodes[b])},t=function(a,b,c,j,k){var l=m+k._jsPlumb.instance.idstamp();s(a);var n;n=c.gradient.offset?q(e,{id:l}):q(d,{id:l,gradientUnits:"userSpaceOnUse"});var o=q(f);a.appendChild(o),o.appendChild(n);for(var p=0;p<c.gradient.stops.length;p++){var r=1==k.segment||2==k.segment?p:c.gradient.stops.length-1-p,t=jsPlumbUtil.convertStyle(c.gradient.stops[r][1],!0),u=q(h,{offset:Math.floor(100*c.gradient.stops[p][0])+"%","stop-color":t});n.appendChild(u)}var v=c.strokeStyle?i:g;b.setAttribute(v,"url(#"+l+")")},u=function(d,e,f,h,m){if(e.setAttribute(g,f.fillStyle?jsPlumbUtil.convertStyle(f.fillStyle,!0):l),e.setAttribute(i,f.strokeStyle?jsPlumbUtil.convertStyle(f.strokeStyle,!0):l),f.gradient?t(d,e,f,h,m):(s(d),e.setAttribute(k,"")),f.lineWidth&&e.setAttribute(j,f.lineWidth),f[c]&&f[n]&&!f[b]){var o=-1==f[c].indexOf(",")?" ":",",p=f[c].split(o),q="";p.forEach(function(a){q+=Math.floor(a*f.lineWidth)+o}),e.setAttribute(b,q)}else f[b]&&e.setAttribute(b,f[b]);for(var r in a)f[r]&&e.setAttribute(a[r],f[r])},v=function(a,b,c){a.childNodes.length>c?a.insertBefore(b,a.childNodes[c]):a.appendChild(b)};jsPlumbUtil.svg={node:q,attr:p,pos:r};var w=function(a){var b=a.pointerEventsSpec||"all",c={};jsPlumb.jsPlumbUIComponent.apply(this,a.originalArgs),this.canvas=null,this.path=null,this.svg=null,this.bgCanvas=null;var d=a.cssClass+" "+(a.originalArgs[0].cssClass||""),e={style:"",width:0,height:0,"pointer-events":b,position:"absolute"};this.svg=q("svg",e),a.useDivWrapper?(this.canvas=document.createElement("div"),this.canvas.style.position="absolute",jsPlumbUtil.sizeElement(this.canvas,0,0,1,1),this.canvas.className=d):(p(this.svg,{class:d}),this.canvas=this.svg),a._jsPlumb.appendElement(this.canvas,a.originalArgs[0].parent),a.useDivWrapper&&this.canvas.appendChild(this.svg);var f=[this.canvas];return this.getDisplayElements=function(){return f},this.appendDisplayElement=function(a){f.push(a)},this.paint=function(b,d,e){if(null!=b){var f,g=[this.x,this.y],h=[this.w,this.h];null!=e&&(e.xmin<0&&(g[0]+=e.xmin),e.ymin<0&&(g[1]+=e.ymin),h[0]=e.xmax+(e.xmin<0?-e.xmin:0),h[1]=e.ymax+(e.ymin<0?-e.ymin:0)),a.useDivWrapper?(jsPlumbUtil.sizeElement(this.canvas,g[0],g[1],h[0],h[1]),g[0]=0,g[1]=0,f=r([0,0])):f=r([g[0],g[1]]),c.paint.apply(this,arguments),p(this.svg,{style:f,width:h[0],height:h[1]})}},{renderer:c}};jsPlumbUtil.extend(w,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.canvas&&(this.canvas._jsPlumb=null),this.svg&&(this.svg._jsPlumb=null),this.bgCanvas&&(this.bgCanvas._jsPlumb=null),this.canvas&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.bgCanvas&&this.bgCanvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.svg=null,this.canvas=null,this.path=null,this.group=null},setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none")}}),jsPlumb.ConnectorRenderers.svg=function(a){var b=this,c=w.apply(this,[{cssClass:a._jsPlumb.connectorClass,originalArgs:arguments,pointerEventsSpec:"none",_jsPlumb:a._jsPlumb}]);c.renderer.paint=function(c,d,e){var f=b.getSegments(),g="",h=[0,0];if(e.xmin<0&&(h[0]=-e.xmin),e.ymin<0&&(h[1]=-e.ymin),f.length>0){for(var i=0;i<f.length;i++)g+=jsPlumb.Segments.svg.SegmentRenderer.getPath(f[i]),g+=" ";var j={d:g,transform:"translate("+h[0]+","+h[1]+")","pointer-events":a["pointer-events"]||"visibleStroke"},k=null,l=[b.x,b.y,b.w,b.h];if(c.outlineColor){var m=c.outlineWidth||1,n=c.lineWidth+2*m;k=jsPlumb.extend({},c),delete k.gradient,k.strokeStyle=jsPlumbUtil.convertStyle(c.outlineColor),k.lineWidth=n,null==b.bgPath?(b.bgPath=q("path",j),v(b.svg,b.bgPath,0)):p(b.bgPath,j),u(b.svg,b.bgPath,k,l,b)}null==b.path?(b.path=q("path",j),v(b.svg,b.path,c.outlineColor?1:0)):p(b.path,j),u(b.svg,b.path,c,l,b)}}},jsPlumbUtil.extend(jsPlumb.ConnectorRenderers.svg,w),jsPlumb.Segments.svg={SegmentRenderer:{getPath:function(a){return{Straight:function(){var b=a.getCoordinates();return"M "+b.x1+" "+b.y1+" L "+b.x2+" "+b.y2},Bezier:function(){var b=a.params;return"M "+b.x1+" "+b.y1+" C "+b.cp1x+" "+b.cp1y+" "+b.cp2x+" "+b.cp2y+" "+b.x2+" "+b.y2},Arc:function(){var b=a.params,c=a.sweep>Math.PI?1:0,d=a.anticlockwise?0:1;return"M"+a.x1+" "+a.y1+" A "+a.radius+" "+b.r+" 0 "+c+","+d+" "+a.x2+" "+a.y2}}[a.type]()}}};var x=window.SvgEndpoint=function(a){var b=w.apply(this,[{cssClass:a._jsPlumb.endpointClass,originalArgs:arguments,pointerEventsSpec:"all",useDivWrapper:!0,_jsPlumb:a._jsPlumb}]);b.renderer.paint=function(a){var b=jsPlumb.extend({},a);b.outlineColor&&(b.strokeWidth=b.outlineWidth,b.strokeStyle=jsPlumbUtil.convertStyle(b.outlineColor,!0)),null==this.node?(this.node=this.makeNode(b),this.svg.appendChild(this.node)):null!=this.updateNode&&this.updateNode(this.node),u(this.svg,this.node,b,[this.x,this.y,this.w,this.h],this),r(this.node,[this.x,this.y])}.bind(this)};jsPlumbUtil.extend(x,w),jsPlumb.Endpoints.svg.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(){return q("circle",{cx:this.w/2,cy:this.h/2,r:this.radius})},this.updateNode=function(a){p(a,{cx:this.w/2,cy:this.h/2,r:this.radius})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Dot,[jsPlumb.Endpoints.Dot,x]),jsPlumb.Endpoints.svg.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),x.apply(this,arguments),this.makeNode=function(){return q("rect",{width:this.w,height:this.h})},this.updateNode=function(a){p(a,{width:this.w,height:this.h})}},jsPlumbUtil.extend(jsPlumb.Endpoints.svg.Rectangle,[jsPlumb.Endpoints.Rectangle,x]),jsPlumb.Endpoints.svg.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.svg.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.svg.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.svg.Custom=jsPlumb.Overlays.Custom;var y=function(a,b){a.apply(this,b),jsPlumb.jsPlumbUIComponent.apply(this,b),this.isAppendedAtTopLevel=!1,this.path=null,this.paint=function(a,d){if(a.component.svg&&d){null==this.path&&(this.path=q("path",{"pointer-events":"all"}),a.component.svg.appendChild(this.path),this.canvas=a.component.svg);var e=b&&1==b.length?b[0].cssClass||"":"",f=[0,0];d.xmin<0&&(f[0]=-d.xmin),d.ymin<0&&(f[1]=-d.ymin),p(this.path,{d:c(a.d),class:e,stroke:a.strokeStyle?a.strokeStyle:null,fill:a.fillStyle?a.fillStyle:null,transform:"translate("+f[0]+","+f[1]+")"})}};var c=function(a){return"M"+a.hxy.x+","+a.hxy.y+" L"+a.tail[0].x+","+a.tail[0].y+" L"+a.cxy.x+","+a.cxy.y+" L"+a.tail[1].x+","+a.tail[1].y+" L"+a.hxy.x+","+a.hxy.y}};jsPlumbUtil.extend(y,[jsPlumb.jsPlumbUIComponent,jsPlumb.Overlays.AbstractOverlay],{cleanup:function(){null!=this.path&&this._jsPlumb.instance.removeElement(this.path)},setVisible:function(a){null!=this.path&&(this.path.style.display=a?"block":"none")}}),jsPlumb.Overlays.svg.Arrow=function(){y.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Arrow,[jsPlumb.Overlays.Arrow,y]),jsPlumb.Overlays.svg.PlainArrow=function(){y.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.PlainArrow,[jsPlumb.Overlays.PlainArrow,y]),jsPlumb.Overlays.svg.Diamond=function(){y.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.svg.Diamond,[jsPlumb.Overlays.Diamond,y]),jsPlumb.Overlays.svg.GuideLines=function(){var a,b,c=null,d=this;jsPlumb.Overlays.GuideLines.apply(this,arguments),this.paint=function(f,g){null==c&&(c=q("path"),f.connector.svg.appendChild(c),d.attachListeners(c,f.connector),d.attachListeners(c,d),a=q("path"),f.connector.svg.appendChild(a),d.attachListeners(a,f.connector),d.attachListeners(a,d),b=q("path"),f.connector.svg.appendChild(b),d.attachListeners(b,f.connector),d.attachListeners(b,d));var h=[0,0];g.xmin<0&&(h[0]=-g.xmin),g.ymin<0&&(h[1]=-g.ymin),p(c,{d:e(f.head,f.tail),stroke:"red",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),p(a,{d:e(f.tailLine[0],f.tailLine[1]),stroke:"blue",fill:null,transform:"translate("+h[0]+","+h[1]+")"}),p(b,{d:e(f.headLine[0],f.headLine[1]),stroke:"green",fill:null,transform:"translate("+h[0]+","+h[1]+")"})};var e=function(a,b){return"M "+a.x+","+a.y+" L"+b.x+","+b.y}},jsPlumbUtil.extend(jsPlumb.Overlays.svg.GuideLines,jsPlumb.Overlays.GuideLines)}(),function(){"use strict";var a={"stroke-linejoin":"joinstyle",joinstyle:"joinstyle",endcap:"endcap",miterlimit:"miterlimit"},b=null;if(document.createStyleSheet&&document.namespaces){var c=[".jsplumb_vml","jsplumb\\:textbox","jsplumb\\:oval","jsplumb\\:rect","jsplumb\\:stroke","jsplumb\\:shape","jsplumb\\:group"],d="behavior:url(#default#VML);position:absolute;";b=document.createStyleSheet();for(var e=0;e<c.length;e++)b.addRule(c[e],d);document.namespaces.add("jsplumb","urn:schemas-microsoft-com:vml")}jsPlumb.vml={};var f=1e3,g=function(a,b){for(var c in b)a[c]=b[c]},h=function(a,b,c,d,e,f){c=c||{};var h=document.createElement("jsplumb:"+a);return f?e.appendElement(h,d):d.appendChild(h),h.className=(c.class?c.class+" ":"")+"jsplumb_vml",i(h,b),g(h,c),h},i=function(a,b,c){a.style.left=b[0]+"px",a.style.top=b[1]+"px",a.style.width=b[2]+"px",a.style.height=b[3]+"px",a.style.position="absolute",c&&(a.style.zIndex=c)},j=jsPlumb.vml.convertValue=function(a){return Math.floor(a*f)},k=function(a,b,c,d){"transparent"===b?d.setOpacity(c,"0.0"):d.setOpacity(c,"1.0")},l=function(a,b,c,d){var e={};if(b.strokeStyle){e.stroked="true";var f=jsPlumbUtil.convertStyle(b.strokeStyle,!0);e.strokecolor=f,k(e,f,"stroke",c),e.strokeweight=b.lineWidth+"px"}else e.stroked="false";if(b.fillStyle){e.filled="true";var i=jsPlumbUtil.convertStyle(b.fillStyle,!0);e.fillcolor=i,k(e,i,"fill",c)}else e.filled="false";if(b.dashstyle)null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:b.dashstyle},a,d):c.strokeNode.dashstyle=b.dashstyle;else if(b["stroke-dasharray"]&&b.lineWidth){for(var j=-1==b["stroke-dasharray"].indexOf(",")?" ":",",l=b["stroke-dasharray"].split(j),m="",n=0;n<l.length;n++)m+=Math.floor(l[n]/b.lineWidth)+j;
null==c.strokeNode?c.strokeNode=h("stroke",[0,0,0,0],{dashstyle:m},a,d):c.strokeNode.dashstyle=m}g(a,e)},m=function(){var a=this;jsPlumb.jsPlumbUIComponent.apply(this,arguments),this.opacityNodes={stroke:null,fill:null},this.initOpacityNodes=function(b){a.opacityNodes.stroke=h("stroke",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance),a.opacityNodes.fill=h("fill",[0,0,1,1],{opacity:"0.0"},b,a._jsPlumb.instance)},this.setOpacity=function(b,c){var d=a.opacityNodes[b];d&&(d.opacity=""+c)};var b=[];this.getDisplayElements=function(){return b},this.appendDisplayElement=function(c,d){d||a.canvas.parentNode.appendChild(c),b.push(c)}};jsPlumbUtil.extend(m,jsPlumb.jsPlumbUIComponent,{cleanup:function(){this.bgCanvas&&this.bgCanvas.parentNode.removeChild(this.bgCanvas),this.canvas&&this.canvas.parentNode.removeChild(this.canvas)}});var n=jsPlumb.ConnectorRenderers.vml=function(b,c){this.strokeNode=null,this.canvas=null,m.apply(this,arguments);var d=this._jsPlumb.instance.connectorClass+(b.cssClass?" "+b.cssClass:"");this.paint=function(e){if(null!==e){this.w=Math.max(this.w,1),this.h=Math.max(this.h,1);for(var j=this.getSegments(),k={path:""},m=[this.x,this.y,this.w,this.h],n=0;n<j.length;n++)k.path+=jsPlumb.Segments.vml.SegmentRenderer.getPath(j[n]),k.path+=" ";if(e.outlineColor){var o=e.outlineWidth||1,p=e.lineWidth+2*o,q={strokeStyle:jsPlumbUtil.convertStyle(e.outlineColor),lineWidth:p};for(var r in a)q[r]=e[r];null==this.bgCanvas?(k.class=d,k.coordsize=m[2]*f+","+m[3]*f,this.bgCanvas=h("shape",m,k,b.parent,this._jsPlumb.instance,!0),i(this.bgCanvas,m),this.appendDisplayElement(this.bgCanvas,!0),this.initOpacityNodes(this.bgCanvas,["stroke"]),this.bgCanvas._jsPlumb=c):(k.coordsize=m[2]*f+","+m[3]*f,i(this.bgCanvas,m),g(this.bgCanvas,k)),l(this.bgCanvas,q,this)}null==this.canvas?(k.class=d,k.coordsize=m[2]*f+","+m[3]*f,this.canvas=h("shape",m,k,b.parent,this._jsPlumb.instance,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(this.canvas,["stroke"]),this.canvas._jsPlumb=c):(k.coordsize=m[2]*f+","+m[3]*f,i(this.canvas,m),g(this.canvas,k)),l(this.canvas,e,this,this._jsPlumb.instance)}}};jsPlumbUtil.extend(n,m,{setVisible:function(a){this.canvas&&(this.canvas.style.display=a?"block":"none"),this.bgCanvas&&(this.bgCanvas.style.display=a?"block":"none")}});var o=window.VmlEndpoint=function(a){m.apply(this,arguments),this._jsPlumb.vml=null,this.canvas=document.createElement("div"),this.canvas.style.position="absolute",this._jsPlumb.clazz=this._jsPlumb.instance.endpointClass+(a.cssClass?" "+a.cssClass:""),a._jsPlumb.appendElement(this.canvas,a.parent),this.paint=function(a,b){var c={},d=this._jsPlumb.vml;jsPlumbUtil.sizeElement(this.canvas,this.x,this.y,this.w,this.h),null==this._jsPlumb.vml?(c.class=this._jsPlumb.clazz,d=this._jsPlumb.vml=this.getVml([0,0,this.w,this.h],c,b,this.canvas,this._jsPlumb.instance),this.appendDisplayElement(d,!0),this.appendDisplayElement(this.canvas,!0),this.initOpacityNodes(d,["fill"])):(i(d,[0,0,this.w,this.h]),g(d,c)),l(d,a,this)}};jsPlumbUtil.extend(o,m),jsPlumb.Segments.vml={SegmentRenderer:{getPath:function(a){return{Straight:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" l"+j(b.x2)+","+j(b.y2)+" e"},Bezier:function(a){var b=a.params;return"m"+j(b.x1)+","+j(b.y1)+" c"+j(b.cp1x)+","+j(b.cp1y)+","+j(b.cp2x)+","+j(b.cp2y)+","+j(b.x2)+","+j(b.y2)+" e"},Arc:function(a){var b=a.params,c=Math.min(b.x1,b.x2),d=(Math.max(b.x1,b.x2),Math.min(b.y1,b.y2)),e=(Math.max(b.y1,b.y2),a.anticlockwise?1:0),f=a.anticlockwise?"at ":"wa ",g=function(){if(b.loopback)return"0,0,"+j(2*b.r)+","+j(2*b.r);var f=[null,[function(){return[c,d]},function(){return[c-b.r,d-b.r]}],[function(){return[c-b.r,d]},function(){return[c,d-b.r]}],[function(){return[c-b.r,d-b.r]},function(){return[c,d]}],[function(){return[c,d-b.r]},function(){return[c-b.r,d]}]][a.segment][e]();return j(f[0])+","+j(f[1])+","+j(f[0]+2*b.r)+","+j(f[1]+2*b.r)};return f+" "+g()+","+j(b.x1)+","+j(b.y1)+","+j(b.x2)+","+j(b.y2)+" e"}}[a.type](a)}}},jsPlumb.Endpoints.vml.Dot=function(){jsPlumb.Endpoints.Dot.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("oval",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Dot,o),jsPlumb.Endpoints.vml.Rectangle=function(){jsPlumb.Endpoints.Rectangle.apply(this,arguments),o.apply(this,arguments),this.getVml=function(a,b,c,d,e){return h("rect",a,b,d,e)}},jsPlumbUtil.extend(jsPlumb.Endpoints.vml.Rectangle,o),jsPlumb.Endpoints.vml.Image=jsPlumb.Endpoints.Image,jsPlumb.Endpoints.vml.Blank=jsPlumb.Endpoints.Blank,jsPlumb.Overlays.vml.Label=jsPlumb.Overlays.Label,jsPlumb.Overlays.vml.Custom=jsPlumb.Overlays.Custom;var p=function(a,b){a.apply(this,b),m.apply(this,b);var c=this;this.canvas=null,this.isAppendedAtTopLevel=!0;var d=function(a){return"m "+j(a.hxy.x)+","+j(a.hxy.y)+" l "+j(a.tail[0].x)+","+j(a.tail[0].y)+" "+j(a.cxy.x)+","+j(a.cxy.y)+" "+j(a.tail[1].x)+","+j(a.tail[1].y)+" x e"};this.paint=function(a,e){if(a.component.canvas&&e){var j={},k=a.d,l=a.component;a.strokeStyle&&(j.stroked="true",j.strokecolor=jsPlumbUtil.convertStyle(a.strokeStyle,!0)),a.lineWidth&&(j.strokeweight=a.lineWidth+"px"),a.fillStyle&&(j.filled="true",j.fillcolor=a.fillStyle);var m=Math.min(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),n=Math.min(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),o=Math.max(k.hxy.x,k.tail[0].x,k.tail[1].x,k.cxy.x),p=Math.max(k.hxy.y,k.tail[0].y,k.tail[1].y,k.cxy.y),q=Math.abs(o-m),r=Math.abs(p-n),s=[m,n,q,r];if(j.path=d(k),j.coordsize=l.w*f+","+l.h*f,s[0]=l.x,s[1]=l.y,s[2]=l.w,s[3]=l.h,null==c.canvas){var t=l._jsPlumb.overlayClass||"",u=b&&1==b.length?b[0].cssClass||"":"";j.class=u+" "+t,c.canvas=h("shape",s,j,l.canvas.parentNode,l._jsPlumb.instance,!0),l.appendDisplayElement(c.canvas,!0)}else i(c.canvas,s),g(c.canvas,j)}},this.cleanup=function(){null!=this.canvas&&this._jsPlumb.instance.removeElement(this.canvas)}};jsPlumbUtil.extend(p,[m,jsPlumb.Overlays.AbstractOverlay],{setVisible:function(a){this.canvas.style.display=a?"block":"none"}}),jsPlumb.Overlays.vml.Arrow=function(){p.apply(this,[jsPlumb.Overlays.Arrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Arrow,[jsPlumb.Overlays.Arrow,p]),jsPlumb.Overlays.vml.PlainArrow=function(){p.apply(this,[jsPlumb.Overlays.PlainArrow,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.PlainArrow,[jsPlumb.Overlays.PlainArrow,p]),jsPlumb.Overlays.vml.Diamond=function(){p.apply(this,[jsPlumb.Overlays.Diamond,arguments])},jsPlumbUtil.extend(jsPlumb.Overlays.vml.Diamond,[jsPlumb.Overlays.Diamond,p])}(),function(a){"use strict";var b=function(b){return a("string"==typeof b?"#"+b:b)};a.extend(jsPlumbInstance.prototype,{getDOMElement:function(a){return null==a?null:"string"==typeof a?document.getElementById(a):a.context||null!=a.length?a[0]:a},getElementObject:b,removeElement:function(a){b(a).remove()},doAnimate:function(a,b,c){a.animate(b,c)},getSelector:function(c,d){return 2==arguments.length?b(c).find(d):a(c)},destroyDraggable:function(b){a(b).data("draggable")&&a(b).draggable("destroy")},destroyDroppable:function(b){a(b).data("droppable")&&a(b).droppable("destroy")},initDraggable:function(b,c,d){c=c||{},b=a(b),c.start=jsPlumbUtil.wrap(c.start,function(){a("body").addClass(this.dragSelectClass)},!1),c.stop=jsPlumbUtil.wrap(c.stop,function(){a("body").removeClass(this.dragSelectClass)}),c.doNotRemoveHelper||(c.helper=null),"internal"==d&&(c.scope=c.scope||jsPlumb.Defaults.Scope),b.draggable(c)},initDroppable:function(b,c){c.scope=c.scope||jsPlumb.Defaults.Scope,a(b).droppable(c)},isAlreadyDraggable:function(b){return a(b).hasClass("ui-draggable")},isDragSupported:function(b){return a(b).draggable},isDropSupported:function(b){return a(b).droppable},getDragObject:function(a){return a[1].helper||a[1].draggable},getDragScope:function(b){return a(b).draggable("option","scope")},getDropEvent:function(a){return a[0]},getDropScope:function(b){return a(b).droppable("option","scope")},getUIPosition:function(a,b,c){var d;if(b=b||1,1==a.length)d={left:a[0].pageX,top:a[0].pageY};else{var e=a[1],f=e.position;d=f||e.absolutePosition,c||(e.position.left/=b,e.position.top/=b)}return{left:d.left,top:d.top}},isDragFilterSupported:function(){return!0},setDragFilter:function(b,c){jsPlumb.isAlreadyDraggable(b)&&a(b).draggable("option","cancel",c)},setElementDraggable:function(b,c){a(b).draggable("option","disabled",!c)},setDragScope:function(b,c){a(b).draggable("option","scope",c)},dragEvents:{start:"start",stop:"stop",drag:"drag",step:"step",over:"over",out:"out",drop:"drop",complete:"complete"},animEvents:{step:"step",complete:"complete"},getOriginalEvent:function(a){return a.originalEvent||a},trigger:function(a,c,d){var e=jQuery._data(b(a)[0],"handle");e(d)}}),a(document).ready(jsPlumb.init)}(jQuery)}(this),d()}),$__System.registerDynamic("4a3",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b,c,d){function e(b,c){this.settings=null,this.options=a.extend({},e.Defaults,c),this.$element=a(b),this._handlers={},this._plugins={},this._supress={},this._current=null,this._speed=null,this._coordinates=[],this._breakpoint=null,this._width=null,this._items=[],this._clones=[],this._mergers=[],this._widths=[],this._invalidated={},this._pipe=[],this._drag={time:null,target:null,pointer:null,stage:{start:null,current:null},direction:null},this._states={current:{},tags:{initializing:["busy"],animating:["busy"],dragging:["interacting"]}},a.each(["onResize","onThrottledResize"],a.proxy(function(b,c){this._handlers[c]=a.proxy(this[c],this)},this)),a.each(e.Plugins,a.proxy(function(a,b){this._plugins[a.charAt(0).toLowerCase()+a.slice(1)]=new b(this)},this)),a.each(e.Workers,a.proxy(function(b,c){this._pipe.push({filter:c.filter,run:a.proxy(c.run,this)})},this)),this.setup(),this.initialize()}e.Defaults={items:3,loop:!1,center:!1,rewind:!1,mouseDrag:!0,touchDrag:!0,pullDrag:!0,freeDrag:!1,margin:0,stagePadding:0,merge:!1,mergeFit:!0,autoWidth:!1,startPosition:0,rtl:!1,smartSpeed:250,fluidSpeed:!1,dragEndSpeed:!1,responsive:{},responsiveRefreshRate:200,responsiveBaseElement:b,fallbackEasing:"swing",info:!1,nestedItemSelector:!1,itemElement:"div",stageElement:"div",refreshClass:"owl-refresh",loadedClass:"owl-loaded",loadingClass:"owl-loading",rtlClass:"owl-rtl",responsiveClass:"owl-responsive",dragClass:"owl-drag",itemClass:"owl-item",stageClass:"owl-stage",stageOuterClass:"owl-stage-outer",grabClass:"owl-grab"},e.Width={Default:"default",Inner:"inner",Outer:"outer"},e.Type={Event:"event",State:"state"},e.Plugins={},e.Workers=[{filter:["width","settings"],run:function(){this._width=this.$element.width()}},{filter:["width","items","settings"],run:function(a){a.current=this._items&&this._items[this.relative(this._current)]}},{filter:["items","settings"],run:function(){this.$stage.children(".cloned").remove()}},{filter:["width","items","settings"],run:function(a){var b=this.settings.margin||"",c=!this.settings.autoWidth,d=this.settings.rtl,e={width:"auto","margin-left":d?b:"","margin-right":d?"":b};!c&&this.$stage.children().css(e),a.css=e}},{filter:["width","items","settings"],run:function(a){var b=(this.width()/this.settings.items).toFixed(3)-this.settings.margin,c=null,d=this._items.length,e=!this.settings.autoWidth,f=[];for(a.items={merge:!1,width:b};d--;)c=this._mergers[d],c=this.settings.mergeFit&&Math.min(c,this.settings.items)||c,a.items.merge=c>1||a.items.merge,f[d]=e?b*c:this._items[d].width();this._widths=f}},{filter:["items","settings"],run:function(){var b=[],c=this._items,d=this.settings,e=Math.max(2*d.items,4),f=2*Math.ceil(c.length/2),g=d.loop&&c.length?d.rewind?e:Math.max(e,f):0,h="",i="";for(g/=2;g--;)b.push(this.normalize(b.length/2,!0)),h+=c[b[b.length-1]][0].outerHTML,b.push(this.normalize(c.length-1-(b.length-1)/2,!0)),i=c[b[b.length-1]][0].outerHTML+i;this._clones=b,a(h).addClass("cloned").appendTo(this.$stage),a(i).addClass("cloned").prependTo(this.$stage)}},{filter:["width","items","settings"],run:function(){for(var a=this.settings.rtl?1:-1,b=this._clones.length+this._items.length,c=-1,d=0,e=0,f=[];++c<b;)d=f[c-1]||0,e=this._widths[this.relative(c)]+this.settings.margin,f.push(d+e*a);this._coordinates=f}},{filter:["width","items","settings"],run:function(){var a=this.settings.stagePadding,b=this._coordinates,c={width:Math.ceil(Math.abs(b[b.length-1]))+2*a,"padding-left":a||"","padding-right":a||""};this.$stage.css(c)}},{filter:["width","items","settings"],run:function(a){var b=this._coordinates.length,c=!this.settings.autoWidth,d=this.$stage.children();if(c&&a.items.merge)for(;b--;)a.css.width=this._widths[this.relative(b)],d.eq(b).css(a.css);else c&&(a.css.width=a.items.width,d.css(a.css))}},{filter:["items"],run:function(){this._coordinates.length<1&&this.$stage.removeAttr("style")}},{filter:["width","items","settings"],run:function(a){a.current=a.current?this.$stage.children().index(a.current):0,a.current=Math.max(this.minimum(),Math.min(this.maximum(),a.current)),this.reset(a.current)}},{filter:["position"],run:function(){this.animate(this.coordinates(this._current))}},{filter:["width","position","items","settings"],run:function(){var a,b,c,d,e=this.settings.rtl?1:-1,f=2*this.settings.stagePadding,g=this.coordinates(this.current())+f,h=g+this.width()*e,i=[];for(c=0,d=this._coordinates.length;c<d;c++)a=this._coordinates[c-1]||0,b=Math.abs(this._coordinates[c])+f*e,(this.op(a,"<=",g)&&this.op(a,">",h)||this.op(b,"<",g)&&this.op(b,">",h))&&i.push(c);this.$stage.children(".active").removeClass("active"),this.$stage.children(":eq("+i.join("), :eq(")+")").addClass("active"),this.settings.center&&(this.$stage.children(".center").removeClass("center"),this.$stage.children().eq(this.current()).addClass("center"))}}],e.prototype.initialize=function(){if(this.enter("initializing"),this.trigger("initialize"),this.$element.toggleClass(this.settings.rtlClass,this.settings.rtl),this.settings.autoWidth&&!this.is("pre-loading")){var b,c,e;b=this.$element.find("img"),c=this.settings.nestedItemSelector?"."+this.settings.nestedItemSelector:d,e=this.$element.children(c).width(),b.length&&e<=0&&this.preloadAutoWidthImages(b)}this.$element.addClass(this.options.loadingClass),this.$stage=a("<"+this.settings.stageElement+' class="'+this.settings.stageClass+'"/>').wrap('<div class="'+this.settings.stageOuterClass+'"/>'),this.$element.append(this.$stage.parent()),this.replace(this.$element.children().not(this.$stage.parent())),this.$element.is(":visible")?this.refresh():this.invalidate("width"),this.$element.removeClass(this.options.loadingClass).addClass(this.options.loadedClass),this.registerEventHandlers(),this.leave("initializing"),this.trigger("initialized")},e.prototype.setup=function(){var b=this.viewport(),c=this.options.responsive,d=-1,e=null;c?(a.each(c,function(a){a<=b&&a>d&&(d=Number(a))}),e=a.extend({},this.options,c[d]),"function"==typeof e.stagePadding&&(e.stagePadding=e.stagePadding()),delete e.responsive,e.responsiveClass&&this.$element.attr("class",this.$element.attr("class").replace(new RegExp("("+this.options.responsiveClass+"-)\\S+\\s","g"),"$1"+d))):e=a.extend({},this.options),this.trigger("change",{property:{name:"settings",value:e}}),this._breakpoint=d,this.settings=e,this.invalidate("settings"),this.trigger("changed",{property:{name:"settings",value:this.settings}})},e.prototype.optionsLogic=function(){this.settings.autoWidth&&(this.settings.stagePadding=!1,this.settings.merge=!1)},e.prototype.prepare=function(b){var c=this.trigger("prepare",{content:b});return c.data||(c.data=a("<"+this.settings.itemElement+"/>").addClass(this.options.itemClass).append(b)),this.trigger("prepared",{content:c.data}),c.data},e.prototype.update=function(){for(var b=0,c=this._pipe.length,d=a.proxy(function(a){return this[a]},this._invalidated),e={};b<c;)(this._invalidated.all||a.grep(this._pipe[b].filter,d).length>0)&&this._pipe[b].run(e),b++;this._invalidated={},!this.is("valid")&&this.enter("valid")},e.prototype.width=function(a){switch(a=a||e.Width.Default){case e.Width.Inner:case e.Width.Outer:return this._width;default:return this._width-2*this.settings.stagePadding+this.settings.margin}},e.prototype.refresh=function(){this.enter("refreshing"),this.trigger("refresh"),this.setup(),this.optionsLogic(),this.$element.addClass(this.options.refreshClass),this.update(),this.$element.removeClass(this.options.refreshClass),this.leave("refreshing"),this.trigger("refreshed")},e.prototype.onThrottledResize=function(){b.clearTimeout(this.resizeTimer),this.resizeTimer=b.setTimeout(this._handlers.onResize,this.settings.responsiveRefreshRate)},e.prototype.onResize=function(){return!!this._items.length&&(this._width!==this.$element.width()&&(!!this.$element.is(":visible")&&(this.enter("resizing"),this.trigger("resize").isDefaultPrevented()?(this.leave("resizing"),!1):(this.invalidate("width"),this.refresh(),this.leave("resizing"),void this.trigger("resized")))))},e.prototype.registerEventHandlers=function(){a.support.transition&&this.$stage.on(a.support.transition.end+".owl.core",a.proxy(this.onTransitionEnd,this)),this.settings.responsive!==!1&&this.on(b,"resize",this._handlers.onThrottledResize),this.settings.mouseDrag&&(this.$element.addClass(this.options.dragClass),this.$stage.on("mousedown.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("dragstart.owl.core selectstart.owl.core",function(){return!1})),this.settings.touchDrag&&(this.$stage.on("touchstart.owl.core",a.proxy(this.onDragStart,this)),this.$stage.on("touchcancel.owl.core",a.proxy(this.onDragEnd,this)))},e.prototype.onDragStart=function(b){var d=null;3!==b.which&&(a.support.transform?(d=this.$stage.css("transform").replace(/.*\(|\)| /g,"").split(","),d={x:d[16===d.length?12:4],y:d[16===d.length?13:5]}):(d=this.$stage.position(),d={x:this.settings.rtl?d.left+this.$stage.width()-this.width()+this.settings.margin:d.left,y:d.top}),this.is("animating")&&(a.support.transform?this.animate(d.x):this.$stage.stop(),this.invalidate("position")),this.$element.toggleClass(this.options.grabClass,"mousedown"===b.type),this.speed(0),this._drag.time=(new Date).getTime(),this._drag.target=a(b.target),this._drag.stage.start=d,this._drag.stage.current=d,this._drag.pointer=this.pointer(b),a(c).on("mouseup.owl.core touchend.owl.core",a.proxy(this.onDragEnd,this)),a(c).one("mousemove.owl.core touchmove.owl.core",a.proxy(function(b){var d=this.difference(this._drag.pointer,this.pointer(b));a(c).on("mousemove.owl.core touchmove.owl.core",a.proxy(this.onDragMove,this)),Math.abs(d.x)<Math.abs(d.y)&&this.is("valid")||(b.preventDefault(),this.enter("dragging"),this.trigger("drag"))},this)))},e.prototype.onDragMove=function(a){var b=null,c=null,d=null,e=this.difference(this._drag.pointer,this.pointer(a)),f=this.difference(this._drag.stage.start,e);this.is("dragging")&&(a.preventDefault(),this.settings.loop?(b=this.coordinates(this.minimum()),c=this.coordinates(this.maximum()+1)-b,f.x=((f.x-b)%c+c)%c+b):(b=this.settings.rtl?this.coordinates(this.maximum()):this.coordinates(this.minimum()),c=this.settings.rtl?this.coordinates(this.minimum()):this.coordinates(this.maximum()),d=this.settings.pullDrag?-1*e.x/5:0,f.x=Math.max(Math.min(f.x,b+d),c+d)),this._drag.stage.current=f,this.animate(f.x))},e.prototype.onDragEnd=function(b){var d=this.difference(this._drag.pointer,this.pointer(b)),e=this._drag.stage.current,f=d.x>0^this.settings.rtl?"left":"right";a(c).off(".owl.core"),this.$element.removeClass(this.options.grabClass),(0!==d.x&&this.is("dragging")||!this.is("valid"))&&(this.speed(this.settings.dragEndSpeed||this.settings.smartSpeed),this.current(this.closest(e.x,0!==d.x?f:this._drag.direction)),this.invalidate("position"),this.update(),this._drag.direction=f,(Math.abs(d.x)>3||(new Date).getTime()-this._drag.time>300)&&this._drag.target.one("click.owl.core",function(){return!1})),this.is("dragging")&&(this.leave("dragging"),this.trigger("dragged"))},e.prototype.closest=function(b,c){var d=-1,e=30,f=this.width(),g=this.coordinates();return this.settings.freeDrag||a.each(g,a.proxy(function(a,h){return"left"===c&&b>h-e&&b<h+e?d=a:"right"===c&&b>h-f-e&&b<h-f+e?d=a+1:this.op(b,"<",h)&&this.op(b,">",g[a+1]||h-f)&&(d="left"===c?a+1:a),d===-1},this)),this.settings.loop||(this.op(b,">",g[this.minimum()])?d=b=this.minimum():this.op(b,"<",g[this.maximum()])&&(d=b=this.maximum())),d},e.prototype.animate=function(b){var c=this.speed()>0;this.is("animating")&&this.onTransitionEnd(),c&&(this.enter("animating"),this.trigger("translate")),a.support.transform3d&&a.support.transition?this.$stage.css({transform:"translate3d("+b+"px,0px,0px)",transition:this.speed()/1e3+"s"}):c?this.$stage.animate({left:b+"px"},this.speed(),this.settings.fallbackEasing,a.proxy(this.onTransitionEnd,this)):this.$stage.css({left:b+"px"})},e.prototype.is=function(a){return this._states.current[a]&&this._states.current[a]>0},e.prototype.current=function(a){if(a===d)return this._current;if(0===this._items.length)return d;if(a=this.normalize(a),this._current!==a){var b=this.trigger("change",{property:{name:"position",value:a}});b.data!==d&&(a=this.normalize(b.data)),this._current=a,this.invalidate("position"),this.trigger("changed",{property:{name:"position",value:this._current}})}return this._current},e.prototype.invalidate=function(b){return"string"===a.type(b)&&(this._invalidated[b]=!0,this.is("valid")&&this.leave("valid")),a.map(this._invalidated,function(a,b){return b})},e.prototype.reset=function(a){a=this.normalize(a),a!==d&&(this._speed=0,this._current=a,this.suppress(["translate","translated"]),this.animate(this.coordinates(a)),this.release(["translate","translated"]))},e.prototype.normalize=function(a,b){var c=this._items.length,e=b?0:this._clones.length;return!this.isNumeric(a)||c<1?a=d:(a<0||a>=c+e)&&(a=((a-e/2)%c+c)%c+e/2),a},e.prototype.relative=function(a){return a-=this._clones.length/2,this.normalize(a,!0)},e.prototype.maximum=function(a){var b,c,d,e=this.settings,f=this._coordinates.length;if(e.loop)f=this._clones.length/2+this._items.length-1;else if(e.autoWidth||e.merge){for(b=this._items.length,c=this._items[--b].width(),d=this.$element.width();b--&&(c+=this._items[b].width()+this.settings.margin,!(c>d)););f=b+1}else f=e.center?this._items.length-1:this._items.length-e.items;return a&&(f-=this._clones.length/2),Math.max(f,0)},e.prototype.minimum=function(a){return a?0:this._clones.length/2},e.prototype.items=function(a){return a===d?this._items.slice():(a=this.normalize(a,!0),this._items[a])},e.prototype.mergers=function(a){return a===d?this._mergers.slice():(a=this.normalize(a,!0),this._mergers[a])},e.prototype.clones=function(b){var c=this._clones.length/2,e=c+this._items.length,f=function(a){return a%2===0?e+a/2:c-(a+1)/2};return b===d?a.map(this._clones,function(a,b){return f(b)}):a.map(this._clones,function(a,c){return a===b?f(c):null})},e.prototype.speed=function(a){return a!==d&&(this._speed=a),this._speed},e.prototype.coordinates=function(b){var c,e=1,f=b-1;return b===d?a.map(this._coordinates,a.proxy(function(a,b){return this.coordinates(b)},this)):(this.settings.center?(this.settings.rtl&&(e=-1,f=b+1),c=this._coordinates[b],c+=(this.width()-c+(this._coordinates[f]||0))/2*e):c=this._coordinates[f]||0,c=Math.ceil(c))},e.prototype.duration=function(a,b,c){return 0===c?0:Math.min(Math.max(Math.abs(b-a),1),6)*Math.abs(c||this.settings.smartSpeed)},e.prototype.to=function(a,b){var c=this.current(),d=null,e=a-this.relative(c),f=(e>0)-(e<0),g=this._items.length,h=this.minimum(),i=this.maximum();this.settings.loop?(!this.settings.rewind&&Math.abs(e)>g/2&&(e+=f*-1*g),a=c+e,d=((a-h)%g+g)%g+h,d!==a&&d-e<=i&&d-e>0&&(c=d-e,a=d,this.reset(c))):this.settings.rewind?(i+=1,a=(a%i+i)%i):a=Math.max(h,Math.min(i,a)),this.speed(this.duration(c,a,b)),this.current(a),this.$element.is(":visible")&&this.update()},e.prototype.next=function(a){a=a||!1,this.to(this.relative(this.current())+1,a)},e.prototype.prev=function(a){a=a||!1,this.to(this.relative(this.current())-1,a)},e.prototype.onTransitionEnd=function(a){return(a===d||(a.stopPropagation(),(a.target||a.srcElement||a.originalTarget)===this.$stage.get(0)))&&(this.leave("animating"),void this.trigger("translated"))},e.prototype.viewport=function(){var d;return this.options.responsiveBaseElement!==b?d=a(this.options.responsiveBaseElement).width():b.innerWidth?d=b.innerWidth:c.documentElement&&c.documentElement.clientWidth?d=c.documentElement.clientWidth:console.warn("Can not detect viewport width."),d},e.prototype.replace=function(b){this.$stage.empty(),this._items=[],b&&(b=b instanceof jQuery?b:a(b)),this.settings.nestedItemSelector&&(b=b.find("."+this.settings.nestedItemSelector)),b.filter(function(){return 1===this.nodeType}).each(a.proxy(function(a,b){b=this.prepare(b),this.$stage.append(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)},this)),this.reset(this.isNumeric(this.settings.startPosition)?this.settings.startPosition:0),this.invalidate("items")},e.prototype.add=function(b,c){var e=this.relative(this._current);c=c===d?this._items.length:this.normalize(c,!0),b=b instanceof jQuery?b:a(b),this.trigger("add",{content:b,position:c}),b=this.prepare(b),0===this._items.length||c===this._items.length?(0===this._items.length&&this.$stage.append(b),0!==this._items.length&&this._items[c-1].after(b),this._items.push(b),this._mergers.push(1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)):(this._items[c].before(b),this._items.splice(c,0,b),this._mergers.splice(c,0,1*b.find("[data-merge]").addBack("[data-merge]").attr("data-merge")||1)),this._items[e]&&this.reset(this._items[e].index()),this.invalidate("items"),this.trigger("added",{content:b,position:c})},e.prototype.remove=function(a){a=this.normalize(a,!0),a!==d&&(this.trigger("remove",{content:this._items[a],position:a}),this._items[a].remove(),this._items.splice(a,1),this._mergers.splice(a,1),this.invalidate("items"),this.trigger("removed",{content:null,position:a}))},e.prototype.preloadAutoWidthImages=function(b){b.each(a.proxy(function(b,c){this.enter("pre-loading"),c=a(c),a(new Image).one("load",a.proxy(function(a){c.attr("src",a.target.src),c.css("opacity",1),this.leave("pre-loading"),!this.is("pre-loading")&&!this.is("initializing")&&this.refresh()},this)).attr("src",c.attr("src")||c.attr("data-src")||c.attr("data-src-retina"))},this))},e.prototype.destroy=function(){this.$element.off(".owl.core"),this.$stage.off(".owl.core"),a(c).off(".owl.core"),this.settings.responsive!==!1&&(b.clearTimeout(this.resizeTimer),this.off(b,"resize",this._handlers.onThrottledResize));for(var d in this._plugins)this._plugins[d].destroy();this.$stage.children(".cloned").remove(),this.$stage.unwrap(),this.$stage.children().contents().unwrap(),this.$stage.children().unwrap(),this.$element.removeClass(this.options.refreshClass).removeClass(this.options.loadingClass).removeClass(this.options.loadedClass).removeClass(this.options.rtlClass).removeClass(this.options.dragClass).removeClass(this.options.grabClass).attr("class",this.$element.attr("class").replace(new RegExp(this.options.responsiveClass+"-\\S+\\s","g"),"")).removeData("owl.carousel")},e.prototype.op=function(a,b,c){var d=this.settings.rtl;switch(b){case"<":return d?a>c:a<c;case">":return d?a<c:a>c;case">=":return d?a<=c:a>=c;case"<=":return d?a>=c:a<=c}},e.prototype.on=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d):a.attachEvent&&a.attachEvent("on"+b,c)},e.prototype.off=function(a,b,c,d){a.removeEventListener?a.removeEventListener(b,c,d):a.detachEvent&&a.detachEvent("on"+b,c)},e.prototype.trigger=function(b,c,d,f,g){var h={item:{count:this._items.length,index:this.current()}},i=a.camelCase(a.grep(["on",b,d],function(a){return a}).join("-").toLowerCase()),j=a.Event([b,"owl",d||"carousel"].join(".").toLowerCase(),a.extend({relatedTarget:this},h,c));return this._supress[b]||(a.each(this._plugins,function(a,b){b.onTrigger&&b.onTrigger(j)}),this.register({type:e.Type.Event,name:b}),this.$element.trigger(j),this.settings&&"function"==typeof this.settings[i]&&this.settings[i].call(this,j)),j},e.prototype.enter=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]===d&&(this._states.current[b]=0),this._states.current[b]++},this))},e.prototype.leave=function(b){a.each([b].concat(this._states.tags[b]||[]),a.proxy(function(a,b){this._states.current[b]--},this))},e.prototype.register=function(b){if(b.type===e.Type.Event){if(a.event.special[b.name]||(a.event.special[b.name]={}),!a.event.special[b.name].owl){var c=a.event.special[b.name]._default;a.event.special[b.name]._default=function(a){return!c||!c.apply||a.namespace&&a.namespace.indexOf("owl")!==-1?a.namespace&&a.namespace.indexOf("owl")>-1:c.apply(this,arguments)},a.event.special[b.name].owl=!0}}else b.type===e.Type.State&&(this._states.tags[b.name]?this._states.tags[b.name]=this._states.tags[b.name].concat(b.tags):this._states.tags[b.name]=b.tags,this._states.tags[b.name]=a.grep(this._states.tags[b.name],a.proxy(function(c,d){return a.inArray(c,this._states.tags[b.name])===d},this)))},e.prototype.suppress=function(b){a.each(b,a.proxy(function(a,b){this._supress[b]=!0},this))},e.prototype.release=function(b){a.each(b,a.proxy(function(a,b){delete this._supress[b]},this))},e.prototype.pointer=function(a){var c={x:null,y:null};return a=a.originalEvent||a||b.event,a=a.touches&&a.touches.length?a.touches[0]:a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:a,a.pageX?(c.x=a.pageX,c.y=a.pageY):(c.x=a.clientX,c.y=a.clientY),c},e.prototype.isNumeric=function(a){return!isNaN(parseFloat(a))},e.prototype.difference=function(a,b){return{x:a.x-b.x,y:a.y-b.y}},a.fn.owlCarousel=function(b){var c=Array.prototype.slice.call(arguments,1);return this.each(function(){var d=a(this),f=d.data("owl.carousel");f||(f=new e(this,"object"==typeof b&&b),d.data("owl.carousel",f),a.each(["next","prev","to","destroy","refresh","replace","add","remove"],function(b,c){f.register({type:e.Type.Event,name:c}),f.$element.on(c+".owl.carousel.core",a.proxy(function(a){a.namespace&&a.relatedTarget!==this&&(this.suppress([c]),f[c].apply(this,[].slice.call(arguments,1)),this.release([c]))},f))})),"string"==typeof b&&"_"!==b.charAt(0)&&f[b].apply(f,c)})},a.fn.owlCarousel.Constructor=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._interval=null,this._visible=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoRefresh&&this.watch()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoRefresh:!0,autoRefreshInterval:500},e.prototype.watch=function(){this._interval||(this._visible=this._core.$element.is(":visible"),this._interval=b.setInterval(a.proxy(this.refresh,this),this._core.settings.autoRefreshInterval))},e.prototype.refresh=function(){this._core.$element.is(":visible")!==this._visible&&(this._visible=!this._visible,this._core.$element.toggleClass("owl-hidden",!this._visible),this._visible&&this._core.invalidate("width")&&this._core.refresh())},e.prototype.destroy=function(){var a,c;b.clearInterval(this._interval);for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoRefresh=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._loaded=[],this._handlers={"initialized.owl.carousel change.owl.carousel resized.owl.carousel":a.proxy(function(b){if(b.namespace&&this._core.settings&&this._core.settings.lazyLoad&&(b.property&&"position"==b.property.name||"initialized"==b.type))for(var c=this._core.settings,e=c.center&&Math.ceil(c.items/2)||c.items,f=c.center&&e*-1||0,g=(b.property&&b.property.value!==d?b.property.value:this._core.current())+f,h=this._core.clones().length,i=a.proxy(function(a,b){this.load(b);
},this);f++<e;)this.load(h/2+this._core.relative(g)),h&&a.each(this._core.clones(this._core.relative(g)),i),g++},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={lazyLoad:!1},e.prototype.load=function(c){var d=this._core.$stage.children().eq(c),e=d&&d.find(".owl-lazy");!e||a.inArray(d.get(0),this._loaded)>-1||(e.each(a.proxy(function(c,d){var e,f=a(d),g=b.devicePixelRatio>1&&f.attr("data-src-retina")||f.attr("data-src");this._core.trigger("load",{element:f,url:g},"lazy"),f.is("img")?f.one("load.owl.lazy",a.proxy(function(){f.css("opacity",1),this._core.trigger("loaded",{element:f,url:g},"lazy")},this)).attr("src",g):(e=new Image,e.onload=a.proxy(function(){f.css({"background-image":'url("'+g+'")',opacity:"1"}),this._core.trigger("loaded",{element:f,url:g},"lazy")},this),e.src=g)},this)),this._loaded.push(d.get(0)))},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this._core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Lazy=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._handlers={"initialized.owl.carousel refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&this.update()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&"position"==a.property.name&&this.update()},this),"loaded.owl.lazy":a.proxy(function(a){a.namespace&&this._core.settings.autoHeight&&a.element.closest("."+this._core.settings.itemClass).index()===this._core.current()&&this.update()},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers)};e.Defaults={autoHeight:!1,autoHeightClass:"owl-height"},e.prototype.update=function(){var b=this._core._current,c=b+this._core.settings.items,d=this._core.$stage.children().toArray().slice(b,c),e=[],f=0;a.each(d,function(b,c){e.push(a(c).height())}),f=Math.max.apply(null,e),this._core.$stage.parent().height(f).addClass(this._core.settings.autoHeightClass)},e.prototype.destroy=function(){var a,b;for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.AutoHeight=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._videos={},this._playing=null,this._handlers={"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.register({type:"state",name:"playing",tags:["interacting"]})},this),"resize.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.video&&this.isInFullScreen()&&a.preventDefault()},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._core.is("resizing")&&this._core.$stage.find(".cloned .owl-video-frame").remove()},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"===a.property.name&&this._playing&&this.stop()},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find(".owl-video");c.length&&(c.css("display","none"),this.fetch(c,a(b.content)))}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this._core.$element.on(this._handlers),this._core.$element.on("click.owl.video",".owl-video-play-icon",a.proxy(function(a){this.play(a)},this))};e.Defaults={video:!1,videoHeight:!1,videoWidth:!1},e.prototype.fetch=function(a,b){var c=function(){return a.attr("data-vimeo-id")?"vimeo":a.attr("data-vzaar-id")?"vzaar":"youtube"}(),d=a.attr("data-vimeo-id")||a.attr("data-youtube-id")||a.attr("data-vzaar-id"),e=a.attr("data-width")||this._core.settings.videoWidth,f=a.attr("data-height")||this._core.settings.videoHeight,g=a.attr("href");if(!g)throw new Error("Missing video URL.");if(d=g.match(/(http:|https:|)\/\/(player.|www.|app.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com)|vzaar\.com)\/(video\/|videos\/|embed\/|channels\/.+\/|groups\/.+\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(\&\S+)?/),d[3].indexOf("youtu")>-1)c="youtube";else if(d[3].indexOf("vimeo")>-1)c="vimeo";else{if(!(d[3].indexOf("vzaar")>-1))throw new Error("Video URL not supported.");c="vzaar"}d=d[6],this._videos[g]={type:c,id:d,width:e,height:f},b.attr("data-video",g),this.thumbnail(a,this._videos[g])},e.prototype.thumbnail=function(b,c){var d,e,f,g=c.width&&c.height?'style="width:'+c.width+"px;height:"+c.height+'px;"':"",h=b.find("img"),i="src",j="",k=this._core.settings,l=function(a){e='<div class="owl-video-play-icon"></div>',d=k.lazyLoad?'<div class="owl-video-tn '+j+'" '+i+'="'+a+'"></div>':'<div class="owl-video-tn" style="opacity:1;background-image:url('+a+')"></div>',b.after(d),b.after(e)};return b.wrap('<div class="owl-video-wrapper"'+g+"></div>"),this._core.settings.lazyLoad&&(i="data-src",j="owl-lazy"),h.length?(l(h.attr(i)),h.remove(),!1):void("youtube"===c.type?(f="//img.youtube.com/vi/"+c.id+"/hqdefault.jpg",l(f)):"vimeo"===c.type?a.ajax({type:"GET",url:"//vimeo.com/api/v2/video/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a[0].thumbnail_large,l(f)}}):"vzaar"===c.type&&a.ajax({type:"GET",url:"//vzaar.com/api/videos/"+c.id+".json",jsonp:"callback",dataType:"jsonp",success:function(a){f=a.framegrab_url,l(f)}}))},e.prototype.stop=function(){this._core.trigger("stop",null,"video"),this._playing.find(".owl-video-frame").remove(),this._playing.removeClass("owl-video-playing"),this._playing=null,this._core.leave("playing"),this._core.trigger("stopped",null,"video")},e.prototype.play=function(b){var c,d=a(b.target),e=d.closest("."+this._core.settings.itemClass),f=this._videos[e.attr("data-video")],g=f.width||"100%",h=f.height||this._core.$stage.height();this._playing||(this._core.enter("playing"),this._core.trigger("play",null,"video"),e=this._core.items(this._core.relative(e.index())),this._core.reset(e.index()),"youtube"===f.type?c='<iframe width="'+g+'" height="'+h+'" src="//www.youtube.com/embed/'+f.id+"?autoplay=1&rel=0&v="+f.id+'" frameborder="0" allowfullscreen></iframe>':"vimeo"===f.type?c='<iframe src="//player.vimeo.com/video/'+f.id+'?autoplay=1" width="'+g+'" height="'+h+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>':"vzaar"===f.type&&(c='<iframe frameborder="0"height="'+h+'"width="'+g+'" allowfullscreen mozallowfullscreen webkitAllowFullScreen src="//view.vzaar.com/'+f.id+'/player?autoplay=true"></iframe>'),a('<div class="owl-video-frame">'+c+"</div>").insertAfter(e.find(".owl-video")),this._playing=e.addClass("owl-video-playing"))},e.prototype.isInFullScreen=function(){var b=c.fullscreenElement||c.mozFullScreenElement||c.webkitFullscreenElement;return b&&a(b).parent().hasClass("owl-video-frame")},e.prototype.destroy=function(){var a,b;this._core.$element.off("click.owl.video");for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Video=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this.core=b,this.core.options=a.extend({},e.Defaults,this.core.options),this.swapping=!0,this.previous=d,this.next=d,this.handlers={"change.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&(this.previous=this.core.current(),this.next=a.property.value)},this),"drag.owl.carousel dragged.owl.carousel translated.owl.carousel":a.proxy(function(a){a.namespace&&(this.swapping="translated"==a.type)},this),"translate.owl.carousel":a.proxy(function(a){a.namespace&&this.swapping&&(this.core.options.animateOut||this.core.options.animateIn)&&this.swap()},this)},this.core.$element.on(this.handlers)};e.Defaults={animateOut:!1,animateIn:!1},e.prototype.swap=function(){if(1===this.core.settings.items&&a.support.animation&&a.support.transition){this.core.speed(0);var b,c=a.proxy(this.clear,this),d=this.core.$stage.children().eq(this.previous),e=this.core.$stage.children().eq(this.next),f=this.core.settings.animateIn,g=this.core.settings.animateOut;this.core.current()!==this.previous&&(g&&(b=this.core.coordinates(this.previous)-this.core.coordinates(this.next),d.one(a.support.animation.end,c).css({left:b+"px"}).addClass("animated owl-animated-out").addClass(g)),f&&e.one(a.support.animation.end,c).addClass("animated owl-animated-in").addClass(f))}},e.prototype.clear=function(b){a(b.target).css({left:""}).removeClass("animated owl-animated-out owl-animated-in").removeClass(this.core.settings.animateIn).removeClass(this.core.settings.animateOut),this.core.onTransitionEnd()},e.prototype.destroy=function(){var a,b;for(a in this.handlers)this.core.$element.off(a,this.handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.Animate=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){var e=function(b){this._core=b,this._timeout=null,this._paused=!1,this._handlers={"changed.owl.carousel":a.proxy(function(a){a.namespace&&"settings"===a.property.name?this._core.settings.autoplay?this.play():this.stop():a.namespace&&"position"===a.property.name&&this._core.settings.autoplay&&this._setAutoPlayInterval()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.autoplay&&this.play()},this),"play.owl.autoplay":a.proxy(function(a,b,c){a.namespace&&this.play(b,c)},this),"stop.owl.autoplay":a.proxy(function(a){a.namespace&&this.stop()},this),"mouseover.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"mouseleave.owl.autoplay":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.play()},this),"touchstart.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this._core.is("rotating")&&this.pause()},this),"touchend.owl.core":a.proxy(function(){this._core.settings.autoplayHoverPause&&this.play()},this)},this._core.$element.on(this._handlers),this._core.options=a.extend({},e.Defaults,this._core.options)};e.Defaults={autoplay:!1,autoplayTimeout:5e3,autoplayHoverPause:!1,autoplaySpeed:!1},e.prototype.play=function(a,b){this._paused=!1,this._core.is("rotating")||(this._core.enter("rotating"),this._setAutoPlayInterval())},e.prototype._getNextTimeout=function(d,e){return this._timeout&&b.clearTimeout(this._timeout),b.setTimeout(a.proxy(function(){this._paused||this._core.is("busy")||this._core.is("interacting")||c.hidden||this._core.next(e||this._core.settings.autoplaySpeed)},this),d||this._core.settings.autoplayTimeout)},e.prototype._setAutoPlayInterval=function(){this._timeout=this._getNextTimeout()},e.prototype.stop=function(){this._core.is("rotating")&&(b.clearTimeout(this._timeout),this._core.leave("rotating"))},e.prototype.pause=function(){this._core.is("rotating")&&(this._paused=!0)},e.prototype.destroy=function(){var a,b;this.stop();for(a in this._handlers)this._core.$element.off(a,this._handlers[a]);for(b in Object.getOwnPropertyNames(this))"function"!=typeof this[b]&&(this[b]=null)},a.fn.owlCarousel.Constructor.Plugins.autoplay=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(b){this._core=b,this._initialized=!1,this._pages=[],this._controls={},this._templates=[],this.$element=this._core.$element,this._overrides={next:this._core.next,prev:this._core.prev,to:this._core.to},this._handlers={"prepared.owl.carousel":a.proxy(function(b){b.namespace&&this._core.settings.dotsData&&this._templates.push('<div class="'+this._core.settings.dotClass+'">'+a(b.content).find("[data-dot]").addBack("[data-dot]").attr("data-dot")+"</div>")},this),"added.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,0,this._templates.pop())},this),"remove.owl.carousel":a.proxy(function(a){a.namespace&&this._core.settings.dotsData&&this._templates.splice(a.position,1)},this),"changed.owl.carousel":a.proxy(function(a){a.namespace&&"position"==a.property.name&&this.draw()},this),"initialized.owl.carousel":a.proxy(function(a){a.namespace&&!this._initialized&&(this._core.trigger("initialize",null,"navigation"),this.initialize(),this.update(),this.draw(),this._initialized=!0,this._core.trigger("initialized",null,"navigation"))},this),"refreshed.owl.carousel":a.proxy(function(a){a.namespace&&this._initialized&&(this._core.trigger("refresh",null,"navigation"),this.update(),this.draw(),this._core.trigger("refreshed",null,"navigation"))},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers)};e.Defaults={nav:!1,navText:["prev","next"],navSpeed:!1,navElement:"div",navContainer:!1,navContainerClass:"owl-nav",navClass:["owl-prev","owl-next"],slideBy:1,dotClass:"owl-dot",dotsClass:"owl-dots",dots:!0,dotsEach:!1,dotsData:!1,dotsSpeed:!1,dotsContainer:!1},e.prototype.initialize=function(){var b,c=this._core.settings;this._controls.$relative=(c.navContainer?a(c.navContainer):a("<div>").addClass(c.navContainerClass).appendTo(this.$element)).addClass("disabled"),this._controls.$previous=a("<"+c.navElement+">").addClass(c.navClass[0]).html(c.navText[0]).prependTo(this._controls.$relative).on("click",a.proxy(function(a){this.prev(c.navSpeed)},this)),this._controls.$next=a("<"+c.navElement+">").addClass(c.navClass[1]).html(c.navText[1]).appendTo(this._controls.$relative).on("click",a.proxy(function(a){this.next(c.navSpeed)},this)),c.dotsData||(this._templates=[a("<div>").addClass(c.dotClass).append(a("<span>")).prop("outerHTML")]),this._controls.$absolute=(c.dotsContainer?a(c.dotsContainer):a("<div>").addClass(c.dotsClass).appendTo(this.$element)).addClass("disabled"),this._controls.$absolute.on("click","div",a.proxy(function(b){var d=a(b.target).parent().is(this._controls.$absolute)?a(b.target).index():a(b.target).parent().index();b.preventDefault(),this.to(d,c.dotsSpeed)},this));for(b in this._overrides)this._core[b]=a.proxy(this[b],this)},e.prototype.destroy=function(){var a,b,c,d;for(a in this._handlers)this.$element.off(a,this._handlers[a]);for(b in this._controls)this._controls[b].remove();for(d in this.overides)this._core[d]=this._overrides[d];for(c in Object.getOwnPropertyNames(this))"function"!=typeof this[c]&&(this[c]=null)},e.prototype.update=function(){var a,b,c,d=this._core.clones().length/2,e=d+this._core.items().length,f=this._core.maximum(!0),g=this._core.settings,h=g.center||g.autoWidth||g.dotsData?1:g.dotsEach||g.items;if("page"!==g.slideBy&&(g.slideBy=Math.min(g.slideBy,g.items)),g.dots||"page"==g.slideBy)for(this._pages=[],a=d,b=0,c=0;a<e;a++){if(b>=h||0===b){if(this._pages.push({start:Math.min(f,a-d),end:a-d+h-1}),Math.min(f,a-d)===f)break;b=0,++c}b+=this._core.mergers(this._core.relative(a))}},e.prototype.draw=function(){var b,c=this._core.settings,d=this._core.items().length<=c.items,e=this._core.relative(this._core.current()),f=c.loop||c.rewind;this._controls.$relative.toggleClass("disabled",!c.nav||d),c.nav&&(this._controls.$previous.toggleClass("disabled",!f&&e<=this._core.minimum(!0)),this._controls.$next.toggleClass("disabled",!f&&e>=this._core.maximum(!0))),this._controls.$absolute.toggleClass("disabled",!c.dots||d),c.dots&&(b=this._pages.length-this._controls.$absolute.children().length,c.dotsData&&0!==b?this._controls.$absolute.html(this._templates.join("")):b>0?this._controls.$absolute.append(new Array(b+1).join(this._templates[0])):b<0&&this._controls.$absolute.children().slice(b).remove(),this._controls.$absolute.find(".active").removeClass("active"),this._controls.$absolute.children().eq(a.inArray(this.current(),this._pages)).addClass("active"))},e.prototype.onTrigger=function(b){var c=this._core.settings;b.page={index:a.inArray(this.current(),this._pages),count:this._pages.length,size:c&&(c.center||c.autoWidth||c.dotsData?1:c.dotsEach||c.items)}},e.prototype.current=function(){var b=this._core.relative(this._core.current());return a.grep(this._pages,a.proxy(function(a,c){return a.start<=b&&a.end>=b},this)).pop()},e.prototype.getPosition=function(b){var c,d,e=this._core.settings;return"page"==e.slideBy?(c=a.inArray(this.current(),this._pages),d=this._pages.length,b?++c:--c,c=this._pages[(c%d+d)%d].start):(c=this._core.relative(this._core.current()),d=this._core.items().length,b?c+=e.slideBy:c-=e.slideBy),c},e.prototype.next=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!0),b)},e.prototype.prev=function(b){a.proxy(this._overrides.to,this._core)(this.getPosition(!1),b)},e.prototype.to=function(b,c,d){var e;!d&&this._pages.length?(e=this._pages.length,a.proxy(this._overrides.to,this._core)(this._pages[(b%e+e)%e].start,c)):a.proxy(this._overrides.to,this._core)(b,c)},a.fn.owlCarousel.Constructor.Plugins.Navigation=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){"use strict";var e=function(c){this._core=c,this._hashes={},this.$element=this._core.$element,this._handlers={"initialized.owl.carousel":a.proxy(function(c){c.namespace&&"URLHash"===this._core.settings.startPosition&&a(b).trigger("hashchange.owl.navigation")},this),"prepared.owl.carousel":a.proxy(function(b){if(b.namespace){var c=a(b.content).find("[data-hash]").addBack("[data-hash]").attr("data-hash");if(!c)return;this._hashes[c]=b.content}},this),"changed.owl.carousel":a.proxy(function(c){if(c.namespace&&"position"===c.property.name){var d=this._core.items(this._core.relative(this._core.current())),e=a.map(this._hashes,function(a,b){return a===d?b:null}).join();if(!e||b.location.hash.slice(1)===e)return;b.location.hash=e}},this)},this._core.options=a.extend({},e.Defaults,this._core.options),this.$element.on(this._handlers),a(b).on("hashchange.owl.navigation",a.proxy(function(a){var c=b.location.hash.substring(1),e=this._core.$stage.children(),f=this._hashes[c]&&e.index(this._hashes[c]);f!==d&&f!==this._core.current()&&this._core.to(this._core.relative(f),!1,!0)},this))};e.Defaults={URLhashListener:!1},e.prototype.destroy=function(){var c,d;a(b).off("hashchange.owl.navigation");for(c in this._handlers)this._core.$element.off(c,this._handlers[c]);for(d in Object.getOwnPropertyNames(this))"function"!=typeof this[d]&&(this[d]=null)},a.fn.owlCarousel.Constructor.Plugins.Hash=e}(window.Zepto||window.jQuery,window,document),function(a,b,c,d){function e(b,c){var e=!1,f=b.charAt(0).toUpperCase()+b.slice(1);return a.each((b+" "+h.join(f+" ")+f).split(" "),function(a,b){if(g[b]!==d)return e=!c||b,!1}),e}function f(a){return e(a,!0)}var g=a("<support>").get(0).style,h="Webkit Moz O ms".split(" "),i={transition:{end:{WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"}},animation:{end:{WebkitAnimation:"webkitAnimationEnd",MozAnimation:"animationend",OAnimation:"oAnimationEnd",animation:"animationend"}}},j={csstransforms:function(){return!!e("transform")},csstransforms3d:function(){return!!e("perspective")},csstransitions:function(){return!!e("transition")},cssanimations:function(){return!!e("animation")}};j.csstransitions()&&(a.support.transition=new String(f("transition")),a.support.transition.end=i.transition.end[a.support.transition]),j.cssanimations()&&(a.support.animation=new String(f("animation")),a.support.animation.end=i.animation.end[a.support.animation]),j.csstransforms()&&(a.support.transform=new String(f("transform")),a.support.transform3d=j.csstransforms3d())}(window.Zepto||window.jQuery,window,document)}(this),d()}),$__System.registerDynamic("4a4",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b,c){function d(b,c){this.element=b,this.options=a.extend({},f,c),this._defaults=f,this._name=e,this.init()}var e="rcfRippleButton",f={animationClass:"rippleAnimate",background:"#fff",animationDuration:1e3};d.prototype.init=function(){var b=this.options,c=b.animationClass;a(this.element).on("click",function(d){var e=a(this),f=e.find("."+c);if(!(f.length>1)){e.hasClass("singleButton")&&d.preventDefault();var g=e.height(),h=e.offset(),i=d.pageX-h.left,j=d.pageY-h.top,k=a("<div/>");k.addClass(b.animationClass).css({width:g,height:g,top:j-g/2,left:i-g/2}).appendTo(e),setTimeout(function(){k.remove()},b.animationDuration)}})},a.fn[e]=function(b){return this.each(function(){a.data(this,"plugin_"+e)||a.data(this,"plugin_"+e,new d(this,b))})}}(jQuery,window,document)}(this),d()}),$__System.registerDynamic("131",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.Interactions.Unmarked.CanDo=function(){function b(a){this._initialize(a)}return b.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty $canDo selector passed to CanDo interaction constructor";this.$activity=b,this.$activity.find(".canDoList").length>0&&this.$activity.on("click","a.canDoButton",function(){var b=a(this);b.closest("div.textControls").find("a.selected").removeClass("selected"),b.addClass("selected")})},showAnswers:function(a){for(var b in a.answers){var c=a.answers[b]||{},d=c.elm||"";if(!RCF.Utils.isEmpty(d)){var e=this.$activity.find(".canDoList[data-rcfid='"+d+"']");if(!RCF.Utils.isEmpty(e))for(var f in c.value){var g=c.value[f]||{},h=g.elm||"",i=g.value;if(!RCF.Utils.isEmpty(h)&&!RCF.Utils.isEmpty(i)){var j=e.find(".canDoItem[data-rcfid='"+h+"']");j.find("a[data-level='"+i+"']").addClass("selected")}}}}},getUserAnswers:function(){var b=this.$activity.find(".canDoList").map(function(){var b=a(this);return{elm:b.attr("data-rcfid"),type:"composite",value:b.find(".canDoItem").map(function(){var b=a(this);return{elm:b.attr("data-rcfid"),type:"simple",value:b.find("a.selected").attr("data-level")||""}}).get()}}).get();return b},reset:function(){this.$activity.find(".canDoButton").removeClass(".selected")},setInteractionMode:function(a,b){console.log("cando interaction: set interaction mode [",a,"] with jsonAnswers [",b,"]")},getTeacherFeedback:function(){var b=this.$activity.find(".canDoList").map(function(){var b=a(this);return{elm:b.attr("data-rcfid"),type:"composite",value:b.find(".canDoItem").map(function(){var b=a(this);return{elm:b.attr("data-rcfid"),type:"simple",value:b.find("a.selected").attr("dta-level")||"",teacher:{feedback:"dummy feedback for canDo item "+b.attr("data-rcfid")}}}).get()}}).get();return b}},b}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("4a5",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b,c){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.Interactions.Unmarked.Chase=function(){function b(a){this._initialize(a)}return b.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty $chase selector passed into Chase interaction constructor";this.$selector=b,this.score=0,this.finalClass="",this.countDownInterval=0,this.interval=0,this.$chaseContents=this.$selector.find(".chaseDiv"),this.$playHeadControls=this.$selector.find(".playheadControls"),this.$countDownElement=this.$selector.find(".chaseCountDown"),this.$speedControls=this.$selector.find(".chaseControls.speedControls");var d=this.$chaseContents[0],e=c.createElement("span");e.className="chaseWord beforeChase",findAndReplaceDOMText(/([^\s<>]+)(?![^<>]*>)(?:(?=[<\s])|$)/g,d,e),this.chaseSpeed=0,this.interval=0;var f=this;this.$speedControls.on("click","a",function(){var b=a(this),c=b.attr("data-level");f.chaseSpeed=c,f.$speedControls.find("a").removeClass("selected"),b.addClass("selected"),f.interval>0&&(clearInterval(f.interval),f.interval=0,f._createInterval())}),this.$speedControls.filter("a:first").addClass("selected"),this.chaseSpeed=this.$speedControls.find("a:first").attr("data-level"),this.$playHeadControls.on("click","a",function(){switch(f.chaseType=f.$speedControls.attr("data-chasetype"),f.timed=f.$speedControls.attr("data-timed"),f.begin=f.$speedControls.attr("data-begin"),f.showCountDown=f.$speedControls.attr("data-countdown"),f.chaseType){case"appear":f.finalClass="";break;case"blur":f.finalClass="blurred";break;case"fade":f.finalClass="chaseFade";break;case"highlight":f.finalClass="chaseHighlight"}var b=a(this);b.hasClass("play")&&("Start"==b.text()?f.interval>0||f.countDownInterval>0?(f.pagePaused=!1,b.text("Pause")):f._startChase():(f.pagePaused=!0,b.text("Start"))),b.hasClass("stop")&&(f._stopCountDown(),f._stopChase(),f.reset())})},_startChase:function(){if(delete this.$pageWords,this.$playHeadControls.find(".play").text("Pause"),this.interval>0&&(clearInterval(this.interval),this.interval=0),this.$pageWords=this.$chaseContents.find(".chaseWord"),this.wordTotal=this.$pageWords.length,"appear"==this.chaseType&&this.$pageWords.addClass("beforeChase"),"fade"!=this.chaseType&&"highlight"!=this.chaseType&&"blur"!=this.chaseType||this.$pageWords.removeClass("beforeChase chaseFade chaseBlurred chaseHighlight"),this.wordCounter=0,this.pagePaused=!1,"y"==this.timed){var a=this;this.countDownTimer=this.begin,this.countDownInterval=setInterval(function(){if(!a.pagePaused)if(0===a.countDownTimer)a._stopCountDown(),a._createInterval();else{var b=a.countDownTimer--,c=parseInt(b/3600)%24,d=parseInt(b/60)%60,e=parseInt(b%60,10),f=(c<10?"0"+c:c)+":"+(d<10?"0"+d:d)+":"+(e<10?"0"+e:e);a.$countDownElement.text("("+f+")")}},1e3)}else this._createInterval()},_createInterval:function(){var b=this;this.interval=setInterval(function(){if(!b.pagePaused)if(b.wordCounter>b.wordTotal)clearInterval(b.interval),b.pagePaused=!0,b.$playHeadControls.find(".play").text("Start"),b.interval=0;else{var c=a(b.$pageWords[b.wordCounter++]);"fade"==b.chaseType||"highlight"==b.chaseType||"blur"==b.chaseType?c.addClass(b.finalClass):c.removeClass("beforeChase")}},this.chaseSpeed)},_stopChase:function(){this.interval>0&&(clearInterval(this.interval),this.interval=0),RCF.Utils.isEmpty(this.$pageWords)||this.$pageWords.removeClass(this.finalClass),delete this.$pageWords,this.$playHeadControls.find(".play").text("Start"),this.wordCounter=0},_stopCountDown:function(){this.countDownInterval>0&&clearInterval(this.countDownInterval),this.countDownInterval=0,this.$countDownElement.text("")},reset:function(){"appear"!=this.chaseType?this.$chaseContents.find(".chaseWord").removeClass(this.finalClass).addClass("beforeChase"):this.$chaseContents.find(".chaseWord").addClass("beforeChase")},pause:function(){this._stopCountDown(),this._stopChase()},close:function(){this._stopCountDown(),this._stopChase(),this.$speedControls.off("click","a"),this.$playHeadControls.off("click","a")}},b}(),b.findAndReplaceDOMText=function(){function a(a,c,g,h){var i,j=[],k=d(c),l=f(g);if(k){if(a.global)for(;i=a.exec(k);)j.push(b(i,h));else i=k.match(a),j.push(b(i,h));j.length&&e(c,j,l)}}function b(a,b){if(b=b||0,!a[0])throw"findAndReplaceDOMText cannot handle zero-length matches";var c=a.index;if(b>0){var d=a[b];if(!d)throw"Invalid capture group";c+=a[0].indexOf(d),a[0]=d}return[c,c+a[0].length,[a[0]]]}function d(a){if(3===a.nodeType)return a.data;var b="";if(a=a.firstChild)do b+=d(a);while(a=a.nextSibling);return b}function e(a,b,c){var d,e,f,g,h=[],i=0,j=a,k=b.shift(),l=0;a:for(;;){if(3===j.nodeType&&(!e&&j.length+i>=k[1]?(e=j,g=k[1]-i):d&&h.push(j),!d&&j.length+i>k[0]&&(d=j,f=k[0]-i),i+=j.length),d&&e){if(j=c({startNode:d,startNodeIndex:f,endNode:e,endNodeIndex:g,innerNodes:h,match:k[2],matchIndex:l}),i-=e.length-g,d=null,e=null,h=[],k=b.shift(),l++,!k)break}else if(j.firstChild||j.nextSibling){j=j.firstChild||j.nextSibling;continue}for(;;){if(j.nextSibling){j=j.nextSibling;break}if(j.parentNode===a)break a;j=j.parentNode}}}function f(a){g=[];var b;if("function"!=typeof a){var d=a.nodeType?a:c.createElement(a);b=function(a){var b,e=c.createElement("div");return e.innerHTML=d.outerHTML||(new XMLSerializer).serializeToString(d),b=e.firstChild,a&&b.appendChild(c.createTextNode(a)),b}}else b=a;return function(a){var d=a.startNode,e=a.endNode,f=a.matchIndex,h=0,i=0;if(d===e){var j=d;a.startNodeIndex>0&&(i=c.createTextNode(j.data.substring(0,a.startNodeIndex)),j.parentNode.insertBefore(i,j));var k=b(a.match[0],f);return j.parentNode.insertBefore(k,j),a.endNodeIndex<j.length&&(h=c.createTextNode(j.data.substring(a.endNodeIndex)),j.parentNode.insertBefore(h,j)),j.parentNode.removeChild(j),g.push(function(){var a=k.parentNode;a.insertBefore(k.firstChild,k),a.removeChild(k),a.normalize()}),k}i=c.createTextNode(d.data.substring(0,a.startNodeIndex)),h=c.createTextNode(e.data.substring(a.endNodeIndex));for(var l=b(d.data.substring(a.startNodeIndex),f),m=[],n=0,o=a.innerNodes.length;n<o;++n){var p=a.innerNodes[n],q=b(p.data,f);p.parentNode.replaceChild(q,p),m.push(q)}var r=b(e.data.substring(0,a.endNodeIndex),f);return d.parentNode.insertBefore(i,d),d.parentNode.insertBefore(l,d),d.parentNode.removeChild(d),e.parentNode.insertBefore(r,e),e.parentNode.insertBefore(h,e),e.parentNode.removeChild(e),g.push(function(){m.unshift(l),m.push(r);for(var a=0,b=m.length;a<b;++a){var c=m[a],d=c.parentNode;d.insertBefore(c.firstChild,c),d.removeChild(c),d.normalize()}}),r}}var g;return a.revert=function(){for(var a=0,b=g.length;a<b;++a)g[a]();g=[]},a}()}(jQuery,window,document)}(this),d()}),$__System.registerDynamic("126",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.Interactions.Unmarked.FlashcardContainer=function(){function c(a){this._initialize(a)}return c.prototype={_initialize:function(c){this.$activity=c,this._setupFlashcardMenu(),this.$activity.find(".flashcardContainer[data-shownextbutton='n'] .cardDefinition[data-tobedisplayed='y']").addClass("show"),this.$activity.on("click",".cardDefinitionsContainer .nextDefinitionButton",function(){var b=a(this).closest(".cardDefinitionsContainer"),c=b.find(".cardDefinition[data-tobedisplayed='y']:not(.show)");if(c.length>0){var d=c.first(),e=d.attr("data-audio");d.addClass("show"),e&&b.closest(".activity").trigger("rcf.play.audio",e),1==c.length&&a(this).text("Restart")}else a(this).text("Show next"),b.find(".cardDefinition").removeClass("show")}),RCF.subscribe("rcf.new.carousel.page",function(a,c){"y"==c.closest("[data-rcfinteraction=flashcard]").attr("data-shownextbutton")&&(c.find(".nextDefinitionButton").text("Show next"),c.find(".cardDefinition[data-tobedisplayed='y']").removeClass("show")),b.setTimeout(function(){c.find(".interactiveImageContainer.timed .controlsContainer .singleButton.play").click()},0)})},_setupFlashcardMenu:function(){var b=this;this.$activity.on("click",".flashcardMenuButton",function(c){var d=a(this).closest(".flashcardContainer"),e=d.find(".flashcardMenu"),f=b.$activity.find(".rcfFlashcardMask"),g=d.data("onclick");return e.hasClass("show")?(f.removeClass("show"),e.removeClass("show"),g&&(document.onClick=g),b.reset(),c.stopPropagation(),void c.preventDefault()):(g=document.onclick,g&&d.data("onclick",g),document.onclick=function(c){var d=c.target||c.srcElement;a(d).closest(".flashcardMenu").length>0||(f.removeClass("show"),e.removeClass("show"),document.onclick=g,b.reset())},f.addClass("show"),e.addClass("show"),c.stopPropagation(),void c.preventDefault())}),this.$activity.on("click",".descriptorToggle",function(b){var c=a(this),d=c.closest(".flashcardContainer"),e=!1;c.find(".on.selected").length>0?(c.find(".on").removeClass("selected"),c.find(".off").addClass("selected")):(e=!0,c.find(".on").addClass("selected"),c.find(".off").removeClass("selected"));var f=c.closest(".descriptorMenuItem").attr("data-descriptorID"),g="y"==d.attr("data-shownextbutton");d.find(".cardDefinition[data-descriptorid='"+f+"']").attr("data-tobedisplayed",e?"y":"n").toggleClass(g?"":"show"),
b.stopPropagation(),b.preventDefault()}),this.$activity.on("click",".resetMenu",function(){b._resetDescriptorMenu()})},close:function(){RCF.unsubscribe("rcf.new.carousel.page")},_resetDescriptors:function(){this.$activity.find(".nextDefinitionButton").text("Show next"),this.$activity.find(".flashcardContainer[data-shownextbutton='y'] .cardDefinitionsContainer .cardDefinition").removeClass("show")},reset:function(){this._resetDescriptors()}},c}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("12b",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.Interactions.Unmarked.FlashObject=function(){function c(a){this.assetURL=a.closest(".activity").attr("data-levelassetsurl"),this.assetURL&&(this.assetURL+="/swf/"),this._initialize(a)}return c.prototype={_initialize:function(c){var d=this;c.each(function(){var c=a(this),e=c.find(".flashObjectPlaceHolder");if(b.swfobject){var f=JSON.parse(e.attr("data-flashvars")||"{}"),g=JSON.parse(e.attr("data-flashparams")||"{}"),h=JSON.parse(e.attr("data-flashattributes")||"{}");try{b.swfobject.embedSWF(d.assetURL+e.attr("data-src"),e[0].id,"100%","100%","9.0.0",f,g,h)}catch(a){}try{c.find(" object")[0].Rewind()}catch(a){}var i="<div class='rcfFlashControls'><div class='flashPlayButton singleButton'>Play</div><div class='flashStopButton singleButton'>Stop</div></div>";c.append(i),c.on("click",".flashPlayButton",function(){var b=a(this),d=c.data("playing")||!1;d=!d,c.data("playing",d),d?(c.find("object")[0].Play(),b.text("Pause")):(c.find("object")[0].StopPlay(),b.text("Play"))}),c.on("click",".flashStopButton",function(){c.data("playing",!1),c.find("object")[0].Rewind(),c.find(".flashPlayButton").text("Play")})}})}},c}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("4a6",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.Interactions.Unmarked.InteractiveText=function(){function b(a){this._initialize(a)}return b.prototype={_initialize:function(b){switch(this.$interactiveTextBlock=b,this.startInterval=0,this.interval=0,this.catType="",this.showCountDown="",this.playing=!1,this.paused=!1,this.$blockControls=this.$interactiveTextBlock.find(".speedControls"),this.$eElements=this.$interactiveTextBlock.find(".eSpan, .eDiv"),this.catType=this.$blockControls.attr("data-cattype"),this.timed=this.$blockControls.attr("data-timed"),this.showCountDown=this.$blockControls.attr("data-countdown"),this.startInterval=this.$blockControls.attr("data-begin"),this.controlType=this.$blockControls.attr("data-controltype"),this.cumulative="cumulative"==this.controlType,RCF.Utils.isEmpty(this.startInterval)&&(this.startInterval=0),this._setCatList(this.$blockControls.attr("data-catlist")),this.catType){case"blur":this.classToToggle="blurred";break;case"hide":case"show":this.classToToggle="hidden";break;case"highlight":this.classToToggle="highlight"}var c=this;if("y"==c.timed){if(!RCF.Utils.isEmpty(this.catList)){var d=this.catList;this.counter=0;var e=this.$blockControls.find(".play");this.$blockControls.find(".reset").on("click",function(){e.text("Start"),c.playing=!1,c.paused=!1,c.reset()}),e.on("click",function(){if(c.playing&&(c.paused="Pause"==e.text()),e.text("Start"==e.text()?"Pause":"Start"),!c.paused&&!c.playing){c.reset(),c.playing=!0;var a=0,b=parseInt(c.startInterval)+parseInt(d[d.length-1][1]);c.interval=setInterval(function(){if(!c.paused){if("y"==c.showCountDown){var e=b-c.counter,f=parseInt(e/3600)%24,g=parseInt(e/60)%60,h=parseInt(e%60,10),i=(f<10?"0"+f:f)+":"+(g<10?"0"+g:g)+":"+(h<10?"0"+h:h);c.$blockControls.find(".countDown").text("("+i+")")}for(var j=a;j<d.length;j++){var k=parseInt(d[j][1])+parseInt(c.startInterval);if(c.counter==k){var l=c.$eElements.filter("[data-cat='"+d[j][0].replace("'","\\'")+"']");switch(a=j,c.catType){case"hide":l.addClass(c.classToToggle);break;case"show":l.removeClass(c.classToToggle);break;case"highlight":case"blur":l.addClass(c.classToToggle)}j==d.length-1&&(clearInterval(c.interval),c.counter=0,c.$blockControls.find(".play").text("Start"),c.playing=!1,c.paused=!1,c.$blockControls.find(".countDown").text(""))}}c.counter++}},1e3)}})}}else{var f=this.$blockControls.attr("data-defaultcatid");RCF.Utils.isEmpty(f)||(c.cumulative?this._processCumulativeCategory(f,!0):c._toggleCategory(f)),this.$blockControls.on("click","a[data-cat]",function(){var b=a(this),d=b.attr("data-cat"),e=b.attr("data-oncaption"),f=b.attr("data-offcaption");return c.cumulative||"radio"==c.controlType?void c._toggleCategory(d):(b.toggleClass("selected"),RCF.Utils.isEmpty(f)&&(f=b.text()),RCF.Utils.isEmpty(e)&&(e=f),b.text(b.hasClass("selected")?e:f),void c.$eElements.filter("[data-cat='"+d.replace("'","\\'")+"']").toggleClass(c.classToToggle))})}},_setCatList:function(a){if(this.catList=null,!RCF.Utils.isEmpty(a)){for(var b=a.split("|"),c=0,d=0;d<b.length;d++){var e=b[d].split(":");RCF.Utils.isEmpty(e[1])||isNaN(e[1])?e[1]=0:c+=parseInt(e[1]),b[d]=e}c>0&&b.sort(function(a,b){var c=parseInt(a[1]),d=parseInt(b[1]);return c===d?0:c<d?-1:c>d?1:0}),this.catList=b}},_toggleCategory:function(a){var b=this.$blockControls.find("a[data-cat='"+a.replace("'","\\'")+"']");"radio"===this.controlType||"cumulative"===this.controlType?(b.parent().find("a").removeClass("selected"),b.addClass("selected"),this.cumulative?this._processCumulativeCategory(a,!0):(this.$eElements.removeClass(this.classToToggle),this.$eElements.filter("[data-cat='"+a.replace("'","\\'")+"']").addClass(this.classToToggle))):(b.toggleClass("selected"),this.$eElements.filter("[data-cat='"+a.replace("'","\\'")+"']").toggleClass(this.classToToggle))},_processCumulativeCategory:function(a){for(var b=!1,c=0;c<this.catList.length;c++){var d=this.catList[this.catList.length-1-c][0],e=this.$eElements.filter("[data-cat='"+d+"']"),f=!1,g=!1;d==a||b?d!=a&&b?(f="show"===this.catType,g="hide"===this.catType):d==a&&(f="hide"===this.catType,g="show"===this.catType,b=!0):(f="hide"===this.catType,g="show"===this.catType),f&&e.addClass("hidden"),g&&e.removeClass("hidden")}},reset:function(){switch(this._clearInterval(),this.counter=0,this.$blockControls.find(" .countDown").text(""),this.catType){case"blur":this.$eElements.removeClass("blurred");break;case"hide":this.$eElements.removeClass("hidden");break;case"show":this.$eElements.addClass("hidden");break;case"highlight":this.$eElements.removeClass("highlight")}if("y"!=this.timed){var a=this.$blockControls.attr("data-defaultcatid");RCF.Utils.isEmpty(a)||(this._processCumulativeCategory(a,!0),this.$blockControls.find("a").removeClass("selected").filter("[data-cat='"+a.replace("'","\\'")+"']").addClass("selected"))}},pause:function(){this._clearInterval()},_clearInterval:function(){this.interval>0&&(clearInterval(this.interval),this.interval=0)},close:function(){this._clearInterval(),this.$blockControls.find(".reset").off(),this.$blockControls.find(".play").off(),this.$blockControls.find("a").off()}},b}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("133",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.Interactions.Unmarked.Popup=function(){function c(a){this._initialize(a)}return c.prototype={_initialize:function(c){if(RCF.Utils.isEmpty(c))throw"Empty Activity passed into PopupElement Behavior";this.$activity=c,this.activityID=c[0].id,this.$selector=this.$activity.find(".popupLink"),this.$popups=this.$activity.find(".popup"),this.$activity.on("click",".popupLink",function(c){var d=a(this),e=d.attr("data-infoblockid"),f=a("#"+e);f.detach().prependTo(d).css({display:"absolute",bottom:f.height(),"z-index":"10020"}),c.pageX+f.width()>a(b).width()-40?f.css("left",a(b).width()-(f.width()+40)):f.css("left",0),f.addClass("showPopup").fadeIn()}),this.$popups.on("click",".popupClose",function(){var b=a(this).parent();b.fadeOut()})}},c}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("12d",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.Interactions.Unmarked.ToggleElements=function(){function b(a){this._initialize(a)}return b.prototype={_initialize:function(b){if(RCF.Utils.isEmpty(b))throw"Empty $ToggleElements passed into Toggle interaction constructor";this.$selector=b,RCF.Utils.isEmpty(this.$selector)||this.$selector.closest(".activity").on("click","span.toggle",function(){var b=a(this),c=b.attr("data-toggleStates");RCF.Utils.isEmpty(c)&&(c=2);var d=b.data("toggleState");RCF.Utils.isEmpty(d)&&(d=1),b.removeClass("toggleState"+d),++d>c&&(d=0),d>0?(b.addClass("toggleState"+d),b.data("toggleState",d)):b.removeData("toggleState")})},showAnswers:function(a){for(var b in a.answers){var c=a.answers[b],d=c.elm;if(!RCF.Utils.isEmpty(d)){var e=this.$selector.filter("[data-rcfid='"+d+"']");if(!RCF.Utils.isEmpty(e)){var f=e,g=0;try{g=parseInt(f.attr("data-toggleStates"))}catch(a){g=2}if(!RCF.Utils.isEmpty(c.value)){for(var h=0;h<g+1;h++)f.removeClass("toggleState"+h);f.addClass("toggleState"+c.value)}}}}},getUserAnswers:function(){var b=this.$selector.map(function(){var b=a(this);return{elm:b.attr("data-rcfid"),type:"simple",value:b.data("toggleState")||""}}).get();return b},reset:function(){this.$selector.each(function(){var b=a(this),c=0;try{c=parseInt(b.attr("data-toggleStates"))}catch(a){c=2}for(var d=0;d<c+1;d++)b.removeClass("toggleState"+d);b.removeData("toggleState")})}},b}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("8",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){function b(){return{TYPEIN:"rcf_typein",TYPEIN_GROUP:"rcf_typein_group",DROPDOWN:"rcf_dropdown",CHECKBOXLIST:"rcf_checkboxlist",CHECKBOXLIST_SELECTABLE:"rcf_checkbox_item_selectable",RADIOLIST:"rcf_radiolist",RADIOITEM_SELECTABLE:"rcf_radio_item_selectable",SELECTABLE_ELEMENTS:"rcf_selectable",TOGGLE_ELEMENTS:"rcf_toggle",DROPPABLES:"rcf_droppables",LOCATING:"rcf_locating",CAT_RADIOTABLE:"rcf_categorise_radioTable",CAT_CHECKBOXTABLE:"rcf_categorise_checkboxTable",CAT_CHECKBOXLIST:"rcf_categorise_checkboxList",CAT_DROPDOWN:"rcf_categorise_dropDown",CAT_RADIOLIST:"rcf_categorise_radioList",CAT_SELECTABLE:"rcf_categorise_selectable",CAT_ITEMSELECTLIST:"rcf_categorise_itemSelectList",WORDSNAKE:"rcf_wordsnake",WORDSEARCH:"rcf_wordsearch",CROSSWORD:"rcf_crossword",VERTICAL_CROSSWORD:"rcf_vertical_crossword",MATCHING:"rcf_matching",PELMANISM:"rcf_pelmanism",MOVING_TARGETS:"rcf_moving_targets",COMPOSITE_SCENE:"rcf_composite_scene"}}a.getRcfInteractionNames=b,window.RCF=window.RCF||{},window.RCF.InteractionName=b()}(this),d()}),$__System.registerDynamic("1f",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){function c(c,j,k){var n=[];j=1==j?{entropy:!0}:j||{};var s=g(f(j.entropy?[c,i(a)]:null==c?h():c,3),n),t=new d(n),u=function(){for(var a=t.g(m),b=p,c=0;a<q;)a=(a+c)*l,b*=l,c=t.g(1);for(;a>=r;)a/=2,b/=2,c>>>=1;return(a+c)/b};return u.int32=function(){return 0|t.g(4)},u.quick=function(){return t.g(4)/(4*(1<<30))},u.double=u,g(i(t.S),a),(j.pass||k||function(a,c,d,f){return f&&(f.S&&e(f,t),a.state=function(){return e(t,{})}),d?(b[o]=a,c):a})(u,s,"global"in j?j.global:this==b,j.state)}function d(a){var b,c=a.length,d=this,e=0,f=d.i=d.j=0,g=d.S=[];for(c||(a=[c++]);e<l;)g[e]=e++;for(e=0;e<l;e++)g[e]=g[f=s&f+a[e%c]+(b=g[e])],g[f]=b;(d.g=function(a){for(var b,c=0,e=d.i,f=d.j,g=d.S;a--;)b=g[e=s&e+1],c=c*l+g[s&(g[e]=g[f=s&f+b])+(g[f]=b)];return d.i=e,d.j=f,c})(l)}function e(a,b){return b.i=a.i,b.j=a.j,b.S=a.S.slice(),b}function f(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(f(a[c],b-1))}catch(a){}return d.length?d:"string"==e?a:a+"\0"}function g(a,b){for(var c,d=a+"",e=0;e<d.length;)b[s&e]=s&(c^=19*b[s&e])+d.charCodeAt(e++);return i(b)}function h(){try{if(j)return i(j.randomBytes(l));var b=new Uint8Array(l);return(k.crypto||k.msCrypto).getRandomValues(b),i(b)}catch(b){var c=k.navigator,d=c&&c.plugins;return[+new Date,k,d,k.screen,i(a)]}}function i(a){return String.fromCharCode.apply(0,a)}var j,k=this,l=256,m=6,n=52,o="random",p=b.pow(l,m),q=b.pow(2,n),r=2*q,s=l-1;if(b["seed"+o]=c,g(b.random(),a),"object"==typeof module&&module.exports){module.exports=c;try{j=require("crypto")}catch(a){}}else"function"==typeof define&&define.amd&&define(function(){return c})}([],Math)}(this),d()}),$__System.registerDynamic("12f",["8","1f"],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Interactions=RCF.Interactions||{},RCF.Interactions.Unmarked=RCF.Interactions.Unmarked||{},RCF.Interactions.Unmarked.TriggerElements=function(){function b(a){this._initialize(a)}return b.prototype={_initialize:function(b){var c=this;this.$triggerableElements=b,this.$activity=this.$triggerableElements.closest(".activity"),this.$triggerableElements.on("click",function(b){var d=a(this).addClass("triggered"),e=d.attr("data-triggerClass"),f="y"==d.attr("data-triggerLoop"),g=parseInt(d.attr("data-triggerNumber"))||1,h="y"===d.attr("data-triggerExclusive"),i=parseInt(d.data("triggerCount"))||0;return h&&(c._removeTriggerClasses(c.$triggerableElements),c.$triggerableElements.each(function(){var b=a(this);b.attr("data-triggerClass")!=e&&c._removeTriggerClasses(b)})),f&&i===g?(d.removeClass(e+i),c.$activity.removeClass(e+i),i=0,d.removeClass("triggered"),void d.data("triggerCount",i)):(i<g&&(d.removeClass(e+i),c.$activity.removeClass(e+i),i++,i<=g&&(d.addClass(e+i),c.$activity.addClass(e+i)),d.data("triggerCount",i)),b.stopImmediatePropagation(),b.stopPropagation(),void b.preventDefault())}),RCF.subscribe("rcf.reset.triggers",function(){c.reset()})},_removeTriggerClasses:function(b){var c=this;b.each(function(){var b=a(this);b.removeClass("triggered");for(var d=b[0].className.split(" "),e=0;e<d.length;e++)"tr_"===d[e].toLowerCase().substr(0,4)&&(b.removeClass(d[e]).removeData("triggerCount"),c.$activity.removeClass(d[e]))})},reset:function(){this._removeTriggerClasses(this.$triggerableElements),this.$triggerableElements.data("triggerCount",0);for(var a=this.$activity.attr("class").trim().split(" "),b=0;b<a.length;b++)a[b].indexOf("tr_")>-1&&this.$activity.removeClass(a[b])}},b}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("4a7",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a,b){b.RCF=b.RCF||{},RCF.Handlers=RCF.Handlers||{},RCF.Handlers.FeedbackHandler=function(){function b(a,b,d,e){var f=null;f=RCF.options.feedbackOptions&&RCF.options.feedbackOptions.onFeedbackComplete&&"function"==typeof RCF.options.feedbackOptions.onFeedbackComplete?RCF.options.feedbackOptions.onFeedbackComplete:function(){};var g=c(a,b,d,e),h=b.closest(".activity");h.addClass("rcfFeedbackPlaying"),g.then(function(){h.removeClass("rcfFeedbackPlaying"),f()}).fail(function(){h.removeClass("rcfFeedbackPlaying"),console.log("Feedback failed ! "),f()})}function c(b,c,d,e){var f=a.Deferred(),g=null,h=function(){return RCF.options.feedbackOptions?RCF.options.feedbackOptions.delayAfterFeedbackTimeInMilliseconds||1500:0}(),i=!!RCF.options.feedbackOptions&&RCF.options.feedbackOptions.resetAfterFeedback;c.find(".mark").removeClass("correct wrong").addClass(d?"correct":"wrong");var j=function(){d?f.resolve():setTimeout(function(){i&&e&&"function"==typeof e&&e(b,c),f.resolve()},h)};g=function(){var a=c.attr("data-correctfeedbackaudio")||"feedback_correct.mp3";return d?a:"feedback_incorrect.mp3"}();try{c.closest(".activity").trigger("rcf.play.audio",{audio:[g],onComplete:j})}catch(a){f.reject("Error occurred while playing feedback audio\n"+a)}return f.promise()}return{provideFeedback:b,giveFeedback:c}}()}(jQuery,window)}(this),d()}),$__System.registerDynamic("4a8",[],!1,function(a,b,c){var d=$__System.get("@@global-helpers").prepareGlobal(c.id,null,null);return function(a){!function(a){window.RCF=window.RCF||{},RCF.Handlers=RCF.Handlers||{},RCF.Handlers.WordSearch=RCF.Handlers.WordSearch||{},RCF.Handlers.WordSearch.Cell=function(){var a=function(){this.DEFAULT="-",this.wordIndex=[],this.value=this.DEFAULT,this.containsWord=!1,this.example=!1,this.isUnwritten=function(){return this.value===this.DEFAULT},this.getWordIndexes=function(){var a="";if(this.wordIndex)for(var b=0;b<this.wordIndex.length;b++)a+="word"+this.wordIndex[b]+" ";return a}};return a}(),RCF.Handlers.WordSearch.Word=function(){var a=function(a,b){this.value=a.word.toUpperCase(),this.example=!!a.example&&"y"==a.example,this.wordIndex=b,this.originalValue=this.value,this.isFound=!1,this.cellsUsed=[],this.isPlaced=!1,this.row=-1,this.col=-1,this.size=-1,this.chars=null,this.init=function(){this.chars=this.value.split(""),this.size=this.chars.length},this.init(),this.containedIn=function(a){a.wordIndex.push(this.wordIndex),a.example||(a.example=this.example),a.containsWord=!0,this.cellsUsed.push(a)},this.checkIfSimilar=function(a){var b=this.originalValue.split("").reverse().join(""),c=this.value.split("").reverse().join("");return(this.originalValue==a||this.value==a||b==a||c==a)&&(this.isFound=!0,!0)}};return a}(),RCF.Handlers.WordSearch.WordList=function(){var a=function(a){this.words=[],this.useReverse=!!a&&"y"===a;var b=this;this.loadWords=function(a){var c=JSON.parse(a);if(c.words&&c.words.length>0)for(var d=0;d<c.words.length;d++)b.add(new RCF.Handlers.WordSearch.Word(c.words[d],d))},this.add=function(a){if(this.useReverse&&!a.example&&10*Math.random()>7){for(var b="",c=a.size-1;c>=0;c--)b+=a.value.charAt(c);a.value=b,a.init()}this.words[this.words.length]=a},this.size=function(){return this.words.length},this.get=function(a){return this.words[a]},this.isWordPresent=function(a){for(var b=0;b<this.words.length;b++)if(this.words[b].checkIfSimilar(a))return b;return-1},this.getOriginalWord=function(a){var b=this.isWordPresent(a);return b>-1?this.get(b).originalValue:null}};return a}(),RCF.Handlers.WordSearch.Grid=function(){var a=function(a,b){function c(a,b,c,d){var e=0,f=0,g=c-1,h=d-1,i=0,j=0;switch(b){case"Horizontal":g=c-a.length,e=0,i=1;break;case"Vertical":f=0,h=d-a.length,j=1;break;case"LeftDiagonal":h=d-1,f=a.length-1,j=-1,g=c-a.length,e=0,i=1;break;case"RightDiagonal":f=0,h=d-a.length,j=1,g=c-a.length,e=0,i=1}return{maxX:g,maxY:h,minX:e,minY:f,dx:i,dy:j}}this.cells=null,this.directions=[],this.directions.push("Horizontal"),b&&"y"===b&&this.directions.push("Vertical"),"y"===a&&(this.directions.push("LeftDiagonal"),this.directions.push("RightDiagonal")),this.validGrid=!0,this.initializeGrid=function(a){this.size=a,this.cells=new Array(a);for(var b=0;b<a;b++){this.cells[b]=new Array(a);for(var c=0;c<a;c++){var d=new RCF.Handlers.WordSearch.Cell;this.cells[b][c]=d}}},this.fillGrid=function(a){var b=20,d=[],e=this.size,f=this.size,g=0,h=0,i=0,j=0;this.wordList=a;for(var k=0;k<a.words.length;k++){for(var l=a.words[k].value,m=a.words[k],n=0;n<b;){var o=this.directions[Math.floor(Math.random()*this.directions.length)],p=c(l,o,f,e);if(p.maxX<0||p.maxY<0||p.maxY<p.minY||p.maxX<p.minX){d.push(l);break}i=Math.round(Math.random()*(p.maxX-p.minX)+p.minX),g=i,j=Math.round(Math.random()*(p.maxY-p.minY)+p.minY),h=j;var q=!0,r=0,s=0,t=null;for(s=0;s<l.length;s++){if(t=this.cells[h][g],!t.isUnwritten()){if(t.value!==l.charAt(s)){q=!1;break}r++}h+=p.dy,g+=p.dx}if(q&&!(r>=l.length)){for(g=i,h=j,s=0;s<l.length;s++)t=this.cells[h][g],t.value=l.charAt(s),m.containedIn(t),m.isPlaced=!0,h+=p.dy,g+=p.dx;break}n++}n>=b&&(d.push(l),this.validGrid=!1)}for(h=0;h<e;h++)for(g=0;g<f;g++)this.cells[h][g].isUnwritten()&&(this.cells[h][g].value=String.fromCharCode(Math.floor(65+26*Math.random())))},this.getHTML=function(){for(var a="<div class='rcfWordSearchGrid "+(this.validGrid?"":"tooSmall")+"'><table class='rcfTableGrid' cellspacing=0 cellpadding=0>",b="",c=this.size,d="grd"+parseInt(100*Math.random()),e=0;e<c;e++){a+="<tr>";for(var f=0;f<c;f++){var g=d+"_r"+e+"c"+f,h=this.cells[e][f],i="";if(h.containsWord)for(var j=h.getWordIndexes().trim().replace(/word/g,""),k=j.split(" "),l=0;l<k.length;l++)i+="|"+this.wordList.words[k[l]].originalValue+"|";b=h.containsWord?"isWord "+h.getWordIndexes():"",b+=h.example?" example ":"",a+="<td id='"+g+"' data-cellid='r"+e+"c"+f+"' class='rcfWSCell "+b+"' data-words='"+i+"'>"+h.value+"</td>"}a+="</td>"}return a+="</table>"+(this.validGrid?"":"<span>Not all words can fit in a grid this small</span>")+"</div>"}};return a}(),RCF.Handlers.WordSearch.SelectionHandler=function(){var b=function(b){var c=this;if(this.$wordSearch=b,this.$startCell=null,this.$currentCell=null,this.selectedWords=[],"y"===b.closest(".wordSearchContainer").attr("data-interactive")){var d=!0,e="mobile"===RCF.Application.getDeviceMode();e&&(d=!1),d&&(d="y"===b.closest(".wordSearchContainer").attr("data-draggable")),d?(this.mouseDown=!1,b.on("mousedown","td",function(d){1==d.which&&(b.find(".ws-start").removeClass("ws-start"),a(this).addClass("ws-start ws-highlight")),c.mouseDown=!0}),b.on("mousemove","td",function(){if(c.mouseDown)return c.$currentCell=a(this),RCF.Utils.isEmpty(c.$startCell)&&(c.$startCell=b.find("td.ws-start")),RCF.Utils.isEmpty(c.$startCell)?void(c.mouseDown=!1):void(c.allowSelection()&&(b.find(".ws-glowing").removeClass("ws-glowing"),c.getSelectedCells().addClass("ws-glowing")))}),b.on("mouseup",function(){c.mouseDown=!1;var a=b.find(".ws-glowing, .ws-highlight");c.makeSelection(a)}),a(document).on("mouseup",function(){var a=b.find(".ws-glowing, .ws-highlight");c.mouseDown&&(c.mouseDown=!1,c.makeSelection(a))})):b.on("click","td",function(){return null===c.$startCell?(c.$startCell=a(this),b.find(".ws-start").removeClass("ws-start"),void c.$startCell.addClass("ws-start ws-highlight")):(c.$currentCell=a(this),c.$currentCell.attr("data-cellid")===c.$startCell.attr("data-cellid")?(c.$startCell.removeClass("ws-start ws-highlight"),void(c.$startCell=null)):(b.find(".ws-highlight:not(.ws-start)").removeClass("ws-highlight"),void(c.allowSelection()&&c.makeSelection(c.getSelectedCells()))))})}};return b.prototype.getSelectedCells=function(){var b=this.getGridSelection(),c=[],d=parseInt(b.currentRow>b.startRow?1:b.currentRow<b.startRow?-1:0),e=parseInt(b.currentCol>b.startCol?1:b.currentCol<b.startCol?-1:0),f="r"+parseInt(b.currentRow)+"c"+parseInt(b.currentCol),g=b.startRow,h=b.startCol;for(c.push("#"+this.$startCell[0].id);;){var i=null;if(g+=d,h+=e,i="r"+parseInt(g)+"c"+parseInt(h),c.push("#"+this.$wordSearch.find("[data-cellid='"+i+"']")[0].id),i===f)break}return a(c.join(","))},b.prototype.setSelections=function(a){this.clearSelections();var b=0;for(var c in a){var d=a[c].id,e=a[c].cells,f=a[c].word;this.getSelectionByWord(f)||(e.data("selectionID",d).addClass("ws-selected"),b++,this.selectedWords.push(a[c]))}this.$wordSearch.data("selectionID",b)},b.prototype.setUserSelections=function(a){this.clearUserSelections(),this.userSelections=a},b.prototype.clearHighlighting=function(){this.$wordSearch.find("td").removeData("selectionID").removeData("selected").removeClass("ws-glowing ws-armed ws-highlight ws-selected")},b.prototype.clearUserSelections=function(){this.userSelections=[]},b.prototype.clearSelections=function(){this.clearHighlighting(),this.selectedWords=[]},b.prototype.getSelection=function(a){for(var b in this.selectedWords)if(this.selectedWords[b].id==a)return this.selectedWords[b];return null},b.prototype.getSelectionByWord=function(a){for(var b in this.selectedWords)if(this.selectedWords[b].word==a)return this.selectedWords[b];return null},b.prototype.removeSelection=function(b){for(var c in this.selectedWords)if(this.selectedWords[c].id==b){var d=this.selectedWords[c].cells;d.removeClass("ws-glowing").each(function(){var c=a(this),d=c.data("selectionID")||"";d=d.indexOf("|")>-1?d.replace("|"+b+"|",""):d.replace(b,""),c.data("selectionID",d),d.length<1&&c.removeClass("ws-selected")}),this.selectedWords.splice(c,1)}},b.prototype.makeSelection=function(b){var c=this.$wordSearch,d=c.data("selectionID")||0,e="",f=this;if(d++,c.data("selectionID",d),b.removeClass("ws-glowing ws-highlight"),b.length>1&&(b.each(function(){var b=a(this),c=b.data("cell");c&&(e+=c.value||"")}),!this.getSelectionByWord(e))){b.each(function(){var b=a(this);if(b.data("cell")){b.addClass("ws-selected");var c=b.data("selectionID")||"";c+="|"+d+"|",b.data("selectionID",c),b.data("selected",!0)}});var g=c.data("wordList"),h=g.getOriginalWord(e)||e;e=h,f.selectedWords.push({id:d,word:e,cells:b}),c.trigger("rcf.selectionChanged",[f.selectedWords])}b.removeClass("ws-start"),c.find("td.ws-start").removeClass("ws-start"),f.$startCell=null},b.prototype.getGridSelection=function(){var a=this,b=/r(\d+)c(\d+)/,c=b.exec(a.$startCell.attr("data-cellid")),d=b.exec(a.$currentCell.attr("data-cellid"));return{startRow:parseInt(c[1]),startCol:parseInt(c[2]),currentRow:parseInt(d[1]),currentCol:parseInt(d[2])}},b.prototype.allowSelection=function(){var a=this.getGridSelection(),b=Math.abs(a.startRow-a.currentRow),c=Math.abs(a.startCol-a.currentCol);return b<1&&c<1||b>0&&(b===c||c<1)||b<1},b}()}(jQuery)}(this),d()}),$__System.register("4a9",["126","131","133","498","499","49a","49b","49c","3c0","49d","49e","49f","4a0","4a1","4a2","26d","1f","4a3","4a4","4a5","12b","4a6","12d","12f","4a7","4a8"],function(a){"use strict";return{setters:[function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){},function(a){}],execute:function(){}}}),$__System.register("1",["497","4a9"],function(a){"use strict";var b;return{setters:[function(a){b=a.init},function(a){}],execute:function(){b()}}})})(function(a){a()});
